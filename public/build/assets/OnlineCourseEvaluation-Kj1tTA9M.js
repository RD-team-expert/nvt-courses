import{d as Ee,c as b,r as O,C as Ce,l as te,bU as _e,p as Oe,g as h,o as u,w as r,e as l,b as a,u as t,f as _,P as ce,j as Pe,a as c,h as g,F as B,i as q,t as i,n as z}from"./app-BYHihHXd.js";import{_ as Fe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Dam3uTrr.js";import{_ as R}from"./Button.vue_vue_type_script_setup_true_lang-UYZ1Hr8v.js";import{_ as je}from"./Input.vue_vue_type_script_setup_true_lang-deu1yuju.js";import{_ as ve}from"./Textarea.vue_vue_type_script_setup_true_lang-DBsrO59M.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-5RPj1SaA.js";import{_ as G}from"./Card.vue_vue_type_script_setup_true_lang-CXArFxfV.js";import{_ as H}from"./CardContent.vue_vue_type_script_setup_true_lang-BH4ot_g1.js";import{_ as se}from"./CardDescription.vue_vue_type_script_setup_true_lang-DnC4OXSq.js";import{_ as le}from"./CardHeader.vue_vue_type_script_setup_true_lang-94hqazWi.js";import{_ as ae}from"./CardTitle.vue_vue_type_script_setup_true_lang-DEYvblOW.js";import{_ as oe,a as re,b as ne,c as ie,d as I}from"./SelectValue.vue_vue_type_script_setup_true_lang-CBVqlYvB.js";import{_ as Ne,a as Re}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-CtQDxl-e.js";import{_ as D}from"./index-BC8qPJwo.js";import{_ as Ie,a as Me,b as Ae,c as Be}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DlijvMLt.js";import{_ as qe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-Ck7Zpa7t.js";import{_ as ze}from"./DialogFooter.vue_vue_type_script_setup_true_lang-C5y8C-Ll.js";import{_ as Q,a as W}from"./index-CCZEWNCE.js";import{_ as Ge}from"./Progress.vue_vue_type_script_setup_true_lang-DMvDLbZC.js";import{M as He}from"./monitor-BEjGbB_S.js";import{R as fe}from"./rotate-ccw-h6fHO6lH.js";import{U as Je}from"./user-Dignf8jN.js";import{L as X}from"./loader-circle-CpS9pZhg.js";import{C as ue}from"./circle-check-big-DlGKcvsH.js";import{T as Ke}from"./target-xjohfdRC.js";import{T as pe}from"./trending-up-Bs3IA5YA.js";import{A as ge}from"./award-ZXpSg14G.js";import{S as Qe}from"./send-CXEeTBes.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DThdEEI3.js";import"./index-CFBqFgwU.js";import"./index-CLpfHvjR.js";import"./_plugin-vue_export-helper-m9AQVXX3.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DlP2l802.js";import"./clock-BbKJApwh.js";import"./useForwardPropsEmits-BuAvVPF4.js";import"./Presence-DDpys2wM.js";import"./ConfigProvider-Bn-19J9z.js";import"./useForwardExpose-s3J_XbXH.js";import"./Teleport-BKVICwZV.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-DBFA39Rg.js";import"./Collection-DgjgdHyb.js";import"./usePrimitiveElement-CxvQvqPT.js";import"./check-BrMDRgyU.js";import"./useSize-BrQaJ7lb.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-4x7-5umB.js";import"./RovingFocusItem-BNVo8b1-.js";import"./VisuallyHiddenInput-DDZ-Id9G.js";import"./circle-DHCJl5Ma.js";const We={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},Xe={class:"flex items-center justify-between"},Ye={class:"flex items-center gap-3"},Ze={class:"flex gap-2"},et={class:"flex items-center"},tt={class:"shrink-0 mr-4"},st={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-primary/10"},lt={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},at={class:"space-y-2"},ot={class:"space-y-2"},rt={class:"relative"},nt={key:0,class:"absolute right-8 top-2.5"},it={key:0,class:"text-xs text-muted-foreground"},ut={key:1,class:"text-xs text-destructive"},dt={key:2,class:"text-sm text-destructive"},mt={class:"space-y-2"},_t={class:"relative"},ct={key:0,class:"absolute right-8 top-2.5"},vt={key:0,class:"text-xs text-muted-foreground"},ft={key:1,class:"text-xs text-destructive"},pt={key:2,class:"text-sm text-destructive"},gt={class:"space-y-2"},xt={key:0,class:"text-sm text-destructive"},yt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 text-sm"},bt={key:0},ht={key:1},kt={key:2},wt={key:3},$t={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},St={class:"flex items-center"},Lt={class:"text-yellow-800 text-sm"},Dt={key:0,class:"space-y-6"},Ut={class:"flex items-center justify-between"},Vt={class:"grid gap-6"},Tt={class:"flex items-start justify-between"},Et={class:"flex-1"},Ct={class:"flex items-center space-x-3 mb-2"},Ot={key:0,class:"text-right"},Pt={class:"text-2xl font-bold text-foreground"},Ft={class:"text-xs text-muted-foreground"},jt={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Nt={class:"space-y-4"},Rt={class:"flex-1 flex items-center justify-between"},It={class:"text-sm text-muted-foreground"},Mt={key:0,class:"text-sm text-destructive"},At={key:0,class:"space-y-4"},Bt={class:"space-y-3"},qt={class:"flex items-center justify-between"},zt={class:"flex items-center justify-between"},Gt={class:"text-sm font-bold"},Ht={class:"mt-6 space-y-2"},Jt={key:0,class:"text-sm text-destructive"},Kt={class:"flex items-center"},Qt={class:"shrink-0 mr-4"},Wt={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},Xt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Yt={class:"flex items-center"},Zt={class:"flex items-center"},es={key:1,class:"text-xl font-bold text-gray-600"},ts={class:"grid grid-cols-2 gap-4 text-sm text-blue-700"},ss={class:"col-span-2"},ls={class:"space-y-2"},as={key:0,class:"text-sm text-destructive"},os={key:2,class:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},rs={key:2},ns={key:3},is={class:"flex items-start"},us={class:"shrink-0 mr-4"},ds={class:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},ms={class:"flex-1"},_s={class:"font-semibold"},cs={class:"grid grid-cols-2 gap-4 text-sm"},vs={class:"font-medium"},fs={class:"font-medium"},ps={class:"font-medium"},gs={class:"font-medium"},xs={class:"font-medium"},ys={key:0},bs={class:"font-medium"},hs={key:1},ks={key:2},bl=Ee({__name:"OnlineCourseEvaluation",props:{users:{},categories:{},departments:{},courses:{},incentives:{},performanceLevels:{},userLevels:{}},setup(xe){const U=xe,J=b(()=>U.users||[]),k=b(()=>U.categories||[]),ye=b(()=>U.departments||[]),M=b(()=>U.courses||[]),P=b(()=>U.incentives||[]);b(()=>U.userLevels||[]);const Y=b(()=>U.performanceLevels||[]),F=O(!1),Z=O(!1),$=O(J.value),S=O(M.value),E=O(!1),C=O(!1),L=O(!0),n=Ce({user_id:null,course_online_id:null,department_id:null,evaluation_date:new Date().toISOString().split("T")[0],notes:"",categories:[]}),ee=()=>{n.categories=k.value.map(o=>({category_id:o.id,evaluation_type_id:null,comments:""}))};te(()=>U.categories,()=>{ee()},{immediate:!0});const be=o=>{L.value&&(n.department_id=o==="none"?null:parseInt(o))},he=o=>{L.value&&(n.user_id=o==="none"?null:parseInt(o))},ke=o=>{L.value&&(n.course_online_id=o==="none"?null:parseInt(o))};te(()=>n.department_id,async o=>{if(L.value){if(o){E.value=!0;try{const e=route("admin.evaluations.online.users-by-department"),s={department_id:o},d=await _e.get(e,{params:s});$.value=d.data.users||[]}catch(e){console.error("Error fetching users by department:",e),$.value=[]}finally{E.value=!1}}else $.value=J.value;n.user_id=null,n.course_online_id=null,S.value=M.value}}),te(()=>n.user_id,async o=>{if(L.value){if(o){C.value=!0;try{const e=route("admin.evaluations.online.user-courses"),s={user_id:o},d=await _e.get(e,{params:s});S.value=d.data.courses||[]}catch(e){console.error("Error fetching user online courses:",e);const s=$.value.find(d=>d.id===o);S.value=(s==null?void 0:s.completed_courses)||[]}finally{C.value=!1}}else S.value=M.value;n.course_online_id=null}});const p=b(()=>n.user_id&&$.value.find(o=>o.id===n.user_id)||null),A=b(()=>n.course_online_id&&S.value.find(o=>o.id===n.course_online_id)||null),V=(o,e)=>{if(!e)return null;const s=k.value.find(d=>d.id===o);return s&&s.types.find(d=>d.id===e)||null},v=b(()=>n.categories.reduce((o,e)=>{const s=V(e.category_id,e.evaluation_type_id);return o+((s==null?void 0:s.score_value)||0)},0)),x=b(()=>{if(!v.value||v.value===0)return null;const o=j(v.value);if(Y.value.length>0){const e=Y.value.find(s=>s.level===o);if(e)return e}if(o){let e,s,d,y,m,f;switch(o){case 1:e="Outstanding",s="green",d="badge-success",y=13,m=15,f="Consistently exceeds expectations";break;case 2:e="Reliable",s="blue",d="badge-info",y=10,m=12,f="Meets expectations consistently";break;case 3:e="Developing",s="yellow",d="badge-warning",y=7,m=9,f="Meets some expectations, needs improvement";break;case 4:e="Underperforming",s="red",d="badge-danger",y=0,m=6,f="Does not meet expectations";break}return{level:o,label:e,color:s,badge_class:d,min_score:y,max_score:m,description:f}}return null});b(()=>{if(v.value===0||!p.value)return 0;const o=p.value;if(o.user_level&&o.user_level_tier){const s=P.value.find(d=>d.user_level_id===o.user_level.id&&d.user_level_tier_id===o.user_level_tier.id&&v.value>=d.min_score&&v.value<=d.max_score);if(s)return parseFloat(s.incentive_amount.toString())}if(o.user_level){const s=P.value.find(d=>d.user_level_id===o.user_level.id&&!d.user_level_tier_id&&v.value>=d.min_score&&v.value<=d.max_score);if(s)return parseFloat(s.incentive_amount.toString())}const e=P.value.find(s=>!s.user_level_id&&!s.user_level_tier_id&&v.value>=s.min_score&&v.value<=s.max_score);return e?parseFloat(e.incentive_amount.toString()):0}),b(()=>{if(v.value===0||!p.value)return null;const o=p.value;let e=null;return o.user_level&&o.user_level_tier&&(e=P.value.find(s=>s.user_level_id===o.user_level.id&&s.user_level_tier_id===o.user_level_tier.id&&v.value>=s.min_score&&v.value<=s.max_score)),!e&&o.user_level&&(e=P.value.find(s=>s.user_level_id===o.user_level.id&&!s.user_level_tier_id&&v.value>=s.min_score&&v.value<=s.max_score)),e||(e=P.value.find(s=>!s.user_level_id&&!s.user_level_tier_id&&v.value>=s.min_score&&v.value<=s.max_score)),e?{range:`${e.min_score}-${e.max_score}`,amount:parseFloat(e.incentive_amount.toString()),tier:we(e),level_info:e.user_level?e.user_level.name:"Global",tier_info:e.user_level_tier?e.user_level_tier.tier_name:null}:null});const we=(o,e)=>o.user_level&&o.user_level_tier?`${o.user_level.code} - ${o.user_level_tier.tier_name}`:o.user_level?`${o.user_level.name} Level`:"Global Tier",j=o=>o>=13&&o<=15?1:o>=10&&o<=12?2:o>=7&&o<=9?3:o<7?4:null,$e=o=>{const e=j(o),s=Y.value.find(d=>d.level===e);return s?{label:s.label,variant:s.badge_class.replace("badge-","")||"default",color:s.color}:o>=13?{label:"Outstanding",variant:"success",color:"green"}:o>=10?{label:"Reliable",variant:"info",color:"blue"}:o>=7?{label:"Developing",variant:"warning",color:"yellow"}:o<7?{label:"Underperforming",variant:"destructive",color:"red"}:{label:"No Score",variant:"secondary",color:"gray"}},Se=(o,e)=>{const s=o/e*100;return s>=90?"default":s>=80?"secondary":s>=70?"outline":s>=60?"secondary":"destructive"},Le=(o,e)=>{if(!L.value)return;const s=n.categories.findIndex(d=>d.category_id===o);s!==-1&&(n.categories[s].evaluation_type_id=parseInt(e),de())},de=()=>{Z.value=!!(n.user_id&&n.course_online_id&&n.evaluation_date&&n.categories.length>0&&n.categories.every(o=>o.evaluation_type_id!==null))};function De(){de(),Z.value&&(F.value=!0)}function Ue(){L.value&&n.post(route("admin.evaluations.online.store"),{onSuccess:()=>{F.value=!1,n.reset(),$.value=J.value,S.value=M.value,ee()},onError:o=>{F.value=!1,console.error("Validation errors:",o)}})}function Ve(){L.value&&(n.reset(),$.value=J.value,S.value=M.value,ee())}const Te=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Online Course Evaluation",href:null}];return Oe(()=>{L.value=!1}),(o,e)=>(u(),h(Fe,{breadcrumbs:Te},{default:r(()=>[l("div",We,[l("div",null,[l("div",Xe,[l("div",null,[l("div",Ye,[e[5]||(e[5]=l("h1",{class:"text-3xl font-bold text-foreground"},"Online Course Evaluation",-1)),a(t(D),{variant:"secondary",class:"text-xs"},{default:r(()=>[a(t(He),{class:"mr-1 h-3 w-3"}),e[4]||(e[4]=_(" Online Courses "))]),_:1})]),e[6]||(e[6]=l("p",{class:"mt-2 text-sm text-muted-foreground"},"Assess employee performance on online courses with Level + Tier based incentive calculations.",-1))]),l("div",Ze,[a(t(R),{as:t(ce),href:o.route("admin.evaluations.user-evaluation"),variant:"outline"},{default:r(()=>e[7]||(e[7]=[_(" Regular Courses ")])),_:1},8,["as","href"]),a(t(R),{as:t(ce),href:o.route("admin.evaluations.index"),variant:"outline"},{default:r(()=>[a(t(fe),{class:"mr-2 h-4 w-4"}),e[8]||(e[8]=_(" Back "))]),_:1},8,["as","href"])])])]),l("form",{onSubmit:Pe(De,["prevent"]),class:"space-y-8"},[a(t(G),null,{default:r(()=>[a(t(le),null,{default:r(()=>[l("div",et,[l("div",tt,[l("div",st,[a(t(Je),{class:"h-6 w-6 text-primary"})])]),l("div",null,[a(t(ae),null,{default:r(()=>e[9]||(e[9]=[_("Select Department, Employee & Online Course")])),_:1}),a(t(se),null,{default:r(()=>e[10]||(e[10]=[_("Choose department first, then employee, and finally their completed online course")])),_:1})])])]),_:1}),a(t(H),null,{default:r(()=>{var s,d,y;return[l("div",lt,[l("div",at,[a(t(T),{for:"department"},{default:r(()=>e[11]||(e[11]=[_("Select Department")])),_:1}),a(t(oe),{"model-value":((s=t(n).department_id)==null?void 0:s.toString())||"none","onUpdate:modelValue":be,disabled:t(n).processing},{default:r(()=>[a(t(re),{id:"department"},{default:r(()=>[a(t(ne),{placeholder:"All Departments"})]),_:1}),a(t(ie),null,{default:r(()=>[a(t(I),{value:"none"},{default:r(()=>e[12]||(e[12]=[_("All Departments")])),_:1}),(u(!0),c(B,null,q(ye.value,m=>(u(),h(t(I),{key:m.id,value:m.id.toString()},{default:r(()=>[_(i(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),e[13]||(e[13]=l("p",{class:"text-xs text-muted-foreground"},"Filter employees by department",-1))]),l("div",ot,[a(t(T),{for:"user"},{default:r(()=>e[14]||(e[14]=[_("Select Employee *")])),_:1}),l("div",rt,[a(t(oe),{"model-value":((d=t(n).user_id)==null?void 0:d.toString())||"none","onUpdate:modelValue":he,disabled:t(n).processing||E.value},{default:r(()=>[a(t(re),{id:"user"},{default:r(()=>[a(t(ne),{placeholder:E.value?"Loading users...":"Choose an employee..."},null,8,["placeholder"])]),_:1}),a(t(ie),null,{default:r(()=>[a(t(I),{value:"none"},{default:r(()=>[_(i(E.value?"Loading users...":"Choose an employee..."),1)]),_:1}),(u(!0),c(B,null,q($.value,m=>(u(),h(t(I),{key:m.id,value:m.id.toString()},{default:r(()=>[_(i(m.name)+" "+i(m.department?`(${m.department.name})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),E.value?(u(),c("div",nt,[a(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):g("",!0)]),t(n).department_id?$.value.length===0&&!E.value?(u(),c("p",ut,"No employees found in this department")):g("",!0):(u(),c("p",it,"Showing all employees")),t(n).errors.user_id?(u(),c("span",dt,i(t(n).errors.user_id),1)):g("",!0)]),l("div",mt,[a(t(T),{for:"course"},{default:r(()=>e[15]||(e[15]=[_("Select Completed Online Course *")])),_:1}),l("div",_t,[a(t(oe),{"model-value":((y=t(n).course_online_id)==null?void 0:y.toString())||"none","onUpdate:modelValue":ke,disabled:t(n).processing||!t(n).user_id||C.value},{default:r(()=>[a(t(re),{id:"course"},{default:r(()=>[a(t(ne),{placeholder:t(n).user_id?C.value?"Loading courses...":"Choose a completed online course...":"Select employee first..."},null,8,["placeholder"])]),_:1}),a(t(ie),null,{default:r(()=>[a(t(I),{value:"none"},{default:r(()=>[_(i(t(n).user_id?C.value?"Loading courses...":"Choose a completed online course...":"Select employee first..."),1)]),_:1}),(u(!0),c(B,null,q(S.value,m=>(u(),h(t(I),{key:m.id,value:m.id.toString()},{default:r(()=>[_(i(m.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),C.value?(u(),c("div",ct,[a(t(X),{class:"h-4 w-4 animate-spin text-primary"})])):g("",!0)]),t(n).user_id?S.value.length===0&&!C.value?(u(),c("p",ft,"This employee hasn't completed any online courses yet")):g("",!0):(u(),c("p",vt,"Select an employee to see their completed online courses")),t(n).errors.course_online_id?(u(),c("span",pt,i(t(n).errors.course_online_id),1)):g("",!0)]),l("div",gt,[a(t(T),{for:"date"},{default:r(()=>e[16]||(e[16]=[_("Evaluation Date *")])),_:1}),a(t(je),{id:"date",type:"date",modelValue:t(n).evaluation_date,"onUpdate:modelValue":e[0]||(e[0]=m=>t(n).evaluation_date=m),disabled:t(n).processing,required:""},null,8,["modelValue","disabled"]),t(n).errors.evaluation_date?(u(),c("span",xt,i(t(n).errors.evaluation_date),1)):g("",!0)])]),p.value&&A.value?(u(),h(t(Q),{key:0,class:"mt-6"},{default:r(()=>[a(t(ue),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>[l("div",yt,[l("div",null,[e[17]||(e[17]=l("span",{class:"font-medium"},"Employee:",-1)),l("p",null,i(p.value.name),1)]),l("div",null,[e[18]||(e[18]=l("span",{class:"font-medium"},"Online Course:",-1)),l("p",null,i(A.value.title),1)]),A.value.completed_at?(u(),c("div",bt,[e[19]||(e[19]=l("span",{class:"font-medium"},"Completed:",-1)),l("p",null,i(new Date(A.value.completed_at).toLocaleDateString()),1)])):g("",!0),p.value.department?(u(),c("div",ht,[e[20]||(e[20]=l("span",{class:"font-medium"},"Department:",-1)),l("p",null,i(p.value.department.name),1)])):g("",!0),p.value.user_level?(u(),c("div",kt,[e[21]||(e[21]=l("span",{class:"font-medium"},"Level:",-1)),l("p",null,[a(t(D),{variant:"secondary",class:"text-xs"},{default:r(()=>[_(i(p.value.user_level.code)+" - "+i(p.value.user_level.name),1)]),_:1})])])):g("",!0),p.value.user_level_tier?(u(),c("div",wt,[e[22]||(e[22]=l("span",{class:"font-medium"},"Tier:",-1)),l("p",null,[a(t(D),{variant:"outline",class:"text-xs"},{default:r(()=>[_(i(p.value.user_level_tier.tier_name)+" (T"+i(p.value.user_level_tier.tier_order)+") ",1)]),_:1})])])):g("",!0)]),!p.value.user_level||!p.value.user_level_tier?(u(),c("div",$t,[l("div",St,[a(t(Ke),{class:"h-4 w-4 text-yellow-600 mr-2"}),l("div",Lt,[e[23]||(e[23]=l("p",{class:"font-medium"},"Incomplete Assignment",-1)),l("p",null," This employee is missing "+i(p.value.user_level?"":"level assignment")+" "+i(!p.value.user_level&&!p.value.user_level_tier?" and ":"")+" "+i(p.value.user_level_tier?"":"tier assignment")+". Performance level calculation may fall back to default values. ",1)])])])):g("",!0)]),_:1})]),_:1})):g("",!0)]}),_:1})]),_:1}),t(n).user_id&&t(n).course_online_id&&k.value.length>0?(u(),c("div",Dt,[l("div",Ut,[e[24]||(e[24]=l("h2",{class:"text-xl font-semibold text-foreground"},"Evaluation Categories",-1)),a(t(D),{variant:"secondary"},{default:r(()=>[_(i(k.value.length)+" categories",1)]),_:1})]),l("div",Vt,[(u(!0),c(B,null,q(t(n).categories,(s,d)=>(u(),h(t(G),{key:s.category_id,class:"hover:shadow-md transition-shadow duration-200"},{default:r(()=>[a(t(le),null,{default:r(()=>{var y,m;return[l("div",Tt,[l("div",Et,[l("div",Ct,[a(t(ae),{class:"text-lg"},{default:r(()=>{var f;return[_(i(((f=k.value.find(w=>w.id===s.category_id))==null?void 0:f.name)||"Category"),1)]}),_:2},1024),a(t(D),{variant:"outline"},{default:r(()=>{var f;return[_(i(((f=k.value.find(w=>w.id===s.category_id))==null?void 0:f.weight)||0)+"% weight ",1)]}),_:2},1024)]),a(t(se),null,{default:r(()=>{var f;return[_(i(((f=k.value.find(w=>w.id===s.category_id))==null?void 0:f.description)||"No description available"),1)]}),_:2},1024)]),V(s.category_id,s.evaluation_type_id)?(u(),c("div",Ot,[l("div",Pt,i((y=V(s.category_id,s.evaluation_type_id))==null?void 0:y.score_value),1),l("div",Ft," out of "+i((m=k.value.find(f=>f.id===s.category_id))==null?void 0:m.max_score),1)])):g("",!0)])]}),_:2},1024),a(t(H),null,{default:r(()=>{var y;return[l("div",jt,[l("div",Nt,[a(t(T),{class:"text-sm font-medium"},{default:r(()=>e[25]||(e[25]=[_("Select Performance Level")])),_:1}),a(t(Ne),{"model-value":((y=s.evaluation_type_id)==null?void 0:y.toString())||"","onUpdate:modelValue":m=>Le(s.category_id,m),class:"space-y-2"},{default:r(()=>{var m;return[(u(!0),c(B,null,q(((m=k.value.find(f=>f.id===s.category_id))==null?void 0:m.types)||[],f=>{var w;return u(),c("div",{key:f.id,class:z(["flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-primary bg-primary/5":s.evaluation_type_id===f.id}])},[a(t(Re),{value:f.id.toString(),id:`type_${s.category_id}_${f.id}`},null,8,["value","id"]),l("div",Rt,[l("div",null,[a(t(T),{for:`type_${s.category_id}_${f.id}`,class:"font-medium cursor-pointer"},{default:r(()=>[_(i(f.type_name),1)]),_:2},1032,["for"]),l("p",It,i(f.description),1)]),a(t(D),{variant:Se(f.score_value,((w=k.value.find(K=>K.id===s.category_id))==null?void 0:w.max_score)||100)},{default:r(()=>[_(i(f.score_value)+" pts ",1)]),_:2},1032,["variant"])])],2)}),128))]}),_:2},1032,["model-value","onUpdate:modelValue"]),t(n).errors[`categories.${d}.evaluation_type_id`]?(u(),c("span",Mt,i(t(n).errors[`categories.${d}.evaluation_type_id`]),1)):g("",!0)]),V(s.category_id,s.evaluation_type_id)?(u(),c("div",At,[a(t(Q),null,{default:r(()=>[a(t(pe),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>{var m,f,w,K,me;return[e[28]||(e[28]=l("h4",{class:"font-medium mb-3"},"Selected Performance Level",-1)),l("div",Bt,[l("div",qt,[e[26]||(e[26]=l("span",{class:"text-sm font-medium"},"Performance:",-1)),a(t(D),{variant:$e(((m=V(s.category_id,s.evaluation_type_id))==null?void 0:m.score_value)||0).variant},{default:r(()=>{var N;return[_(i((N=V(s.category_id,s.evaluation_type_id))==null?void 0:N.type_name),1)]}),_:2},1032,["variant"])]),l("div",zt,[e[27]||(e[27]=l("span",{class:"text-sm font-medium"},"Score:",-1)),l("span",Gt,i((f=V(s.category_id,s.evaluation_type_id))==null?void 0:f.score_value)+" / "+i((w=k.value.find(N=>N.id===s.category_id))==null?void 0:w.max_score),1)]),a(t(Ge),{value:Math.round((((K=V(s.category_id,s.evaluation_type_id))==null?void 0:K.score_value)||0)/(((me=k.value.find(N=>N.id===s.category_id))==null?void 0:me.max_score)||100)*100),class:"h-2"},null,8,["value"])])]}),_:2},1024)]),_:2},1024)])):g("",!0)]),l("div",Ht,[a(t(T),{for:`comments_${s.category_id}`},{default:r(()=>e[29]||(e[29]=[_("Detailed Comments & Feedback")])),_:2},1032,["for"]),a(t(ve),{id:`comments_${s.category_id}`,modelValue:s.comments,"onUpdate:modelValue":m=>s.comments=m,rows:"3",disabled:t(n).processing,placeholder:"Provide specific feedback, strengths, areas for improvement, and recommendations..."},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t(n).errors[`categories.${d}.comments`]?(u(),c("span",Jt,i(t(n).errors[`categories.${d}.comments`]),1)):g("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):g("",!0),t(n).user_id&&t(n).course_online_id&&t(n).categories.some(s=>s.evaluation_type_id!==null)?(u(),h(t(G),{key:1},{default:r(()=>[a(t(le),null,{default:r(()=>[l("div",Kt,[l("div",Qt,[l("div",Wt,[a(t(ue),{class:"h-6 w-6 text-green-600"})])]),l("div",null,[a(t(ae),null,{default:r(()=>e[30]||(e[30]=[_("Overall Assessment")])),_:1}),a(t(se),null,{default:r(()=>e[31]||(e[31]=[_("Summary with Level + Tier based incentive calculation")])),_:1})])])]),_:1}),a(t(H),null,{default:r(()=>[l("div",Xt,[a(t(G),{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:r(()=>[a(t(H),{class:"p-4"},{default:r(()=>[l("div",Yt,[a(t(pe),{class:"h-8 w-8 text-blue-600 mr-4"}),l("div",null,[e[32]||(e[32]=l("p",{class:"text-sm font-medium text-blue-900"},"Total Score",-1)),l("p",{class:z(["text-2xl font-bold",{"text-emerald-600":v.value>=13,"text-green-600":v.value>=10&&v.value<13,"text-blue-600":v.value>=7&&v.value<10,"text-yellow-600":v.value>=4&&v.value<7,"text-red-600":v.value<4}])},i(v.value),3)])])]),_:1})]),_:1}),a(t(G),{class:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200"},{default:r(()=>[a(t(H),{class:"p-4"},{default:r(()=>[l("div",Zt,[a(t(ge),{class:"h-8 w-8 text-green-600 mr-4"}),l("div",null,[e[33]||(e[33]=l("p",{class:"text-sm font-medium text-green-900"},"Performance Level",-1)),x.value?(u(),c("p",{key:0,class:z(["text-xl font-bold",`text-${x.value.color}-600`])},i(x.value.label),3)):(u(),c("p",es," Not Rated "))])])]),_:1})]),_:1})]),x.value?(u(),h(t(Q),{key:0,class:"mb-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:r(()=>[a(t(ge),{class:"h-4 w-4"}),a(t(W),null,{default:r(()=>[e[37]||(e[37]=l("h4",{class:"font-semibold text-blue-900 mb-2"},"Performance Level Details",-1)),l("div",ts,[l("div",null,[e[34]||(e[34]=l("span",{class:"font-medium"},"Level:",-1)),l("p",{class:z(["font-bold",`text-${x.value.color}-600`])},i(x.value.label),3)]),l("div",null,[e[35]||(e[35]=l("span",{class:"font-medium"},"Score Range:",-1)),l("p",null,i(x.value.min_score)+"-"+i(x.value.max_score)+" points",1)]),l("div",ss,[e[36]||(e[36]=l("span",{class:"font-medium"},"Description:",-1)),l("p",null,i(x.value.description),1)])])]),_:1})]),_:1})):g("",!0),l("div",ls,[a(t(T),{for:"notes"},{default:r(()=>e[38]||(e[38]=[_("Overall Notes & Recommendations")])),_:1}),a(t(ve),{id:"notes",modelValue:t(n).notes,"onUpdate:modelValue":e[1]||(e[1]=s=>t(n).notes=s),rows:"4",disabled:t(n).processing,placeholder:"Provide overall assessment, key achievements, development areas, goals for improvement, and recommendations for career development..."},null,8,["modelValue","disabled"]),t(n).errors.notes?(u(),c("span",as,i(t(n).errors.notes),1)):g("",!0)])]),_:1})]),_:1})):g("",!0),t(n).user_id&&t(n).course_online_id?(u(),c("div",os,[a(t(R),{type:"button",onClick:Ve,variant:"outline",disabled:t(n).processing},{default:r(()=>[a(t(fe),{class:"mr-2 h-4 w-4"}),e[39]||(e[39]=_(" Reset Form "))]),_:1},8,["disabled"]),a(t(R),{type:"submit",disabled:t(n).processing||!Z.value||v.value===0},{default:r(()=>[t(n).processing?(u(),h(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(u(),h(t(Qe),{key:1,class:"mr-2 h-4 w-4"})),t(n).processing?(u(),c("span",rs,"Submitting Evaluation...")):(u(),c("span",ns,"Submit Evaluation"))]),_:1},8,["disabled"])])):g("",!0)],32)]),a(t(Ie),{open:F.value,"onUpdate:open":e[3]||(e[3]=s=>F.value=s)},{default:r(()=>[a(t(Me),{class:"sm:max-w-lg"},{default:r(()=>[a(t(Ae),null,{default:r(()=>[l("div",is,[l("div",us,[l("div",ds,[a(t(ue),{class:"h-6 w-6 text-green-600"})])]),l("div",ms,[a(t(Be),null,{default:r(()=>e[40]||(e[40]=[_("Confirm Online Course Evaluation")])),_:1}),a(t(qe),null,{default:r(()=>{var s;return[e[41]||(e[41]=_(" Please review the evaluation details before submitting. This action will record the online course performance evaluation for ")),l("span",_s,i((s=p.value)==null?void 0:s.name),1),e[42]||(e[42]=_(". "))]}),_:1})])])]),_:1}),a(t(Q),{class:"my-4"},{default:r(()=>[a(t(W),null,{default:r(()=>{var s,d,y,m;return[e[50]||(e[50]=l("h4",{class:"font-medium mb-2"},"Evaluation Summary",-1)),l("div",cs,[l("div",null,[e[43]||(e[43]=l("span",{class:"text-muted-foreground"},"Employee:",-1)),l("p",vs,i((s=p.value)==null?void 0:s.name),1)]),l("div",null,[e[44]||(e[44]=l("span",{class:"text-muted-foreground"},"Online Course:",-1)),l("p",fs,i((d=A.value)==null?void 0:d.title),1)]),l("div",null,[e[45]||(e[45]=l("span",{class:"text-muted-foreground"},"Date:",-1)),l("p",ps,i(t(n).evaluation_date),1)]),l("div",null,[e[46]||(e[46]=l("span",{class:"text-muted-foreground"},"Total Score:",-1)),l("p",gs,i(v.value),1)]),l("div",null,[e[48]||(e[48]=l("span",{class:"text-muted-foreground"},"Performance Level:",-1)),l("p",xs,[v.value>0?(u(),h(t(D),{key:0,class:z(`bg-${x.value?x.value.color:"green"}-100 text-${x.value?x.value.color:"green"}-800 border-${x.value?x.value.color:"green"}-200`)},{default:r(()=>[_(i(x.value?x.value.label:j(v.value)===1?"Outstanding":j(v.value)===2?"Reliable":j(v.value)===3?"Developing":j(v.value)===4?"Underperforming":"Not Rated"),1)]),_:1},8,["class"])):(u(),h(t(D),{key:1,variant:"secondary"},{default:r(()=>e[47]||(e[47]=[_(" Not Rated ")])),_:1}))])]),(y=p.value)!=null&&y.user_level&&((m=p.value)!=null&&m.user_level_tier)?(u(),c("div",ys,[e[49]||(e[49]=l("span",{class:"text-muted-foreground"},"Level + Tier:",-1)),l("p",bs,i(p.value.user_level.code)+" - "+i(p.value.user_level_tier.tier_name),1)])):g("",!0)])]}),_:1})]),_:1}),a(t(ze),null,{default:r(()=>[a(t(R),{onClick:e[2]||(e[2]=s=>F.value=!1),variant:"outline"},{default:r(()=>e[51]||(e[51]=[_(" Cancel ")])),_:1}),a(t(R),{onClick:Ue,disabled:t(n).processing},{default:r(()=>[t(n).processing?(u(),h(t(X),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):g("",!0),t(n).processing?(u(),c("span",hs,"Submitting...")):(u(),c("span",ks,"Confirm & Submit"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{bl as default};
