import{d as h,C as x,k as _,o as r,w as v,e as s,t as a,l as y,a as n,f as d,g as m,u as l,i as L,v as p,F as k,h as w,b as C,P as M,n as V,j as U}from"./app-iYB6CK9s.js";import{_ as E}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const S={class:"px-4 sm:px-0"},D={class:"text-xl sm:text-2xl font-bold mb-4"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},N={class:"col-span-1"},$=["disabled"],j={key:0,class:"text-red-600 text-sm mt-1"},q={class:"col-span-1"},z=["disabled"],A={key:0,class:"text-red-600 text-sm mt-1"},F={class:"col-span-full"},H=["disabled"],O={key:0,class:"text-red-600 text-sm mt-1"},P={class:"col-span-full"},T=["disabled"],G={key:0,class:"text-red-600 text-sm mt-1"},R={key:0,class:"col-span-full"},I={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},J=["id","value","onChange","checked","disabled"],K=["for"],Q={key:0,class:"text-red-600 text-sm mt-1"},W={class:"flex flex-col sm:flex-row gap-2 mb-4"},X=["disabled"],Y={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},Z={key:1},ee={key:2},ie=h({__name:"Edit",props:{userLevel:Object,existingLevels:Array},setup(u){const i=u,e=x({code:i.userLevel.code,name:i.userLevel.name,hierarchy_level:i.userLevel.hierarchy_level,description:i.userLevel.description,can_manage_levels:i.userLevel.can_manage_levels||[]});function g(){e.put(route("admin.user-levels.update",i.userLevel.id),{onSuccess:()=>{},onError:c=>{console.error("Validation errors:",c)}})}const b=c=>{const o=e.can_manage_levels.indexOf(c);o>-1?e.can_manage_levels.splice(o,1):e.can_manage_levels.push(c)},f=[{name:"Dashboard",href:route("dashboard")},{name:"User Levels",href:route("admin.user-levels.index")},{name:i.userLevel.name,href:route("admin.user-levels.show",i.userLevel.id)},{name:"Edit",href:route("admin.user-levels.edit",i.userLevel.id)}];return(c,o)=>(r(),_(E,{breadcrumbs:f},{default:v(()=>[s("div",S,[s("h1",D,"Edit User Level: "+a(u.userLevel.name),1),s("form",{onSubmit:y(g,["prevent"]),class:"max-w-2xl"},[s("div",B,[s("div",N,[o[5]||(o[5]=s("label",{class:"block font-semibold mb-1"},"Hierarchy Level",-1)),m(s("select",{"onUpdate:modelValue":o[0]||(o[0]=t=>l(e).hierarchy_level=t),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:l(e).processing,required:""},o[4]||(o[4]=[s("option",{value:""},"Select Level",-1),s("option",{value:"1"},"Level 1 (Employees)",-1),s("option",{value:"2"},"Level 2 (Managers)",-1),s("option",{value:"3"},"Level 3 (Senior Managers)",-1),s("option",{value:"4"},"Level 4 (Directors)",-1),s("option",{value:"5"},"Level 5 (Executive)",-1)]),8,$),[[L,l(e).hierarchy_level]]),l(e).errors.hierarchy_level?(r(),n("div",j,a(l(e).errors.hierarchy_level),1)):d("",!0)]),s("div",q,[o[6]||(o[6]=s("label",{class:"block font-semibold mb-1"},"Level Code",-1)),m(s("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=t=>l(e).code=t),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:l(e).processing,maxlength:"10",placeholder:"e.g., L1, L2, MGR",required:""},null,8,z),[[p,l(e).code]]),l(e).errors.code?(r(),n("div",A,a(l(e).errors.code),1)):d("",!0)]),s("div",F,[o[7]||(o[7]=s("label",{class:"block font-semibold mb-1"},"Level Name",-1)),m(s("input",{type:"text","onUpdate:modelValue":o[2]||(o[2]=t=>l(e).name=t),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:l(e).processing,placeholder:"e.g., Employee, Direct Manager, Senior Manager",required:""},null,8,H),[[p,l(e).name]]),l(e).errors.name?(r(),n("div",O,a(l(e).errors.name),1)):d("",!0)]),s("div",P,[o[8]||(o[8]=s("label",{class:"block font-semibold mb-1"},"Description",-1)),m(s("textarea",{"onUpdate:modelValue":o[3]||(o[3]=t=>l(e).description=t),rows:"3",class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:l(e).processing,placeholder:"Describe the responsibilities and scope of this level"},null,8,T),[[p,l(e).description]]),l(e).errors.description?(r(),n("div",G,a(l(e).errors.description),1)):d("",!0)]),u.existingLevels.length>0?(r(),n("div",R,[o[9]||(o[9]=s("label",{class:"block font-semibold mb-2"},"Can Manage Levels",-1)),o[10]||(o[10]=s("p",{class:"text-sm text-gray-600 mb-3"},"Select which levels this level can manage:",-1)),s("div",I,[(r(!0),n(k,null,w(u.existingLevels,t=>(r(),n("div",{key:t.code,class:"flex items-center"},[s("input",{id:`manage_${t.code}`,type:"checkbox",value:t.code,onChange:se=>b(t.code),checked:l(e).can_manage_levels.includes(t.code),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:l(e).processing},null,40,J),s("label",{for:`manage_${t.code}`,class:"ml-2 block text-sm text-gray-900"},a(t.code)+" - "+a(t.name),9,K)]))),128))]),l(e).errors.can_manage_levels?(r(),n("div",Q,a(l(e).errors.can_manage_levels),1)):d("",!0)])):d("",!0)]),s("div",W,[s("button",{type:"submit",class:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition w-full sm:w-auto font-medium flex items-center justify-center gap-2",disabled:l(e).processing},[l(e).processing?(r(),n("svg",Y,o[11]||(o[11]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),l(e).processing?(r(),n("span",Z,"Updating Level...")):(r(),n("span",ee,"Update User Level"))],8,X),C(l(M),{href:c.route("admin.user-levels.show",u.userLevel.id),class:V(["bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 transition w-full sm:w-auto text-center font-medium",{"pointer-events-none opacity-50":l(e).processing}])},{default:v(()=>o[12]||(o[12]=[U(" Cancel ")])),_:1},8,["href","class"])])],32)])]),_:1}))}});export{ie as default};
