import{d as Y,r as M,c as k,z as Z,a as c,o as n,b as s,u as e,m as ee,w as a,e as r,g as m,h as g,t as i,f as u,n as b,P as te,F as j,i as N,k as se,W as y}from"./app-CV2cPHwK.js";import{_ as re,a as oe,C as ae,b as le,q as ne,f as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-BSvNWHlH.js";import{_ as v}from"./Button.vue_vue_type_script_setup_true_lang-C5sOPNae.js";import{_ as h}from"./Card.vue_vue_type_script_setup_true_lang--D3KWfGq.js";import{_ as w}from"./CardContent.vue_vue_type_script_setup_true_lang-RDGa4TMZ.js";import{_ as de}from"./CardDescription.vue_vue_type_script_setup_true_lang-1DS5NEM9.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-mDEJg-F9.js";import{_ as $}from"./CardTitle.vue_vue_type_script_setup_true_lang-BSzOzICM.js";import{_ as S}from"./index-CjSyc0sf.js";import{_ as P}from"./Progress.vue_vue_type_script_setup_true_lang-COqmNCR1.js";import{_ as ue,a as ce}from"./index-DKiGTmAa.js";import{_ as me}from"./Separator.vue_vue_type_script_setup_true_lang-yDr5oeYP.js";import{C as V}from"./clock-BeTrlB51.js";import{B as A}from"./book-open-BqIuda0t.js";import{A as ge}from"./arrow-left-BoEBVeWb.js";import{T as fe}from"./target-ChE4qNk7.js";import{T as _e}from"./trending-up-DyRrxsBT.js";import{U as pe}from"./user-BT-7D6mz.js";import{P as q}from"./play-BfS4iDvR.js";import{A as be}from"./award-VDZ9AI9R.js";import{C as T}from"./circle-check-big-ClKQO3IC.js";import{L as R}from"./lock-CrX54ayY.js";import{V as xe}from"./video-VemHBwTo.js";import{F as ke}from"./file-text-P0QvyLE1.js";import"./index-3f0HzYe1.js";import"./index-DhfkKPqp.js";import"./_plugin-vue_export-helper-BqS9F3Z2.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWDFjwen.js";import"./useForwardExpose-CFKb2kDd.js";import"./nullish-CHIgUVhi.js";const ye={class:"max-w-7xl mx-auto space-y-6"},ve={class:"flex items-start gap-6"},he={key:0,class:"flex-shrink-0"},we=["src","alt"],Ce={class:"flex-1"},$e={class:"flex items-start justify-between mb-4"},Se={class:"text-3xl font-bold mb-2"},Me={class:"text-lg text-muted-foreground mb-4"},je={class:"flex items-center gap-4 text-sm text-muted-foreground"},qe={class:"flex items-center gap-1"},Te={class:"flex items-center gap-1"},Be={class:"grid gap-4 md:grid-cols-4"},De={class:"text-xs text-muted-foreground"},Le={class:"text-2xl font-bold mb-2"},Fe={class:"text-xs text-muted-foreground"},Ne={class:"text-2xl font-bold mb-2"},Pe={key:3,class:"text-center"},Ve={class:"flex items-center justify-between"},Ae={class:"ml-2"},Re={class:"text-muted-foreground ml-2"},ze={class:"flex items-center justify-between"},Ue={class:"flex items-center gap-3"},We={key:2},Ie={class:"flex-1"},Ee={class:"font-semibold text-lg"},Oe={key:0,class:"text-sm text-muted-foreground"},Ge={class:"flex items-center gap-4 mt-2 text-sm text-muted-foreground"},He={key:0},Je={class:"flex items-center gap-4"},Ke={class:"text-right min-w-[100px]"},Qe={class:"text-sm font-medium"},Xe={class:"text-xs text-muted-foreground"},Ye={class:"mt-3"},Ze={class:"p-4 space-y-2"},et=["onClick"],tt={class:"flex-1"},st={class:"font-medium"},rt={class:"flex items-center gap-4 text-sm text-muted-foreground"},ot={class:"capitalize"},at={key:0},lt={class:"text-right"},nt={key:0,class:"text-green-600 font-medium text-sm"},it={key:1,class:"text-blue-600 font-medium text-sm"},dt={key:2,class:"text-gray-500 text-sm"},ut={key:3,class:"text-gray-400 text-sm"},It=Y({__name:"Show",props:{course:{},assignment:{},modules:{}},setup(z){const f=z,U=[{title:"My Courses",href:"/courses-online"},{title:f.course.name,href:"#"}],_=M(new Set);M(null);const x=M(!1),W=k(()=>f.modules.filter(t=>t.progress.is_completed).length),B=k(()=>f.modules.length),p=k(()=>{for(const t of f.modules)if(t.is_unlocked){for(const o of t.content)if(o.is_unlocked&&!o.progress.is_completed)return{content:o,module:t}}return null}),D=k(()=>{const t=f.modules.filter(l=>l.is_required);return t.filter(l=>l.progress.is_completed).length>=t.length}),I=k(()=>f.assignment.time_spent?f.assignment.time_spent:"0 minutes"),E=t=>{switch(t){case"assigned":return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300";case"in_progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"completed":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},O=t=>{switch(t){case"assigned":return"Not Started";case"in_progress":return"In Progress";case"completed":return"Completed";default:return t}},G=t=>{switch(t){case"beginner":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"intermediate":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"advanced":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},H=t=>{_.value.has(t)?_.value.delete(t):_.value.add(t)},J=async()=>{if(!x.value){x.value=!0;try{await y.post(route("courses-online.start",f.course.id)),y.reload()}catch(t){console.error("Failed to start course:",t)}finally{x.value=!1}}},K=async()=>{if(D.value)try{await y.post(route("courses-online.complete",f.course.id)),y.reload()}catch(t){console.error("Failed to complete course:",t),alert("Failed to complete course. Please try again.")}},L=(t,o)=>{if(!t.is_unlocked){alert("This content is not yet unlocked. Complete previous content first.");return}y.visit(route("content.show",t.id))},F=()=>{p.value&&L(p.value.content,p.value.module)},Q=t=>new Date(t).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}),X=t=>t==="video"?xe:ke;return Z(()=>{const t=f.assignment.current_module_id;if(t)_.value.add(t);else{const o=f.modules.find(l=>!l.progress.is_completed&&l.is_unlocked);o&&_.value.add(o.id)}}),(t,o)=>(n(),c(j,null,[s(e(ee),{title:t.course.name},null,8,["title"]),s(ie,{breadcrumbs:U},{default:a(()=>[r("div",ye,[r("div",ve,[t.course.image_path?(n(),c("div",he,[r("img",{src:t.course.image_path,alt:t.course.name,class:"w-32 h-24 rounded-lg object-cover border"},null,8,we)])):g("",!0),r("div",Ce,[r("div",$e,[r("div",null,[r("h1",Se,i(t.course.name),1),r("p",Me,i(t.course.description),1),r("div",je,[r("div",qe,[s(e(V),{class:"h-4 w-4"}),u(" "+i(t.course.estimated_duration)+" minutes ",1)]),s(e(S),{class:b(G(t.course.difficulty_level))},{default:a(()=>[u(i(t.course.difficulty_level),1)]),_:1},8,["class"]),r("div",Te,[s(e(A),{class:"h-4 w-4"}),u(" "+i(B.value)+" modules ",1)])])]),s(e(v),{asChild:"",variant:"outline"},{default:a(()=>[s(e(te),{href:"/courses-online"},{default:a(()=>[s(e(ge),{class:"h-4 w-4 mr-2"}),o[0]||(o[0]=u(" Back to Courses "))]),_:1})]),_:1})])])]),r("div",Be,[s(e(h),null,{default:a(()=>[s(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e($),{class:"text-sm font-medium"},{default:a(()=>o[1]||(o[1]=[u("Status")])),_:1}),s(e(fe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:a(()=>[s(e(S),{class:b([E(t.assignment.status),"mb-2"])},{default:a(()=>[u(i(O(t.assignment.status)),1)]),_:1},8,["class"]),r("p",De,i(t.assignment.started_at?`Started ${Q(t.assignment.started_at)}`:"Not started yet"),1)]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e($),{class:"text-sm font-medium"},{default:a(()=>o[2]||(o[2]=[u("Progress")])),_:1}),s(e(_e),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:a(()=>[r("div",Le,i(Math.round(t.assignment.progress_percentage))+"%",1),s(e(P),{value:t.assignment.progress_percentage,class:"mb-2"},null,8,["value"]),r("p",Fe,i(W.value)+"/"+i(B.value)+" modules completed ",1)]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e($),{class:"text-sm font-medium"},{default:a(()=>o[3]||(o[3]=[u("Time Spent")])),_:1}),s(e(V),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:a(()=>[r("div",Ne,i(I.value),1),o[4]||(o[4]=r("p",{class:"text-xs text-muted-foreground"},"Learning time",-1))]),_:1})]),_:1}),s(e(h),null,{default:a(()=>[s(e(C),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[s(e($),{class:"text-sm font-medium"},{default:a(()=>o[5]||(o[5]=[u("Actions")])),_:1}),s(e(pe),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),s(e(w),null,{default:a(()=>[t.assignment.status==="assigned"?(n(),m(e(v),{key:0,onClick:J,disabled:x.value,class:"w-full mb-2"},{default:a(()=>[s(e(q),{class:"h-4 w-4 mr-2"}),u(" "+i(x.value?"Starting...":"Start Course"),1)]),_:1},8,["disabled"])):t.assignment.status==="in_progress"&&p.value?(n(),m(e(v),{key:1,onClick:F,class:"w-full mb-2"},{default:a(()=>[s(e(q),{class:"h-4 w-4 mr-2"}),o[6]||(o[6]=u(" Continue Learning "))]),_:1})):g("",!0),t.assignment.status==="in_progress"&&D.value?(n(),m(e(v),{key:2,onClick:K,variant:"default",class:"w-full"},{default:a(()=>[s(e(be),{class:"h-4 w-4 mr-2"}),o[7]||(o[7]=u(" Complete Course "))]),_:1})):g("",!0),t.assignment.status==="completed"?(n(),c("div",Pe,[s(e(T),{class:"h-8 w-8 mx-auto text-green-600 mb-2"}),o[8]||(o[8]=r("p",{class:"text-sm font-medium text-green-600"},"Course Completed!",-1))])):g("",!0)]),_:1})]),_:1})]),p.value&&t.assignment.status==="in_progress"?(n(),m(e(ue),{key:0,class:"border-blue-200 bg-blue-50 dark:bg-blue-950"},{default:a(()=>[s(e(q),{class:"h-4 w-4"}),s(e(ce),null,{default:a(()=>[r("div",Ve,[r("div",null,[o[9]||(o[9]=r("strong",null,"Continue where you left off:",-1)),r("span",Ae,i(p.value.content.title),1),r("span",Re,"in "+i(p.value.module.name),1)]),s(e(v),{onClick:F,size:"sm"},{default:a(()=>o[10]||(o[10]=[u(" Continue ")])),_:1})])]),_:1})]),_:1})):g("",!0),s(e(h),null,{default:a(()=>[s(e(C),null,{default:a(()=>[s(e($),{class:"flex items-center gap-2"},{default:a(()=>[s(e(A),{class:"h-5 w-5 text-primary"}),o[11]||(o[11]=u(" Course Modules "))]),_:1}),s(e(de),null,{default:a(()=>o[12]||(o[12]=[u(" Complete modules in order to progress through the course ")])),_:1})]),_:1}),s(e(w),{class:"space-y-4"},{default:a(()=>[(n(!0),c(j,null,N(t.modules,(l,ct)=>(n(),c("div",{key:l.id,class:b(["border rounded-lg",{"border-green-200 bg-green-50 dark:bg-green-950":l.progress.is_completed,"border-blue-200 bg-blue-50 dark:bg-blue-950":!l.progress.is_completed&&l.is_unlocked,"border-gray-200 bg-gray-50 dark:bg-gray-900":!l.is_unlocked}])},[s(e(re),null,{default:a(()=>[s(e(oe),{onClick:d=>H(l.id),class:"w-full p-4 text-left hover:bg-accent/50 transition-colors"},{default:a(()=>[r("div",ze,[r("div",Ue,[r("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold",{"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":l.progress.is_completed,"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":!l.progress.is_completed&&l.is_unlocked,"bg-gray-200 text-gray-500 dark:bg-gray-700 dark:text-gray-400":!l.is_unlocked}])},[l.progress.is_completed?(n(),m(e(T),{key:0,class:"w-4 h-4"})):l.is_unlocked?(n(),c("span",We,i(l.order_number),1)):(n(),m(e(R),{key:1,class:"w-4 h-4"}))],2),r("div",Ie,[r("h3",Ee,i(l.name),1),l.description?(n(),c("p",Oe,i(l.description),1)):g("",!0),r("div",Ge,[r("span",null,i(l.content.length)+" content items",1),l.estimated_duration?(n(),c("span",He,"~"+i(l.estimated_duration)+" minutes",1)):g("",!0),l.is_required?(n(),m(e(S),{key:1,variant:"outline",class:"text-xs"},{default:a(()=>o[13]||(o[13]=[u("Required")])),_:1})):g("",!0)])])]),r("div",Je,[r("div",Ke,[r("div",Qe,i(Math.round(l.progress.completion_percentage))+"% ",1),r("div",Xe,i(l.progress.completed_content)+"/"+i(l.progress.total_content),1)]),s(e(ae),{class:b(["h-4 w-4 transition-transform",{"rotate-180":_.value.has(l.id)}])},null,8,["class"])])]),r("div",Ye,[s(e(P),{value:l.progress.completion_percentage,class:"h-2"},null,8,["value"])])]),_:2},1032,["onClick"]),_.value.has(l.id)?(n(),m(e(le),{key:0},{default:a(()=>[s(e(me)),r("div",Ze,[(n(!0),c(j,null,N(l.content,d=>(n(),c("div",{key:d.id,onClick:mt=>L(d,l),class:b(["flex items-center gap-3 p-3 rounded-lg cursor-pointer transition-colors",{"bg-green-100 hover:bg-green-200 dark:bg-green-900 dark:hover:bg-green-800":d.progress.is_completed,"bg-blue-100 hover:bg-blue-200 dark:bg-blue-900 dark:hover:bg-blue-800":!d.progress.is_completed&&d.is_unlocked,"bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700 cursor-not-allowed":!d.is_unlocked}])},[r("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center",{"bg-green-200 text-green-700 dark:bg-green-800 dark:text-green-300":d.progress.is_completed,"bg-blue-200 text-blue-700 dark:bg-blue-800 dark:text-blue-300":!d.progress.is_completed&&d.is_unlocked,"bg-gray-300 text-gray-500 dark:bg-gray-600 dark:text-gray-400":!d.is_unlocked}])},[d.progress.is_completed?(n(),m(e(T),{key:0,class:"w-4 h-4"})):d.is_unlocked?(n(),m(se(X(d.content_type)),{key:2,class:"w-4 h-4"})):(n(),m(e(R),{key:1,class:"w-4 h-4"}))],2),r("div",tt,[r("div",st,i(d.title),1),r("div",rt,[r("span",ot,i(d.content_type),1),d.video?(n(),c("span",at,i(d.video.formatted_duration),1)):g("",!0),d.is_required?(n(),m(e(S),{key:1,variant:"outline",class:"text-xs"},{default:a(()=>o[14]||(o[14]=[u("Required")])),_:1})):g("",!0)])]),r("div",lt,[d.progress.is_completed?(n(),c("div",nt," Complete ")):d.progress.completion_percentage>0?(n(),c("div",it,i(Math.round(d.progress.completion_percentage))+"% ",1)):d.is_unlocked?(n(),c("div",dt," Not started ")):(n(),c("div",ut," 🔒 Locked "))]),d.is_unlocked?(n(),m(e(ne),{key:0,class:"h-4 w-4 text-muted-foreground"})):g("",!0)],10,et))),128))])]),_:2},1024)):g("",!0)]),_:2},1024)],2))),128))]),_:1})]),_:1})])]),_:1})],64))}});export{It as default};
