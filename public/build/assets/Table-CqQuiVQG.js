import{d as U,a as u,o as i,n as I,u as t,r as P,c as B,W as T,g as p,w as n,e as l,b as s,F as C,i as b,f as o,P as $,t as d}from"./app-C__QVaju.js";import{_ as Y}from"./AttendanceLayout-CCkqNBYt.js";import{b as Z,_ as D}from"./Button.vue_vue_type_script_setup_true_lang-3wUGolNO.js";import{_ as S}from"./Card.vue_vue_type_script_setup_true_lang-C6NTCksb.js";import{_ as N}from"./CardContent.vue_vue_type_script_setup_true_lang-CVVI4jBC.js";import{_ as R}from"./CardDescription.vue_vue_type_script_setup_true_lang-uH9K1n7e.js";import{_ as tt}from"./CardHeader.vue_vue_type_script_setup_true_lang-EmAvtNmd.js";import{_ as V}from"./CardTitle.vue_vue_type_script_setup_true_lang-D-QOz8Vl.js";import{_ as q}from"./index-C7BOh4kc.js";import{_ as st,a as et,b as A,c as y,d as nt,e as x}from"./TableHeader.vue_vue_type_script_setup_true_lang-B2DjVf0H.js";import{_ as lt}from"./Separator.vue_vue_type_script_setup_true_lang-BmbCCT5w.js";import{A as z}from"./activity-Gw42Po_S.js";import{C as h}from"./clock-8P7QZ8ho.js";import{B as E}from"./book-open-CY1Y2rYO.js";import{T as j}from"./timer-8ctsUCwb.js";import{S as M}from"./star-CDfZPbQ7.js";import{M as G}from"./message-square-DQyY1aE-.js";import{F as at}from"./file-text-B2QdJJTO.js";import{C as H}from"./chevron-left-Bzaxt0Ak.js";import{q as W}from"./AppLayout.vue_vue_type_script_setup_true_lang-B2Dge6gk.js";import"./index-DU9IJCLr.js";import"./index-Eaggz7Xa.js";import"./_plugin-vue_export-helper-DTeMU56P.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B2uDP-vU.js";const F=U({__name:"Skeleton",props:{class:{}},setup(c){const g=c;return(k,_)=>(i(),u("div",{class:I(t(Z)("animate-pulse rounded-md bg-muted",g.class))},null,2))}});function ot(c=[]){const g=P(!1),k=P(!1),_=P(!1),m=P({rating:3,comment:""}),f=B(()=>c.some(r=>r.clock_out===null)),e=B(()=>c.find(r=>r.clock_out===null)||{}),a=B(()=>[...c].sort((r,O)=>new Date(O.clock_in)-new Date(r.clock_in)).slice(0,5));function w(r){return r?new Date(r).toLocaleString():"—"}function v(r){return r?new Date(r).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}):"—"}function J(r){if(!r)return"—";const O=Math.floor(r/60),L=r%60;return O>0?`${O}h ${L}m`:`${L}m`}async function K(){try{g.value=!0,T.post("/clock-in",{},{onSuccess:()=>{console.log("Clock in successful")},onError:r=>{console.error("Clock in failed:",r),alert("Failed to clock in. Please try again.")},onFinish:()=>{g.value=!1}})}catch(r){console.error("Clock in exception:",r),g.value=!1}}function Q(){_.value=!0,m.value={rating:3,comment:""}}async function X(){if(!m.value.rating){alert("Please provide a rating");return}try{k.value=!0,T.post("/clock-out",{rating:m.value.rating,comment:m.value.comment},{onSuccess:()=>{console.log("Clock out successful"),_.value=!1},onError:r=>{console.error("Clock out failed:",r),alert("Failed to clock out. Please try again.")},onFinish:()=>{k.value=!1}})}catch(r){console.error("Clock out exception:",r),k.value=!1}}return{isLoading:g,isSubmitting:k,showClockOutModal:_,clockOutForm:m,activeSession:f,activeSessionData:e,recentClockings:a,formatDate:w,formatDateShort:v,formatDuration:J,clockIn:K,openClockOutDialog:Q,submitClockOut:X}}const it={class:"space-y-6"},rt={class:"md:hidden space-y-4"},ct={key:0,class:"space-y-4"},ut={class:"grid grid-cols-2 gap-3"},dt={class:"col-span-2 mb-2"},mt={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},ft={class:"text-sm font-medium"},_t={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},gt={class:"text-sm font-medium"},kt={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},pt={class:"text-sm font-medium"},xt={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},vt={class:"text-sm font-medium"},ht={key:0},yt={key:1,class:"flex items-center gap-1"},wt={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},Ct={class:"flex items-center text-sm font-medium"},bt={key:0,class:"flex items-center gap-1"},$t={class:"flex"},Dt={key:1,class:"text-muted-foreground"},St={class:"flex items-center gap-1 text-xs text-muted-foreground mb-1"},Nt={class:"text-sm"},Ft={class:"flex items-center gap-1"},Ot={class:"flex items-center gap-1"},Pt={class:"flex items-center gap-1"},At={class:"flex items-center gap-1"},Mt={class:"flex items-center gap-1"},Bt={class:"flex items-center gap-1"},It={class:"space-y-2"},Lt={class:"flex flex-col items-center gap-2"},Tt={key:0},Rt={key:1,class:"flex items-center gap-2"},Vt={key:0,class:"flex items-center gap-1"},qt={class:"text-sm font-medium"},zt={class:"flex"},Et={key:1,class:"text-muted-foreground"},jt=["title"],Gt={class:"flex justify-center items-center gap-4"},Ht={key:1},Wt={class:"text-sm text-muted-foreground"},Ut={key:1},xs=U({__name:"Table",props:{clockings:{type:Object,required:!0,default:()=>({data:[],current_page:1,last_page:1,prev_page_url:null,next_page_url:null})}},setup(c){const g=c,{isLoading:k,formatDate:_}=ot(g.clockings.data);function m(f){if(!f||isNaN(f)||f<0)return"0 minutes";f=Math.round(f);const e=Math.floor(f/60),a=f%60;return e>0?`${e} ${e===1?"hour":"hours"}${a>0?` ${a} ${a===1?"minute":"minutes"}`:""}`:`${a} ${a===1?"minute":"minutes"}`}return(f,e)=>(i(),p(Y,{title:"My Attendance Records"},{actions:n(()=>[s(t(D),{asChild:""},{default:n(()=>[s(t($),{href:"/attendance/clock"},{default:n(()=>[s(t(h),{class:"h-4 w-4 mr-2"}),e[0]||(e[0]=o(" Clock In/Out "))]),_:1})]),_:1})]),default:n(()=>[l("div",it,[l("div",rt,[t(k)?(i(),u("div",ct,[(i(),u(C,null,b(3,a=>s(t(S),{key:a},{default:n(()=>[s(t(N),{class:"p-4"},{default:n(()=>[s(t(F),{class:"h-4 w-full mb-2"}),s(t(F),{class:"h-4 w-3/4 mb-2"}),s(t(F),{class:"h-4 w-1/2"})]),_:1})]),_:2},1024)),64))])):c.clockings.data.length===0?(i(),p(t(S),{key:1},{default:n(()=>[s(t(N),{class:"text-center py-12"},{default:n(()=>[s(t(z),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),s(t(V),{class:"mb-2"},{default:n(()=>e[1]||(e[1]=[o("No attendance records found")])),_:1}),s(t(R),{class:"mb-4"},{default:n(()=>e[2]||(e[2]=[o("Start tracking your attendance by clocking in")])),_:1}),s(t(D),{asChild:""},{default:n(()=>[s(t($),{href:"/attendance/clock"},{default:n(()=>[s(t(h),{class:"h-4 w-4 mr-2"}),e[3]||(e[3]=o(" Clock In Now "))]),_:1})]),_:1})]),_:1})]),_:1})):(i(!0),u(C,{key:2},b(c.clockings.data,(a,w)=>(i(),p(t(S),{key:w,class:"hover:shadow-md transition-shadow"},{default:n(()=>[s(t(N),{class:"p-4"},{default:n(()=>[l("div",ut,[l("div",dt,[l("div",mt,[s(t(E),{class:"h-3 w-3"}),e[4]||(e[4]=o(" Course "))]),l("div",ft,d(a.course_name||"General Attendance"),1)]),l("div",null,[l("div",_t,[s(t(h),{class:"h-3 w-3"}),e[5]||(e[5]=o(" Clock In "))]),l("div",gt,d(t(_)(a.clock_in)),1)]),l("div",null,[l("div",kt,[s(t(h),{class:"h-3 w-3"}),e[6]||(e[6]=o(" Clock Out "))]),l("div",pt,d(a.clock_out?t(_)(a.clock_out):"—"),1)]),l("div",null,[l("div",xt,[s(t(j),{class:"h-3 w-3"}),e[7]||(e[7]=o(" Duration "))]),l("div",vt,[a.clock_out?(i(),u("span",ht,d(m(a.duration_in_minutes)),1)):(i(),u("span",yt,[o(d(m(a.current_duration||0))+" ",1),s(t(q),{variant:"secondary",class:"text-xs"},{default:n(()=>e[8]||(e[8]=[o("ongoing")])),_:1})]))])]),l("div",null,[l("div",wt,[s(t(M),{class:"h-3 w-3"}),e[9]||(e[9]=o(" Rating "))]),l("div",Ct,[a.rating?(i(),u("div",bt,[l("span",null,d(a.rating),1),l("div",$t,[(i(),u(C,null,b(5,v=>s(t(M),{key:v,class:I(["h-4 w-4",v<=a.rating?"text-yellow-400 fill-current":"text-muted-foreground"])},null,8,["class"])),64))])])):(i(),u("span",Dt,"—"))])])]),s(t(lt),{class:"my-3"}),l("div",null,[l("div",St,[s(t(G),{class:"h-3 w-3"}),e[10]||(e[10]=o(" Comment "))]),l("div",Nt,d(a.comment||"—"),1)])]),_:2},1024)]),_:2},1024))),128))]),s(t(S),{class:"hidden md:block"},{default:n(()=>[s(t(tt),null,{default:n(()=>[s(t(V),{class:"flex items-center gap-2"},{default:n(()=>[s(t(at),{class:"h-5 w-5"}),e[11]||(e[11]=o(" Attendance History "))]),_:1}),s(t(R),null,{default:n(()=>e[12]||(e[12]=[o(" View and track your complete attendance records ")])),_:1})]),_:1}),s(t(N),{class:"p-0"},{default:n(()=>[s(t(st),null,{default:n(()=>[s(t(et),null,{default:n(()=>[s(t(A),null,{default:n(()=>[s(t(y),null,{default:n(()=>[l("div",Ft,[s(t(E),{class:"h-4 w-4"}),e[13]||(e[13]=o(" Course "))])]),_:1}),s(t(y),null,{default:n(()=>[l("div",Ot,[s(t(h),{class:"h-4 w-4"}),e[14]||(e[14]=o(" Clock In "))])]),_:1}),s(t(y),null,{default:n(()=>[l("div",Pt,[s(t(h),{class:"h-4 w-4"}),e[15]||(e[15]=o(" Clock Out "))])]),_:1}),s(t(y),null,{default:n(()=>[l("div",At,[s(t(j),{class:"h-4 w-4"}),e[16]||(e[16]=o(" Duration "))])]),_:1}),s(t(y),null,{default:n(()=>[l("div",Mt,[s(t(M),{class:"h-4 w-4"}),e[17]||(e[17]=o(" Rating "))])]),_:1}),s(t(y),null,{default:n(()=>[l("div",Bt,[s(t(G),{class:"h-4 w-4"}),e[18]||(e[18]=o(" Comment "))])]),_:1})]),_:1})]),_:1}),s(t(nt),null,{default:n(()=>[t(k)?(i(),p(t(A),{key:0},{default:n(()=>[s(t(x),{colspan:"6"},{default:n(()=>[l("div",It,[s(t(F),{class:"h-4 w-full"}),s(t(F),{class:"h-4 w-3/4"})])]),_:1})]),_:1})):c.clockings.data.length===0?(i(),p(t(A),{key:1},{default:n(()=>[s(t(x),{colspan:"6",class:"text-center py-12"},{default:n(()=>[l("div",Lt,[s(t(z),{class:"h-12 w-12 text-muted-foreground"}),e[20]||(e[20]=l("div",null,[l("h3",{class:"font-medium"},"No attendance records found"),l("p",{class:"text-sm text-muted-foreground"},"Start tracking your attendance by clocking in")],-1)),s(t(D),{asChild:"",class:"mt-2"},{default:n(()=>[s(t($),{href:"/attendance/clock"},{default:n(()=>[s(t(h),{class:"h-4 w-4 mr-2"}),e[19]||(e[19]=o(" Clock In Now "))]),_:1})]),_:1})])]),_:1})]),_:1})):(i(!0),u(C,{key:2},b(c.clockings.data,(a,w)=>(i(),p(t(A),{key:w,class:"hover:bg-accent/50"},{default:n(()=>[s(t(x),{class:"font-medium"},{default:n(()=>[o(d(a.course_name||"General Attendance"),1)]),_:2},1024),s(t(x),null,{default:n(()=>[o(d(t(_)(a.clock_in)),1)]),_:2},1024),s(t(x),null,{default:n(()=>[o(d(a.clock_out?t(_)(a.clock_out):"—"),1)]),_:2},1024),s(t(x),null,{default:n(()=>[a.clock_out?(i(),u("div",Tt,d(m(a.duration_in_minutes)),1)):(i(),u("div",Rt,[o(d(m(a.current_duration||0))+" ",1),s(t(q),{variant:"secondary",class:"text-xs"},{default:n(()=>e[21]||(e[21]=[o("ongoing")])),_:1})]))]),_:2},1024),s(t(x),null,{default:n(()=>[a.rating?(i(),u("div",Vt,[l("span",qt,d(a.rating),1),l("div",zt,[(i(),u(C,null,b(5,v=>s(t(M),{key:v,class:I(["h-4 w-4",v<=a.rating?"text-yellow-400 fill-current":"text-muted-foreground"])},null,8,["class"])),64))])])):(i(),u("span",Et,"—"))]),_:2},1024),s(t(x),{class:"max-w-xs"},{default:n(()=>[l("div",{class:"truncate",title:a.comment},d(a.comment||"—"),9,jt)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),s(t(S),null,{default:n(()=>[s(t(N),{class:"p-4"},{default:n(()=>[l("div",Gt,[s(t(D),{asChild:"",variant:"outline",size:"sm",disabled:!c.clockings.prev_page_url},{default:n(()=>[c.clockings.prev_page_url?(i(),p(t($),{key:0,href:c.clockings.prev_page_url},{default:n(()=>[s(t(H),{class:"h-4 w-4 mr-1"}),e[22]||(e[22]=o(" Previous "))]),_:1},8,["href"])):(i(),u("span",Ht,[s(t(H),{class:"h-4 w-4 mr-1"}),e[23]||(e[23]=o(" Previous "))]))]),_:1},8,["disabled"]),l("span",Wt," Page "+d(c.clockings.current_page)+" of "+d(c.clockings.last_page),1),s(t(D),{asChild:"",variant:"outline",size:"sm",disabled:!c.clockings.next_page_url},{default:n(()=>[c.clockings.next_page_url?(i(),p(t($),{key:0,href:c.clockings.next_page_url},{default:n(()=>[e[24]||(e[24]=o(" Next ")),s(t(W),{class:"h-4 w-4 ml-1"})]),_:1},8,["href"])):(i(),u("span",Ut,[e[25]||(e[25]=o(" Next ")),s(t(W),{class:"h-4 w-4 ml-1"})]))]),_:1},8,["disabled"])])]),_:1})]),_:1})])]),_:1}))}});export{xs as default};
