import{d as F,r as G,c as D,C as E,a as c,o as i,b as l,u as s,m as O,w as o,e,P as L,f as m,t as d,g as p,h as _,F as w,i as k,n as I}from"./app-BC6n8fRv.js";import{f as R}from"./AppLayout.vue_vue_type_script_setup_true_lang-DLsmvHyL.js";import{_ as A}from"./Button.vue_vue_type_script_setup_true_lang-DfMEe0gp.js";import{_ as C}from"./Card.vue_vue_type_script_setup_true_lang-B7Mv47wR.js";import{_ as $}from"./CardContent.vue_vue_type_script_setup_true_lang-CLFS-8rM.js";import{_ as X}from"./CardDescription.vue_vue_type_script_setup_true_lang-CxAjZMeU.js";import{_ as z}from"./CardHeader.vue_vue_type_script_setup_true_lang-Bs-bQqCd.js";import{_ as S}from"./CardTitle.vue_vue_type_script_setup_true_lang-KDz447Lo.js";import{_ as f}from"./index-d8_ka-Hz.js";import{_ as H}from"./Input.vue_vue_type_script_setup_true_lang-BbfqqDwb.js";import{_ as J}from"./Label.vue_vue_type_script_setup_true_lang-CVOjwGqu.js";import{A as K}from"./arrow-left-C926mVy-.js";import{C as y}from"./circle-check-big-CrYoCEkg.js";import{C as M}from"./circle-x-rKxQ1UVG.js";import{U as W}from"./user-DPozzPfO.js";import{T as Y}from"./target-C6Rmtsxl.js";import{A as Z}from"./award-CiREsJ49.js";import{C as q}from"./clock-CfYQ2E0O.js";import{S as ee}from"./save-Bnwt2SQ_.js";import"./index-B9MCmdtc.js";import"./index-TP6oKz5a.js";import"./_plugin-vue_export-helper-DdW31YSB.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DcqPTA6d.js";const te={class:"max-w-5xl mx-auto space-y-6 pb-12"},se={class:"flex items-center gap-4"},re={class:"text-muted-foreground"},ae={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},le={class:"space-y-3"},de={class:"flex items-center gap-3"},oe={class:"font-medium"},ie={class:"text-sm text-muted-foreground"},ne={class:"flex items-center gap-3"},me={class:"font-medium"},ue={class:"space-y-3"},ce={class:"flex items-center gap-3"},pe={class:"font-medium text-lg"},fe={class:"text-muted-foreground text-base"},_e={key:0,class:"text-xs text-muted-foreground"},ge={class:"flex items-center gap-3"},xe={class:"font-medium"},be={class:"flex items-start justify-between gap-4"},ve={class:"flex items-start gap-3 flex-1"},we={class:"flex-1"},ye={class:"font-medium text-base"},he={class:"flex items-center gap-2 mt-2"},ke={class:"text-right"},Ae={key:0,class:"space-y-2 pl-12"},Ce={class:"flex items-center gap-2 flex-1"},$e=["type","checked"],ze={class:"flex items-center gap-2"},Se={key:1,class:"pl-12 space-y-3"},Me={class:"bg-muted/50 p-4 rounded-lg border"},Ue={class:"whitespace-pre-wrap"},Ve={key:0,class:"bg-yellow-50 dark:bg-yellow-950 p-4 rounded-lg border border-yellow-200 dark:border-yellow-800"},Be={class:"flex items-end gap-3"},Ne={class:"flex-1"},Pe={key:2,class:"pl-12 mt-4"},Te={class:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg border border-blue-200 dark:border-blue-800"},Qe={class:"text-sm text-blue-800 dark:text-blue-200"},je={key:0,class:"flex justify-end pt-4 border-t"},ot=F({__name:"AttemptDetail",props:{attempt:{},user:{},quiz:{},module:{},course:{},questions:{}},setup(U){const n=U,V=[{title:"Course Online",href:"/admin/course-online"},{title:n.course.name,href:`/admin/course-online/${n.course.id}`},{title:n.quiz.title,href:"#"},{title:"Attempts",href:`/admin/course-online/${n.course.id}/modules/${n.module.id}/quiz/${n.quiz.id}/attempts`},{title:`Attempt #${n.attempt.attempt_number}`,href:"#"}],B=n.quiz.total_points>0?(n.attempt.total_score/n.quiz.total_points*100).toFixed(1):0,h=n.questions.filter(t=>t.type==="text"),g=G({});h.forEach(t=>{t.answer_id&&(g.value[t.answer_id]=t.points_earned)});const N=D(()=>h.length>0),x=E({grades:g.value});function P(){x.put(route("admin.module-quiz.grade-attempt",{courseOnline:n.course.id,courseModule:n.module.id,quiz:n.quiz.id,attempt:n.attempt.id}),{preserveScroll:!0})}function b(t,a){return t.correct_answer.includes(a)}function v(t,a){return t.user_answer?Array.isArray(t.user_answer)?t.user_answer.includes(a):t.user_answer===a:!1}function T(t){return t.user_answer?Array.isArray(t.user_answer)?t.user_answer.join(", "):t.user_answer:"No answer provided"}return(t,a)=>(i(),c(w,null,[l(s(O),{title:`Attempt #${t.attempt.attempt_number} - ${t.user.name}`},null,8,["title"]),l(R,{breadcrumbs:V},{default:o(()=>[e("div",te,[e("div",se,[l(s(A),{"as-child":"",variant:"ghost",size:"sm"},{default:o(()=>[l(s(L),{href:t.route("admin.module-quiz.attempts",{courseOnline:t.course.id,courseModule:t.module.id,quiz:t.quiz.id})},{default:o(()=>[l(s(K),{class:"h-4 w-4 mr-2"}),a[0]||(a[0]=m(" Back to Attempts "))]),_:1},8,["href"])]),_:1}),e("div",null,[a[1]||(a[1]=e("h1",{class:"text-2xl font-bold"},"Quiz Attempt Details",-1)),e("p",re,d(t.quiz.title),1)])]),l(s(C),null,{default:o(()=>[l(s(z),null,{default:o(()=>[l(s(S),{class:"flex items-center justify-between"},{default:o(()=>[a[2]||(a[2]=e("span",null,"Attempt Summary",-1)),l(s(f),{variant:t.attempt.passed?"default":"destructive",class:"text-base px-4 py-1"},{default:o(()=>[t.attempt.passed?(i(),p(s(y),{key:0,class:"h-4 w-4 mr-2"})):(i(),p(s(M),{key:1,class:"h-4 w-4 mr-2"})),m(" "+d(t.attempt.passed?"Passed":"Failed"),1)]),_:1},8,["variant"])]),_:1})]),_:1}),l(s($),{class:"space-y-4"},{default:o(()=>[e("div",ae,[e("div",le,[e("div",de,[l(s(W),{class:"h-5 w-5 text-muted-foreground"}),e("div",null,[a[3]||(a[3]=e("p",{class:"text-sm text-muted-foreground"},"Student",-1)),e("p",oe,d(t.user.name),1),e("p",ie,d(t.user.email),1)])]),e("div",ne,[l(s(Y),{class:"h-5 w-5 text-muted-foreground"}),e("div",null,[a[4]||(a[4]=e("p",{class:"text-sm text-muted-foreground"},"Attempt Number",-1)),e("p",me,"#"+d(t.attempt.attempt_number),1)])])]),e("div",ue,[e("div",ce,[l(s(Z),{class:"h-5 w-5 text-muted-foreground"}),e("div",null,[a[5]||(a[5]=e("p",{class:"text-sm text-muted-foreground"},"Score",-1)),e("p",pe,[m(d(t.attempt.total_score)+" / "+d(t.quiz.total_points)+" ",1),e("span",fe,"("+d(s(B))+"%)",1)]),t.attempt.manual_score?(i(),c("p",_e," Auto: "+d(t.attempt.score)+" | Manual: "+d(t.attempt.manual_score),1)):_("",!0)])]),e("div",ge,[l(s(q),{class:"h-5 w-5 text-muted-foreground"}),e("div",null,[a[6]||(a[6]=e("p",{class:"text-sm text-muted-foreground"},"Completed",-1)),e("p",xe,d(t.attempt.completed_at||"In Progress"),1)])])])])]),_:1})]),_:1}),l(s(C),null,{default:o(()=>[l(s(z),null,{default:o(()=>[l(s(S),null,{default:o(()=>a[7]||(a[7]=[m("Questions & Answers")])),_:1}),l(s(X),null,{default:o(()=>a[8]||(a[8]=[m("Review all questions and user responses")])),_:1})]),_:1}),l(s($),{class:"space-y-6"},{default:o(()=>[(i(!0),c(w,null,k(t.questions,(r,Q)=>(i(),c("div",{key:r.id,class:"border rounded-lg p-5 space-y-4"},[e("div",be,[e("div",ve,[l(s(f),{variant:"outline",class:"mt-1"},{default:o(()=>[m("Q"+d(Q+1),1)]),_:2},1024),e("div",we,[e("p",ye,d(r.question_text),1),e("div",he,[r.type!=="text"?(i(),p(s(f),{key:0,variant:"secondary",class:"text-xs"},{default:o(()=>[m(d(r.points)+" pts ",1)]),_:2},1024)):_("",!0),l(s(f),{variant:"outline",class:"text-xs"},{default:o(()=>[m(d(r.type==="radio"?"Single Choice":r.type==="checkbox"?"Multiple Choice":"Text Answer"),1)]),_:2},1024)])])]),e("div",ke,[r.type!=="text"?(i(),p(s(f),{key:0,variant:r.is_correct?"default":"destructive",class:"text-sm"},{default:o(()=>[r.is_correct?(i(),p(s(y),{key:0,class:"h-3 w-3 mr-1"})):(i(),p(s(M),{key:1,class:"h-3 w-3 mr-1"})),m(" "+d(r.points_earned)+" / "+d(r.points),1)]),_:2},1032,["variant"])):(i(),p(s(f),{key:1,variant:"outline",class:"text-sm"},{default:o(()=>a[9]||(a[9]=[m(" Manual Grading ")])),_:1}))])]),r.type!=="text"?(i(),c("div",Ae,[(i(!0),c(w,null,k(r.options,(u,j)=>(i(),c("div",{key:j,class:I(["flex items-center gap-3 p-3 rounded-lg border",{"bg-green-50 dark:bg-green-950 border-green-300 dark:border-green-700":b(r,u),"bg-red-50 dark:bg-red-950 border-red-300 dark:border-red-700":v(r,u)&&!b(r,u),"bg-muted/30":!v(r,u)&&!b(r,u)}])},[e("div",Ce,[e("input",{type:r.type==="radio"?"radio":"checkbox",checked:v(r,u),disabled:"",class:"h-4 w-4"},null,8,$e),e("span",null,d(u),1)]),e("div",ze,[v(r,u)?(i(),p(s(f),{key:0,variant:"outline",class:"text-xs"},{default:o(()=>a[10]||(a[10]=[m(" User's Answer ")])),_:1})):_("",!0),b(r,u)?(i(),p(s(y),{key:1,class:"h-5 w-5 text-green-600 dark:text-green-400"})):_("",!0)])],2))),128))])):(i(),c("div",Se,[e("div",Me,[a[11]||(a[11]=e("p",{class:"text-sm text-muted-foreground mb-1"},"User's Answer:",-1)),e("p",Ue,d(T(r)),1)]),r.answer_id?(i(),c("div",Ve,[e("div",Be,[e("div",Ne,[l(s(J),{for:`grade-${r.answer_id}`,class:"text-sm font-medium text-yellow-900 dark:text-yellow-100"},{default:o(()=>[m(" Assign Points (Max: "+d(r.points)+") ",1)]),_:2},1032,["for"]),l(s(H),{id:`grade-${r.answer_id}`,modelValue:g.value[r.answer_id],"onUpdate:modelValue":u=>g.value[r.answer_id]=u,modelModifiers:{number:!0},type:"number",min:0,max:r.points,class:"mt-1",disabled:s(x).processing},null,8,["id","modelValue","onUpdate:modelValue","max","disabled"])]),l(s(f),{variant:"outline",class:"mb-2"},{default:o(()=>[m(" Current: "+d(r.points_earned)+" pts ",1)]),_:2},1024)])])):_("",!0)])),r.correct_answer_explanation?(i(),c("div",Pe,[e("div",Te,[a[12]||(a[12]=e("p",{class:"text-sm font-medium text-blue-900 dark:text-blue-100 mb-1"},"Explanation:",-1)),e("p",Qe,d(r.correct_answer_explanation),1)])])):_("",!0)]))),128)),N.value?(i(),c("div",je,[l(s(A),{onClick:P,disabled:s(x).processing},{default:o(()=>[l(s(ee),{class:"h-4 w-4 mr-2"}),m(" "+d(s(x).processing?"Saving...":"Save Manual Grades"),1)]),_:1},8,["disabled"])])):_("",!0)]),_:1})]),_:1})])]),_:1})],64))}});export{ot as default};
