import{d as we,c as b,r as E,C as Me,s as C,K as ve,k as Se,o as n,w as H,e,b as pe,u as r,P as je,j as g,l as ze,a,f as u,g as k,F as T,h as U,t as l,i as q,v as O,y as Be,n as w,p as Ee}from"./app-iYB6CK9s.js";import{_ as Ve}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import{M as $e}from"./Modal-Buu6H7ZY.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Te={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8"},Ue={class:"mb-8"},Fe={class:"flex items-center justify-between"},Ae={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Pe={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},De=["disabled"],Le=["value"],Ne={class:"relative"},Re=["disabled"],Ie={value:null},Ce=["value"],He={key:0,class:"absolute right-3 top-2.5"},qe={key:0,class:"mt-1 text-xs text-gray-500"},Oe={key:1,class:"mt-1 text-xs text-yellow-600"},Ge={key:2,class:"mt-1 flex items-center text-sm text-red-600"},Ke={class:"relative"},Je=["disabled"],Qe={value:null},We=["value"],Xe={key:0,class:"absolute right-3 top-2.5"},Ye={key:0,class:"mt-1 text-xs text-gray-500"},Ze={key:1,class:"mt-1 text-xs text-yellow-600"},et={key:2,class:"mt-1 flex items-center text-sm text-red-600"},tt=["disabled"],st={key:0,class:"mt-1 flex items-center text-sm text-red-600"},ot={key:0,class:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg"},rt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 text-sm"},it={class:"text-blue-800"},lt={class:"text-blue-800"},nt={key:0},at={class:"text-blue-800"},dt={key:1},ut={class:"text-blue-800"},ct={class:"text-blue-800"},mt={key:0,class:"space-y-6"},vt={class:"flex items-center justify-between"},pt={class:"text-sm text-gray-500"},gt={class:"grid gap-6"},_t={class:"flex items-start justify-between mb-6"},xt={class:"flex-1"},ft={class:"flex items-center space-x-3 mb-2"},bt={class:"text-lg font-semibold text-gray-900"},yt={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},ht={class:"text-sm text-gray-600"},kt={key:0,class:"text-right"},wt={class:"text-2xl font-bold text-gray-900"},Mt={class:"text-xs text-gray-500"},St={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},jt={class:"space-y-4"},zt={class:"space-y-2"},Bt=["id","onUpdate:modelValue","value","name"],Et=["for"],Vt={class:"flex items-center space-x-3"},$t={class:"shrink-0"},Tt={key:0,class:"w-2 h-2 bg-white rounded-full"},Ut={class:"font-medium text-gray-900"},Ft={class:"text-sm text-gray-600"},At={class:"flex items-center space-x-2"},Pt={key:0,class:"mt-2 flex items-center text-sm text-red-600"},Dt={key:0,class:"space-y-4"},Lt={class:"p-4 bg-gray-50 rounded-lg border border-gray-200"},Nt={class:"space-y-3"},Rt={class:"flex items-center justify-between"},It={class:"flex items-center justify-between"},Ct={class:"text-sm font-bold text-gray-900"},Ht={class:"w-full bg-gray-200 rounded-full h-2"},qt={class:"mt-6"},Ot=["onUpdate:modelValue","disabled"],Gt={key:0,class:"mt-1 flex items-center text-sm text-red-600"},Kt={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Jt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Qt={class:"bg-linear-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4"},Wt={class:"flex items-center"},Xt={class:"ml-4"},Yt={class:"bg-linear-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg p-4"},Zt={class:"flex items-center"},es={class:"ml-4"},ts={class:"text-2xl font-bold text-green-600"},ss={class:"bg-linear-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-lg p-4"},os={class:"flex items-center"},rs={class:"ml-4"},is={class:"text-lg font-bold text-purple-600"},ls={key:0,class:"mb-6 p-4 bg-linear-to-r from-yellow-50 to-amber-50 border border-yellow-200 rounded-lg"},ns={class:"flex items-center"},as={class:"font-semibold text-yellow-900"},ds={class:"text-sm text-yellow-700"},us=["disabled"],cs={key:0,class:"mt-1 flex items-center text-sm text-red-600"},ms={key:2,class:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},vs=["disabled"],ps=["disabled"],gs={key:0,class:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},_s={key:1,class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},xs={key:2},fs={key:3},bs={class:"p-6 sm:p-8"},ys={class:"flex items-start"},hs={class:"ml-4 flex-1"},ks={class:"text-sm text-gray-600 mb-4"},ws={class:"font-semibold"},Ms={class:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6"},Ss={class:"grid grid-cols-2 gap-4 text-sm"},js={class:"font-medium"},zs={class:"font-medium"},Bs={class:"font-medium"},Es={class:"font-medium"},Vs={class:"font-medium"},$s={class:"flex justify-end space-x-3"},Ts=["disabled"],Us={key:0,class:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Fs={key:1},As={key:2},Hs=we({__name:"UserEvaluation",props:{users:{},categories:{},departments:{},courses:{},incentives:{}},setup(ge){const M=ge,F=b(()=>M.users||[]),p=b(()=>M.categories||[]),_e=b(()=>M.departments||[]),V=b(()=>M.courses||[]),N=b(()=>M.incentives||[]),S=E(!1),A=E(!1),_=E(F.value),x=E(V.value),j=E(!1),z=E(!1),o=Me({user_id:null,course_id:null,department_id:null,evaluation_date:new Date().toISOString().split("T")[0],notes:"",categories:[]}),R=()=>{o.categories=p.value.map(i=>({category_id:i.id,evaluation_type_id:null,comments:""}))};C(()=>M.categories,()=>{R()},{immediate:!0}),C(()=>o.department_id,async i=>{if(i){j.value=!0;try{const t=route("admin.evaluations.users-by-department"),s={department_id:i};console.log("Fetching users for department:",i),console.log("Route URL:",t);const v=await ve.get(t,{params:s});_.value=v.data.users||[],console.log("Users loaded:",_.value.length)}catch(t){console.error("Error fetching users by department:",t),_.value=[]}finally{j.value=!1}}else _.value=F.value;o.user_id=null,o.course_id=null,x.value=V.value}),C(()=>o.user_id,async i=>{if(i){z.value=!0;try{const t=route("admin.evaluations.user-courses"),s={user_id:i};console.log("Fetching courses for user:",i),console.log("Route URL:",t);const v=await ve.get(t,{params:s});x.value=v.data.courses||[],console.log("Courses loaded:",x.value.length)}catch(t){console.error("Error fetching user courses:",t);const s=_.value.find(v=>v.id===i);x.value=(s==null?void 0:s.completed_courses)||[]}finally{z.value=!1}}else x.value=V.value;o.course_id=null});const h=b(()=>o.user_id&&_.value.find(i=>i.id===o.user_id)||null),$=b(()=>o.course_id&&x.value.find(i=>i.id===o.course_id)||null),m=(i,t)=>{if(!t)return null;const s=p.value.find(v=>v.id===i);return s&&s.types.find(v=>v.id===t)||null},c=b(()=>o.categories.reduce((i,t)=>{const s=m(t.category_id,t.evaluation_type_id);return i+((s==null?void 0:s.score_value)||0)},0)),G=b(()=>{if(c.value===0)return 0;const i=N.value.find(t=>c.value>=t.min_score&&c.value<=t.max_score);return i?parseFloat(i.incentive_amount.toString()):0}),P=b(()=>{if(c.value===0)return null;const i=N.value.find(t=>c.value>=t.min_score&&c.value<=t.max_score);return i?{range:`${i.min_score}-${i.max_score}`,amount:parseFloat(i.incentive_amount.toString()),tier:xe(i.min_score,i.max_score)}:null}),xe=(i,t)=>{const s=[...N.value].sort((f,L)=>L.min_score-f.min_score);if(!s.find(f=>f.min_score===i&&f.max_score===t))return"Unknown Tier";const y=s.findIndex(f=>f.min_score===i&&f.max_score===t),B=["Exceptional Tier","Excellent Tier","Good Tier","Average Tier","Below Average Tier","Poor Tier","Very Poor Tier"];return y<B.length?B[y]:`Tier ${y+1}`},K=i=>i>=13?{label:"Excellent",class:"text-emerald-700 bg-emerald-100 border-emerald-200"}:i>=10?{label:"Good",class:"text-green-700 bg-green-100 border-green-200"}:i>=7?{label:"Average",class:"text-blue-700 bg-blue-100 border-blue-200"}:i>=4?{label:"Below Average",class:"text-yellow-700 bg-yellow-100 border-yellow-200"}:i>=1?{label:"Poor",class:"text-red-700 bg-red-100 border-red-200"}:{label:"No Score",class:"text-gray-700 bg-gray-100 border-gray-200"},fe=(i,t)=>{const s=i/t*100;return s>=90?"bg-emerald-100 text-emerald-800 border-emerald-200":s>=80?"bg-green-100 text-green-800 border-green-200":s>=70?"bg-blue-100 text-blue-800 border-blue-200":s>=60?"bg-yellow-100 text-yellow-800 border-yellow-200":s>=40?"bg-orange-100 text-orange-800 border-orange-200":"bg-red-100 text-red-800 border-red-200"},D=()=>{A.value=!!(o.user_id&&o.course_id&&o.evaluation_date&&o.categories.length>0&&o.categories.every(i=>i.evaluation_type_id!==null))};function be(){D(),A.value&&(S.value=!0)}function ye(){o.post(route("admin.evaluations.user-evaluation.store"),{onSuccess:()=>{S.value=!1,o.reset(),_.value=F.value,x.value=V.value,R()},onError:i=>{S.value=!1,console.error("Validation errors:",i)}})}function he(){o.reset(),_.value=F.value,x.value=V.value,R()}const ke=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"User Evaluation",href:null}];return(i,t)=>(n(),Se(Ve,{breadcrumbs:ke},{default:H(()=>[e("div",Te,[e("div",Ue,[e("div",Fe,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"User Performance Evaluation"),e("p",{class:"mt-2 text-sm text-gray-600"},"Assess employee performance for completed courses using predefined evaluation criteria.")],-1)),pe(r(je),{href:i.route("admin.evaluations.index"),class:"inline-flex items-center rounded-lg bg-gray-100 px-4 py-2 text-sm font-semibold text-gray-700 transition-colors duration-200 hover:bg-gray-200"},{default:H(()=>t[7]||(t[7]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),g(" Back to Evaluations ")])),_:1},8,["href"])])]),e("form",{onSubmit:ze(be,["prevent"]),class:"space-y-8"},[e("div",Ae,[t[23]||(t[23]=e("div",{class:"flex items-center mb-6"},[e("div",{class:"shrink-0"},[e("div",{class:"flex items-center justify-center h-10 w-10 rounded-lg bg-blue-100"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])])]),e("div",{class:"ml-4"},[e("h2",{class:"text-xl font-semibold text-gray-900"},"Select Department, Employee & Course"),e("p",{class:"text-sm text-gray-600"},"Choose department first, then employee, and finally their completed course")])],-1)),e("div",Pe,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Select Department ",-1)),k(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>r(o).department_id=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:r(o).processing},[t[9]||(t[9]=e("option",{value:null},"All Departments",-1)),(n(!0),a(T,null,U(_e.value,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name),9,Le))),128))],8,De),[[q,r(o).department_id]]),t[11]||(t[11]=e("p",{class:"mt-1 text-xs text-gray-500"}," Filter employees by department ",-1))]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Select Employee "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ne,[k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r(o).user_id=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:r(o).processing||j.value,required:"",onChange:D},[e("option",Ie,l(j.value?"Loading users...":"Choose an employee..."),1),(n(!0),a(T,null,U(_.value,s=>(n(),a("option",{key:s.id,value:s.id},l(s.name)+" "+l(s.department?`(${s.department.name})`:""),9,Ce))),128))],40,Re),[[q,r(o).user_id]]),j.value?(n(),a("div",He,t[12]||(t[12]=[e("svg",{class:"animate-spin h-4 w-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0)]),r(o).department_id?_.value.length===0&&!j.value?(n(),a("p",Oe," No employees found in this department ")):u("",!0):(n(),a("p",qe," Showing all employees ")),r(o).errors.user_id?(n(),a("span",Ge,l(r(o).errors.user_id),1)):u("",!0)]),e("div",null,[t[15]||(t[15]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Select Completed Course "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Ke,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r(o).course_id=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:r(o).processing||!r(o).user_id||z.value,required:"",onChange:D},[e("option",Qe,l(r(o).user_id?z.value?"Loading courses...":"Choose a completed course...":"Select employee first..."),1),(n(!0),a(T,null,U(x.value,s=>(n(),a("option",{key:s.id,value:s.id},l(s.title),9,We))),128))],40,Je),[[q,r(o).course_id]]),z.value?(n(),a("div",Xe,t[14]||(t[14]=[e("svg",{class:"animate-spin h-4 w-4 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):u("",!0)]),r(o).user_id?x.value.length===0&&!z.value?(n(),a("p",Ze," This employee hasn't completed any courses yet ")):u("",!0):(n(),a("p",Ye," Select an employee to see their completed courses ")),r(o).errors.course_id?(n(),a("span",et,l(r(o).errors.course_id),1)):u("",!0)]),e("div",null,[t[16]||(t[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[g(" Evaluation Date "),e("span",{class:"text-red-500"},"*")],-1)),k(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>r(o).evaluation_date=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:r(o).processing,required:""},null,8,tt),[[O,r(o).evaluation_date]]),r(o).errors.evaluation_date?(n(),a("span",st,l(r(o).errors.evaluation_date),1)):u("",!0)])]),h.value&&$.value?(n(),a("div",ot,[t[22]||(t[22]=e("h3",{class:"font-medium text-blue-900 mb-3 flex items-center"},[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),g(" Evaluation Details ")],-1)),e("div",rt,[e("div",null,[t[17]||(t[17]=e("span",{class:"font-medium text-blue-900"},"Employee:",-1)),e("p",it,l(h.value.name),1)]),e("div",null,[t[18]||(t[18]=e("span",{class:"font-medium text-blue-900"},"Course:",-1)),e("p",lt,l($.value.title),1)]),$.value.completed_at?(n(),a("div",nt,[t[19]||(t[19]=e("span",{class:"font-medium text-blue-900"},"Completed:",-1)),e("p",at,l(new Date($.value.completed_at).toLocaleDateString()),1)])):u("",!0),h.value.department?(n(),a("div",dt,[t[20]||(t[20]=e("span",{class:"font-medium text-blue-900"},"Department:",-1)),e("p",ut,l(h.value.department.name),1)])):u("",!0),e("div",null,[t[21]||(t[21]=e("span",{class:"font-medium text-blue-900"},"Email:",-1)),e("p",ct,l(h.value.email),1)])])])):u("",!0)]),r(o).user_id&&r(o).course_id&&p.value.length>0?(n(),a("div",mt,[e("div",vt,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold text-gray-900"},"Evaluation Categories",-1)),e("span",pt,l(p.value.length)+" categories",1)]),e("div",gt,[(n(!0),a(T,null,U(r(o).categories,(s,v)=>{var y,B,f,L,J,Q,W,X,Y,Z,ee,te,se,oe,re,ie,le,ne,ae,de,ue,ce;return n(),a("div",{key:s.category_id,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},[e("div",_t,[e("div",xt,[e("div",ft,[e("h3",bt,l(((y=p.value.find(d=>d.id===s.category_id))==null?void 0:y.name)||"Category"),1),e("span",yt,l(((B=p.value.find(d=>d.id===s.category_id))==null?void 0:B.weight)||0)+"% weight ",1)]),e("p",ht,l(((f=p.value.find(d=>d.id===s.category_id))==null?void 0:f.description)||"No description available"),1)]),m(s.category_id,s.evaluation_type_id)?(n(),a("div",kt,[e("div",wt,l((L=m(s.category_id,s.evaluation_type_id))==null?void 0:L.score_value),1),e("div",Mt," out of "+l((J=p.value.find(d=>d.id===s.category_id))==null?void 0:J.max_score),1)])):u("",!0)]),e("div",St,[e("div",jt,[e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"}," Select Performance Level ",-1)),e("div",zt,[(n(!0),a(T,null,U(((Q=p.value.find(d=>d.id===s.category_id))==null?void 0:Q.types)||[],d=>{var me;return n(),a("div",{key:d.id,class:"relative"},[k(e("input",{id:`type_${s.category_id}_${d.id}`,"onUpdate:modelValue":I=>s.evaluation_type_id=I,value:d.id,type:"radio",name:`category_${s.category_id}`,class:"sr-only",onChange:D},null,40,Bt),[[Be,s.evaluation_type_id]]),e("label",{for:`type_${s.category_id}_${d.id}`,class:w(["flex items-center justify-between p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:bg-gray-50",{"border-indigo-500 bg-indigo-50 ring-2 ring-indigo-200":s.evaluation_type_id===d.id,"border-gray-200":s.evaluation_type_id!==d.id}])},[e("div",Vt,[e("div",$t,[e("div",{class:w(["w-4 h-4 rounded-full border-2 flex items-center justify-center",{"border-indigo-500 bg-indigo-500":s.evaluation_type_id===d.id,"border-gray-300":s.evaluation_type_id!==d.id}])},[s.evaluation_type_id===d.id?(n(),a("div",Tt)):u("",!0)],2)]),e("div",null,[e("p",Ut,l(d.type_name),1),e("p",Ft,l(d.description),1)])]),e("div",At,[e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border",fe(d.score_value,((me=p.value.find(I=>I.id===s.category_id))==null?void 0:me.max_score)||100)])},l(d.score_value)+" pts ",3)])],10,Et)])}),128))]),r(o).errors[`categories.${v}.evaluation_type_id`]?(n(),a("span",Pt,[t[25]||(t[25]=e("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+l(r(o).errors[`categories.${v}.evaluation_type_id`]),1)])):u("",!0)])]),m(s.category_id,s.evaluation_type_id)?(n(),a("div",Dt,[e("div",Lt,[t[29]||(t[29]=e("h4",{class:"font-medium text-gray-900 mb-3 flex items-center"},[e("svg",{class:"mr-2 h-4 w-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})]),g(" Selected Performance Level ")],-1)),e("div",Nt,[e("div",Rt,[t[27]||(t[27]=e("span",{class:"text-sm font-medium text-gray-700"},"Performance:",-1)),e("span",{class:w(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",K(((W=m(s.category_id,s.evaluation_type_id))==null?void 0:W.score_value)||0).class])},l((X=m(s.category_id,s.evaluation_type_id))==null?void 0:X.type_name),3)]),e("div",It,[t[28]||(t[28]=e("span",{class:"text-sm font-medium text-gray-700"},"Score:",-1)),e("span",Ct,l((Y=m(s.category_id,s.evaluation_type_id))==null?void 0:Y.score_value)+" / "+l((Z=p.value.find(d=>d.id===s.category_id))==null?void 0:Z.max_score),1)]),e("div",Ht,[e("div",{class:w(["h-2 rounded-full transition-all duration-300",{"bg-emerald-500":(((ee=m(s.category_id,s.evaluation_type_id))==null?void 0:ee.score_value)||0)>=90,"bg-green-500":(((te=m(s.category_id,s.evaluation_type_id))==null?void 0:te.score_value)||0)>=80&&(((se=m(s.category_id,s.evaluation_type_id))==null?void 0:se.score_value)||0)<90,"bg-blue-500":(((oe=m(s.category_id,s.evaluation_type_id))==null?void 0:oe.score_value)||0)>=70&&(((re=m(s.category_id,s.evaluation_type_id))==null?void 0:re.score_value)||0)<80,"bg-yellow-500":(((ie=m(s.category_id,s.evaluation_type_id))==null?void 0:ie.score_value)||0)>=60&&(((le=m(s.category_id,s.evaluation_type_id))==null?void 0:le.score_value)||0)<70,"bg-orange-500":(((ne=m(s.category_id,s.evaluation_type_id))==null?void 0:ne.score_value)||0)>=40&&(((ae=m(s.category_id,s.evaluation_type_id))==null?void 0:ae.score_value)||0)<60,"bg-red-500":(((de=m(s.category_id,s.evaluation_type_id))==null?void 0:de.score_value)||0)<40}]),style:Ee(`width: ${Math.round((((ue=m(s.category_id,s.evaluation_type_id))==null?void 0:ue.score_value)||0)/(((ce=p.value.find(d=>d.id===s.category_id))==null?void 0:ce.max_score)||100)*100)}%`)},null,6)])])])])):u("",!0)]),e("div",qt,[t[31]||(t[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Detailed Comments & Feedback ",-1)),k(e("textarea",{"onUpdate:modelValue":d=>s.comments=d,rows:"3",class:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 resize-none",disabled:r(o).processing,placeholder:"Provide specific feedback, strengths, areas for improvement, and recommendations..."},null,8,Ot),[[O,s.comments]]),r(o).errors[`categories.${v}.comments`]?(n(),a("span",Gt,[t[30]||(t[30]=e("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+l(r(o).errors[`categories.${v}.comments`]),1)])):u("",!0)])])}),128))])])):u("",!0),r(o).user_id&&r(o).course_id&&r(o).categories.some(s=>s.evaluation_type_id!==null)?(n(),a("div",Kt,[t[41]||(t[41]=e("div",{class:"flex items-center mb-6"},[e("div",{class:"shrink-0"},[e("div",{class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])]),e("div",{class:"ml-4"},[e("h3",{class:"text-xl font-semibold text-gray-900"},"Overall Assessment"),e("p",{class:"text-sm text-gray-600"},"Summary of evaluation results and incentive information")])],-1)),e("div",Jt,[e("div",Qt,[e("div",Wt,[t[33]||(t[33]=e("div",{class:"shrink-0"},[e("svg",{class:"h-8 w-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])],-1)),e("div",Xt,[t[32]||(t[32]=e("p",{class:"text-sm font-medium text-blue-900"},"Total Score",-1)),e("p",{class:w(["text-2xl font-bold",{"text-emerald-600":c.value>=13,"text-green-600":c.value>=10&&c.value<13,"text-blue-600":c.value>=7&&c.value<10,"text-yellow-600":c.value>=4&&c.value<7,"text-red-600":c.value<4}])},l(c.value),3)])])]),e("div",Yt,[e("div",Zt,[t[35]||(t[35]=e("div",{class:"shrink-0"},[e("svg",{class:"h-8 w-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",es,[t[34]||(t[34]=e("p",{class:"text-sm font-medium text-green-900"},"Incentive Amount",-1)),e("p",ts," $"+l(G.value.toFixed(2)),1)])])]),e("div",ss,[e("div",os,[t[37]||(t[37]=e("div",{class:"shrink-0"},[e("svg",{class:"h-8 w-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",rs,[t[36]||(t[36]=e("p",{class:"text-sm font-medium text-purple-900"},"Performance Rating",-1)),e("p",is,l(K(c.value).label),1)])])])]),P.value?(n(),a("div",ls,[e("div",ns,[t[38]||(t[38]=e("svg",{class:"h-6 w-6 text-yellow-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1)),e("div",null,[e("h4",as,l(P.value.tier),1),e("p",ds," Score Range: "+l(P.value.range)+" | Incentive: $"+l(P.value.amount.toFixed(2)),1)])])])):u("",!0),e("div",null,[t[40]||(t[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Overall Notes & Recommendations ",-1)),k(e("textarea",{"onUpdate:modelValue":t[4]||(t[4]=s=>r(o).notes=s),rows:"4",class:"block w-full rounded-lg border border-gray-300 px-4 py-3 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500 resize-none",disabled:r(o).processing,placeholder:"Provide overall assessment, key achievements, development areas, goals for improvement, and recommendations for career development..."},null,8,us),[[O,r(o).notes]]),r(o).errors.notes?(n(),a("span",cs,[t[39]||(t[39]=e("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),g(" "+l(r(o).errors.notes),1)])):u("",!0)])])):u("",!0),r(o).user_id&&r(o).course_id?(n(),a("div",ms,[e("button",{type:"button",onClick:he,class:"inline-flex items-center justify-center rounded-lg bg-gray-100 px-6 py-3 text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-200 focus:outline-hidden focus:ring-2 focus:ring-gray-500",disabled:r(o).processing},t[42]||(t[42]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),g(" Reset Form ")]),8,vs),e("button",{type:"submit",class:w(["inline-flex items-center justify-center rounded-lg bg-indigo-600 px-8 py-3 text-sm font-medium text-white transition-colors duration-200 hover:bg-indigo-700 focus:outline-hidden focus:ring-2 focus:ring-indigo-500 shadow-sm",{"opacity-50 cursor-not-allowed":r(o).processing||!A.value||c.value===0}]),disabled:r(o).processing||!A.value||c.value===0},[r(o).processing?(n(),a("svg",gs,t[43]||(t[43]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):(n(),a("svg",_s,t[44]||(t[44]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),r(o).processing?(n(),a("span",xs,"Submitting Evaluation...")):(n(),a("span",fs,"Submit Evaluation"))],10,ps)])):u("",!0)],32)]),pe($e,{show:S.value,onClose:t[6]||(t[6]=s=>S.value=!1),"max-width":"lg"},{default:H(()=>{var s,v,y;return[e("div",bs,[e("div",ys,[t[55]||(t[55]=e("div",{class:"shrink-0"},[e("div",{class:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",hs,[t[54]||(t[54]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Confirm Evaluation Submission",-1)),e("p",ks,[t[45]||(t[45]=g(" Please review the evaluation details before submitting. This action will record the performance evaluation for ")),e("span",ws,l((s=h.value)==null?void 0:s.name),1),t[46]||(t[46]=g(". "))]),e("div",Ms,[t[52]||(t[52]=e("h4",{class:"font-medium text-gray-900 mb-2"},"Evaluation Summary",-1)),e("div",Ss,[e("div",null,[t[47]||(t[47]=e("span",{class:"text-gray-600"},"Employee:",-1)),e("p",js,l((v=h.value)==null?void 0:v.name),1)]),e("div",null,[t[48]||(t[48]=e("span",{class:"text-gray-600"},"Course:",-1)),e("p",zs,l((y=$.value)==null?void 0:y.title),1)]),e("div",null,[t[49]||(t[49]=e("span",{class:"text-gray-600"},"Date:",-1)),e("p",Bs,l(r(o).evaluation_date),1)]),e("div",null,[t[50]||(t[50]=e("span",{class:"text-gray-600"},"Total Score:",-1)),e("p",Es,l(c.value),1)]),e("div",null,[t[51]||(t[51]=e("span",{class:"text-gray-600"},"Incentive Amount:",-1)),e("p",Vs,"$"+l(G.value.toFixed(2)),1)])])]),e("div",$s,[e("button",{onClick:t[5]||(t[5]=B=>S.value=!1),class:"inline-flex items-center rounded-lg bg-white px-4 py-2 text-sm font-medium text-gray-700 border border-gray-300 transition-colors duration-200 hover:bg-gray-50 focus:outline-hidden focus:ring-2 focus:ring-indigo-500"}," Cancel "),e("button",{onClick:ye,class:"inline-flex items-center rounded-lg bg-green-600 px-6 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-green-500",disabled:r(o).processing},[r(o).processing?(n(),a("svg",Us,t[53]||(t[53]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 818-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):u("",!0),r(o).processing?(n(),a("span",Fs,"Submitting...")):(n(),a("span",As,"Confirm & Submit"))],8,Ts)])])])])]}),_:1},8,["show"])]),_:1}))}});export{Hs as default};
