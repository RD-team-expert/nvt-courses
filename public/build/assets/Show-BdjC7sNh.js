import{d as W,r as d,k as O,o as r,w as p,e,a as l,f as u,b as g,t as a,j as x,n as k,u as M,P as C,F as j,h as A,g as V,i as B,W as L}from"./app-iYB6CK9s.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import{_ as q,a as G,b as J}from"./LoadingModal.vue_vue_type_script_setup_true_lang-Tx-omn7W.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const K={class:"px-4 sm:px-0"},Q={class:"bg-white rounded-lg shadow p-6 mb-6"},X={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4"},Z={class:"flex items-center space-x-4"},ee={class:"shrink-0 h-16 w-16"},te={class:"h-16 w-16 rounded-full bg-blue-100 flex items-center justify-center"},se={class:"text-lg font-bold text-blue-600"},ae={class:"text-2xl font-bold text-gray-900"},ne={class:"text-sm text-gray-600"},oe={class:"mt-2 flex items-center space-x-4"},re={class:"text-sm text-gray-500"},le={key:0,class:"text-sm text-gray-500"},ie={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},de={key:0,class:"border-t pt-4"},me={class:"text-sm text-gray-600"},ue={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},ce={class:"bg-white rounded-lg shadow p-6"},ge={class:"flex items-center"},xe={class:"ml-5 w-0 flex-1"},fe={class:"text-lg font-medium text-gray-900"},ve={class:"bg-white rounded-lg shadow p-6"},he={class:"flex items-center"},pe={class:"ml-5 w-0 flex-1"},be={class:"text-lg font-medium text-gray-900"},ye={class:"bg-white rounded-lg shadow p-6"},we={class:"flex items-center"},_e={class:"ml-5 w-0 flex-1"},ke={class:"text-lg font-medium text-gray-900"},Me={class:"bg-white rounded-lg shadow p-6"},Ce={class:"flex items-center"},je={class:"ml-5 w-0 flex-1"},Ae={class:"text-lg font-medium text-gray-900"},Re={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Se={class:"bg-white rounded-lg shadow"},ze={class:"divide-y divide-gray-200"},De={class:"flex items-center justify-between"},Ve={class:"flex items-center space-x-4"},Be={class:"shrink-0 h-10 w-10"},Le={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},Ne={class:"text-sm font-medium text-gray-600"},Pe={class:"min-w-0 flex-1"},Ee={class:"flex items-center space-x-2"},Te={class:"text-sm font-medium text-gray-900 truncate"},Ue={key:0,class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},He={class:"mt-1 flex items-center space-x-2"},Fe={class:"text-xs text-gray-500"},$e={class:"text-xs text-gray-500 mt-1"},Ie={class:"text-xs text-gray-400 mt-1"},We={class:"shrink-0"},Oe=["onClick"],Ye={key:0,class:"p-6 text-center text-gray-500"},qe={class:"bg-white rounded-lg shadow"},Ge={class:"divide-y divide-gray-200 max-h-96 overflow-y-auto"},Je={class:"flex items-center space-x-4"},Ke={class:"shrink-0 h-10 w-10"},Qe={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},Xe={class:"text-sm font-medium text-gray-600"},Ze={class:"min-w-0 flex-1"},et={class:"text-sm font-medium text-gray-900 truncate"},tt={class:"mt-1 flex items-center space-x-2"},st={key:1,class:"text-xs text-gray-500"},at={class:"text-xs text-gray-500 mt-1"},nt={class:"shrink-0"},ot={key:0,class:"p-6 text-center text-gray-500"},rt={class:"mt-6"},lt={key:0,class:"mt-6"},it={class:"bg-white rounded-lg shadow"},dt={class:"divide-y divide-gray-200"},mt={class:"flex items-center justify-between"},ut={class:"flex items-center space-x-4"},ct={class:"shrink-0 h-10 w-10"},gt={class:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center"},xt={class:"text-sm font-medium text-blue-600"},ft={class:"min-w-0 flex-1"},vt={class:"text-sm font-medium text-gray-900"},ht={class:"text-sm text-gray-500 mt-1"},pt={class:"mt-2 flex items-center space-x-4 text-xs text-gray-500"},bt={class:"shrink-0"},yt={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},wt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},_t={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},kt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Mt={class:"flex items-center mb-4"},Ct={class:"ml-4 text-lg leading-6 font-medium text-gray-900"},jt={class:"space-y-4"},At=["value"],Rt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},St=["disabled"],Et=W({__name:"Show",props:{department:Object,managerRoles:Array,users:Array},setup(n){const v=n,b=d(!1),R=d(!1),y=d(!1),i=d(!1),m=d(""),c=d(""),S=d([]),w=d({type:"info",title:"",message:""}),h=d({title:"",message:"",action:null}),_=d({message:"Loading..."}),f=(o,t,s)=>{w.value={type:o,title:t,message:s},R.value=!0},N=(o,t,s)=>{h.value={title:o,message:t,action:s},y.value=!0},P=o=>{N("Remove Manager Role","Are you sure you want to remove this manager role? This action cannot be undone.",()=>{i.value=!0,_.value.message="Removing manager role...",L.delete(route("admin.departments.remove-manager",{department:v.department.id,role:o}),{preserveState:!0,onSuccess:()=>{i.value=!1,f("success","Success","Manager role removed successfully!")},onError:t=>{i.value=!1,console.error("Remove failed:",t),f("error","Error","Failed to remove manager role. Please try again.")}})})},z=async()=>{try{i.value=!0,_.value.message="Loading available managers...";const o=await fetch(route("admin.departments.manager-candidates",v.department.id));S.value=await o.json(),i.value=!1,b.value=!0}catch(o){i.value=!1,console.error("Failed to load manager candidates:",o),f("error","Error","Failed to load manager candidates. Please try again.")}},E=()=>{if(!c.value||!m.value){f("warning","Validation Error","Please select both manager and role type.");return}i.value=!0,_.value.message="Assigning manager...",L.post(route("admin.departments.assign-manager",v.department.id),{user_id:c.value,role_type:m.value,is_primary:m.value==="department_head"},{preserveState:!0,onSuccess:()=>{i.value=!1,b.value=!1,c.value="",m.value="",f("success","Success","Manager assigned successfully!")},onError:o=>{i.value=!1,console.error("Assign failed:",o),f("error","Error","Failed to assign manager. Please try again.")}})},T=()=>{y.value=!1,h.value.action&&h.value.action()},U=()=>{R.value=!1},H=()=>{y.value=!1},D=()=>{b.value=!1,c.value="",m.value=""},F=o=>({direct_manager:"bg-blue-100 text-blue-800",project_manager:"bg-green-100 text-green-800",department_head:"bg-purple-100 text-purple-800",senior_manager:"bg-red-100 text-red-800",team_lead:"bg-yellow-100 text-yellow-800"})[o]||"bg-gray-100 text-gray-800",$=o=>o&&{L1:"bg-blue-100 text-blue-800",L2:"bg-green-100 text-green-800",L3:"bg-orange-100 text-orange-800",L4:"bg-red-100 text-red-800"}[o]||"bg-gray-100 text-gray-800",I=[{name:"Dashboard",href:route("dashboard")},{name:"Departments",href:route("admin.departments.index")},{name:v.department.name,href:route("admin.departments.show",v.department.id)}];return(o,t)=>(r(),O(Y,{breadcrumbs:I},{default:p(()=>[e("div",K,[e("div",Q,[e("div",X,[e("div",Z,[e("div",ee,[e("div",te,[e("span",se,a(n.department.department_code),1)])]),e("div",null,[e("h1",ae,a(n.department.name),1),e("p",ne,a(n.department.description),1),e("div",oe,[e("span",re,[t[2]||(t[2]=e("strong",null,"Code:",-1)),x(" "+a(n.department.department_code),1)]),n.department.parent_name?(r(),l("span",le,[t[3]||(t[3]=e("strong",null,"Parent:",-1)),x(" "+a(n.department.parent_name),1)])):u("",!0),e("span",{class:k(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":n.department.is_active,"bg-red-100 text-red-800":!n.department.is_active}])},a(n.department.is_active?"Active":"Inactive"),3)])])]),e("div",ie,[g(M(C),{href:o.route("admin.departments.edit",n.department.id),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition w-full sm:w-auto text-center"},{default:p(()=>t[4]||(t[4]=[x(" Edit Department ")])),_:1},8,["href"]),e("button",{onClick:z,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition w-full sm:w-auto"}," Add Manager ")])]),n.department.hierarchy_path?(r(),l("div",de,[e("div",me,[t[5]||(t[5]=e("strong",null,"Hierarchy:",-1)),x(" "+a(n.department.hierarchy_path),1)])])):u("",!0)]),e("div",ue,[e("div",ce,[e("div",ge,[t[7]||(t[7]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),e("div",xe,[e("dl",null,[t[6]||(t[6]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Users",-1)),e("dd",fe,a(n.users.length),1)])])])]),e("div",ve,[e("div",he,[t[9]||(t[9]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])])],-1)),e("div",pe,[e("dl",null,[t[8]||(t[8]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Manager Roles",-1)),e("dd",be,a(n.managerRoles.length),1)])])])]),e("div",ye,[e("div",we,[t[11]||(t[11]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",_e,[e("dl",null,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Sub-Departments",-1)),e("dd",ke,a(n.department.children_count||0),1)])])])]),e("div",Me,[e("div",Ce,[t[13]||(t[13]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})])])],-1)),e("div",je,[e("dl",null,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Active Courses",-1)),e("dd",Ae,a(n.department.active_courses||0),1)])])])])]),e("div",Re,[e("div",Se,[t[17]||(t[17]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Manager Roles")],-1)),e("div",ze,[(r(!0),l(j,null,A(n.managerRoles,s=>(r(),l("div",{key:s.id,class:"p-6"},[e("div",De,[e("div",Ve,[e("div",Be,[e("div",Le,[e("span",Ne,a(s.manager.name.charAt(0).toUpperCase()),1)])]),e("div",Pe,[e("div",Ee,[e("p",Te,a(s.manager.name),1),s.is_primary?(r(),l("span",Ue," Primary ")):u("",!0)]),e("div",He,[e("span",{class:k(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",F(s.role_type)])},a(s.role_display),3),e("span",Fe,a(s.manager.level),1)]),e("p",$e,a(s.manager.email),1),e("p",Ie," Started: "+a(s.start_date),1)])]),e("div",We,[e("button",{onClick:zt=>P(s.id),class:"text-red-600 hover:text-red-900 text-sm font-medium transition-colors"}," Remove ",8,Oe)])])]))),128)),n.managerRoles.length===0?(r(),l("div",Ye,[t[14]||(t[14]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),t[15]||(t[15]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No managers assigned",-1)),t[16]||(t[16]=e("p",{class:"mt-1 text-sm text-gray-500"},"Start by adding a manager to this department.",-1)),e("div",{class:"mt-6"},[e("button",{onClick:z,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"}," Add Manager ")])])):u("",!0)])]),e("div",qe,[t[23]||(t[23]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Department Users")],-1)),e("div",Ge,[(r(!0),l(j,null,A(n.users,s=>(r(),l("div",{key:s.id,class:"p-6"},[e("div",Je,[e("div",Ke,[e("div",Qe,[e("span",Xe,a(s.name.charAt(0).toUpperCase()),1)])]),e("div",Ze,[e("p",et,a(s.name),1),e("div",tt,[s.level?(r(),l("span",{key:0,class:k(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",$(s.level)])},a(s.level),3)):u("",!0),s.employee_code?(r(),l("span",st," ID: "+a(s.employee_code),1)):u("",!0)]),e("p",at,a(s.email),1)]),e("div",nt,[g(M(C),{href:o.route("admin.users.organizational",s.id),class:"text-blue-600 hover:text-blue-900 text-sm font-medium transition-colors"},{default:p(()=>t[18]||(t[18]=[x(" View ")])),_:2},1032,["href"])])])]))),128)),n.users.length===0?(r(),l("div",ot,[t[20]||(t[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})],-1)),t[21]||(t[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No users assigned",-1)),t[22]||(t[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"Users need to be assigned to this department.",-1)),e("div",rt,[g(M(C),{href:o.route("admin.users.assignment"),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors"},{default:p(()=>t[19]||(t[19]=[x(" Assign Users ")])),_:1},8,["href"])])])):u("",!0)])])]),n.department.children&&n.department.children.length>0?(r(),l("div",lt,[e("div",it,[t[25]||(t[25]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h2",{class:"text-lg font-medium text-gray-900"},"Sub-Departments")],-1)),e("div",dt,[(r(!0),l(j,null,A(n.department.children,s=>(r(),l("div",{key:s.id,class:"p-6"},[e("div",mt,[e("div",ut,[e("div",ct,[e("div",gt,[e("span",xt,a(s.department_code),1)])]),e("div",ft,[e("p",vt,a(s.name),1),e("p",ht,a(s.description),1),e("div",pt,[e("span",null,a(s.users_count)+" users",1),e("span",null,a(s.managers_count)+" managers",1)])])]),e("div",bt,[g(M(C),{href:o.route("admin.departments.show",s.id),class:"text-blue-600 hover:text-blue-900 text-sm font-medium transition-colors"},{default:p(()=>t[24]||(t[24]=[x(" View Details ")])),_:2},1032,["href"])])])]))),128))])])])):u("",!0)]),b.value?(r(),l("div",yt,[e("div",wt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:D}),e("div",_t,[e("div",kt,[e("div",Mt,[t[26]||(t[26]=e("div",{class:"mx-auto shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("h3",Ct," Add Manager to "+a(n.department.name),1)]),e("div",jt,[e("div",null,[t[28]||(t[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Manager",-1)),V(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},[t[27]||(t[27]=e("option",{value:""},"Select Manager",-1)),(r(!0),l(j,null,A(S.value,s=>(r(),l("option",{key:s.id,value:s.id},a(s.name)+" ("+a(s.level)+") - "+a(s.department),9,At))),128))],512),[[B,c.value]])]),e("div",null,[t[30]||(t[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Role Type",-1)),V(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>m.value=s),class:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"},t[29]||(t[29]=[e("option",{value:""},"Select Role Type",-1),e("option",{value:"department_head"},"Department Head",-1),e("option",{value:"senior_manager"},"Senior Manager",-1),e("option",{value:"direct_manager"},"Direct Manager",-1),e("option",{value:"project_manager"},"Project Manager",-1),e("option",{value:"team_lead"},"Team Lead",-1)]),512),[[B,m.value]])])])]),e("div",Rt,[e("button",{onClick:E,type:"button",class:k(["w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors",{"opacity-50 cursor-not-allowed":!c.value||!m.value}]),disabled:!c.value||!m.value}," Assign Manager ",10,St),e("button",{onClick:D,type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm transition-colors"}," Cancel ")])])])])):u("",!0),g(q,{show:R.value,type:w.value.type,title:w.value.title,message:w.value.message,"auto-close":!0,duration:4e3,onClose:U},null,8,["show","type","title","message"]),g(G,{show:y.value,title:h.value.title,message:h.value.message,"confirm-text":"Yes, Remove","cancel-text":"Cancel",type:"danger",onConfirm:T,onCancel:H},null,8,["show","title","message"]),g(J,{show:i.value,message:_.value.message},null,8,["show","message"])]),_:1}))}});export{Et as default};
