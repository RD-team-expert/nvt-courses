import{d as oe,a as l,o as a,B as he,n as b,u as e,r as D,l as K,C as B,c as X,g,w as r,h as c,e as o,b as n,f as m,t as u,P as M,F as N,i as j,W as R}from"./app-BMyidKIh.js";import{f as ye}from"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import{b as pe,_ as v}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as p}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_ as $}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as be}from"./CardDescription.vue_vue_type_script_setup_true_lang-CvcJ_Am_.js";import{_ as J}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as Q}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as k}from"./index-C3o0bvIk.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{_ as ve}from"./Textarea.vue_vue_type_script_setup_true_lang-7L_wYbMO.js";import{_ as ke,a as Ae}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BXG9Ar2o.js";import{_ as w,a as S}from"./index-yEoCS5nH.js";import{T as Z}from"./triangle-alert-BGzxpn4P.js";import{X as O,_ as _e}from"./_plugin-vue_export-helper-Cg8ARLjz.js";import{C as we}from"./clipboard-list-CnapTJIb.js";import{C as ee}from"./check-C-CvZSBJ.js";import{B as Y}from"./book-open-CrgjHHRr.js";import{C as P}from"./calendar-CBip7zgp.js";import{C as q}from"./clock-C9ZtgHl0.js";import{C as se}from"./calendar-days-uZQclDDS.js";import{T as te}from"./timer-Czq6R-a8.js";import{L as z}from"./loader-circle-DC9_B6-i.js";import{A as Se}from"./arrow-right-kiIeg0oo.js";import{S as I}from"./star-q_-i1cU2.js";import{C as Ce}from"./circle-check-big-Cmw2hoxS.js";import{T as Te}from"./trophy-Cy9RXa5c.js";import{M as Ee}from"./map-pin-DxM6qw_6.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./useForwardExpose-DMAVYlpA.js";import"./RovingFocusItem-90_8jXtr.js";import"./Presence-D_88WakH.js";import"./ConfigProvider-BNe-qVox.js";import"./Collection-CjETHI6E.js";import"./usePrimitiveElement-s00YWk2f.js";import"./VisuallyHidden-hOZS4qMA.js";import"./VisuallyHiddenInput-BJXawX5X.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./ohash.D__AXeF1-DHF4M4F_.js";const C=oe({__name:"AlertTitle",props:{class:{}},setup(t){const f=t;return(A,L)=>(a(),l("h5",{class:b(e(pe)("mb-1 font-medium leading-none tracking-tight",f.class))},[he(A.$slots,"default")],2))}}),De={class:"container px-4 mx-auto py-6 sm:py-8 max-w-7xl space-y-6"},Re={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},$e={class:"text-2xl sm:text-3xl font-bold text-foreground"},Pe={class:"mt-2"},Le={class:"flex items-start justify-between"},Fe={class:"flex items-start space-x-3"},Ve={key:0},Be={key:1},Me={key:2},Ne={key:3},je={class:"flex gap-3"},Ue={class:"grid grid-cols-1 lg:grid-cols-3 gap-6 sm:gap-8"},Oe={class:"relative bg-muted overflow-hidden aspect-video"},Ye=["src","alt"],qe={key:1,class:"absolute inset-0 flex items-center justify-center bg-gradient-to-br from-muted to-muted/80"},ze=["innerHTML"],Ie={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},We={class:"flex items-center space-x-2 text-muted-foreground mb-2"},Ge={class:"font-semibold text-foreground"},He={class:"flex items-center space-x-2 text-muted-foreground mb-2"},Ke={class:"font-semibold text-foreground"},Xe={class:"flex items-center space-x-2 text-muted-foreground mb-2"},Je={class:"font-semibold text-foreground capitalize"},Qe={class:"flex items-center space-x-2 text-muted-foreground mb-2"},Ze={class:"font-semibold text-foreground"},es={key:0},ss={key:0},ts={key:3},os={class:"space-y-3"},ns={class:"flex justify-between items-start"},is={class:"font-medium text-foreground"},as={class:"text-sm text-muted-foreground mt-1"},rs={class:"border-t pt-3 space-y-2"},ls={key:0,class:"flex items-center space-x-2"},ds={key:1,class:"flex items-center space-x-2"},us={class:"text-sm font-medium text-foreground"},cs={key:2,class:"flex items-start space-x-2"},ms={class:"flex-1"},fs={class:"mt-1 space-y-1"},gs={key:0,class:"text-sm font-medium text-foreground"},xs={key:1,class:"text-sm font-medium text-foreground"},hs={key:3,class:"flex items-center space-x-2"},ys={class:"text-sm font-medium text-foreground"},ps={class:"border-t pt-3 space-y-1"},bs={class:"text-sm text-primary font-medium"},vs={class:"text-sm text-green-600 font-medium"},ks={key:0,class:"text-xs text-muted-foreground"},As={key:0,class:"border-t pt-3"},_s={class:"text-sm text-muted-foreground"},ws={key:5},Ss={key:1},Cs={key:2},Ts={key:3},Es={key:4},Ds={class:"space-y-4"},Rs={class:"flex items-center p-4 bg-muted rounded-lg"},$s={class:"font-medium text-foreground"},Ps={class:"space-y-4"},Ls={class:"flex space-x-1 mt-2"},Fs={key:0,class:"text-destructive text-sm mt-1"},Vs={key:1},Bs={key:2},Ms={key:0,class:"mb-4"},Ns={class:"flex items-center space-x-2"},js={class:"flex"},Us={key:2},Os={key:3},Ys={class:"flex items-center space-x-2 mb-3"},qs={class:"space-y-3"},zs={class:"font-semibold text-foreground"},Is={class:"text-sm text-muted-foreground"},Ws={class:"border-t pt-3 space-y-2 text-sm"},Gs={key:0,class:"flex items-center space-x-2"},Hs={key:1,class:"flex items-center space-x-2"},Ks={class:"font-medium text-foreground"},Xs={key:2,class:"flex items-start space-x-2"},Js={class:"flex-1"},Qs={class:"mt-1 space-y-1"},Zs={key:0,class:"font-medium text-foreground"},et={key:1,class:"font-medium text-foreground"},st={key:3,class:"flex items-center space-x-2"},tt={class:"font-medium text-foreground"},ot={class:"border-t pt-3 space-y-1 text-xs"},nt={class:"text-primary font-medium"},it={class:"text-green-600 font-medium"},at={class:"text-muted-foreground"},rt=oe({__name:"Show",props:{course:Object,isEnrolled:Boolean,userStatus:String,selectedAvailability:Object,availabilities:Array,userAssignment:Object,completion:Object},setup(t){const f=t,A=D(!1),L=D(""),W=D(""),h=(i,s)=>{W.value=i,L.value=s,A.value=!0,setTimeout(()=>{A.value=!1},6e3)},ne=()=>{A.value=!1},F=D(0);K(()=>f.completion,(i,s)=>{console.log("Completion changed:",s,"->",i),F.value+=1},{deep:!0}),K(()=>f.userStatus,(i,s)=>{console.log("UserStatus changed:",s,"->",i),F.value+=1});const x=B({rating:0,feedback:""}),V=X(()=>{const i=f.completion&&f.completion.rating!==null;return console.log("hasRated computed:",i,"completion:",f.completion),i});X(()=>f.isEnrolled&&(f.userStatus==="pending"||f.userStatus==="in_progress")&&V.value);function ie(){console.log("=== VUE SUBMIT RATING START ==="),console.log("Rating form data:",x.data()),x.post(route("courses.submitRating",f.course.id),{onSuccess:i=>{console.log("✅ Rating submitted successfully"),R.reload({only:["completion","userStatus","isEnrolled"]})},onError:i=>{console.error("❌ Rating submission failed:",i),i.message?h("Rating Submission Failed",i.message):i.feedback?h("Feedback Required",i.feedback):h("Rating Error","There was an error submitting your rating. Please try again.")}})}const y=B({course_availability_id:null});function ae(){if(console.log("=== ENROLLMENT DEBUG START ==="),f.availabilities&&f.availabilities.length>0&&!y.course_availability_id){h("Session Selection Required","Please select a session schedule before enrolling in this course.");return}y.post(route("courses.enroll",f.course.id),{preserveState:!0,onSuccess:i=>{console.log("✅ Enrollment SUCCESS!"),R.reload({only:["isEnrolled","userStatus","selectedAvailability"]})},onError:i=>{console.error("❌ Enrollment FAILED!",i),i.message?i.message.includes("no longer available")?h("📅 Session No Longer Available","Sorry, the selected session schedule is no longer available. Please choose a different session or refresh the page to see updated availability."):i.message.includes("fully booked")?h("📋 Session Fully Booked","This session is now fully booked. Please select a different session schedule with available spots."):i.message.includes("already enrolled")?h("✅ Already Enrolled","You are already enrolled in this course. Please refresh the page to see your current enrollment status."):h("Enrollment Error",i.message):i.course_availability_id?h("Session Selection Error",i.course_availability_id):h("⚠️ Enrollment Failed","We encountered an issue while processing your enrollment. Please refresh the page and try again, or contact support if the problem persists."),setTimeout(()=>{R.reload({only:["availabilities","isEnrolled","userStatus"]})},3e3)}})}const T=B({});function re(){console.log("=== VUE MARK COMPLETED START ==="),T.post(route("courses.markCompleted",f.course.id),{onSuccess:i=>{console.log("✅ Course marked as completed"),R.reload({only:["userStatus"]})},onError:i=>{console.error("❌ Failed to mark course as completed:",i),i.message?h("Completion Error",i.message):h("Unable to Complete","There was an error marking this course as completed. Please try again.")}})}const le=i=>{switch(i){case"in_progress":return"default";case"pending":return"secondary";case"completed":return"outline";default:return"outline"}},de=i=>{switch(i){case"pending":return"secondary";case"accepted":return"default";case"declined":return"destructive";case"completed":return"outline";default:return"outline"}},ue=i=>i?i===1?"1 Total Session":`${i} seats available`:"Capacity not specified",ce=i=>i==null?"Sessions not available":i===0?"No sessions available":i===1?"1 Session Available":`${i} Total Sessions`,me=i=>{const s=(i==null?void 0:i.sessions)||0;return s<=0?"destructive":s<=2?"secondary":"default"},fe=i=>{const s=(i==null?void 0:i.sessions)||0;return s<=0?"Fully Booked":s===1?"1 Session Available":`${s} Sessions Available`},ge=i=>({pending:"Pending",in_progress:"In Progress",completed:"Completed"})[i]||i,E=i=>{if(!i)return"—";const s=new Date(i);return s.toLocaleDateString()+" at "+s.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},G=i=>i?new Date(i).toLocaleDateString():"—",H=i=>((i==null?void 0:i.sessions)||0)<=0||!(i!=null&&i.is_available)||f.userAssignment&&f.userAssignment.status==="pending",xe=[{name:"Dashboard",href:route("dashboard")},{name:"Courses",href:route("courses.index")},{name:f.course.name,href:route("courses.show",f.course.id)}];return(i,s)=>(a(),g(ye,{breadcrumbs:xe},{default:r(()=>[A.value?(a(),g(e(w),{key:0,class:"fixed top-4 right-4 z-50 max-w-md border-destructive"},{default:r(()=>[n(e(Z),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>[m(u(W.value),1)]),_:1}),n(e(S),null,{default:r(()=>[m(u(L.value),1)]),_:1}),n(e(v),{onClick:ne,variant:"ghost",size:"sm",class:"absolute top-2 right-2"},{default:r(()=>[n(e(O),{class:"h-4 w-4"})]),_:1})]),_:1})):c("",!0),o("div",De,[o("div",Re,[o("div",null,[o("h1",$e,u(t.course.name),1),o("div",Pe,[n(e(k),{variant:t.course.privacy==="public"?"default":"secondary",class:"text-xs"},{default:r(()=>[m(u(t.course.privacy==="public"?"🌍 Public Course":"🔒 Private Course"),1)]),_:1},8,["variant"])])]),n(e(k),{variant:le(t.course.status)},{default:r(()=>[m(u(ge(t.course.status)),1)]),_:1},8,["variant"])]),t.userAssignment?(a(),g(e(p),{key:0,class:b(["border-l-4",{"border-l-yellow-500":t.userAssignment.status==="pending","border-l-green-500":t.userAssignment.status==="accepted","border-l-red-500":t.userAssignment.status==="declined","border-l-blue-500":t.userAssignment.status==="completed"}])},{default:r(()=>[n(e(J),null,{default:r(()=>[o("div",Le,[o("div",Fe,[n(e(we),{class:b(["h-5 w-5 mt-0.5",{"text-yellow-500":t.userAssignment.status==="pending","text-green-500":t.userAssignment.status==="accepted","text-red-500":t.userAssignment.status==="declined","text-blue-500":t.userAssignment.status==="completed"}])},null,8,["class"]),o("div",null,[n(e(Q),{class:"text-lg"},{default:r(()=>[t.userAssignment.status==="pending"?(a(),l("span",Ve,"📋 Course Assignment - Action Required")):t.userAssignment.status==="accepted"?(a(),l("span",Be,"✅ Course Assignment - Accepted")):t.userAssignment.status==="declined"?(a(),l("span",Me,"❌ Course Assignment - Declined")):t.userAssignment.status==="completed"?(a(),l("span",Ne,"🎉 Course Assignment - Completed")):c("",!0)]),_:1}),t.userAssignment.assigned_by?(a(),g(e(be),{key:0},{default:r(()=>[m(" Assigned by: "+u(t.userAssignment.assigned_by),1)]),_:1})):c("",!0)])]),n(e(k),{variant:de(t.userAssignment.status)},{default:r(()=>[m(u(t.userAssignment.status.charAt(0).toUpperCase()+t.userAssignment.status.slice(1)),1)]),_:1},8,["variant"])])]),_:1}),t.userAssignment.status==="pending"?(a(),g(e($),{key:0},{default:r(()=>[o("div",je,[n(e(v),{as:e(M),href:i.route("assignments.accept",t.userAssignment.id),method:"post"},{default:r(()=>[n(e(ee),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=m(" Accept Assignment "))]),_:1},8,["as","href"]),n(e(v),{as:e(M),href:i.route("assignments.decline",t.userAssignment.id),method:"post",variant:"outline"},{default:r(()=>[n(e(O),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=m(" Decline Assignment "))]),_:1},8,["as","href"])])]),_:1})):c("",!0)]),_:1},8,["class"])):c("",!0),o("div",Ue,[n(e(p),{class:"lg:col-span-2 group hover:shadow-lg transition-all duration-200"},{default:r(()=>[o("div",Oe,[t.course.image_path?(a(),l("img",{key:0,src:`/storage/${t.course.image_path}`,alt:t.course.name,class:"absolute inset-0 w-full h-full object-fill transition-transform duration-500 group-hover:scale-105",loading:"lazy"},null,8,Ye)):(a(),l("div",qe,[n(e(Y),{class:"w-12 h-12 text-muted-foreground"})]))]),n(e($),{class:"p-6 sm:p-8"},{default:r(()=>[o("div",{class:"prose max-w-none mb-8 text-foreground",innerHTML:t.course.description},null,8,ze),o("div",Ie,[n(e(p),{class:"p-4"},{default:r(()=>[o("div",We,[n(e(P),{class:"h-4 w-4"}),s[4]||(s[4]=o("span",{class:"text-sm font-medium"},"Start Date",-1))]),o("p",Ge,u(G(t.course.start_date)),1)]),_:1}),n(e(p),{class:"p-4"},{default:r(()=>[o("div",He,[n(e(P),{class:"h-4 w-4"}),s[5]||(s[5]=o("span",{class:"text-sm font-medium"},"End Date",-1))]),o("p",Ke,u(G(t.course.end_date)),1)]),_:1}),t.course.level?(a(),g(e(p),{key:0,class:"p-4"},{default:r(()=>[o("div",Xe,[n(e(k),{variant:"outline",class:"text-xs"},{default:r(()=>s[6]||(s[6]=[m("Level")])),_:1})]),o("p",Je,u(t.course.level),1)]),_:1})):c("",!0),t.course.duration?(a(),g(e(p),{key:1,class:"p-4"},{default:r(()=>[o("div",Qe,[n(e(q),{class:"h-4 w-4"}),s[7]||(s[7]=o("span",{class:"text-sm font-medium"},"Total Duration",-1))]),o("p",Ze,u(t.course.duration)+" hours",1)]),_:1})):c("",!0)])]),_:1})]),_:1}),n(e(p),{class:"h-fit"},{default:r(()=>[n(e(J),null,{default:r(()=>[n(e(Q),{class:"flex items-center"},{default:r(()=>[n(e(Y),{class:"mr-2 h-5 w-5"}),s[8]||(s[8]=m(" Course Enrollment "))]),_:1})]),_:1}),n(e($),{class:"space-y-6"},{default:r(()=>[t.isEnrolled?(a(),l("div",{class:"space-y-6",key:F.value},[o("div",Ds,[o("div",Rs,[o("div",{class:b(["w-3 h-3 rounded-full mr-3",{"bg-green-500":t.userStatus==="completed","bg-primary":t.userStatus==="pending"||t.userStatus==="in_progress"}])},null,2),o("span",$s," Status: "+u(t.userStatus==="completed"?"Completed":"Enrolled"),1)]),(t.userStatus==="pending"||t.userStatus==="in_progress")&&!V.value?(a(),g(e(w),{key:0,class:"border-yellow-200"},{default:r(()=>{var d;return[n(e(I),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>s[24]||(s[24]=[m("📋 Rate This Course First")])),_:1}),n(e(S),{class:"mb-4"},{default:r(()=>s[25]||(s[25]=[m(" Please rate this course before marking it as complete. ")])),_:1}),o("div",Ps,[o("div",null,[n(e(U),{class:"text-sm font-medium"},{default:r(()=>s[26]||(s[26]=[m("Your Rating")])),_:1}),o("div",Ls,[(a(),l(N,null,j(5,_=>n(e(v),{key:_,type:"button",onClick:lt=>e(x).rating=_,variant:"ghost",size:"sm",class:"p-1"},{default:r(()=>[n(e(I),{class:b(["h-6 w-6",{"text-yellow-400 fill-current":_<=e(x).rating,"text-muted-foreground":_>e(x).rating}])},null,8,["class"])]),_:2},1032,["onClick"])),64))])]),o("div",null,[n(e(U),{class:"text-sm font-medium"},{default:r(()=>s[27]||(s[27]=[m(" Feedback "),o("span",{class:"text-destructive"},"*",-1)])),_:1}),n(e(ve),{modelValue:e(x).feedback,"onUpdate:modelValue":s[1]||(s[1]=_=>e(x).feedback=_),placeholder:"Please share your thoughts about this course... (required)",class:b(["mt-2",{"border-destructive":e(x).errors.feedback}]),required:""},null,8,["modelValue","class"]),e(x).errors.feedback?(a(),l("div",Fs,u(e(x).errors.feedback),1)):c("",!0),s[28]||(s[28]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Minimum 10 characters required",-1))]),n(e(v),{onClick:ie,disabled:e(x).processing||e(x).rating===0||!((d=e(x).feedback)!=null&&d.trim())||e(x).feedback.trim().length<10,class:"w-full"},{default:r(()=>[e(x).processing?(a(),g(e(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):c("",!0),e(x).processing?(a(),l("span",Vs,"Submitting Rating...")):(a(),l("span",Bs,"Submit Rating"))]),_:1},8,["disabled"])])]}),_:1})):(t.userStatus==="pending"||t.userStatus==="in_progress")&&V.value?(a(),g(e(w),{key:1,class:"border-green-200"},{default:r(()=>[n(e(Ce),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>s[29]||(s[29]=[m("✅ Ready to Complete")])),_:1}),n(e(S),{class:"mb-4"},{default:r(()=>s[30]||(s[30]=[m(" Thank you for rating! You can now mark this course as completed. ")])),_:1}),t.completion&&t.completion.rating?(a(),l("div",Ms,[o("div",Ns,[s[31]||(s[31]=o("span",{class:"text-sm"},"Your rating:",-1)),o("div",js,[(a(),l(N,null,j(5,d=>n(e(I),{key:d,class:b(["h-4 w-4",d<=t.completion.rating?"text-yellow-400 fill-current":"text-muted-foreground"])},null,8,["class"])),64))])])])):c("",!0),n(e(v),{onClick:re,disabled:e(T).processing,class:"w-full"},{default:r(()=>[e(T).processing?(a(),g(e(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(a(),g(e(ee),{key:1,class:"mr-2 h-4 w-4"})),e(T).processing?(a(),l("span",Us,"Processing...")):(a(),l("span",Os,"Mark as Completed"))]),_:1},8,["disabled"])]),_:1})):t.userStatus==="completed"?(a(),g(e(w),{key:2,class:"border-green-200"},{default:r(()=>[n(e(Te),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>s[32]||(s[32]=[m("🎉 Course Completed!")])),_:1}),n(e(S),{class:"mb-4"},{default:r(()=>s[33]||(s[33]=[m(" Congratulations! You've successfully completed all sessions in this course. ")])),_:1}),n(e(v),{as:e(M),href:"/courses",class:"w-full"},{default:r(()=>[n(e(Y),{class:"mr-2 h-4 w-4"}),s[34]||(s[34]=m(" Browse More Courses "))]),_:1},8,["as"])]),_:1})):c("",!0),t.selectedAvailability?(a(),g(e(p),{key:3,class:"bg-primary/5 border-primary/20"},{default:r(()=>[n(e($),{class:"p-4"},{default:r(()=>[o("div",Ys,[n(e(Ee),{class:"h-4 w-4 text-primary"}),s[35]||(s[35]=o("span",{class:"text-sm font-medium text-primary"},"Your Selected Session Schedule",-1))]),o("div",qs,[o("div",null,[o("p",zs,u(t.selectedAvailability.formatted_date_range),1),o("p",Is,u(E(t.selectedAvailability.start_date))+" - "+u(E(t.selectedAvailability.end_date)),1)]),o("div",Ws,[s[40]||(s[40]=o("h4",{class:"text-xs font-semibold text-foreground uppercase tracking-wide"},"Schedule Details",-1)),t.selectedAvailability.formatted_days&&t.selectedAvailability.formatted_days!=="N/A"?(a(),l("div",Gs,[n(e(se),{class:"h-4 w-4 text-muted-foreground"}),s[36]||(s[36]=o("span",{class:"text-muted-foreground"},"Days:",-1)),n(e(k),{variant:"outline",class:"text-xs"},{default:r(()=>[m(u(t.selectedAvailability.formatted_days),1)]),_:1})])):c("",!0),t.selectedAvailability.duration_weeks?(a(),l("div",Hs,[n(e(P),{class:"h-4 w-4 text-muted-foreground"}),s[37]||(s[37]=o("span",{class:"text-muted-foreground"},"Duration:",-1)),o("span",Ks,u(t.selectedAvailability.duration_weeks)+" weeks",1)])):c("",!0),t.selectedAvailability.session_time_shift_2||t.selectedAvailability.session_time_shift_3?(a(),l("div",Xs,[n(e(te),{class:"h-4 w-4 text-muted-foreground mt-0.5"}),o("div",Js,[s[38]||(s[38]=o("span",{class:"text-muted-foreground"},"Session Times:",-1)),o("div",Qs,[t.selectedAvailability.session_time_shift_2?(a(),l("div",Zs," Shift 2: "+u(t.selectedAvailability.session_time_shift_2),1)):c("",!0),t.selectedAvailability.session_time_shift_3?(a(),l("div",et," Shift 3: "+u(t.selectedAvailability.session_time_shift_3),1)):c("",!0)])])])):c("",!0),t.selectedAvailability.formatted_session_duration?(a(),l("div",st,[n(e(q),{class:"h-4 w-4 text-muted-foreground"}),s[39]||(s[39]=o("span",{class:"text-muted-foreground"},"Length:",-1)),o("span",tt,u(t.selectedAvailability.formatted_session_duration),1)])):c("",!0)]),o("div",ot,[o("p",nt," Total Capacity: "+u(t.selectedAvailability.capacity)+" sessions ",1),o("p",it," Available: "+u(t.selectedAvailability.sessions)+" sessions ",1),o("p",at," Enrolled: "+u(t.selectedAvailability.capacity-t.selectedAvailability.sessions)+" sessions ",1)])])]),_:1})]),_:1})):c("",!0)])])):(a(),l("div",es,[t.userAssignment&&t.userAssignment.status==="accepted"?(a(),l("div",ss,s[9]||(s[9]=[o("p",{class:"text-muted-foreground mb-6 leading-relaxed"}," This course has been assigned to you. Select a session schedule to complete your enrollment. ",-1)]))):t.userAssignment&&t.userAssignment.status==="pending"?(a(),g(e(w),{key:1,class:"border-yellow-200"},{default:r(()=>[n(e(Z),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>s[10]||(s[10]=[m("Assignment Pending")])),_:1}),n(e(S),null,{default:r(()=>s[11]||(s[11]=[m(" Please accept your course assignment above to proceed with enrollment. ")])),_:1})]),_:1})):t.userAssignment&&t.userAssignment.status==="declined"?(a(),g(e(w),{key:2,class:"border-destructive"},{default:r(()=>[n(e(O),{class:"h-4 w-4"}),n(e(C),null,{default:r(()=>s[12]||(s[12]=[m("Assignment Declined")])),_:1}),n(e(S),null,{default:r(()=>s[13]||(s[13]=[m(" You have declined this course assignment. Contact your administrator if you'd like to reconsider. ")])),_:1})]),_:1})):(a(),l("div",ts,s[14]||(s[14]=[o("p",{class:"text-muted-foreground mb-6 leading-relaxed"}," Select a session schedule and enroll in this course to track your progress. ",-1)]))),t.availabilities&&t.availabilities.length>0?(a(),l("div",{key:4,class:b(["space-y-4",{"opacity-50":t.userAssignment&&t.userAssignment.status==="pending"}])},[n(e(U),{class:"text-base font-semibold"},{default:r(()=>s[15]||(s[15]=[m("Available Session Schedules:")])),_:1}),n(e(ke),{modelValue:e(y).course_availability_id,"onUpdate:modelValue":s[0]||(s[0]=d=>e(y).course_availability_id=d),disabled:t.userAssignment&&t.userAssignment.status==="pending",class:"space-y-3"},{default:r(()=>[(a(!0),l(N,null,j(t.availabilities,d=>(a(),l("div",{key:d.id,class:"flex items-start space-x-3"},[n(e(Ae),{value:d.id.toString(),disabled:H(d),class:"mt-1 w-6 h-6 rounded-full border-2 border-gray-400 bg-white hover:border-primary focus:border-primary focus:ring-2 focus:ring-primary focus:ring-offset-2 data-[state=checked]:border-primary data-[state=checked]:bg-primary transition-all duration-200"},{default:r(()=>s[16]||(s[16]=[o("div",{class:"w-full h-full rounded-full flex items-center justify-center"},[o("div",{class:"w-2.5 h-2.5 rounded-full bg-white opacity-0 data-[state=checked]:opacity-100 transition-opacity duration-200"})],-1)])),_:2},1032,["value","disabled"]),n(e(p),{class:b(["flex-1 p-4",{"border-primary ring-2 ring-primary ring-opacity-20":e(y).course_availability_id===d.id.toString(),"opacity-50":H(d)}])},{default:r(()=>[o("div",os,[o("div",ns,[o("div",null,[o("p",is,u(d.formatted_date_range),1),o("p",as,u(E(d.start_date))+" - "+u(E(d.end_date)),1)]),n(e(k),{variant:me(d)},{default:r(()=>[m(u(fe(d)),1)]),_:2},1032,["variant"])]),o("div",rs,[s[21]||(s[21]=o("h4",{class:"text-xs font-semibold text-foreground uppercase tracking-wide"},"Schedule Details",-1)),d.formatted_days&&d.formatted_days!=="N/A"?(a(),l("div",ls,[n(e(se),{class:"h-4 w-4 text-muted-foreground"}),s[17]||(s[17]=o("span",{class:"text-sm text-muted-foreground"},"Days:",-1)),n(e(k),{variant:"outline",class:"text-xs"},{default:r(()=>[m(u(d.formatted_days),1)]),_:2},1024)])):c("",!0),d.duration_weeks?(a(),l("div",ds,[n(e(P),{class:"h-4 w-4 text-muted-foreground"}),s[18]||(s[18]=o("span",{class:"text-sm text-muted-foreground"},"Duration:",-1)),o("span",us,u(d.duration_weeks)+" weeks",1)])):c("",!0),d.session_time_shift_2||d.session_time_shift_3?(a(),l("div",cs,[n(e(te),{class:"h-4 w-4 text-muted-foreground mt-0.5"}),o("div",ms,[s[19]||(s[19]=o("span",{class:"text-sm text-muted-foreground"},"Session Times:",-1)),o("div",fs,[d.session_time_shift_2?(a(),l("div",gs," Shift 2: "+u(d.session_time_shift_2),1)):c("",!0),d.session_time_shift_3?(a(),l("div",xs," Shift 3: "+u(d.session_time_shift_3),1)):c("",!0)])])])):c("",!0),d.formatted_session_duration?(a(),l("div",hs,[n(e(q),{class:"h-4 w-4 text-muted-foreground"}),s[20]||(s[20]=o("span",{class:"text-sm text-muted-foreground"},"Length:",-1)),o("span",ys,u(d.formatted_session_duration),1)])):c("",!0)]),o("div",ps,[o("p",bs,u(ue(d.capacity)),1),o("p",vs,u(ce(d.sessions)),1),d.capacity-d.sessions>0?(a(),l("p",ks,u(d.capacity-d.sessions)+" sessions enrolled ",1)):c("",!0)]),d.notes?(a(),l("div",As,[o("p",_s,[s[22]||(s[22]=o("span",{class:"font-medium"},"Notes:",-1)),m(" "+u(d.notes),1)])])):c("",!0)])]),_:2},1032,["class"])]))),128))]),_:1},8,["modelValue","disabled"])],2)):!t.availabilities||t.availabilities.length===0?(a(),l("div",ws,s[23]||(s[23]=[o("p",{class:"text-muted-foreground mb-6 leading-relaxed"}," Enroll in this course to track your progress and get access to course materials. ",-1)]))):c("",!0),n(e(v),{onClick:ae,class:"mt-6 w-full",disabled:e(y).processing||t.availabilities&&t.availabilities.length>0&&!e(y).course_availability_id||t.userAssignment&&t.userAssignment.status==="pending"},{default:r(()=>[e(y).processing?(a(),g(e(z),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):c("",!0),e(y).processing?(a(),l("span",Ss,"Enrolling...")):t.userAssignment&&t.userAssignment.status==="pending"?(a(),l("span",Cs,"Accept Assignment First")):t.userAssignment&&t.userAssignment.status==="declined"?(a(),l("span",Ts,"Assignment Declined")):(a(),l("span",Es,"Enroll Now")),!e(y).processing&&(!t.userAssignment||t.userAssignment.status==="accepted")?(a(),g(e(Se),{key:5,class:"ml-2 h-4 w-4"})):c("",!0)]),_:1},8,["disabled"])]))]),_:1})]),_:1})])])]),_:1}))}}),Jt=_e(rt,[["__scopeId","data-v-a407565a"]]);export{Jt as default};
