import{P as A,H as k,k as j,o as r,w as g,e,a as n,f as b,b as m,j as l,g as F,F as _,h as z,t as d,i as M,n as L,r as v,c as D,W as C,s as q}from"./app-n_cIwlLT.js";import{M as Q}from"./Modal-CDpZoYXi.js";import{l as N}from"./lodash-D0FenYJT.js";import{_ as S}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DEbUraED.js";import{_ as T}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-Rz_S81Vw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B9XjMpGI.js";import"./index-BgSmG8al.js";const B={components:{AdminLayout:S,Link:A,Modal:Q},props:{quizzes:{type:Object,required:!0},filters:{type:Object,default:()=>({})},courses:{type:Array,default:()=>[]}},setup(u){const t=[{name:"Dashboard",route:"admin.dashboard"},{name:"Quizzes",route:null}],i=v({course_id:u.filters.course_id||"",status:u.filters.status||""}),o=v(!1),y=v(null),c=v(!1),f=D(()=>i.value.course_id!==""||i.value.status!==""),h=()=>{const a=u.courses.find(x=>x.id==i.value.course_id);return a?a.name:""},w=()=>{const a=h(),x=i.value.status;return a&&x?`No ${x} quizzes found for "${a}" course.`:a?`No quizzes found for "${a}" course.`:x?`No ${x} quizzes found. Try selecting a different status or clearing filters.`:"Try adjusting your filter criteria or clear all filters to see available quizzes."},s=()=>{i.value={course_id:"",status:""},p()},p=N.debounce(()=>{c.value=!0,C.get(route("admin.quizzes.index"),i.value,{preserveState:!0,preserveScroll:!0,onFinish:()=>{c.value=!1}})},300);return q(i,p,{deep:!0}),{breadcrumbs:t,filters:i,applyFilters:p,goToPage:a=>{a&&!c.value&&(c.value=!0,C.get(a,{},{preserveState:!0,preserveScroll:!0,onFinish:()=>{c.value=!1}}))},showDeleteModal:o,confirmDelete:a=>{y.value=a,o.value=!0},deleteQuiz:()=>{c.value||(c.value=!0,C.delete(route("admin.quizzes.destroy",y.value),{onSuccess:()=>{o.value=!1,y.value=null},onFinish:()=>{c.value=!1}}))},isLoading:c,hasActiveFilters:f,getFilteredEmptyMessage:w,clearFilters:s}}},V={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 py-12"},P={class:"flex justify-between items-center mb-8"},H={class:"flex space-x-3"},E={class:"mb-8 bg-white rounded-xl shadow-sm p-6"},U={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},I=["disabled"],O=["value"],W=["disabled"],G={class:"mt-4 flex justify-end"},Y=["disabled"],J={class:"bg-white rounded-xl shadow-sm overflow-hidden"},K={key:0},R={class:"min-w-full divide-y divide-gray-200"},X={class:"divide-y divide-gray-200"},Z={class:"px-6 py-4 text-sm font-medium text-gray-900 whitespace-nowrap"},$={class:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap"},ee={class:"px-6 py-4 text-sm whitespace-nowrap"},te={class:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap"},se={class:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap"},oe={class:"px-6 py-4 text-sm text-gray-600 whitespace-nowrap"},ie={class:"px-6 py-4 text-sm font-medium whitespace-nowrap space-x-3"},re=["onClick","disabled"],ne={key:1,class:"text-center py-12"},le={class:"text-lg font-semibold text-gray-900 mb-2"},ae={class:"text-gray-600 mb-6 max-w-sm mx-auto"},de={key:0},ue={key:1},ce={class:"flex justify-center space-x-4"},fe={key:0,class:"mt-8"},ge={class:"flex justify-between items-center"},me={class:"text-sm text-gray-600"},xe={class:"font-medium"},pe={class:"font-medium"},ye={class:"font-medium"},be={class:"flex space-x-2"},ve=["disabled","onClick","innerHTML"],he={class:"p-6 sm:p-8"},we={class:"flex justify-end space-x-3"},ke=["disabled"],_e=["disabled"],ze={key:0,class:"flex items-center"},Ce={key:1};function Fe(u,t,i,o,y,c){const f=k("Link"),h=k("Modal"),w=k("AdminLayout");return r(),j(w,{breadcrumbs:o.breadcrumbs},{default:g(()=>[e("div",V,[e("div",P,[t[11]||(t[11]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Quiz Attempts",-1)),e("div",H,[m(f,{href:u.route("admin.quizzes.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"},{default:g(()=>t[9]||(t[9]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),l(" Create Quiz ")])),_:1},8,["href"]),m(f,{href:u.route("admin.quiz-attempts.index"),class:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors duration-200"},{default:g(()=>t[10]||(t[10]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),l(" Quiz-attempts ")])),_:1},8,["href"])])]),e("div",E,[t[17]||(t[17]=e("h2",{class:"text-lg font-semibold text-gray-800 mb-4"},"Filter Quizzes",-1)),e("div",U,[e("div",null,[t[13]||(t[13]=e("label",{for:"course_id",class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),F(e("select",{id:"course_id","onUpdate:modelValue":t[0]||(t[0]=s=>o.filters.course_id=s),class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm py-2 px-3 transition-colors duration-200",disabled:o.isLoading,onChange:t[1]||(t[1]=(...s)=>o.applyFilters&&o.applyFilters(...s))},[t[12]||(t[12]=e("option",{value:""},"All Courses",-1)),(r(!0),n(_,null,z(i.courses,s=>(r(),n("option",{key:s.id,value:s.id},d(s.name),9,O))),128))],40,I),[[M,o.filters.course_id]])]),e("div",null,[t[15]||(t[15]=e("label",{for:"status",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),F(e("select",{id:"status","onUpdate:modelValue":t[2]||(t[2]=s=>o.filters.status=s),class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm py-2 px-3 transition-colors duration-200",disabled:o.isLoading,onChange:t[3]||(t[3]=(...s)=>o.applyFilters&&o.applyFilters(...s))},t[14]||(t[14]=[e("option",{value:""},"All Statuses",-1),e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Published",-1),e("option",{value:"archived"},"Archived",-1)]),40,W),[[M,o.filters.status]])])]),e("div",G,[o.hasActiveFilters?(r(),n("button",{key:0,onClick:t[4]||(t[4]=(...s)=>o.clearFilters&&o.clearFilters(...s)),class:"inline-flex items-center px-3 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors duration-200",disabled:o.isLoading},t[16]||(t[16]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),l(" Clear Filters ")]),8,Y)):b("",!0)])]),e("div",J,[i.quizzes.data&&i.quizzes.data.length>0?(r(),n("div",K,[e("table",R,[t[21]||(t[21]=e("thead",{class:"bg-gray-100"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Title "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Status "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Questions "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Attempts "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Total Points "),e("th",{scope:"col",class:"px-6 py-4 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",X,[(r(!0),n(_,null,z(i.quizzes.data,s=>(r(),n("tr",{key:s.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",Z,d(s.title),1),e("td",$,d(s.course?s.course.name:"N/A"),1),e("td",ee,[e("span",{class:L(["px-2.5 py-1 text-xs font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="published","bg-yellow-100 text-yellow-800":s.status==="draft","bg-red-100 text-red-800":s.status==="archived"}])},d(s.status.charAt(0).toUpperCase()+s.status.slice(1)),3)]),e("td",te,d(s.questions_count),1),e("td",se,d(s.attempts_count),1),e("td",oe,d(s.total_points),1),e("td",ie,[m(f,{href:u.route("admin.quizzes.show",s.id),class:"text-indigo-600 hover:text-indigo-800 font-semibold transition-colors duration-200"},{default:g(()=>t[18]||(t[18]=[l(" View ")])),_:2},1032,["href"]),m(f,{href:u.route("admin.quizzes.edit",s.id),class:"text-indigo-600 hover:text-indigo-800 font-semibold transition-colors duration-200"},{default:g(()=>t[19]||(t[19]=[l(" Edit ")])),_:2},1032,["href"]),s.attempts_count?b("",!0):(r(),n("button",{key:0,onClick:p=>o.confirmDelete(s.id),class:"text-red-600 hover:text-red-800 font-semibold transition-colors duration-200",disabled:o.isLoading}," Delete ",8,re)),m(f,{href:u.route("admin.quizzes.attempts",s.id),class:"text-indigo-600 hover:text-indigo-800 font-semibold transition-colors duration-200"},{default:g(()=>t[20]||(t[20]=[l(" Attempts ")])),_:2},1032,["href"])])]))),128))])])])):(r(),n("div",ne,[t[24]||(t[24]=e("div",{class:"mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-gray-100 mb-6"},[e("svg",{class:"h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("h3",le,d(o.hasActiveFilters?"No Quizzes Match Your Filters":"No Quizzes Available"),1),e("p",ae,[o.hasActiveFilters?(r(),n("span",de,d(o.getFilteredEmptyMessage()),1)):(r(),n("span",ue," Get started by creating your first quiz to assess student knowledge and engagement. "))]),e("div",ce,[m(f,{href:u.route("admin.quizzes.create"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"},{default:g(()=>t[22]||(t[22]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),l(" Create First Quiz ")])),_:1},8,["href"]),o.hasActiveFilters?(r(),n("button",{key:0,onClick:t[5]||(t[5]=(...s)=>o.clearFilters&&o.clearFilters(...s)),class:"inline-flex items-center px-4 py-2 bg-gray-100 text-gray-700 text-sm font-semibold rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 transition-colors duration-200"},t[23]||(t[23]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),l(" Clear Filters ")]))):b("",!0)])]))]),i.quizzes.data&&i.quizzes.data.length>0&&i.quizzes.meta?(r(),n("div",fe,[e("div",ge,[e("div",me,[t[25]||(t[25]=l(" Showing ")),e("span",xe,d(i.quizzes.meta.from||0),1),t[26]||(t[26]=l(" to ")),e("span",pe,d(i.quizzes.meta.to||0),1),t[27]||(t[27]=l(" of ")),e("span",ye,d(i.quizzes.meta.total||0),1),t[28]||(t[28]=l(" quizzes "))]),e("div",be,[(r(!0),n(_,null,z(i.quizzes.meta.links,s=>(r(),n("button",{key:s.label,disabled:!s.url||o.isLoading,onClick:p=>o.goToPage(s.url),class:L(["px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium transition-colors duration-200",{"bg-indigo-600 text-white border-indigo-600":s.active,"bg-white text-gray-700 hover:bg-gray-100":!s.active&&s.url,"cursor-not-allowed opacity-50":!s.url||o.isLoading}]),innerHTML:s.label},null,10,ve))),128))])])])):b("",!0),m(h,{show:o.showDeleteModal,onClose:t[8]||(t[8]=s=>o.showDeleteModal=!1)},{default:g(()=>[e("div",he,[t[30]||(t[30]=e("h2",{class:"text-xl font-semibold text-gray-900 mb-3"},"Confirm Deletion",-1)),t[31]||(t[31]=e("p",{class:"text-sm text-gray-600 mb-6"}," Are you sure you want to delete this quiz? This action cannot be undone. ",-1)),e("div",we,[e("button",{onClick:t[6]||(t[6]=s=>o.showDeleteModal=!1),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300 text-sm font-medium transition-colors duration-200",disabled:o.isLoading}," Cancel ",8,ke),e("button",{onClick:t[7]||(t[7]=(...s)=>o.deleteQuiz&&o.deleteQuiz(...s)),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 text-sm font-medium transition-colors duration-200",disabled:o.isLoading},[o.isLoading?(r(),n("span",ze,t[29]||(t[29]=[e("svg",{class:"animate-spin h-5 w-5 mr-2 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),l(" Deleting... ")]))):(r(),n("span",Ce,"Delete"))],8,_e)])])]),_:1},8,["show"])])]),_:1},8,["breadcrumbs"])}const Ve=T(B,[["render",Fe],["__scopeId","data-v-c3a44fb0"]]);export{Ve as default};
