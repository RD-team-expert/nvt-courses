import{d as B,r as V,W as F,k as P,l as z,o,w as u,e,g as v,a as r,F as m,h as x,t as n,i as U,v as L,f as S,j as d,n as c,b as g,u as p,P as f}from"./app-CGpEa2Rf.js";import{_ as R}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BkQCGW9z.js";import{l as O}from"./lodash-BnY7vqyg.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-joK0Vy2g.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ci9BpTpo.js";import"./index-BYhRPgLx.js";const E={class:"bg-white p-4 sm:p-6 rounded-lg shadow mb-6"},G={class:"grid grid-cols-1 md:grid-cols-4 gap-4 sm:gap-6"},I=["value"],T=["value"],W={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},H={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},J={key:0},K={class:"px-4 sm:px-6 py-4 whitespace-nowrap"},Q={class:"flex items-center"},X={class:"text-sm font-medium text-gray-900"},Y={class:"text-xs text-gray-500 hidden sm:block"},Z={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},te={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell"},se={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},le={key:0},ne={key:1,class:"flex items-center"},oe={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},re={key:0,class:"flex items-center"},ae={class:"ml-1 flex"},ie={key:1},de={class:"px-4 sm:px-6 py-4 text-sm text-gray-900 hidden lg:table-cell"},ue={class:"max-w-xs truncate"},ce={key:0,class:"px-4 sm:px-6 py-4 bg-white border-t border-gray-200 flex items-center justify-between"},me={class:"flex-1 flex justify-between sm:hidden"},xe={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},ge={class:"text-sm text-gray-700"},pe={class:"font-medium"},fe={class:"font-medium"},ye={class:"font-medium"},ve={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},be={class:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700"},Me=B({__name:"Index",props:{clockings:Object,users:Array,courses:Array,filters:Object},setup(l){var k,_,C;const y=l,D=[{name:"Dashboard",href:route("dashboard")},{name:"Attendance Management",href:route("admin.attendance.index")}],i=V({user_id:((k=y.filters)==null?void 0:k.user_id)||"",date:((_=y.filters)==null?void 0:_.date)||"",course_id:((C=y.filters)==null?void 0:C.course_id)||""}),b=a=>a?new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—",h=a=>{if(!a||isNaN(a)||a<0)return"—";a=Math.round(a);const t=Math.floor(a/60),s=a%60;return t>0?`${t} ${t===1?"hour":"hours"}${s>0?` ${s} ${s===1?"minute":"minutes"}`:""}`:`${s} ${s===1?"minute":"minutes"}`},w=O.debounce(()=>{F.get(route("admin.attendance.index"),i.value,{preserveState:!0,replace:!0})},500);P(i,()=>{w()},{deep:!0});const $=()=>{i.value={user_id:"",date:"",course_id:""},w()};return(a,t)=>(o(),z(R,{breadcrumbs:D},{default:u(()=>[t[22]||(t[22]=e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6"},[e("h1",{class:"text-2xl font-bold mb-2 sm:mb-0"},"Attendance Records")],-1)),e("div",E,[t[9]||(t[9]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Attendance Records",-1)),e("div",G,[e("div",null,[t[4]||(t[4]=e("label",{for:"user_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"User",-1)),v(e("select",{id:"user_filter","onUpdate:modelValue":t[0]||(t[0]=s=>i.value.user_id=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[3]||(t[3]=e("option",{value:""},"All Users",-1)),(o(!0),r(m,null,x(l.users,s=>(o(),r("option",{key:s.id,value:s.id},n(s.name),9,I))),128))],512),[[U,i.value.user_id]])]),e("div",null,[t[5]||(t[5]=e("label",{for:"date_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),v(e("input",{id:"date_filter",type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>i.value.date=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[L,i.value.date]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"course_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),v(e("select",{id:"course_filter","onUpdate:modelValue":t[2]||(t[2]=s=>i.value.course_id=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[6]||(t[6]=e("option",{value:""},"All Courses",-1)),t[7]||(t[7]=e("option",{value:"general"},"General Attendance",-1)),(o(!0),r(m,null,x(l.courses,s=>(o(),r("option",{key:s.id,value:s.id},n(s.name),9,T))),128))],512),[[U,i.value.course_id]])]),e("div",{class:"flex items-end"},[e("button",{onClick:$,class:"inline-flex items-center px-4 py-2 bg-gray-100 border border-transparent rounded-md font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition"}," Reset Filters ")])])]),e("div",W,[e("table",H,[t[13]||(t[13]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Course "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Clock In "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell"}," Clock Out "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Duration "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Rating "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell"}," Comment ")])],-1)),e("tbody",q,[l.clockings.data.length===0?(o(),r("tr",J,t[10]||(t[10]=[e("td",{colspan:"7",class:"px-4 sm:px-6 py-4 text-center text-gray-500"},"No attendance records found",-1)]))):(o(!0),r(m,{key:1},x(l.clockings.data,(s,j)=>{var A,M;return o(),r("tr",{key:j,class:"hover:bg-gray-50"},[e("td",K,[e("div",Q,[e("div",null,[e("div",X,n(((A=s.user)==null?void 0:A.name)||"Unknown User"),1),e("div",Y,n((M=s.user)==null?void 0:M.email),1)])])]),e("td",Z,n(s.course_name||"General Attendance"),1),e("td",ee,n(b(s.clock_in)),1),e("td",te,n(s.clock_out?b(s.clock_out):"—"),1),e("td",se,[s.clock_out?(o(),r("span",le,n(h(s.duration_in_minutes)),1)):(o(),r("span",ne,[d(n(h(s.current_duration||0))+" ",1),t[11]||(t[11]=e("span",{class:"ml-1 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full"},"ongoing",-1))]))]),e("td",oe,[s.rating?(o(),r("div",re,[e("span",null,n(s.rating)+"/5",1),e("div",ae,[(o(),r(m,null,x(5,N=>e("svg",{key:N,class:c(["h-4 w-4",N<=s.rating?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[12]||(t[12]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))])])):(o(),r("span",ie,"—"))]),e("td",de,[e("div",ue,n(s.comment||"—"),1)])])}),128))])]),l.clockings.data&&l.clockings.data.length>0?(o(),r("div",ce,[e("div",me,[g(p(f),{href:l.clockings.prev_page_url,class:c(["relative inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",!l.clockings.prev_page_url&&"opacity-50 cursor-not-allowed pointer-events-none"])},{default:u(()=>t[14]||(t[14]=[d(" Previous ")])),_:1},8,["href","class"]),g(p(f),{href:l.clockings.next_page_url,class:c(["ml-3 relative inline-flex items-center px-3 py-1 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",!l.clockings.next_page_url&&"opacity-50 cursor-not-allowed pointer-events-none"])},{default:u(()=>t[15]||(t[15]=[d(" Next ")])),_:1},8,["href","class"])]),e("div",xe,[e("div",null,[e("p",ge,[t[16]||(t[16]=d(" Showing ")),e("span",pe,n(l.clockings.from),1),t[17]||(t[17]=d(" to ")),e("span",fe,n(l.clockings.to),1),t[18]||(t[18]=d(" of ")),e("span",ye,n(l.clockings.total),1),t[19]||(t[19]=d(" results "))])]),e("div",null,[e("nav",ve,[g(p(f),{href:l.clockings.prev_page_url,class:c(["relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",!l.clockings.prev_page_url&&"opacity-50 cursor-not-allowed pointer-events-none"])},{default:u(()=>t[20]||(t[20]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])),_:1},8,["href","class"]),e("span",be," Page "+n(l.clockings.current_page)+" of "+n(l.clockings.last_page),1),g(p(f),{href:l.clockings.next_page_url,class:c(["relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50",!l.clockings.next_page_url&&"opacity-50 cursor-not-allowed pointer-events-none"])},{default:u(()=>t[21]||(t[21]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])),_:1},8,["href","class"])])])])])):S("",!0)])]),_:1}))}});export{Me as default};
