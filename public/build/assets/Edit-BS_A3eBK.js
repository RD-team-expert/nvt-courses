import{d as q,C as E,g as V,o as d,w as i,e as o,b as l,u as e,f as r,j as I,a as n,h as u,t as m,q as k,z as $,F as O,i as h,P as A}from"./app-sfv6CYbu.js";import{_ as B}from"./AdminLayout.vue_vue_type_script_setup_true_lang-vvSRP-jI.js";import{E as M}from"./Editor-Cg7hFyIe.js";import{_ as T}from"./Card.vue_vue_type_script_setup_true_lang-C1bT-eXd.js";import{_ as z}from"./CardContent.vue_vue_type_script_setup_true_lang-Khif222k.js";import{_ as F}from"./CardHeader.vue_vue_type_script_setup_true_lang-DnS62nQf.js";import{_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-BUNiHSkD.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-Ccdh52Vd.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-PAMz5smE.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-BH1zqArT.js";import{_ as U,a as S,b as w,c as C,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-BZdTdVyo.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BqoVmqtq.js";import"./index-DdH2r2B8.js";import"./index-C4PRPqD0.js";import"./x-BJKYekbZ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DttcJlkw.js";import"./clock-DTvpSLd-.js";import"./useForwardPropsEmits--cawDwsm.js";import"./Presence-CHrFqoPB.js";import"./ConfigProvider-CuMY5RD4.js";import"./useForwardExpose-C32JnqdD.js";import"./Teleport-DTKdiWK5.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DekOIFXO.js";import"./usePrimitiveElement-BTNjppil.js";import"./check-Bs2OgQiG.js";import"./useSize-C9jzGnps.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-oKHpmjgu.js";const R={class:"px-4 sm:px-0"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},H={class:"col-span-full"},J={key:0,class:"text-destructive text-sm mt-1"},K={class:"col-span-1"},Q={key:0,class:"text-destructive text-sm mt-1"},W={class:"col-span-1"},X={class:"flex items-center space-x-4 mt-2"},Y={class:"flex items-center"},Z={class:"flex items-center"},ee={key:0,class:"mt-1 text-sm text-destructive"},te={class:"col-span-1"},se={key:0,class:"text-destructive text-sm mt-1"},le={class:"col-span-1"},ie={key:0,class:"text-destructive text-sm mt-1"},oe={class:"col-span-1"},ae={key:0,class:"text-destructive text-sm mt-1"},re={class:"col-span-1"},de={key:0,class:"text-destructive text-sm mt-1"},ne={class:"mb-6"},ue={class:"flex justify-between items-center mb-4"},me={class:"space-y-4"},pe={class:"flex justify-between items-center mb-3"},ce={class:"font-medium"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={key:0,class:"text-destructive text-sm mt-1"},_e={key:0,class:"text-destructive text-sm mt-1"},be={key:0,class:"text-destructive text-sm mt-1"},ge={key:0,class:"text-destructive text-sm mt-1"},ye={class:"md:col-span-2"},xe={key:0,class:"text-destructive text-sm mt-1"},Ve={key:0,class:"text-destructive text-sm mt-2"},ke={class:"col-span-full"},$e={key:0,class:"text-destructive text-sm mt-1"},Ue={key:1,class:"mt-2"},Se=["src"],we={class:"col-span-full"},Ce={key:0,class:"text-destructive text-sm mt-1"},De={class:"flex justify-end space-x-4 mt-6"},je={key:0},Pe={key:1},rt=q({__name:"Edit",props:{course:Object},setup(D){const v=D,y=p=>{if(!p)return"";const t=p.split("T")[0].split("-");if(t.length!==3){const a=new Date(p);return isNaN(a.getTime())?"":a.toISOString().split("T")[0]}return t.join("-")},s=E({name:v.course.name,description:v.course.description,start_date:y(v.course.start_date),end_date:y(v.course.end_date),status:v.course.status||"pending",level:v.course.level||"",privacy:v.course.privacy||"public",duration:v.course.duration||"",image:null,availabilities:v.course.availabilities&&v.course.availabilities.length?v.course.availabilities.map(p=>({id:p.id,start_date:p.start_date?new Date(p.start_date).toISOString().slice(0,16):"",end_date:p.end_date?new Date(p.end_date).toISOString().slice(0,16):"",capacity:p.capacity||25,notes:p.notes||"",status:p.status||"active"})):[{start_date:"",end_date:"",capacity:25,notes:"",status:"active"}]});function j(){s.availabilities.length<5&&s.availabilities.push({start_date:"",end_date:"",capacity:25,notes:"",status:"active"})}function P(p){s.availabilities.length>1&&s.availabilities.splice(p,1)}function N(){s.start_date&&(s.start_date=y(s.start_date)),s.end_date&&(s.end_date=y(s.end_date)),s.post(`/admin/courses/${v.course.id}?_method=PUT`,{forceFormData:!0})}return(p,t)=>(d(),V(B,null,{default:i(()=>[o("div",R,[l(e(T),{class:"max-w-4xl"},{default:i(()=>[l(e(F),null,{default:i(()=>[l(e(L),null,{default:i(()=>t[10]||(t[10]=[r("Edit Course")])),_:1})]),_:1}),l(e(z),null,{default:i(()=>[o("form",{onSubmit:I(N,["prevent"])},[o("div",G,[o("div",H,[l(e(c),null,{default:i(()=>t[11]||(t[11]=[r("Course Name")])),_:1}),l(e(b),{type:"text",modelValue:e(s).name,"onUpdate:modelValue":t[0]||(t[0]=a=>e(s).name=a)},null,8,["modelValue"]),e(s).errors.name?(d(),n("div",J,m(e(s).errors.name),1)):u("",!0)]),o("div",K,[l(e(c),null,{default:i(()=>t[12]||(t[12]=[r("Status")])),_:1}),l(e(U),{modelValue:e(s).status,"onUpdate:modelValue":t[1]||(t[1]=a=>e(s).status=a)},{default:i(()=>[l(e(S),null,{default:i(()=>[l(e(w),{placeholder:"Select status"})]),_:1}),l(e(C),null,{default:i(()=>[l(e(g),{value:"pending"},{default:i(()=>t[13]||(t[13]=[r("Pending")])),_:1}),l(e(g),{value:"in_progress"},{default:i(()=>t[14]||(t[14]=[r("In Progress")])),_:1}),l(e(g),{value:"completed"},{default:i(()=>t[15]||(t[15]=[r("Completed")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.status?(d(),n("div",Q,m(e(s).errors.status),1)):u("",!0)]),o("div",W,[l(e(c),{class:"text-base font-semibold"},{default:i(()=>t[16]||(t[16]=[r("Course Privacy")])),_:1}),o("div",X,[o("div",Y,[k(o("input",{id:"privacy-public",name:"privacy",type:"radio",value:"public","onUpdate:modelValue":t[2]||(t[2]=a=>e(s).privacy=a),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[$,e(s).privacy]]),l(e(c),{for:"privacy-public",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:i(()=>t[17]||(t[17]=[r(" 🌍 Public ")])),_:1})]),o("div",Z,[k(o("input",{id:"privacy-private",name:"privacy",type:"radio",value:"private","onUpdate:modelValue":t[3]||(t[3]=a=>e(s).privacy=a),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[$,e(s).privacy]]),l(e(c),{for:"privacy-private",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:i(()=>t[18]||(t[18]=[r(" 🔒 Private ")])),_:1})])]),t[19]||(t[19]=o("p",{class:"mt-1 text-xs text-muted-foreground"}," Public courses are visible to everyone. Private courses are only visible to enrolled users. ",-1)),e(s).errors.privacy?(d(),n("div",ee,m(e(s).errors.privacy),1)):u("",!0)]),o("div",te,[l(e(c),null,{default:i(()=>t[20]||(t[20]=[r("Level (Optional)")])),_:1}),l(e(U),{modelValue:e(s).level,"onUpdate:modelValue":t[4]||(t[4]=a=>e(s).level=a)},{default:i(()=>[l(e(S),null,{default:i(()=>[l(e(w),{placeholder:"Select Level"})]),_:1}),l(e(C),null,{default:i(()=>[l(e(g),{value:"beginner"},{default:i(()=>t[21]||(t[21]=[r("Beginner")])),_:1}),l(e(g),{value:"intermediate"},{default:i(()=>t[22]||(t[22]=[r("Intermediate")])),_:1}),l(e(g),{value:"advanced"},{default:i(()=>t[23]||(t[23]=[r("Advanced")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.level?(d(),n("div",se,m(e(s).errors.level),1)):u("",!0)]),o("div",le,[l(e(c),null,{default:i(()=>t[24]||(t[24]=[r("Duration (hours)")])),_:1}),l(e(b),{type:"number",step:"0.1",modelValue:e(s).duration,"onUpdate:modelValue":t[5]||(t[5]=a=>e(s).duration=a)},null,8,["modelValue"]),e(s).errors.duration?(d(),n("div",ie,m(e(s).errors.duration),1)):u("",!0)]),o("div",oe,[l(e(c),null,{default:i(()=>t[25]||(t[25]=[r("Start Date")])),_:1}),l(e(b),{type:"date",modelValue:e(s).start_date,"onUpdate:modelValue":t[6]||(t[6]=a=>e(s).start_date=a)},null,8,["modelValue"]),e(s).errors.start_date?(d(),n("div",ae,m(e(s).errors.start_date),1)):u("",!0)]),o("div",re,[l(e(c),null,{default:i(()=>t[26]||(t[26]=[r("End Date")])),_:1}),l(e(b),{type:"date",modelValue:e(s).end_date,"onUpdate:modelValue":t[7]||(t[7]=a=>e(s).end_date=a)},null,8,["modelValue"]),e(s).errors.end_date?(d(),n("div",de,m(e(s).errors.end_date),1)):u("",!0)]),o("div",ne,[o("div",ue,[t[27]||(t[27]=o("h2",{class:"text-lg font-semibold"},"Course Session Schedules",-1)),l(e(x),{type:"button",onClick:j,disabled:e(s).availabilities.length>=5||e(s).processing,variant:"default"},{default:i(()=>[r(" Add Session Schedule ("+m(e(s).availabilities.length)+"/5) ",1)]),_:1},8,["disabled"])]),o("div",me,[(d(!0),n(O,null,h(e(s).availabilities,(a,f)=>(d(),n("div",{key:f,class:"border border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800"},[o("div",pe,[o("h3",ce,"Session Schedule "+m(f+1),1),e(s).availabilities.length>1?(d(),V(e(x),{key:0,type:"button",onClick:_=>P(f),variant:"destructive",size:"sm",disabled:e(s).processing},{default:i(()=>t[28]||(t[28]=[r(" Remove ")])),_:2},1032,["onClick","disabled"])):u("",!0)]),o("div",ve,[o("div",null,[l(e(c),null,{default:i(()=>t[29]||(t[29]=[r("Start Date")])),_:1}),l(e(b),{type:"datetime-local",modelValue:a.start_date,"onUpdate:modelValue":_=>a.start_date=_,disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.start_date`]?(d(),n("div",fe,m(e(s).errors[`availabilities.${f}.start_date`]),1)):u("",!0)]),o("div",null,[l(e(c),null,{default:i(()=>t[30]||(t[30]=[r("End Date")])),_:1}),l(e(b),{type:"datetime-local",modelValue:a.end_date,"onUpdate:modelValue":_=>a.end_date=_,disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.end_date`]?(d(),n("div",_e,m(e(s).errors[`availabilities.${f}.end_date`]),1)):u("",!0)]),o("div",null,[l(e(c),null,{default:i(()=>t[31]||(t[31]=[r("Seats Available")])),_:1}),l(e(b),{type:"number",modelValue:a.capacity,"onUpdate:modelValue":_=>a.capacity=_,modelModifiers:{number:!0},min:"1",max:"1000",disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),t[32]||(t[32]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Maximum number of seats available for this schedule",-1)),e(s).errors[`availabilities.${f}.capacity`]?(d(),n("div",be,m(e(s).errors[`availabilities.${f}.capacity`]),1)):u("",!0)]),o("div",null,[l(e(c),null,{default:i(()=>t[33]||(t[33]=[r("Sessions")])),_:1}),l(e(b),{type:"number",modelValue:a.sessions,"onUpdate:modelValue":_=>a.sessions=_,modelModifiers:{number:!0},min:"1",max:"100",disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),t[34]||(t[34]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Number of sessions in this schedule",-1)),e(s).errors[`availabilities.${f}.sessions`]?(d(),n("div",ge,m(e(s).errors[`availabilities.${f}.sessions`]),1)):u("",!0)]),o("div",ye,[l(e(c),null,{default:i(()=>t[35]||(t[35]=[r("Notes (Optional)")])),_:1}),l(e(b),{type:"text",modelValue:a.notes,"onUpdate:modelValue":_=>a.notes=_,placeholder:"Special instructions or requirements",disabled:e(s).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.notes`]?(d(),n("div",xe,m(e(s).errors[`availabilities.${f}.notes`]),1)):u("",!0)])])]))),128))]),e(s).errors.availabilities?(d(),n("div",Ve,m(e(s).errors.availabilities),1)):u("",!0)]),o("div",ke,[l(e(c),null,{default:i(()=>t[36]||(t[36]=[r("Course Image (Optional)")])),_:1}),l(e(b),{type:"file",onInput:t[8]||(t[8]=a=>e(s).image=a.target.files[0])}),e(s).errors.image?(d(),n("div",$e,m(e(s).errors.image),1)):u("",!0),v.course.image_path?(d(),n("div",Ue,[t[37]||(t[37]=o("p",{class:"text-sm text-muted-foreground"},"Current image:",-1)),o("img",{src:`/storage/${v.course.image_path}`,alt:"Current course image",class:"mt-1 h-32 w-full sm:w-48 object-cover rounded"},null,8,Se)])):u("",!0)]),o("div",we,[l(e(c),null,{default:i(()=>t[38]||(t[38]=[r("Description")])),_:1}),l(e(M),{modelValue:e(s).description,"onUpdate:modelValue":t[9]||(t[9]=a=>e(s).description=a),"api-key":"r1racrxd2joy9wp9xp9sj91ka9j4m3humenifqvwtx9s6i3y",init:{toolbar_mode:"sliding",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",mobile:{menubar:!1,toolbar:"undo redo | bold italic | link | bullist numlist",toolbar_mode:"scrolling"}}},null,8,["modelValue"]),e(s).errors.description?(d(),n("div",Ce,m(e(s).errors.description),1)):u("",!0)])]),o("div",De,[l(e(x),{variant:"outline","as-child":""},{default:i(()=>[l(e(A),{href:p.route("admin.courses.index")},{default:i(()=>t[39]||(t[39]=[r(" Cancel ")])),_:1},8,["href"])]),_:1}),l(e(x),{type:"submit",disabled:e(s).processing},{default:i(()=>[e(s).processing?(d(),n("span",je,"Updating...")):(d(),n("span",Pe,"Update Course"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1}))}});export{rt as default};
