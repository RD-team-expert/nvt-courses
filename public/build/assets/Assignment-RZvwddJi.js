import{d as T,C as E,c as D,s as h,k as R,o as n,w as A,e as o,l as $,a as r,f as d,g as u,u as s,F as y,h as _,t as i,i as v,n as c,y as j,v as x,j as k,q as B,b as L,P as N}from"./app-iYB6CK9s.js";import{_ as U}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const z={class:"px-4 sm:px-0"},F={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-8"},I={class:"col-span-1"},P=["disabled"],q=["value"],H={key:0,class:"text-red-600 text-sm mt-1"},O={class:"col-span-1"},G=["disabled"],J=["value"],K={key:0,class:"text-red-600 text-sm mt-1"},Q={class:"col-span-1"},W=["disabled"],X=["value"],Y={key:0,class:"text-red-600 text-sm mt-1"},Z={class:"col-span-1"},ee=["disabled"],te={key:0,class:"text-red-600 text-sm mt-1"},oe={class:"mb-8"},se={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},le=["onClick"],ne={class:"flex items-start space-x-3"},re={class:"shrink-0 mt-1"},ae=["value","onChange"],ie={class:"flex-1"},de={class:"flex items-center space-x-2 mb-2"},me={key:0,class:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ue={key:1,class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},pe={key:2,class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ge={class:"font-semibold text-gray-900 cursor-pointer"},ce={class:"text-sm text-gray-600 cursor-pointer"},be={key:0,class:"absolute top-2 right-2"},ye={key:0,class:"mb-8"},_e={class:"bg-blue-50 border border-blue-200 rounded-lg p-6"},ve={class:"mb-2 text-xs text-blue-600"},fe=["disabled"],he=["value"],xe={key:0,class:"text-sm text-blue-600 mt-2"},ke={key:1,class:"text-sm text-blue-600 mt-2"},we={key:2,class:"text-red-600 text-sm mt-1"},Me={class:"flex items-start space-x-3"},Ce={class:"shrink-0"},De={key:0,class:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Ae={key:1,class:"w-6 h-6 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Se={key:0},Ve={key:1},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-8"},Ee={class:"col-span-1"},Re=["disabled"],$e={key:0,class:"text-red-600 text-sm mt-1"},je={class:"col-span-1"},Be=["disabled"],Le={key:0,class:"text-red-600 text-sm mt-1"},Ne={class:"space-y-6 mb-8"},Ue={class:"flex items-center"},ze=["disabled"],Fe=["disabled"],Ie={key:0,class:"text-red-600 text-sm mt-1"},Pe={class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},qe=["disabled"],He={key:0,class:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24"},Oe={key:1},Ge={key:2},Ye=T({__name:"Assignment",props:{managers:Array,departments:Array,employees:Array,roleTypes:Object},setup(f){const p=f;console.log("ðŸš€ Initial Props Data:"),console.log("ðŸ“Š Departments:",p.departments),console.log("ðŸ‘¥ Employees:",p.employees),console.log("ðŸ‘” Managers:",p.managers),console.log("ðŸ·ï¸ RoleTypes:",p.roleTypes);const t=E({user_id:"",department_id:"",role_type:"",manages_user_id:"",management_type:"department_wide",is_primary:!1,authority_level:1,start_date:new Date().toISOString().split("T")[0],end_date:"",notes:""}),w=[{value:"specific_user",label:"Manages Specific User",description:"Direct 1:1 management relationship with selected employee",icon:"user",color:"blue"},{value:"department_wide",label:"Department-wide Management",description:"Oversees entire department operations and policies",icon:"building",color:"green"},{value:"no_management",label:"No Management Responsibilities",description:"Individual contributor, specialist, or advisory role",icon:"star",color:"gray"}],M=D(()=>{console.log("Computing departmentEmployees..."),console.log("Selected departmentid:",t.departmentid),console.log("TESTING: Returning ALL employees without filter"),console.log("All employees available:",p.employees.length);const a=p.employees;return console.log("Returning all employees:",a),a}),b=D(()=>{console.log("ðŸ‘¥ Computing availableEmployees..."),console.log("ðŸ” Department employees count:",M.value.length),console.log("ðŸ‘¤ Selected manager ID:",t.user_id);const a=M.value.filter(e=>{const m=e.id!==parseInt(t.user_id);return console.log(`   Employee ${e.name} (ID: ${e.id}) !== Manager (ID: ${t.user_id}) = ${m}`),m});return console.log("âœ… Available employees for management:",a.length),console.log("ðŸ“‹ Available employees list:",a),a});h(()=>t.department_id,(a,e)=>{if(console.log("ðŸ”„ Department changed from",e,"to",a),a){const m=p.departments.find(l=>l.id==a);console.log("ðŸ¢ New department selected:",m==null?void 0:m.name),console.log("ðŸ” This will trigger departmentEmployees computation..."),console.log("ðŸ“Š Available employees after change:",b.value.length)}}),h(()=>t.management_type,(a,e)=>{console.log("ðŸ”„ Management type changed from",e,"to",a),a!=="specific_user"&&(console.log("ðŸ§¹ Clearing manages_user_id because type is not specific_user"),t.manages_user_id="")}),h(()=>t.manages_user_id,(a,e)=>{console.log("ðŸ‘¤ Manages user ID changed from",e,"to",a)});function S(){console.log("ðŸ“¤ Form submission started..."),console.log("ðŸ“‹ Form data:",{user_id:t.user_id,department_id:t.department_id,role_type:t.role_type,manages_user_id:t.manages_user_id,management_type:t.management_type,is_primary:t.is_primary,authority_level:t.authority_level}),t.management_type!=="specific_user"&&(console.log("ðŸ§¹ Clearing manages_user_id for submission"),t.manages_user_id=""),t.post("/admin/manager-roles",{onSuccess:()=>{console.log("âœ… Form submitted successfully!")},onError:a=>{console.error("âŒ Form submission errors:",a)}})}const C=a=>{const e=p.departments.find(l=>l.id==a),m=e?e.name:"";return console.log("ðŸ¢ getDepartmentName for ID",a,"=",m),m};console.log("ðŸŽ¬ Component mounted!");const V=[{name:"Dashboard",href:route("dashboard")},{name:"Manager Roles",href:route("admin.manager-roles.index")},{name:"Assign Role",href:route("admin.manager-roles.create")}];return(a,e)=>(n(),R(U,{breadcrumbs:V},{default:A(()=>{var m;return[o("div",z,[e[42]||(e[42]=o("h1",{class:"text-xl sm:text-2xl font-bold mb-6"},"Assign Manager Role",-1)),o("form",{onSubmit:$(S,["prevent"]),class:"max-w-6xl mx-auto"},[o("div",F,[o("div",I,[e[17]||(e[17]=o("label",{class:"block font-semibold mb-2"},"Manager",-1)),u(o("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s(t).user_id=l),onChange:e[1]||(e[1]=l=>console.log("ðŸ‘¤ Manager selected:",s(t).user_id)),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,required:""},[e[16]||(e[16]=o("option",{value:""},"Select Manager",-1)),(n(!0),r(y,null,_(f.managers,l=>(n(),r("option",{key:l.id,value:l.id},i(l.name)+" ("+i(l.level)+") - "+i(l.department),9,q))),128))],40,P),[[v,s(t).user_id]]),s(t).errors.user_id?(n(),r("div",H,i(s(t).errors.user_id),1)):d("",!0)]),o("div",O,[e[19]||(e[19]=o("label",{class:"block font-semibold mb-2"},"Department",-1)),u(o("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>s(t).department_id=l),onChange:e[3]||(e[3]=l=>console.log("ðŸ¢ Department selected:",s(t).department_id,C(s(t).department_id))),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,required:""},[e[18]||(e[18]=o("option",{value:""},"Select Department",-1)),(n(!0),r(y,null,_(f.departments,l=>(n(),r("option",{key:l.id,value:l.id},i(l.name)+" ("+i(l.department_code)+") ",9,J))),128))],40,G),[[v,s(t).department_id]]),s(t).errors.department_id?(n(),r("div",K,i(s(t).errors.department_id),1)):d("",!0)]),o("div",Q,[e[21]||(e[21]=o("label",{class:"block font-semibold mb-2"},"Role Type",-1)),u(o("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>s(t).role_type=l),onChange:e[5]||(e[5]=l=>console.log("ðŸ·ï¸ Role type selected:",s(t).role_type)),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,required:""},[e[20]||(e[20]=o("option",{value:""},"Select Role Type",-1)),(n(!0),r(y,null,_(f.roleTypes,(l,g)=>(n(),r("option",{key:g,value:g},i(l),9,X))),128))],40,W),[[v,s(t).role_type]]),s(t).errors.role_type?(n(),r("div",Y,i(s(t).errors.role_type),1)):d("",!0)]),o("div",Z,[e[23]||(e[23]=o("label",{class:"block font-semibold mb-2"},"Authority Level",-1)),u(o("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s(t).authority_level=l),onChange:e[7]||(e[7]=l=>console.log("âš¡ Authority level selected:",s(t).authority_level)),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,required:""},e[22]||(e[22]=[o("option",{value:1},"High Authority",-1),o("option",{value:2},"Medium Authority",-1),o("option",{value:3},"Low Authority",-1)]),40,ee),[[v,s(t).authority_level]]),s(t).errors.authority_level?(n(),r("div",te,i(s(t).errors.authority_level),1)):d("",!0)])]),o("div",oe,[e[28]||(e[28]=o("label",{class:"block font-semibold mb-4 text-lg"},"Management Responsibilities",-1)),o("div",se,[(n(),r(y,null,_(w,l=>o("div",{key:l.value,class:c(["relative border-2 rounded-lg p-6 cursor-pointer transition-all hover:shadow-md",{"border-blue-500 bg-blue-50 shadow-md":s(t).management_type===l.value&&l.color==="blue","border-green-500 bg-green-50 shadow-md":s(t).management_type===l.value&&l.color==="green","border-gray-500 bg-gray-50 shadow-md":s(t).management_type===l.value&&l.color==="gray","border-gray-200 hover:border-gray-300":s(t).management_type!==l.value}]),onClick:g=>{console.log("ðŸŽ¯ Management type clicked:",l.value),s(t).management_type=l.value}},[o("div",ne,[o("div",re,[u(o("input",{type:"radio",value:l.value,"onUpdate:modelValue":e[8]||(e[8]=g=>s(t).management_type=g),onChange:g=>console.log("ðŸ“» Management type radio changed:",l.value),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,40,ae),[[j,s(t).management_type]])]),o("div",ie,[o("div",de,[l.icon==="user"?(n(),r("svg",me,e[24]||(e[24]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)]))):l.icon==="building"?(n(),r("svg",ue,e[25]||(e[25]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)]))):(n(),r("svg",pe,e[26]||(e[26]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]))),o("h3",ge,i(l.label),1)]),o("p",ce,i(l.description),1)])]),s(t).management_type===l.value?(n(),r("div",be,[o("div",{class:c(["w-6 h-6 rounded-full flex items-center justify-center",{"bg-blue-500":l.color==="blue","bg-green-500":l.color==="green","bg-gray-500":l.color==="gray"}])},e[27]||(e[27]=[o("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)]),2)])):d("",!0)],10,le)),64))])]),s(t).management_type==="specific_user"?(n(),r("div",ye,[o("div",_e,[e[31]||(e[31]=o("div",{class:"flex items-start space-x-3 mb-4"},[o("div",{class:"shrink-0"},[o("svg",{class:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])]),o("div",null,[o("h4",{class:"font-semibold text-blue-900 mb-1"},"Direct Management Assignment"),o("p",{class:"text-sm text-blue-700"},"Select a specific L1 employee who will report directly to this manager for daily tasks, performance reviews, and career development.")])],-1)),o("div",null,[e[30]||(e[30]=o("label",{class:"block font-semibold mb-2 text-blue-900"},"Select L1 Employee to Manage",-1)),o("div",ve," Debug: "+i(b.value.length)+" employees available ",1),u(o("select",{"onUpdate:modelValue":e[9]||(e[9]=l=>s(t).manages_user_id=l),onChange:e[10]||(e[10]=l=>console.log("ðŸ‘¥ Employee selected to manage:",s(t).manages_user_id)),onFocus:e[11]||(e[11]=l=>console.log("ðŸ” Employee dropdown focused - available employees:",b.value)),class:"border border-blue-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",disabled:s(t).processing||!s(t).department_id},[e[29]||(e[29]=o("option",{value:""},"Choose an L1 employee",-1)),(n(!0),r(y,null,_(b.value,l=>(n(),r("option",{key:l.id,value:l.id},i(l.name)+" ("+i(l.level)+") - "+i(l.email),9,he))),128))],40,fe),[[v,s(t).manages_user_id]]),s(t).department_id?b.value.length===0?(n(),r("p",ke," No L1 employees available in this department ")):d("",!0):(n(),r("p",xe," Please select a department first to see available L1 employees ")),s(t).errors.manages_user_id?(n(),r("div",we,i(s(t).errors.manages_user_id),1)):d("",!0)])])])):d("",!0),s(t).management_type&&s(t).management_type!=="specific_user"?(n(),r("div",{key:1,class:c(["mb-8 p-6 rounded-lg border",{"bg-blue-50 border-blue-200":s(t).management_type==="specific_user","bg-green-50 border-green-200":s(t).management_type==="department_wide","bg-gray-50 border-gray-200":s(t).management_type==="no_management"}])},[o("div",Me,[o("div",Ce,[s(t).management_type==="department_wide"?(n(),r("svg",De,e[32]||(e[32]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)]))):s(t).management_type==="no_management"?(n(),r("svg",Ae,e[33]||(e[33]=[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"},null,-1)]))):d("",!0)]),o("div",null,[o("h4",{class:c(["font-semibold mb-2",{"text-green-900":s(t).management_type==="department_wide","text-gray-900":s(t).management_type==="no_management"}])},i((m=w.find(l=>l.value===s(t).management_type))==null?void 0:m.label),3),o("p",{class:c(["text-sm",{"text-green-700":s(t).management_type==="department_wide","text-gray-700":s(t).management_type==="no_management"}])},[s(t).management_type==="department_wide"?(n(),r("span",Se," This grants oversight authority over the entire "+i(C(s(t).department_id))+" department. The manager can make department-wide decisions, set policies, allocate resources, and provide strategic direction for all department employees. ",1)):s(t).management_type==="no_management"?(n(),r("span",Ve," This role is designed for individual contributors, technical specialists, consultants, or advisory positions. The person will have expertise and authority in their domain but won't manage other people directly. Perfect for senior developers, architects, analysts, or subject matter experts. ")):d("",!0)],2)])])],2)):d("",!0),o("div",Te,[o("div",Ee,[e[34]||(e[34]=o("label",{class:"block font-semibold mb-2"},"Start Date",-1)),u(o("input",{type:"date","onUpdate:modelValue":e[12]||(e[12]=l=>s(t).start_date=l),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,required:""},null,8,Re),[[x,s(t).start_date]]),s(t).errors.start_date?(n(),r("div",$e,i(s(t).errors.start_date),1)):d("",!0)]),o("div",je,[e[35]||(e[35]=o("label",{class:"block font-semibold mb-2"},[k("End Date "),o("span",{class:"text-gray-500 font-normal"},"(Optional)")],-1)),u(o("input",{type:"date","onUpdate:modelValue":e[13]||(e[13]=l=>s(t).end_date=l),class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing},null,8,Be),[[x,s(t).end_date]]),e[36]||(e[36]=o("p",{class:"text-sm text-gray-500 mt-1"},"Leave empty for permanent assignment",-1)),s(t).errors.end_date?(n(),r("div",Le,i(s(t).errors.end_date),1)):d("",!0)])]),o("div",Ne,[o("div",null,[o("div",Ue,[u(o("input",{id:"is_primary","onUpdate:modelValue":e[14]||(e[14]=l=>s(t).is_primary=l),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:s(t).processing},null,8,ze),[[B,s(t).is_primary]]),e[37]||(e[37]=o("label",{for:"is_primary",class:"ml-3 block font-semibold text-gray-900"}," Primary Role ",-1))]),e[38]||(e[38]=o("p",{class:"text-sm text-gray-600 mt-2 ml-7"},"Primary roles have higher authority and receive priority notifications. Only one primary role is recommended per person per department.",-1))]),o("div",null,[e[39]||(e[39]=o("label",{class:"block font-semibold mb-2"},[k("Notes "),o("span",{class:"text-gray-500 font-normal"},"(Optional)")],-1)),u(o("textarea",{"onUpdate:modelValue":e[15]||(e[15]=l=>s(t).notes=l),rows:"4",class:"border border-gray-300 px-3 py-2 rounded-md w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500 focus:border-blue-500",disabled:s(t).processing,placeholder:"Additional notes about this role assignment, responsibilities, special conditions, or expectations..."},null,8,Fe),[[x,s(t).notes]]),s(t).errors.notes?(n(),r("div",Ie,i(s(t).errors.notes),1)):d("",!0)])]),o("div",Pe,[o("button",{type:"submit",class:"bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 transition-colors w-full sm:w-auto font-semibold flex items-center justify-center gap-2 shadow-sm",disabled:s(t).processing},[s(t).processing?(n(),r("svg",He,e[40]||(e[40]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),s(t).processing?(n(),r("span",Oe,"Creating Assignment...")):(n(),r("span",Ge,"Create Role Assignment"))],8,qe),L(s(N),{href:a.route("admin.manager-roles.index"),class:c(["bg-gray-100 text-gray-700 px-8 py-3 rounded-lg hover:bg-gray-200 transition-colors w-full sm:w-auto text-center font-semibold border border-gray-300",{"pointer-events-none opacity-50":s(t).processing}])},{default:A(()=>e[41]||(e[41]=[k(" Cancel ")])),_:1},8,["href","class"])])],32)])]}),_:1}))}});export{Ye as default};
