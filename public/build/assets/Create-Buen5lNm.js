import{d as J,C as K,r as j,c as x,a as c,o as m,b as s,u as e,m as Q,w as o,e as t,P as B,f as n,j as R,g as N,h as _,F as S,i as T,n as U,t as a}from"./app-BMyidKIh.js";import{f as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as b}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_ as w}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as $}from"./CardDescription.vue_vue_type_script_setup_true_lang-CvcJ_Am_.js";import{_ as C}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as I}from"./Input.vue_vue_type_script_setup_true_lang-BnRJBFP3.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{_ as L}from"./index-C3o0bvIk.js";import{_ as Y}from"./Switch.vue_vue_type_script_setup_true_lang-29U-kBq1.js";import{_ as Z}from"./Checkbox.vue_vue_type_script_setup_true_lang-Blryit7n.js";import{_ as ee,a as se}from"./index-yEoCS5nH.js";import{A as te}from"./arrow-left-WoxIE4Hy.js";import{B as ie}from"./book-open-CrgjHHRr.js";import{S as D}from"./search-D5MvWJsa.js";import{C as P}from"./circle-check-big-Cmw2hoxS.js";import{C as oe}from"./clock-C9ZtgHl0.js";import{U as le}from"./_plugin-vue_export-helper-Cg8ARLjz.js";import{T as re}from"./target-Cl3ydDkw.js";import{T as ae}from"./triangle-alert-BGzxpn4P.js";import{U as ne}from"./user-plus-CbZ7u4pE.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./useForwardExpose-DMAVYlpA.js";import"./VisuallyHidden-hOZS4qMA.js";import"./VisuallyHiddenInput-BJXawX5X.js";import"./usePrimitiveElement-s00YWk2f.js";import"./check-C-CvZSBJ.js";const de={class:"max-w-6xl mx-auto space-y-6"},ue={class:"flex items-center gap-4"},me={class:"relative"},ce={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-3"},fe=["onClick"],_e={class:"flex items-start justify-between mb-3"},pe={class:"font-semibold text-sm line-clamp-2"},ge={key:0,class:"w-5 h-5 rounded-full bg-primary text-primary-foreground flex items-center justify-center flex-shrink-0 ml-2"},ve={class:"text-xs text-muted-foreground mb-3 line-clamp-2"},xe={class:"space-y-2"},he={class:"flex items-center justify-between"},ye={class:"flex items-center gap-1 text-xs text-muted-foreground"},be={class:"flex items-center justify-between text-xs text-muted-foreground"},we={key:0,class:"p-4 bg-primary/5 border border-primary/20 rounded-lg"},Ce={class:"flex items-start gap-3"},ke={class:"w-8 h-8 rounded-full bg-primary text-primary-foreground flex items-center justify-center flex-shrink-0"},Se={class:"flex-1"},Ue={class:"font-semibold"},$e={class:"text-sm text-muted-foreground mt-1"},Ae={class:"flex items-center gap-4 mt-2 text-sm"},Le={key:1,class:"text-sm text-destructive"},Ve={class:"flex items-center justify-between"},je={class:"relative"},Be={class:"space-y-2 max-h-96 overflow-y-auto"},Ne={class:"flex-1"},Te={class:"font-medium"},Ie={class:"text-sm text-muted-foreground"},De={class:"text-xs text-muted-foreground"},Pe={key:0,class:"text-sm text-destructive"},ze={class:"flex items-center justify-between"},Ee={class:"space-y-1"},Fe={class:"space-y-4"},Oe={class:"grid gap-4 md:grid-cols-2"},Me={class:"font-medium"},We={class:"text-sm text-muted-foreground"},qe={class:"font-medium"},Ge={class:"text-sm text-muted-foreground"},He={class:"flex justify-between items-center py-6"},Ss=J({__name:"Create",props:{courses:{},users:{},selectedCourseId:{},selectedUserIds:{}},setup(z){const f=z,E=[{title:"Course Assignments",href:"/admin/course-assignments"},{title:"Assign Courses",href:"#"}],l=K({course_id:f.selectedCourseId||"",user_ids:f.selectedUserIds||[],send_notification:!0}),p=j(""),g=j(""),F=x(()=>p.value?f.courses.filter(d=>d.name.toLowerCase().includes(p.value.toLowerCase())||d.description.toLowerCase().includes(p.value.toLowerCase())):f.courses),h=x(()=>g.value?f.users.filter(d=>d.name.toLowerCase().includes(g.value.toLowerCase())||d.email.toLowerCase().includes(g.value.toLowerCase())):f.users),u=x(()=>f.courses.find(d=>d.id.toString()===l.course_id.toString())),v=x(()=>l.user_ids.length),O=x(()=>l.course_id&&l.user_ids.length>0),M=d=>{l.course_id=d.toString()},W=d=>{const i=l.user_ids.indexOf(d);i>-1?l.user_ids.splice(i,1):l.user_ids.push(d)},q=()=>{l.user_ids.length===h.value.length?l.user_ids=[]:l.user_ids=h.value.map(d=>d.id)},V=d=>{switch(d){case"beginner":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"intermediate":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"advanced":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300"}},G=()=>{l.post("/admin/course-assignments")};return(d,i)=>(m(),c(S,null,[s(e(Q),{title:"Assign Courses"}),s(X,{breadcrumbs:E},{default:o(()=>[t("div",de,[t("div",ue,[s(e(y),{asChild:"",variant:"ghost"},{default:o(()=>[s(e(B),{href:"/admin/course-assignments"},{default:o(()=>[s(e(te),{class:"h-4 w-4 mr-2"}),i[3]||(i[3]=n(" Back to Assignments "))]),_:1})]),_:1}),i[4]||(i[4]=t("div",null,[t("h1",{class:"text-3xl font-bold"},"Assign Courses to Users"),t("p",{class:"text-muted-foreground"},"Select a course and assign it to multiple users at once")],-1))]),t("form",{onSubmit:R(G,["prevent"]),class:"space-y-6"},[s(e(b),null,{default:o(()=>[s(e(C),null,{default:o(()=>[s(e(k),{class:"flex items-center gap-2"},{default:o(()=>[s(e(ie),{class:"h-5 w-5 text-primary"}),i[5]||(i[5]=n(" Select Course "))]),_:1}),s(e($),null,{default:o(()=>i[6]||(i[6]=[n(" Choose the course you want to assign to users ")])),_:1})]),_:1}),s(e(w),{class:"space-y-4"},{default:o(()=>[t("div",me,[s(e(D),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s(e(I),{modelValue:p.value,"onUpdate:modelValue":i[0]||(i[0]=r=>p.value=r),placeholder:"Search courses...",class:"pl-10"},null,8,["modelValue"])]),t("div",ce,[(m(!0),c(S,null,T(F.value,r=>(m(),c("div",{key:r.id,onClick:H=>M(r.id),class:U(["border rounded-lg p-4 cursor-pointer transition-all hover:shadow-md",e(l).course_id.toString()===r.id.toString()?"border-primary bg-primary/5":"border-border hover:border-primary/50"])},[t("div",_e,[t("h3",pe,a(r.name),1),e(l).course_id.toString()===r.id.toString()?(m(),c("div",ge,[s(e(P),{class:"w-3 h-3"})])):_("",!0)]),t("p",ve,a(r.description),1),t("div",xe,[t("div",he,[s(e(L),{class:U([V(r.difficulty_level),"text-xs"])},{default:o(()=>[n(a(r.difficulty_level),1)]),_:2},1032,["class"]),t("div",ye,[s(e(oe),{class:"w-3 h-3"}),n(" "+a(r.estimated_duration)+"min ",1)])]),t("div",be,[t("span",null,a(r.modules_count)+" modules",1),t("span",null,a(r.current_assignments)+" assigned",1)])])],10,fe))),128))]),u.value?(m(),c("div",we,[t("div",Ce,[t("div",ke,[s(e(P),{class:"w-4 h-4"})]),t("div",Se,[t("h4",Ue,a(u.value.name),1),t("p",$e,a(u.value.description),1),t("div",Ae,[t("span",null,a(u.value.modules_count)+" modules",1),t("span",null,a(u.value.estimated_duration)+" minutes",1),s(e(L),{class:U(V(u.value.difficulty_level))},{default:o(()=>[n(a(u.value.difficulty_level),1)]),_:1},8,["class"])])])])])):_("",!0),e(l).errors.course_id?(m(),c("div",Le,a(e(l).errors.course_id),1)):_("",!0)]),_:1})]),_:1}),s(e(b),null,{default:o(()=>[s(e(C),null,{default:o(()=>[t("div",Ve,[t("div",null,[s(e(k),{class:"flex items-center gap-2"},{default:o(()=>[s(e(le),{class:"h-5 w-5 text-primary"}),i[7]||(i[7]=n(" Select Users ")),v.value>0?(m(),N(e(L),{key:0,variant:"secondary"},{default:o(()=>[n(a(v.value)+" selected ",1)]),_:1})):_("",!0)]),_:1}),s(e($),null,{default:o(()=>i[8]||(i[8]=[n(" Choose which users to assign this course to ")])),_:1})]),s(e(y),{type:"button",variant:"outline",size:"sm",onClick:q},{default:o(()=>[n(a(e(l).user_ids.length===h.value.length?"Deselect All":"Select All"),1)]),_:1})])]),_:1}),s(e(w),{class:"space-y-4"},{default:o(()=>[t("div",je,[s(e(D),{class:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s(e(I),{modelValue:g.value,"onUpdate:modelValue":i[1]||(i[1]=r=>g.value=r),placeholder:"Search users by name or email...",class:"pl-10"},null,8,["modelValue"])]),t("div",Be,[(m(!0),c(S,null,T(h.value,r=>(m(),c("div",{key:r.id,class:"flex items-center space-x-3 p-3 border rounded-lg hover:bg-accent/50 transition-colors"},[s(e(Z),{checked:e(l).user_ids.includes(r.id),"onUpdate:checked":H=>W(r.id)},null,8,["checked","onUpdate:checked"]),t("div",Ne,[t("div",Te,a(r.name),1),t("div",Ie,a(r.email),1),t("div",De,a(r.active_assignments)+" active assignments ",1)])]))),128))]),e(l).errors.user_ids?(m(),c("div",Pe,a(e(l).errors.user_ids),1)):_("",!0)]),_:1})]),_:1}),s(e(b),null,{default:o(()=>[s(e(C),null,{default:o(()=>[s(e(k),null,{default:o(()=>i[9]||(i[9]=[n("Assignment Settings")])),_:1}),s(e($),null,{default:o(()=>i[10]||(i[10]=[n(" Configure how the assignment will be handled ")])),_:1})]),_:1}),s(e(w),null,{default:o(()=>[t("div",ze,[t("div",Ee,[s(e(A),null,{default:o(()=>i[11]||(i[11]=[n("Email Notifications")])),_:1}),i[12]||(i[12]=t("div",{class:"text-sm text-muted-foreground"}," Send email notifications to users about their new course assignment ",-1))]),s(e(Y),{checked:e(l).send_notification,"onUpdate:checked":i[2]||(i[2]=r=>e(l).send_notification=r)},null,8,["checked"])])]),_:1})]),_:1}),u.value&&v.value>0?(m(),N(e(b),{key:0},{default:o(()=>[s(e(C),null,{default:o(()=>[s(e(k),{class:"flex items-center gap-2"},{default:o(()=>[s(e(re),{class:"h-5 w-5 text-primary"}),i[13]||(i[13]=n(" Assignment Summary "))]),_:1})]),_:1}),s(e(w),null,{default:o(()=>[t("div",Fe,[t("div",Oe,[t("div",null,[s(e(A),null,{default:o(()=>i[14]||(i[14]=[n("Course")])),_:1}),t("div",Me,a(u.value.name),1),t("div",We,a(u.value.modules_count)+" modules â€¢ "+a(u.value.estimated_duration)+" minutes ",1)]),t("div",null,[s(e(A),null,{default:o(()=>i[15]||(i[15]=[n("Users")])),_:1}),t("div",qe,a(v.value)+" users selected",1),t("div",Ge,a(e(l).send_notification?"With email notifications":"No email notifications"),1)])])])]),_:1})]),_:1})):_("",!0),s(e(ee),null,{default:o(()=>[s(e(ae),{class:"h-4 w-4"}),s(e(se),null,{default:o(()=>i[16]||(i[16]=[t("strong",null,"Note:",-1),n(" Users will be able to access the assigned course immediately. If email notifications are enabled, they will receive an email with course details and access instructions. ")])),_:1})]),_:1}),t("div",He,[s(e(y),{asChild:"",variant:"outline"},{default:o(()=>[s(e(B),{href:"/admin/course-assignments"},{default:o(()=>i[17]||(i[17]=[n(" Cancel ")])),_:1})]),_:1}),s(e(y),{type:"submit",disabled:e(l).processing||!O.value,class:"min-w-48"},{default:o(()=>[s(e(ne),{class:"h-4 w-4 mr-2"}),n(" "+a(e(l).processing?"Assigning Courses...":`Assign Course to ${v.value} Users`),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ss as default};
