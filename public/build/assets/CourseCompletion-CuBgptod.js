import{d as ae,r as h,W as P,k as le,g as c,o as i,w as o,e as l,b as t,u as e,f as r,a as _,F as b,i as y,t as d,y as ne,n as re,h as R}from"./app-sfv6CYbu.js";import{_ as ie}from"./AdminLayout.vue_vue_type_script_setup_true_lang-vvSRP-jI.js";import{l as de}from"./lodash-D900HYF9.js";import{_ as me}from"./Pagination.vue_vue_type_script_setup_true_lang-4jnBr5ia.js";import{_ as w}from"./Button.vue_vue_type_script_setup_true_lang-Ccdh52Vd.js";import{_ as A}from"./Input.vue_vue_type_script_setup_true_lang-PAMz5smE.js";import{_ as $}from"./Label.vue_vue_type_script_setup_true_lang-BH1zqArT.js";import{_ as D}from"./Card.vue_vue_type_script_setup_true_lang-C1bT-eXd.js";import{_ as ue}from"./CardContent.vue_vue_type_script_setup_true_lang-Khif222k.js";import{_ as ce}from"./CardDescription.vue_vue_type_script_setup_true_lang-Du745yLv.js";import{_ as fe}from"./CardHeader.vue_vue_type_script_setup_true_lang-DnS62nQf.js";import{_ as _e}from"./CardTitle.vue_vue_type_script_setup_true_lang-BUNiHSkD.js";import{_ as pe,a as ve,b as ge,c as xe,d as N}from"./SelectValue.vue_vue_type_script_setup_true_lang-BZdTdVyo.js";import{_ as he,a as we,b as S,c as p,d as Ce,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-HEEiC_Nq.js";import{_ as B}from"./index-Dq640zwT.js";import{_ as ke,a as be,b as ye,c as $e}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CpkpI_q5.js";import{D as Se}from"./download-DRSx0WXX.js";import{F as Fe}from"./filter-C94uui0Q.js";import{R as Ve}from"./rotate-ccw-Bf_kok9t.js";import{U as E}from"./user-CHkBTstt.js";import{G as Ue}from"./graduation-cap-SnBzGB4F.js";import{C as ze}from"./calendar-B-HlzXxC.js";import{C as F}from"./circle-check-big-Dm31aE_G.js";import{S as T}from"./star-Trfrp6Jg.js";import{M as q}from"./message-square-3JhJ9rmo.js";import{F as Le}from"./file-text-CObKQg6a.js";import{C as M}from"./circle-alert-B1IqlGbQ.js";import{P as je}from"./pause-klv3kzqs.js";import{C as Pe}from"./circle-x-dvQbjA0Y.js";import{C as Re}from"./clock-DTvpSLd-.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BqoVmqtq.js";import"./index-DdH2r2B8.js";import"./index-C4PRPqD0.js";import"./x-BJKYekbZ.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DttcJlkw.js";import"./useForwardPropsEmits--cawDwsm.js";import"./Presence-CHrFqoPB.js";import"./ConfigProvider-CuMY5RD4.js";import"./useForwardExpose-C32JnqdD.js";import"./Teleport-DTKdiWK5.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./Collection-DekOIFXO.js";import"./usePrimitiveElement-BTNjppil.js";import"./check-Bs2OgQiG.js";import"./useSize-C9jzGnps.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-oKHpmjgu.js";const Ae={class:"px-4 sm:px-0 space-y-6"},De={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Ne={class:"flex items-center"},Be={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ee={class:"space-y-2"},Te={class:"space-y-2"},qe={class:"space-y-2"},Me={class:"flex justify-end mt-4"},Oe={class:"overflow-x-auto"},Ie={class:"flex items-center"},Ge={class:"flex items-center"},We={class:"flex items-center"},He={class:"flex items-center"},Ke={class:"flex items-center"},Xe={class:"flex items-center"},Je={class:"flex items-center"},Qe={class:"flex flex-col items-center"},Ye={class:"space-y-1"},Ze={class:"font-medium text-foreground"},et={class:"text-xs text-muted-foreground hidden sm:block"},tt={class:"text-xs text-muted-foreground sm:hidden"},st={class:"text-sm text-foreground"},ot={class:"text-sm text-foreground"},at={key:0,class:"flex items-center space-x-2"},lt={class:"text-sm font-medium"},nt={class:"flex"},rt={key:1,class:"text-muted-foreground"},it={class:"max-w-xs"},dt={key:1,class:"text-muted-foreground"},mt={class:"max-w-xs"},ut={key:1,class:"text-muted-foreground"},ct={class:"px-4 sm:px-6 py-3 border-t"},ft={key:1,class:"text-sm text-muted-foreground mt-2"},_t={class:"mt-4"},pt={class:"text-sm text-muted-foreground whitespace-pre-wrap break-words max-h-96 overflow-y-auto p-4 bg-muted/50 rounded-lg"},ms=ae({__name:"CourseCompletion",props:{completions:Object,courses:Array,filters:Object,debug:Object},setup(m){var z,L,j;const C=m,O=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Course Completion",href:route("admin.reports.course-completion")}],u=h({course_id:((z=C.filters)==null?void 0:z.course_id)||"",date_from:((L=C.filters)==null?void 0:L.date_from)||"",date_to:((j=C.filters)==null?void 0:j.date_to)||""}),v=h(!1),g=h(""),x=h(""),I=n=>{u.value.course_id=n==="all"?"":n},G=n=>{switch(n?n.toLowerCase():"unknown"){case"completed":return"default";case"enrolled":return"secondary";case"in_progress":case"in-progress":case"active":return"outline";case"pending":return"secondary";case"cancelled":case"canceled":return"destructive";case"on_hold":case"on-hold":return"outline";default:return"secondary"}},W=n=>{switch(n?n.toLowerCase():"unknown"){case"completed":return F;case"enrolled":return E;case"in_progress":case"in-progress":case"active":return Re;case"pending":return M;case"cancelled":case"canceled":return Pe;case"on_hold":case"on-hold":return je;default:return M}},H=n=>{if(!n)return"Unknown";switch(n.toLowerCase()){case"completed":return"Completed";case"enrolled":return"Enrolled";case"in_progress":case"in-progress":return"In Progress";case"active":return"Active";case"pending":return"Pending";case"cancelled":case"canceled":return"Cancelled";case"on_hold":case"on-hold":return"On Hold";default:return n.charAt(0).toUpperCase()+n.slice(1).toLowerCase()}},V=de.debounce(()=>{P.get(route("admin.reports.course-completion"),u.value,{preserveState:!0,replace:!0})},500);le(u,()=>{V()},{deep:!0});const K=()=>{u.value={course_id:"",date_from:"",date_to:""},V()},X=()=>{const n=new URLSearchParams(u.value).toString();window.location.href=route("admin.reports.export.course-completion")+"?"+n},U=n=>n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—",J=n=>{P.get(route("admin.reports.course-completion"),{...u.value,page:n},{preserveState:!0,replace:!0,preserveScroll:!0,onSuccess:()=>{var s;(s=document.querySelector(".bg-white.rounded-lg.shadow"))==null||s.scrollIntoView({behavior:"smooth",block:"start"})}})},Q=(n,s)=>{g.value=`Feedback from ${s}`,x.value=n||"No feedback provided",v.value=!0},Y=(n,s)=>{g.value=`Comment from ${s}`,x.value=n||"No comment provided",v.value=!0},Z=()=>{v.value=!1,g.value="",x.value=""},ee=n=>{n.key==="Escape"&&v.value&&Z()};typeof window<"u"&&window.addEventListener("keydown",ee);const te=n=>{const s=[];for(let a=1;a<=5;a++)s.push(a<=n?"filled":"empty");return s};return(n,s)=>(i(),c(ie,{breadcrumbs:O},{default:o(()=>[l("div",Ae,[l("div",De,[s[4]||(s[4]=l("div",null,[l("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Course Completion Report"),l("p",{class:"text-sm text-muted-foreground mt-1"},"Comprehensive reporting interface for tracking course completion status and statistics")],-1)),t(e(w),{onClick:X,class:"w-full sm:w-auto"},{default:o(()=>[t(e(Se),{class:"mr-2 h-4 w-4"}),s[3]||(s[3]=r(" Export to CSV "))]),_:1})]),t(e(D),null,{default:o(()=>[t(e(fe),null,{default:o(()=>[l("div",Ne,[t(e(Fe),{class:"mr-2 h-5 w-5 text-primary"}),l("div",null,[t(e(_e),null,{default:o(()=>s[5]||(s[5]=[r("Filter Completions")])),_:1}),t(e(ce),null,{default:o(()=>s[6]||(s[6]=[r("Use the filters below to narrow down the completion records")])),_:1})])])]),_:1}),t(e(ue),null,{default:o(()=>[l("div",Be,[l("div",Ee,[t(e($),{for:"course_filter"},{default:o(()=>s[7]||(s[7]=[r("Course")])),_:1}),t(e(pe),{"model-value":u.value.course_id||"all","onUpdate:modelValue":I},{default:o(()=>[t(e(ve),{id:"course_filter"},{default:o(()=>[t(e(ge),{placeholder:"All Courses"})]),_:1}),t(e(xe),null,{default:o(()=>[t(e(N),{value:"all"},{default:o(()=>s[8]||(s[8]=[r("All Courses")])),_:1}),(i(!0),_(b,null,y(m.courses,a=>(i(),c(e(N),{key:a.id,value:a.id.toString()},{default:o(()=>[r(d(a.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),l("div",Te,[t(e($),{for:"date_from"},{default:o(()=>s[9]||(s[9]=[r("Completed From")])),_:1}),t(e(A),{id:"date_from",type:"date",modelValue:u.value.date_from,"onUpdate:modelValue":s[0]||(s[0]=a=>u.value.date_from=a)},null,8,["modelValue"])]),l("div",qe,[t(e($),{for:"date_to"},{default:o(()=>s[10]||(s[10]=[r("Completed To")])),_:1}),t(e(A),{id:"date_to",type:"date",modelValue:u.value.date_to,"onUpdate:modelValue":s[1]||(s[1]=a=>u.value.date_to=a)},null,8,["modelValue"])])]),l("div",Me,[t(e(w),{onClick:K,variant:"outline"},{default:o(()=>[t(e(Ve),{class:"mr-2 h-4 w-4"}),s[11]||(s[11]=r(" Reset Filters "))]),_:1})])]),_:1})]),_:1}),t(e(D),null,{default:o(()=>[l("div",Oe,[t(e(he),null,{default:o(()=>[t(e(we),null,{default:o(()=>[t(e(S),null,{default:o(()=>[t(e(p),null,{default:o(()=>[l("div",Ie,[t(e(E),{class:"mr-2 h-4 w-4"}),s[12]||(s[12]=r(" User "))])]),_:1}),t(e(p),{class:"hidden sm:table-cell"},{default:o(()=>[l("div",Ge,[t(e(Ue),{class:"mr-2 h-4 w-4"}),s[13]||(s[13]=r(" Course "))])]),_:1}),t(e(p),null,{default:o(()=>s[14]||(s[14]=[r("Status")])),_:1}),t(e(p),{class:"hidden md:table-cell"},{default:o(()=>[l("div",We,[t(e(ze),{class:"mr-2 h-4 w-4"}),s[15]||(s[15]=r(" Registered "))])]),_:1}),t(e(p),null,{default:o(()=>[l("div",He,[t(e(F),{class:"mr-2 h-4 w-4"}),s[16]||(s[16]=r(" Completed "))])]),_:1}),t(e(p),{class:"hidden md:table-cell"},{default:o(()=>[l("div",Ke,[t(e(T),{class:"mr-2 h-4 w-4"}),s[17]||(s[17]=r(" Rating "))])]),_:1}),t(e(p),{class:"hidden lg:table-cell"},{default:o(()=>[l("div",Xe,[t(e(q),{class:"mr-2 h-4 w-4"}),s[18]||(s[18]=r(" Feedback "))])]),_:1}),t(e(p),{class:"hidden xl:table-cell"},{default:o(()=>[l("div",Je,[t(e(Le),{class:"mr-2 h-4 w-4"}),s[19]||(s[19]=r(" Comment "))])]),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:o(()=>[m.completions.data.length===0?(i(),c(e(S),{key:0},{default:o(()=>[t(e(f),{colspan:"8",class:"text-center text-muted-foreground py-8"},{default:o(()=>[l("div",Qe,[t(e(F),{class:"h-12 w-12 text-muted-foreground mb-2"}),s[20]||(s[20]=r(" No completion records found "))])]),_:1})]),_:1})):(i(!0),_(b,{key:1},y(m.completions.data,(a,se)=>(i(),c(e(S),{key:se,class:"hover:bg-muted/50"},{default:o(()=>[t(e(f),null,{default:o(()=>[l("div",Ye,[l("div",Ze,d(a.user_name),1),l("div",et,d(a.user_email),1),l("div",tt,d(a.course_name),1)])]),_:2},1024),t(e(f),{class:"hidden sm:table-cell"},{default:o(()=>[t(e(B),{variant:"outline"},{default:o(()=>[r(d(a.course_name),1)]),_:2},1024)]),_:2},1024),t(e(f),null,{default:o(()=>[t(e(B),{variant:G(a.course_status),class:"flex items-center w-fit"},{default:o(()=>[(i(),c(ne(W(a.course_status)),{class:"mr-1 h-3 w-3"})),r(" "+d(H(a.course_status)),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(f),{class:"hidden md:table-cell"},{default:o(()=>[l("div",st,d(U(a.registered_at)),1)]),_:2},1024),t(e(f),null,{default:o(()=>[l("div",ot,d(U(a.completed_at)),1)]),_:2},1024),t(e(f),{class:"hidden md:table-cell"},{default:o(()=>[a.rating?(i(),_("div",at,[l("span",lt,d(a.rating)+"/5",1),l("div",nt,[(i(!0),_(b,null,y(te(a.rating),(k,oe)=>(i(),c(e(T),{key:oe,class:re(["h-4 w-4",k==="filled"?"text-yellow-400 fill-yellow-400":"text-muted-foreground"])},null,8,["class"]))),128))])])):(i(),_("span",rt,"—"))]),_:2},1024),t(e(f),{class:"hidden lg:table-cell"},{default:o(()=>[l("div",it,[a.feedback?(i(),c(e(w),{key:0,onClick:k=>Q(a.feedback,a.user_name),variant:"link",size:"sm",class:"h-auto p-0 text-left justify-start",title:"Click to view full feedback from "+a.user_name},{default:o(()=>[r(d(a.feedback.length>30?a.feedback.substring(0,30)+"...":a.feedback),1)]),_:2},1032,["onClick","title"])):(i(),_("span",dt,"—"))])]),_:2},1024),t(e(f),{class:"hidden xl:table-cell"},{default:o(()=>[l("div",mt,[a.comment?(i(),c(e(w),{key:0,onClick:k=>Y(a.comment,a.user_name),variant:"link",size:"sm",class:"h-auto p-0 text-left justify-start",title:"Click to view full comment from "+a.user_name},{default:o(()=>[r(d(a.comment.length>30?a.comment.substring(0,30)+"...":a.comment),1)]),_:2},1032,["onClick","title"])):(i(),_("span",ut,"—"))])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",ct,[m.completions.data&&m.completions.data.length>0&&m.completions.last_page>1?(i(),c(me,{key:0,links:m.completions.links,onPageChanged:J,class:"mt-4"},null,8,["links"])):R("",!0),m.completions.data&&m.completions.data.length>0?(i(),_("div",ft," Showing "+d(m.completions.from)+" to "+d(m.completions.to)+" of "+d(m.completions.total)+" results ",1)):R("",!0)])]),_:1})]),t(e(ke),{open:v.value,"onUpdate:open":s[2]||(s[2]=a=>v.value=a)},{default:o(()=>[t(e(be),{class:"max-w-2xl"},{default:o(()=>[t(e(ye),null,{default:o(()=>[t(e($e),{class:"flex items-center"},{default:o(()=>[t(e(q),{class:"mr-2 h-5 w-5 text-primary"}),r(" "+d(g.value),1)]),_:1})]),_:1}),l("div",_t,[l("div",pt,d(x.value),1)])]),_:1})]),_:1},8,["open"])]),_:1}))}});export{ms as default};
