import{P as we,bo as v,g as N,o as a,w as n,e as s,a as c,h as p,b as r,f as m,t as f,F as Q,i as A,n as x,j as me,s as W,J as G,z as ke,r as R,C as Ce,c as M,l as Ee,x as _e,W as fe}from"./app-BMyidKIh.js";import{M as Ve}from"./Modal-D89sCvyf.js";import{_ as ze}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CwtOIFIS.js";import{_ as Fe}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as qe}from"./Input.vue_vue_type_script_setup_true_lang-BnRJBFP3.js";import{_ as Se}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{b as Te,a as Qe,d as Ae,c as Me,_ as Ue}from"./SelectValue.vue_vue_type_script_setup_true_lang-TbH3IXvu.js";import{_ as Pe}from"./Textarea.vue_vue_type_script_setup_true_lang-7L_wYbMO.js";import{_ as Le}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_ as Oe}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as Be}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as De}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as je}from"./_plugin-vue_export-helper-Cg8ARLjz.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./clock-C9ZtgHl0.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./Presence-D_88WakH.js";import"./ConfigProvider-BNe-qVox.js";import"./useForwardExpose-DMAVYlpA.js";import"./Teleport-CcnEHzmd.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BQjwjK-c.js";import"./Collection-CjETHI6E.js";import"./usePrimitiveElement-s00YWk2f.js";import"./check-C-CvZSBJ.js";import"./useSize-DbKzACL9.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-hOZS4qMA.js";const Re={components:{AdminLayout:ze,Link:we,Modal:Ve,Button:Fe,Input:qe,Label:Se,Select:Ue,SelectContent:Me,SelectItem:Ae,SelectTrigger:Qe,SelectValue:Te,Textarea:Pe,Card:Le,CardContent:Oe,CardHeader:Be,CardTitle:De},props:{quiz:{type:Object,required:!0},courses:{type:Array,default:()=>[]},onlineCourses:{type:Array,default:()=>[]}},setup(h){var Y,Z,I,$,ee,te,se,re,oe,le,ie,ne,de,ae,ue;const t=ke(),U=R(!1),e=R(!1),V=R([]),K=R(0),H={success:"border-green-200 bg-green-50",error:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},E={success:"text-green-500 bg-green-100",error:"text-red-500 bg-red-100",info:"text-blue-500 bg-blue-100"},z=R({}),P=d=>!d||!Array.isArray(d)?[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""}]:d.map(o=>{if(!o)return{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""};if(o.type==="text")return{id:o.id||null,question_text:o.question_text||"",type:"text",points:0,options:[],correct_answer:[],correct_answer_explanation:o.correct_answer_explanation||""};let _=["",""];o.options&&Array.isArray(o.options)&&(_=o.options.map(w=>typeof w=="string"?w:(w==null?void 0:w.option_text)||""),_.length<2&&(_=[..._,"",""].slice(0,2)));let y=[];return o.correct_answer&&Array.isArray(o.correct_answer)&&(y=o.correct_answer.map(w=>typeof w=="string"?w:(w==null?void 0:w.option_text)||"")),{id:o.id||null,question_text:o.question_text||"",type:o.type||"radio",points:o.points||0,options:_,correct_answer:y,correct_answer_explanation:o.correct_answer_explanation||""}}),i=Ce({course_type:((Y=h.quiz)==null?void 0:Y.course_type)||((Z=h.quiz)!=null&&Z.course_online_id?"online":"regular"),course_id:((I=h.quiz)==null?void 0:I.course_id)||"",course_online_id:(($=h.quiz)==null?void 0:$.course_online_id)||"",title:((ee=h.quiz)==null?void 0:ee.title)||"",description:((te=h.quiz)==null?void 0:te.description)||"",status:((se=h.quiz)==null?void 0:se.status)||"draft",pass_threshold:((re=h.quiz)==null?void 0:re.pass_threshold)||80,has_deadline:((oe=h.quiz)==null?void 0:oe.has_deadline)||!1,deadline_date:((le=h.quiz)==null?void 0:le.deadline_date)||"",deadline_time:((ie=h.quiz)==null?void 0:ie.deadline_time)||"",enforce_deadline:((ne=h.quiz)==null?void 0:ne.enforce_deadline)??!0,time_limit_minutes:((de=h.quiz)==null?void 0:de.time_limit_minutes)||null,allows_extensions:((ae=h.quiz)==null?void 0:ae.allows_extensions)||!1,questions:P((ue=h.quiz)==null?void 0:ue.questions)}),L=M({get(){return i.course_type==="regular"?i.course_id:i.course_online_id},set(d){i.course_type==="regular"?(i.course_id=d,i.course_online_id=""):(i.course_online_id=d,i.course_id="")}}),O=()=>{i.course_id="",i.course_online_id=""};Ee(()=>t.props.errors,d=>{z.value=d||{}},{immediate:!0,deep:!0});const k=M(()=>({...i.errors,...z.value})),B=M(()=>Object.keys(k.value).length>0),S=M(()=>{var d;return{hasTitle:!!((d=i.title)!=null&&d.trim()),hasCourse:!!(i.course_id||i.course_online_id),hasValidThreshold:i.pass_threshold>=0&&i.pass_threshold<=100,hasQuestions:i.questions.length>0,allQuestionsValid:i.questions.every(o=>{var _;return(_=o.question_text)!=null&&_.trim()?o.type==="text"?!0:!(!o.points||o.points<=0||!o.options||o.options.length<2||!o.options.every(y=>y==null?void 0:y.trim())||!o.correct_answer||o.correct_answer.length===0):!1})}}),q=M(()=>Object.values(S.value).every(Boolean)),D=M(()=>!q.value),F=M(()=>{const d=Object.keys(k.value).length;return d===0?{title:"",message:""}:{title:d===1?"Please fix the following issue:":`Please fix the following ${d} issues:`,message:"Review the highlighted fields below and correct any errors before saving."}}),C=(d,o="info",_=5e3)=>{const y=++K.value,w={id:y,message:d,type:o,show:!1};return V.value.push(w),_e(()=>{const ce=V.value.findIndex(ye=>ye.id===y);ce!==-1&&(V.value[ce].show=!0)}),_>0&&setTimeout(()=>j(y),_),y},j=d=>{const o=V.value.findIndex(_=>_.id===d);o!==-1&&(V.value[o].show=!1,setTimeout(()=>{const _=V.value.findIndex(y=>y.id===d);_!==-1&&V.value.splice(_,1)},300))},J=d=>d.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase()).replace(/questions\.(\d+)\./,"Question $1 "),l=d=>{const o=k.value[d];return Array.isArray(o)?o[0]:o||null},u=d=>[`questions.${d}.question_text`,`questions.${d}.type`,`questions.${d}.points`,`questions.${d}.options`,`questions.${d}.correct_answer`].some(_=>l(_)),g=()=>{_e(()=>{const d=document.querySelector(".text-red-600, .border-red-300");d&&d.scrollIntoView({behavior:"smooth",block:"center"})})},b=()=>{try{i.questions.length<20&&i.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""})}catch(d){console.error("Error adding question:",d),C("Failed to add question. Please try again.","error")}},T=d=>{try{i.questions.length>1&&i.questions.splice(d,1)}catch(o){console.error("Error removing question:",o),C("Failed to remove question. Please try again.","error")}},pe=d=>{try{i.questions[d].options.length<10&&i.questions[d].options.push("")}catch(o){console.error("Error adding option:",o),C("Failed to add option. Please try again.","error")}},ge=(d,o)=>{try{const _=i.questions[d];if(_.options.length>2){const y=_.options[o];_.options.splice(o,1),Array.isArray(_.correct_answer)&&(_.correct_answer=_.correct_answer.filter(w=>w!==y))}}catch(_){console.error("Error removing option:",_),C("Failed to remove option. Please try again.","error")}},he=d=>{try{const o=i.questions[d];o.type==="text"?(o.options=[],o.correct_answer=[],o.points=0):((!o.options||o.options.length<2)&&(o.options=["",""]),o.correct_answer=[]),o.correct_answer_explanation=""}catch(o){console.error("Error resetting question options:",o),C("Failed to reset question options. Please try again.","error")}},xe=(d,o)=>{try{const _=i.questions[d];_.type==="radio"&&(_.correct_answer=[o])}catch(_){console.error("Error updating correct answer:",_),C("Failed to update correct answer. Please try again.","error")}},be=()=>{try{if(z.value={},e.value=!1,i.status==="published"&&!q.value){C("Cannot publish quiz. Please fix all required fields first.","error",8e3),g();return}i.transform(d=>({course_type:i.course_type,course_id:i.course_type==="regular"?i.course_id:null,course_online_id:i.course_type==="online"?i.course_online_id:null,title:i.title,description:i.description,status:i.status,pass_threshold:i.pass_threshold,has_deadline:i.has_deadline,deadline_date:i.has_deadline?i.deadline_date:null,deadline_time:i.has_deadline?i.deadline_time:null,enforce_deadline:i.has_deadline?i.enforce_deadline:!0,time_limit_minutes:i.time_limit_minutes||null,allows_extensions:i.has_deadline?i.allows_extensions:!1,questions:i.questions.map(o=>({id:o.id||null,question_text:o.question_text,type:o.type,points:o.type==="text"?0:o.points,options:o.options?o.options.filter(_=>_&&_.trim()):[],correct_answer:Array.isArray(o.correct_answer)?o.correct_answer.filter(_=>_&&_.trim()):o.correct_answer?[o.correct_answer]:[],correct_answer_explanation:o.correct_answer_explanation||""}))})).put(route("admin.quizzes.update",h.quiz.id),{preserveState:!0,preserveScroll:!0,onStart:()=>{V.value.forEach(d=>j(d.id))},onSuccess:d=>{e.value=!0,C("Quiz updated successfully!","success",4e3),setTimeout(()=>{fe.visit(route("admin.quizzes.index"),{replace:!0})},1500)},onError:d=>{z.value=d;const o=Object.keys(d).length,_=o===1?"Please correct the error below.":`Please correct the ${o} errors below.`;C(_,"error",8e3),setTimeout(()=>{g()},100)},onFinish:()=>{}})}catch(d){console.error("Critical error in submitQuiz:",d),C("An unexpected error occurred. Please try again.","error")}},ve=()=>{i.isDirty?U.value=!0:X()},X=()=>{i.reset(),z.value={},U.value=!1,e.value=!1,fe.visit(route("admin.quizzes.index"))};return{form:i,hasErrors:B,allErrors:k,errorSummary:F,publishingChecklist:S,canPublish:q,hasPublishingRequirements:D,showDiscardModal:U,showSuccessMessage:e,toasts:V,toastClasses:H,toastIconClasses:E,selectedCourseId:L,resetCourseSelection:O,formatFieldName:J,getFieldError:l,hasQuestionErrors:u,scrollToFirstError:g,addQuestion:b,removeQuestion:T,addOption:pe,removeOption:ge,resetQuestionOptions:he,updateCorrectAnswer:xe,submitQuiz:be,confirmDiscard:ve,discardChanges:X,addToast:C,removeToast:j,breadcrumbs:[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Edit",route:null}]}}},He={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},Ne={class:"mb-8 flex items-center justify-between"},We={key:0,class:"mb-6 rounded-lg border border-red-200 bg-red-50 p-6 shadow-sm"},Ge={class:"flex items-start"},Je={class:"ml-3 flex-1"},Ke={class:"text-sm font-medium text-red-800"},Xe={class:"mt-2 text-sm text-red-700"},Ye={class:"mb-3"},Ze={class:"list-disc pl-5 space-y-1"},Ie={class:"font-medium"},$e={class:"ml-4 flex-shrink-0"},et={key:1,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 shadow-sm"},tt={key:2,class:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4 shadow-sm"},st={class:"flex items-start"},rt={class:"ml-3"},ot={class:"mt-2 text-sm text-blue-700"},lt={class:"list-disc pl-5 space-y-1"},it={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},nt={key:0,class:"mt-1 text-sm text-red-600"},dt={key:0},at={key:0,class:"mt-1 text-sm text-red-600"},ut={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ct={key:0,class:"mt-1 text-sm text-red-600"},mt={key:0,class:"mt-1 text-sm text-red-600"},_t={class:"sm:col-span-2"},ft={key:0,class:"mt-1 text-sm text-red-600"},pt={class:"sm:col-span-2"},gt={key:0,class:"mt-1 text-sm text-red-600"},ht={class:"space-y-4"},xt={class:"flex items-center space-x-2"},bt=["disabled"],vt={key:0,class:"space-y-4 p-4 border rounded-lg bg-muted/20"},yt={class:"grid grid-cols-2 gap-4"},wt={key:0,class:"mt-1 text-sm text-red-600"},kt={key:0,class:"mt-1 text-sm text-red-600"},Ct={class:"flex items-center space-x-2"},Et=["disabled"],Vt={key:0,class:"mt-1 text-sm text-red-600"},zt={class:"flex items-center space-x-2"},Ft=["disabled"],qt={class:"mb-4 flex items-center justify-between"},St={key:0,class:"inline-flex items-center ml-2 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},Tt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Qt={class:"sm:col-span-2"},At={key:0,class:"mt-1 text-sm text-red-600"},Mt={key:0,class:"mt-1 text-sm text-red-600"},Ut={key:0},Pt={key:0,class:"mt-1 text-sm text-red-600"},Lt={key:0,class:"mt-4"},Ot={key:0,class:"mt-1 text-sm text-red-600"},Bt={class:"mt-4"},Dt={key:0,class:"space-y-2"},jt=["id","checked","value","name","disabled","onChange"],Rt=["for"],Ht={key:1,class:"space-y-2"},Nt=["id","value","onUpdate:modelValue","disabled"],Wt=["for"],Gt={key:2,class:"mt-1 text-sm text-red-600"},Jt={class:"mt-4"},Kt={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},Xt={class:"flex justify-end space-x-3"},Yt={key:0,class:"flex items-center"},Zt={key:1},It={class:"p-6 sm:p-8"},$t={class:"flex justify-end space-x-3"},es={key:3,class:"fixed top-4 right-4 z-50 space-y-2"},ts={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},ss={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},rs={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},os={class:"ml-3 text-sm font-normal"},ls=["onClick"];function is(h,t,U,e,V,K){const H=v("Link"),E=v("Button"),z=v("CardTitle"),P=v("CardHeader"),i=v("Label"),L=v("SelectValue"),O=v("SelectTrigger"),k=v("SelectItem"),B=v("SelectContent"),S=v("Select"),q=v("CardContent"),D=v("Card"),F=v("Input"),C=v("Textarea"),j=v("Modal"),J=v("AdminLayout");return a(),N(J,{breadcrumbs:e.breadcrumbs},{default:n(()=>[s("div",He,[s("div",Ne,[t[17]||(t[17]=s("h1",{class:"text-3xl font-bold text-white"},"Edit Quiz",-1)),r(E,{"as-child":"",variant:"outline"},{default:n(()=>[r(H,{href:h.route("admin.quizzes.index")},{default:n(()=>t[16]||(t[16]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),e.hasErrors?(a(),c("div",We,[s("div",Ge,[t[18]||(t[18]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",Je,[s("h3",Ke,f(e.errorSummary.title),1),s("div",Xe,[s("p",Ye,f(e.errorSummary.message),1),s("ul",Ze,[(a(!0),c(Q,null,A(e.allErrors,(l,u)=>(a(),c("li",{key:u,class:"break-words"},[s("span",Ie,f(e.formatFieldName(u))+":",1),m(" "+f(Array.isArray(l)?l[0]:l),1)]))),128))])])]),s("div",$e,[s("button",{onClick:t[0]||(t[0]=(...l)=>e.scrollToFirstError&&e.scrollToFirstError(...l)),class:"inline-flex items-center rounded-md bg-red-100 px-3 py-1.5 text-xs font-medium text-red-800 hover:bg-red-200 transition-colors"}," Go to first error ")])])])):p("",!0),e.showSuccessMessage?(a(),c("div",et,t[19]||(t[19]=[s("div",{class:"flex items-center"},[s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),s("p",{class:"ml-3 text-sm text-green-700 font-medium"}," Quiz saved successfully! ")],-1)]))):p("",!0),e.form.status==="published"&&e.hasPublishingRequirements?(a(),c("div",tt,[s("div",st,[t[22]||(t[22]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",rt,[t[21]||(t[21]=s("h3",{class:"text-sm font-medium text-blue-800"},"Publishing Requirements",-1)),s("div",ot,[t[20]||(t[20]=s("p",{class:"mb-2"},"To publish this quiz, please ensure:",-1)),s("ul",lt,[s("li",{class:x(e.publishingChecklist.hasTitle?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasTitle?"✓":"✗")+" Quiz has a title ",3),s("li",{class:x(e.publishingChecklist.hasCourse?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasCourse?"✓":"✗")+" Course is selected ",3),s("li",{class:x(e.publishingChecklist.hasValidThreshold?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasValidThreshold?"✓":"✗")+" Pass threshold is set (0-100%) ",3),s("li",{class:x(e.publishingChecklist.hasQuestions?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasQuestions?"✓":"✗")+" At least one valid question ",3),s("li",{class:x(e.publishingChecklist.allQuestionsValid?"text-green-600":"text-red-600")},f(e.publishingChecklist.allQuestionsValid?"✓":"✗")+" All questions have correct answers ",3)])])])])])):p("",!0),s("form",{onSubmit:t[13]||(t[13]=me((...l)=>e.submitQuiz&&e.submitQuiz(...l),["prevent"])),class:"space-y-8"},[r(D,null,{default:n(()=>[r(P,null,{default:n(()=>[r(z,null,{default:n(()=>t[23]||(t[23]=[m("Course Assignment")])),_:1})]),_:1}),r(q,null,{default:n(()=>[s("div",it,[s("div",null,[r(i,{for:"course_type",class:x(e.getFieldError("course_type")?"text-red-700":"")},{default:n(()=>t[24]||(t[24]=[m(" Course Type "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),r(S,{modelValue:e.form.course_type,"onUpdate:modelValue":[t[1]||(t[1]=l=>e.form.course_type=l),e.resetCourseSelection],disabled:e.form.processing},{default:n(()=>[r(O,null,{default:n(()=>[r(L,{placeholder:"Select course type"})]),_:1}),r(B,null,{default:n(()=>[r(k,{value:"regular"},{default:n(()=>t[25]||(t[25]=[m("Regular Course")])),_:1}),r(k,{value:"online"},{default:n(()=>t[26]||(t[26]=[m("Online Course")])),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]),e.getFieldError("course_type")?(a(),c("div",nt,f(e.getFieldError("course_type")),1)):p("",!0)]),e.form.course_type?(a(),c("div",dt,[r(i,{for:"course_id",class:x(e.getFieldError("course_id")||e.getFieldError("course_online_id")?"text-red-700":"")},{default:n(()=>[m(" Select "+f(e.form.course_type==="regular"?"Regular":"Online")+" Course ",1),t[27]||(t[27]=s("span",{class:"text-red-500"},"*",-1))]),_:1},8,["class"]),r(S,{modelValue:e.selectedCourseId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.selectedCourseId=l),disabled:e.form.processing},{default:n(()=>[r(O,null,{default:n(()=>[r(L,{placeholder:"Select Course"})]),_:1}),r(B,null,{default:n(()=>[(a(!0),c(Q,null,A(e.form.course_type==="regular"?U.courses:U.onlineCourses,l=>(a(),N(k,{key:l.id,value:l.id.toString()},{default:n(()=>[m(f(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("course_id")||e.getFieldError("course_online_id")?(a(),c("div",at,f(e.getFieldError("course_id")||e.getFieldError("course_online_id")),1)):p("",!0)])):p("",!0)])]),_:1})]),_:1}),r(D,null,{default:n(()=>[r(P,null,{default:n(()=>[r(z,null,{default:n(()=>t[28]||(t[28]=[m("Quiz Details")])),_:1})]),_:1}),r(q,{class:"space-y-6"},{default:n(()=>[s("div",ut,[s("div",null,[r(i,{for:"status",class:x(e.getFieldError("status")?"text-red-700":"")},{default:n(()=>t[29]||(t[29]=[m(" Status "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),r(S,{modelValue:e.form.status,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.status=l),disabled:e.form.processing},{default:n(()=>[r(O,null,{default:n(()=>[r(L,{placeholder:"Select Status"})]),_:1}),r(B,null,{default:n(()=>[r(k,{value:"draft"},{default:n(()=>t[30]||(t[30]=[m("Draft")])),_:1}),r(k,{value:"published"},{default:n(()=>t[31]||(t[31]=[m("Published")])),_:1}),r(k,{value:"archived"},{default:n(()=>t[32]||(t[32]=[m("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("status")?(a(),c("div",ct,f(e.getFieldError("status")),1)):p("",!0)]),s("div",null,[r(i,{for:"pass_threshold",class:x(e.getFieldError("pass_threshold")?"text-red-700":"")},{default:n(()=>t[33]||(t[33]=[m(" Pass Threshold (%) "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),r(F,{id:"pass_threshold",modelValue:e.form.pass_threshold,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.pass_threshold=l),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter pass threshold (e.g., 80.00)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("pass_threshold")?(a(),c("div",mt,f(e.getFieldError("pass_threshold")),1)):p("",!0)]),s("div",_t,[r(i,{for:"title",class:x(e.getFieldError("title")?"text-red-700":"")},{default:n(()=>t[34]||(t[34]=[m(" Title "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),r(F,{id:"title",modelValue:e.form.title,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.title=l),type:"text",placeholder:"Enter quiz title",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("title")?(a(),c("div",ft,f(e.getFieldError("title")),1)):p("",!0)]),s("div",pt,[r(i,{for:"description"},{default:n(()=>t[35]||(t[35]=[m("Description")])),_:1}),r(C,{id:"description",modelValue:e.form.description,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.description=l),rows:"4",placeholder:"Enter quiz description (optional)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("description")?(a(),c("div",gt,f(e.getFieldError("description")),1)):p("",!0)])])]),_:1})]),_:1}),r(D,null,{default:n(()=>[r(P,null,{default:n(()=>[r(z,null,{default:n(()=>t[36]||(t[36]=[m("⏰ Deadline Settings")])),_:1})]),_:1}),r(q,null,{default:n(()=>[s("div",ht,[s("div",xt,[W(s("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>e.form.has_deadline=l),id:"has_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,bt),[[G,e.form.has_deadline]]),r(i,{for:"has_deadline"},{default:n(()=>t[37]||(t[37]=[m("Set a deadline for this quiz")])),_:1})]),e.form.has_deadline?(a(),c("div",vt,[s("div",yt,[s("div",null,[r(i,{for:"deadline_date"},{default:n(()=>t[38]||(t[38]=[m("Deadline Date")])),_:1}),r(F,{id:"deadline_date",type:"date",modelValue:e.form.deadline_date,"onUpdate:modelValue":t[8]||(t[8]=l=>e.form.deadline_date=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_date")?(a(),c("div",wt,f(e.getFieldError("deadline_date")),1)):p("",!0)]),s("div",null,[r(i,{for:"deadline_time"},{default:n(()=>t[39]||(t[39]=[m("Deadline Time")])),_:1}),r(F,{id:"deadline_time",type:"time",modelValue:e.form.deadline_time,"onUpdate:modelValue":t[9]||(t[9]=l=>e.form.deadline_time=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_time")?(a(),c("div",kt,f(e.getFieldError("deadline_time")),1)):p("",!0)])]),s("div",Ct,[W(s("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=l=>e.form.enforce_deadline=l),id:"enforce_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Et),[[G,e.form.enforce_deadline]]),r(i,{for:"enforce_deadline"},{default:n(()=>t[40]||(t[40]=[m("Strictly enforce deadline (no late submissions)")])),_:1})]),s("div",null,[r(i,{for:"time_limit_minutes"},{default:n(()=>t[41]||(t[41]=[m("Quiz time limit (minutes per attempt)")])),_:1}),r(F,{id:"time_limit_minutes",type:"number",modelValue:e.form.time_limit_minutes,"onUpdate:modelValue":t[11]||(t[11]=l=>e.form.time_limit_minutes=l),modelModifiers:{number:!0},disabled:e.form.processing,placeholder:"Leave empty for no time limit",min:"1",max:"1440"},null,8,["modelValue","disabled"]),t[42]||(t[42]=s("p",{class:"text-xs text-muted-foreground mt-1"},"Optional: Set how many minutes students have to complete the quiz",-1)),e.getFieldError("time_limit_minutes")?(a(),c("div",Vt,f(e.getFieldError("time_limit_minutes")),1)):p("",!0)]),s("div",zt,[W(s("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>e.form.allows_extensions=l),id:"allows_extensions",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Ft),[[G,e.form.allows_extensions]]),r(i,{for:"allows_extensions"},{default:n(()=>t[43]||(t[43]=[m("Allow deadline extensions upon request")])),_:1})])])):p("",!0)])]),_:1})]),_:1}),r(D,null,{default:n(()=>[r(P,null,{default:n(()=>[r(z,null,{default:n(()=>[m("Questions ("+f(e.form.questions.length)+"/20)",1)]),_:1})]),_:1}),r(q,null,{default:n(()=>[(a(!0),c(Q,null,A(e.form.questions,(l,u)=>(a(),c("div",{key:`question-${u}`,class:x(["border dark rounded-lg p-4 mb-4",e.hasQuestionErrors(u)?"border-red-300 bg-red-50":""])},[s("div",qt,[s("h3",{class:x(["text-sm font-medium",e.hasQuestionErrors(u)?"text-red-900":"text-white"])},[m(" Question "+f(u+1)+" ",1),e.hasQuestionErrors(u)?(a(),c("span",St," Has errors ")):p("",!0)],2),e.form.questions.length>1?(a(),N(E,{key:0,onClick:g=>e.removeQuestion(u),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:e.form.processing},{default:n(()=>t[44]||(t[44]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]),s("div",Tt,[s("div",Qt,[r(i,{for:`question_text_${u}`,class:x(e.getFieldError(`questions.${u}.question_text`)?"text-red-700":"")},{default:n(()=>t[45]||(t[45]=[m(" Question Text "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),r(F,{id:`question_text_${u}`,modelValue:l.question_text,"onUpdate:modelValue":g=>l.question_text=g,type:"text",placeholder:"Enter question text",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.question_text`)?(a(),c("div",At,f(e.getFieldError(`questions.${u}.question_text`)),1)):p("",!0)]),s("div",null,[r(i,{for:`type_${u}`,class:x(e.getFieldError(`questions.${u}.type`)?"text-red-700":"")},{default:n(()=>t[46]||(t[46]=[m(" Type "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),r(S,{id:`type_${u}`,modelValue:l.type,"onUpdate:modelValue":[g=>l.type=g,g=>e.resetQuestionOptions(u)],disabled:e.form.processing},{default:n(()=>[r(O,null,{default:n(()=>[r(L,{placeholder:"Select question type"})]),_:1}),r(B,null,{default:n(()=>[r(k,{value:"radio"},{default:n(()=>t[47]||(t[47]=[m("Radio (Single Choice)")])),_:1}),r(k,{value:"checkbox"},{default:n(()=>t[48]||(t[48]=[m("Checkbox (Multiple Choice)")])),_:1}),r(k,{value:"text"},{default:n(()=>t[49]||(t[49]=[m("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.type`)?(a(),c("div",Mt,f(e.getFieldError(`questions.${u}.type`)),1)):p("",!0)]),l.type!=="text"?(a(),c("div",Ut,[r(i,{for:`points_${u}`,class:x(e.getFieldError(`questions.${u}.points`)?"text-red-700":"")},{default:n(()=>t[50]||(t[50]=[m(" Points "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),r(F,{id:`points_${u}`,modelValue:l.points,"onUpdate:modelValue":g=>l.points=g,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter points",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.points`)?(a(),c("div",Pt,f(e.getFieldError(`questions.${u}.points`)),1)):p("",!0)])):p("",!0)]),l.type!=="text"?(a(),c("div",Lt,[t[55]||(t[55]=s("h4",{class:"mb-2 text-sm font-medium text-white"},"Options",-1)),(a(!0),c(Q,null,A(l.options,(g,b)=>(a(),c("div",{key:`option-${u}-${b}`,class:"mb-2 flex items-center"},[r(F,{modelValue:l.options[b],"onUpdate:modelValue":T=>l.options[b]=T,type:"text",class:"flex-1",placeholder:`Option ${b+1}`,disabled:e.form.processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),l.options.length>2?(a(),N(E,{key:0,onClick:T=>e.removeOption(u,b),type:"button",variant:"ghost",size:"sm",class:"ml-2 text-destructive",disabled:e.form.processing},{default:n(()=>t[51]||(t[51]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]))),128)),e.getFieldError(`questions.${u}.options`)?(a(),c("div",Ot,f(e.getFieldError(`questions.${u}.options`)),1)):p("",!0),r(E,{onClick:g=>e.addOption(u),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:e.form.processing||l.options.length>=10},{default:n(()=>t[52]||(t[52]=[m(" Add Option ")])),_:2},1032,["onClick","disabled"]),s("div",Bt,[t[53]||(t[53]=s("label",{class:"mb-1 block text-sm font-medium text-white"},[m(" Correct Answer(s) "),s("span",{class:"text-red-500"},"*")],-1)),l.type==="radio"?(a(),c("div",Dt,[(a(!0),c(Q,null,A(l.options,(g,b)=>(a(),c("div",{key:`radio-${u}-${b}`,class:"flex items-center"},[s("input",{id:`correct_answer_${u}_${b}`,checked:l.correct_answer.includes(g),value:g,type:"radio",name:`correct_answer_${u}`,class:"h-4 w-4 dark text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim(),onChange:T=>e.updateCorrectAnswer(u,g)},null,40,jt),s("label",{for:`correct_answer_${u}_${b}`,class:"ml-2 text-sm text-white"},f(g||`Option ${b+1}`),9,Rt)]))),128))])):l.type==="checkbox"?(a(),c("div",Ht,[(a(!0),c(Q,null,A(l.options,(g,b)=>(a(),c("div",{key:`checkbox-${u}-${b}`,class:"flex items-center"},[W(s("input",{id:`correct_answer_${u}_${b}`,value:g,type:"checkbox","onUpdate:modelValue":T=>l.correct_answer=T,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim()},null,8,Nt),[[G,l.correct_answer]]),s("label",{for:`correct_answer_${u}_${b}`,class:"ml-2 text-sm text-white"},f(g||`Option ${b+1}`),9,Wt)]))),128))])):p("",!0),e.getFieldError(`questions.${u}.correct_answer`)?(a(),c("div",Gt,f(e.getFieldError(`questions.${u}.correct_answer`)),1)):p("",!0)]),s("div",Jt,[r(i,{for:`correct_answer_explanation_${u}`},{default:n(()=>t[54]||(t[54]=[m("Correct Answer Explanation")])),_:2},1032,["for"]),r(C,{id:`correct_answer_explanation_${u}`,modelValue:l.correct_answer_explanation,"onUpdate:modelValue":g=>l.correct_answer_explanation=g,rows:"2",placeholder:"Explain why this is correct (optional)",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])])):p("",!0),l.type==="text"?(a(),c("div",Kt,t[56]||(t[56]=[s("p",{class:"text-sm text-blue-700"}," 📝 This is an open-ended text question. Students will provide their own written response. ",-1)]))):p("",!0)],2))),128)),r(E,{onClick:e.addQuestion,type:"button",disabled:e.form.processing||e.form.questions.length>=20},{default:n(()=>t[57]||(t[57]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),s("div",Xt,[r(E,{"as-child":"",variant:"outline",disabled:e.form.processing},{default:n(()=>[r(H,{href:h.route("admin.quizzes.index"),onClick:me(e.confirmDiscard,["prevent"])},{default:n(()=>t[58]||(t[58]=[m(" Cancel ")])),_:1},8,["href","onClick"])]),_:1},8,["disabled"]),r(E,{type:"submit",disabled:e.form.processing||e.form.status==="published"&&!e.canPublish},{default:n(()=>[e.form.processing?(a(),c("span",Yt,t[59]||(t[59]=[s("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),m(" Saving... ")]))):(a(),c("span",Zt,"Update Quiz"))]),_:1},8,["disabled"])])],32),r(j,{show:e.showDiscardModal,onClose:t[15]||(t[15]=l=>e.showDiscardModal=!1)},{default:n(()=>[s("div",It,[t[62]||(t[62]=s("h2",{class:"mb-3 text-xl font-semibold text-white"},"Discard Changes",-1)),t[63]||(t[63]=s("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),s("div",$t,[r(E,{onClick:t[14]||(t[14]=l=>e.showDiscardModal=!1),variant:"outline",disabled:e.form.processing},{default:n(()=>t[60]||(t[60]=[m(" Cancel ")])),_:1},8,["disabled"]),r(E,{onClick:e.discardChanges,variant:"destructive",disabled:e.form.processing},{default:n(()=>t[61]||(t[61]=[m(" Discard ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"]),e.toasts.length>0?(a(),c("div",es,[(a(!0),c(Q,null,A(e.toasts,l=>(a(),c("div",{key:l.id,class:x(["transform transition-all duration-300 ease-in-out",l.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[s("div",{class:x(["flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg border",e.toastClasses[l.type]])},[s("div",{class:x(["inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",e.toastIconClasses[l.type]])},[l.type==="success"?(a(),c("svg",ts,t[64]||(t[64]=[s("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):l.type==="error"?(a(),c("svg",ss,t[65]||(t[65]=[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(a(),c("svg",rs,t[66]||(t[66]=[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),s("div",os,f(l.message),1),s("button",{onClick:u=>e.removeToast(l.id),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-white rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8"},t[67]||(t[67]=[s("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,ls)],2)],2))),128))])):p("",!0)])]),_:1},8,["breadcrumbs"])}const Ds=je(Re,[["render",is],["__scopeId","data-v-cd964b2c"]]);export{Ds as default};
