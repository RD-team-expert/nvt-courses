import{P as S,H as z,k as E,o as i,w as h,e,b as V,j as w,l as D,g,a as d,f as m,F as _,h as x,t as u,i as q,v as p,q as T,C as B,r as j,W as Q}from"./app-n_cIwlLT.js";import{M as L}from"./Modal-CDpZoYXi.js";import{_ as P}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DEbUraED.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-Rz_S81Vw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B9XjMpGI.js";import"./index-BgSmG8al.js";const F={components:{AdminLayout:P,Link:S,Modal:L},props:{courses:{type:Array,default:()=>[]}},setup(v){const o=B({course_id:"",title:"",description:"",status:"draft",pass_threshold:80,questions:[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:"",correct_answer_explanation:""}],processing:!1}),b=j(!1),s=[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Create",route:null}],U=()=>{o.questions.length<20&&o.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:"",correct_answer_explanation:""})},A=a=>{o.questions.length>1&&o.questions.splice(a,1)},y=a=>{o.questions[a].options.length<10&&o.questions[a].options.push("")},k=(a,n)=>{if(o.questions[a].options.length>2){const f=o.questions[a],M=f.options[n];f.options.splice(n,1),f.type==="radio"&&f.correct_answer===M?f.correct_answer="":f.type==="checkbox"&&Array.isArray(f.correct_answer)&&(f.correct_answer=f.correct_answer.filter(O=>O!==M))}},C=a=>{const n=o.questions[a];n.type==="text"?(n.options=[],n.correct_answer="",n.points=0,n.correct_answer_explanation=""):((!n.options||n.options.length<2)&&(n.options=["",""]),n.type==="checkbox"?n.correct_answer=[]:n.correct_answer="",n.correct_answer_explanation="")},t=(a,n)=>{const f=o.questions[a];f.type==="radio"&&(f.correct_answer=n)},r=()=>{const a={course_id:o.course_id,title:o.title,description:o.description,status:o.status,pass_threshold:o.pass_threshold,questions:o.questions.map(n=>({question_text:n.question_text,type:n.type,points:n.type==="text"?0:n.points,options:n.options||[],correct_answer:Array.isArray(n.correct_answer)?n.correct_answer:n.correct_answer?[n.correct_answer]:[],correct_answer_explanation:n.correct_answer_explanation||""}))};console.log("Submitting data:",a),o.processing=!0,Q.post(route("admin.quizzes.store"),a,{onSuccess:()=>{Q.visit(route("admin.quizzes.index"),{replace:!0})},onError:n=>{console.log("Submission errors:",n),o.processing=!1},onFinish:()=>{o.processing=!1}})},l=()=>{o.isDirty?b.value=!0:c()},c=()=>{o.reset(),b.value=!1,Q.visit(route("admin.quizzes.index"))};return{form:o,addQuestion:U,removeQuestion:A,addOption:y,removeOption:k,resetQuestionOptions:C,updateCorrectAnswer:t,submitQuiz:r,showDiscardModal:b,confirmDiscard:l,discardChanges:c,breadcrumbs:s}}},R={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},H={class:"mb-8 flex items-center justify-between"},W={class:"mb-8"},G={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},J=["disabled"],K=["value"],X={key:0,class:"mt-1 text-xs text-red-600"},Y=["disabled"],Z={key:0,class:"mt-1 text-xs text-red-600"},I={class:"sm:col-span-2"},$=["disabled"],oo={key:0,class:"mt-1 text-xs text-red-600"},so={class:"sm:col-span-2"},eo=["disabled"],to={key:0,class:"mt-1 text-xs text-red-600"},ro=["disabled"],io={key:0,class:"mt-1 text-xs text-red-600"},no={class:"mb-8"},lo={class:"mb-4 text-lg font-semibold text-gray-800"},ao={class:"mb-4 flex items-center justify-between"},co={class:"text-sm font-medium text-gray-700"},mo=["onClick","disabled"],uo={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},fo={class:"sm:col-span-2"},go=["for"],po=["id","onUpdate:modelValue","disabled"],bo={key:0,class:"mt-1 text-xs text-red-600"},_o=["for"],xo=["id","onUpdate:modelValue","disabled","onChange"],yo={key:0,class:"mt-1 text-xs text-red-600"},ho={key:0},wo=["for"],vo=["id","onUpdate:modelValue","disabled"],ko={key:0,class:"mt-1 text-xs text-red-600"},Co={key:0,class:"mt-4"},zo=["onUpdate:modelValue","disabled"],Vo=["onClick","disabled"],qo={key:0,class:"mt-1 text-xs text-red-600"},Qo=["onClick","disabled"],Uo={class:"mt-4"},Ao={key:0,class:"space-y-2"},Mo=["id","checked","value","name","disabled","onChange"],Do=["for"],Oo={key:1,class:"space-y-2"},So=["id","value","onUpdate:modelValue","disabled"],Eo=["for"],To={key:2,class:"mt-1 text-xs text-red-600"},Bo={class:"mt-4"},jo=["for"],Lo=["id","onUpdate:modelValue","disabled"],Po={key:0,class:"mt-1 text-xs text-red-600"},No={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},Fo=["disabled"],Ro={class:"flex justify-end space-x-3"},Ho=["disabled"],Wo={key:0,class:"flex items-center"},Go={key:1},Jo={class:"p-6 sm:p-8"},Ko={class:"flex justify-end space-x-3"},Xo=["disabled"],Yo=["disabled"];function Zo(v,o,b,s,U,A){const y=z("Link"),k=z("Modal"),C=z("AdminLayout");return i(),E(C,{breadcrumbs:s.breadcrumbs},{default:h(()=>[e("div",R,[e("div",H,[o[11]||(o[11]=e("h1",{class:"text-3xl font-bold text-gray-900"},"Create Quiz",-1)),V(y,{href:v.route("admin.quizzes.index"),class:"inline-flex items-center rounded-lg bg-gray-100 px-4 py-2 text-sm font-semibold text-gray-700 transition-colors duration-200 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300"},{default:h(()=>o[10]||(o[10]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),w(" Back to Quizzes ")])),_:1},8,["href"])]),e("form",{onSubmit:o[6]||(o[6]=D((...t)=>s.submitQuiz&&s.submitQuiz(...t),["prevent"])),class:"rounded-xl bg-white p-6 shadow-sm"},[e("div",W,[o[19]||(o[19]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800"},"Quiz Details",-1)),e("div",G,[e("div",null,[o[13]||(o[13]=e("label",{for:"course_id",class:"mb-1 block text-sm font-medium text-gray-700"},"Course",-1)),g(e("select",{id:"course_id","onUpdate:modelValue":o[0]||(o[0]=t=>s.form.course_id=t),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing},[o[12]||(o[12]=e("option",{value:""},"Select a Course",-1)),(i(!0),d(_,null,x(b.courses,t=>(i(),d("option",{key:t.id,value:t.id},u(t.name),9,K))),128))],8,J),[[q,s.form.course_id]]),s.form.errors.course_id?(i(),d("span",X,u(s.form.errors.course_id),1)):m("",!0)]),e("div",null,[o[15]||(o[15]=e("label",{for:"status",class:"mb-1 block text-sm font-medium text-gray-700"},"Status",-1)),g(e("select",{id:"status","onUpdate:modelValue":o[1]||(o[1]=t=>s.form.status=t),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing},o[14]||(o[14]=[e("option",{value:"draft"},"Draft",-1),e("option",{value:"published"},"Published",-1),e("option",{value:"archived"},"Archived",-1)]),8,Y),[[q,s.form.status]]),s.form.errors.status?(i(),d("span",Z,u(s.form.errors.status),1)):m("",!0)]),e("div",I,[o[16]||(o[16]=e("label",{for:"title",class:"mb-1 block text-sm font-medium text-gray-700"},"Title",-1)),g(e("input",{id:"title","onUpdate:modelValue":o[2]||(o[2]=t=>s.form.title=t),type:"text",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter quiz title"},null,8,$),[[p,s.form.title]]),s.form.errors.title?(i(),d("span",oo,u(s.form.errors.title),1)):m("",!0)]),e("div",so,[o[17]||(o[17]=e("label",{for:"description",class:"mb-1 block text-sm font-medium text-gray-700"},"Description",-1)),g(e("textarea",{id:"description","onUpdate:modelValue":o[3]||(o[3]=t=>s.form.description=t),rows:"4",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter quiz description (optional)"},null,8,eo),[[p,s.form.description]]),s.form.errors.description?(i(),d("span",to,u(s.form.errors.description),1)):m("",!0)]),e("div",null,[o[18]||(o[18]=e("label",{for:"pass_threshold",class:"mb-1 block text-sm font-medium text-gray-700"},"Pass Threshold (%)",-1)),g(e("input",{id:"pass_threshold","onUpdate:modelValue":o[4]||(o[4]=t=>s.form.pass_threshold=t),type:"number",min:"0",max:"100",step:"0.01",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter pass threshold (e.g., 80.00)"},null,8,ro),[[p,s.form.pass_threshold,void 0,{number:!0}]]),s.form.errors.pass_threshold?(i(),d("span",io,u(s.form.errors.pass_threshold),1)):m("",!0)])])]),e("div",no,[e("h2",lo,"Questions ("+u(s.form.questions.length)+"/20)",1),(i(!0),d(_,null,x(s.form.questions,(t,r)=>(i(),d("div",{key:r,class:"mb-6 rounded-lg bg-gray-50 p-4"},[e("div",ao,[e("h3",co,"Question "+u(r+1),1),s.form.questions.length>1?(i(),d("button",{key:0,onClick:l=>s.removeQuestion(r),type:"button",class:"text-sm font-semibold text-red-600 transition-colors duration-200 hover:text-red-800",disabled:s.form.processing}," Remove ",8,mo)):m("",!0)]),e("div",uo,[e("div",fo,[e("label",{for:`question_text_${r}`,class:"mb-1 block text-sm font-medium text-gray-700"},"Question Text",8,go),g(e("input",{id:`question_text_${r}`,"onUpdate:modelValue":l=>t.question_text=l,type:"text",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter question text"},null,8,po),[[p,t.question_text]]),s.form.errors[`questions.${r}.question_text`]?(i(),d("span",bo,u(s.form.errors[`questions.${r}.question_text`]),1)):m("",!0)]),e("div",null,[e("label",{for:`type_${r}`,class:"mb-1 block text-sm font-medium text-gray-700"},"Type",8,_o),g(e("select",{id:`type_${r}`,"onUpdate:modelValue":l=>t.type=l,class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,onChange:l=>s.resetQuestionOptions(r)},o[20]||(o[20]=[e("option",{value:"radio"},"Radio (Single Choice)",-1),e("option",{value:"checkbox"},"Checkbox (Multiple Choice)",-1),e("option",{value:"text"},"Text (Open-ended)",-1)]),40,xo),[[q,t.type]]),s.form.errors[`questions.${r}.type`]?(i(),d("span",yo,u(s.form.errors[`questions.${r}.type`]),1)):m("",!0)]),t.type!=="text"?(i(),d("div",ho,[e("label",{for:`points_${r}`,class:"mb-1 block text-sm font-medium text-gray-700"},"Points",8,wo),g(e("input",{id:`points_${r}`,"onUpdate:modelValue":l=>t.points=l,type:"number",min:"0",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter points"},null,8,vo),[[p,t.points,void 0,{number:!0}]]),s.form.errors[`questions.${r}.points`]?(i(),d("span",ko,u(s.form.errors[`questions.${r}.points`]),1)):m("",!0)])):m("",!0)]),t.type!=="text"?(i(),d("div",Co,[o[22]||(o[22]=e("h4",{class:"mb-2 text-sm font-medium text-gray-700"},"Options",-1)),(i(!0),d(_,null,x(t.options,(l,c)=>(i(),d("div",{key:c,class:"mb-2 flex items-center"},[g(e("input",{"onUpdate:modelValue":a=>t.options[c]=a,type:"text",class:"flex-1 rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Enter option"},null,8,zo),[[p,t.options[c]]]),t.options.length>2?(i(),d("button",{key:0,onClick:a=>s.removeOption(r,c),type:"button",class:"ml-2 text-sm font-semibold text-red-600 transition-colors duration-200 hover:text-red-800",disabled:s.form.processing}," Remove ",8,Vo)):m("",!0)]))),128)),s.form.errors[`questions.${r}.options`]?(i(),d("span",qo,u(s.form.errors[`questions.${r}.options`]),1)):m("",!0),e("button",{onClick:l=>s.addOption(r),type:"button",class:"mt-2 inline-flex items-center rounded-lg bg-indigo-100 px-3 py-1 text-sm font-semibold text-indigo-700 transition-colors duration-200 hover:bg-indigo-200",disabled:s.form.processing||t.options.length>=10}," Add Option ",8,Qo),e("div",Uo,[o[21]||(o[21]=e("label",{class:"mb-1 block text-sm font-medium text-gray-700"},"Correct Answer(s)",-1)),t.type==="radio"?(i(),d("div",Ao,[(i(!0),d(_,null,x(t.options,(l,c)=>(i(),d("div",{key:`radio_${r}_${c}`,class:"flex items-center"},[e("input",{id:`correct_answer_${r}_${c}`,checked:t.correct_answer===l,value:l,type:"radio",name:`correct_answer_${r}`,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:s.form.processing,onChange:a=>s.updateCorrectAnswer(r,l)},null,40,Mo),e("label",{for:`correct_answer_${r}_${c}`,class:"ml-2 text-sm text-gray-600"},u(l||"Option "+(c+1)),9,Do)]))),128))])):t.type==="checkbox"?(i(),d("div",Oo,[(i(!0),d(_,null,x(t.options,(l,c)=>(i(),d("div",{key:`checkbox_${r}_${c}_${l}`,class:"flex items-center"},[g(e("input",{id:`correct_answer_${r}_${c}`,value:l,type:"checkbox","onUpdate:modelValue":a=>t.correct_answer=a,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:s.form.processing},null,8,So),[[T,t.correct_answer]]),e("label",{for:`correct_answer_${r}_${c}`,class:"ml-2 text-sm text-gray-600"},u(l||"Option "+(c+1)),9,Eo)]))),128))])):m("",!0),s.form.errors[`questions.${r}.correct_answer`]?(i(),d("span",To,u(s.form.errors[`questions.${r}.correct_answer`]),1)):m("",!0)]),e("div",Bo,[e("label",{for:`correct_answer_explanation_${r}`,class:"mb-1 block text-sm font-medium text-gray-700"},"Correct Answer Explanation",8,jo),g(e("textarea",{id:`correct_answer_explanation_${r}`,"onUpdate:modelValue":l=>t.correct_answer_explanation=l,rows:"2",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing,placeholder:"Explain why this is correct (optional)"},null,8,Lo),[[p,t.correct_answer_explanation]]),s.form.errors[`questions.${r}.correct_answer_explanation`]?(i(),d("span",Po,u(s.form.errors[`questions.${r}.correct_answer_explanation`]),1)):m("",!0)])])):m("",!0),t.type==="text"?(i(),d("div",No,o[23]||(o[23]=[e("p",{class:"text-sm text-blue-700"}," 📝 This is an open-ended text question. Students will provide their own written response. ",-1)]))):m("",!0)]))),128)),e("button",{onClick:o[5]||(o[5]=(...t)=>s.addQuestion&&s.addQuestion(...t)),type:"button",class:"inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white transition-colors duration-200 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing||s.form.questions.length>=20},o[24]||(o[24]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),w(" Add Question ")]),8,Fo)]),e("div",Ro,[V(y,{href:v.route("admin.quizzes.index"),class:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:s.form.processing,onClick:D(s.confirmDiscard,["prevent"])},{default:h(()=>o[25]||(o[25]=[w(" Cancel ")])),_:1},8,["href","disabled","onClick"]),e("button",{type:"submit",class:"rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500",disabled:s.form.processing},[s.form.processing?(i(),d("span",Wo,o[26]||(o[26]=[e("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),w(" Saving... ")]))):(i(),d("span",Go,"Create Quiz"))],8,Ho)])],32),V(k,{show:s.showDiscardModal,onClose:o[9]||(o[9]=t=>s.showDiscardModal=!1)},{default:h(()=>[e("div",Jo,[o[27]||(o[27]=e("h2",{class:"mb-3 text-xl font-semibold text-gray-900"},"Discard Changes",-1)),o[28]||(o[28]=e("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),e("div",Ko,[e("button",{onClick:o[7]||(o[7]=t=>s.showDiscardModal=!1),class:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-300",disabled:s.form.processing}," Cancel ",8,Xo),e("button",{onClick:o[8]||(o[8]=(...t)=>s.discardChanges&&s.discardChanges(...t)),class:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500",disabled:s.form.processing}," Discard ",8,Yo)])])]),_:1},8,["show"])])]),_:1},8,["breadcrumbs"])}const is=N(F,[["render",Zo],["__scopeId","data-v-34c8e089"]]);export{is as default};
