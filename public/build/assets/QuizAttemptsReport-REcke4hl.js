import{d as A,r as F,W as g,s as P,k as y,o as r,w as j,e as t,j as D,g as u,a as d,F as b,h,t as o,i as v,v as w,n as U,f as _}from"./app-iYB6CK9s.js";import{_ as Q}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import{l as B}from"./lodash-CAnG-Ugi.js";import{_ as R}from"./Pagination.vue_vue_type_script_setup_true_lang-CsQrSMli.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const M={class:"px-4 sm:px-0"},N={class:"bg-white p-4 sm:p-6 rounded-lg shadow mb-4 sm:mb-6"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-4 sm:gap-6"},E=["value"],L={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},O={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},$={key:0},H={class:"px-4 sm:px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},G={class:"text-sm font-medium text-gray-900"},J={class:"text-xs text-gray-500 hidden sm:block"},K={class:"text-xs text-gray-500 sm:hidden mt-1"},X={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell"},Y={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},Z={class:"px-4 sm:px-6 py-4 whitespace-nowrap"},tt={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},et={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},st={class:"px-4 sm:px-6 py-3 bg-white border-t border-gray-200"},ot={key:1,class:"text-sm text-gray-600 mt-2"},mt=A({__name:"QuizAttemptsReport",props:{attempts:Object,quizzes:Array,filters:Object},setup(a){var p,c,x,f;const n=a,k=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Quiz Attempts",href:route("admin.reports.quiz-attempts")}],l=F({quiz_id:((p=n.filters)==null?void 0:p.quiz_id)||"",status:((c=n.filters)==null?void 0:c.status)||"",date_from:((x=n.filters)==null?void 0:x.date_from)||"",date_to:((f=n.filters)==null?void 0:f.date_to)||""}),m=B.debounce(()=>{g.get(route("admin.reports.quiz-attempts"),l.value,{preserveState:!0,replace:!0})},500);P(l,()=>{m()},{deep:!0});const z=()=>{l.value={quiz_id:"",status:"",date_from:"",date_to:""},m()},q=()=>{const i=new URLSearchParams(l.value).toString();window.location.href=route("admin.reports.export.quiz-attempts")+"?"+i},S=i=>i?new Date(i).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”",C=i=>{g.get(route("admin.reports.quiz-attempts"),{...l.value,page:i},{preserveState:!0,replace:!0,preserveScroll:!0,onSuccess:()=>{var e;(e=document.querySelector(".bg-white.rounded-lg.shadow"))==null||e.scrollIntoView({behavior:"smooth",block:"start"})}})};return(i,e)=>(r(),y(Q,{breadcrumbs:k},{default:j(()=>[t("div",M,[t("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4 sm:gap-0"},[e[5]||(e[5]=t("h1",{class:"text-xl sm:text-2xl font-bold"},"Quiz Attempts Report",-1)),t("button",{onClick:q,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center w-full sm:w-auto justify-center sm:justify-start"},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Export to CSV ")]))]),t("div",N,[e[12]||(e[12]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Attempts",-1)),t("div",T,[t("div",null,[e[7]||(e[7]=t("label",{for:"quiz_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Quiz",-1)),u(t("select",{id:"quiz_filter","onUpdate:modelValue":e[0]||(e[0]=s=>l.value.quiz_id=s),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500"},[e[6]||(e[6]=t("option",{value:""},"All Quizzes",-1)),(r(!0),d(b,null,h(a.quizzes,s=>(r(),d("option",{key:s.id,value:s.id},o(s.title),9,E))),128))],512),[[v,l.value.quiz_id]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"status_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),u(t("select",{id:"status_filter","onUpdate:modelValue":e[1]||(e[1]=s=>l.value.status=s),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500"},e[8]||(e[8]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"passed"},"Passed",-1),t("option",{value:"failed"},"Failed",-1),t("option",{value:"pending"},"Pending",-1)]),512),[[v,l.value.status]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"date_from",class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),u(t("input",{id:"date_from",type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>l.value.date_from=s),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500"},null,512),[[w,l.value.date_from]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"date_to",class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),u(t("input",{id:"date_to",type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>l.value.date_to=s),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500"},null,512),[[w,l.value.date_to]])]),t("div",{class:"flex items-end md:col-span-4"},[t("button",{onClick:z,class:"inline-flex items-center px-4 py-2 bg-gray-100 border border-transparent rounded-md font-medium text-gray-700 hover:bg-gray-200 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition"}," Reset Filters ")])])]),t("div",L,[t("table",O,[e[14]||(e[14]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell"}," Quiz "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Score "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Attempt "),t("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completed ")])],-1)),t("tbody",W,[a.attempts.data.length===0?(r(),d("tr",$,e[13]||(e[13]=[t("td",{colspan:"6",class:"px-4 sm:px-6 py-4 text-center text-gray-500"},"No attempt records found",-1)]))):(r(!0),d(b,{key:1},h(a.attempts.data,(s,V)=>(r(),d("tr",{key:V,class:"hover:bg-gray-50"},[t("td",H,[t("div",I,[t("div",null,[t("div",G,o(s.user_name),1),t("div",J,o(s.user_email),1),t("div",K,o(s.quiz_title),1)])])]),t("td",X,o(s.quiz_title),1),t("td",Y,o(s.total_score)+" / "+o(s.quiz_total_points)+" ("+o(Math.round(s.total_score/s.quiz_total_points*100))+"%)",1),t("td",Z,[t("span",{class:U(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.passed,"bg-red-100 text-red-800":!s.passed&&s.completed_at,"bg-yellow-100 text-yellow-800":!s.completed_at}])},o(s.completed_at?s.passed?"Passed":"Failed":"Pending"),3)]),t("td",tt,o(s.attempt_number),1),t("td",et,o(S(s.completed_at)),1)]))),128))])]),t("div",st,[a.attempts.data&&a.attempts.data.length>0&&a.attempts.last_page>1?(r(),y(R,{key:0,links:a.attempts.links,onPageChanged:C,class:"mt-4"},null,8,["links"])):_("",!0),a.attempts.data&&a.attempts.data.length>0?(r(),d("div",ot," Showing "+o(a.attempts.from)+" to "+o(a.attempts.to)+" of "+o(a.attempts.total)+" results ",1)):_("",!0)])])])]),_:1}))}});export{mt as default};
