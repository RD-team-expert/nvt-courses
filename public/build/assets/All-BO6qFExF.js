import{_ as T,a as q,C as G,b as J,c as K,d as P,e as Z,f as ee}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bum0PHdh.js";import{d as te,r as $,c as ae,a as w,o as m,b as t,u as e,m as le,w as s,e as o,f as r,g as k,h as g,n as se,F as D,i as A,t as v}from"./app-Dt0F0blK.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-Bur818go.js";import{_ as V}from"./Card.vue_vue_type_script_setup_true_lang-CtkgQZFl.js";import{_ as F}from"./CardContent.vue_vue_type_script_setup_true_lang-DqRxUlIL.js";import{_ as U}from"./CardDescription.vue_vue_type_script_setup_true_lang-_kdebesn.js";import{_ as oe}from"./CardHeader.vue_vue_type_script_setup_true_lang-BlBmqPCI.js";import{_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3lRuw6Y.js";import{_ as ne}from"./index-CRLHLk8F.js";import{_ as re}from"./Input.vue_vue_type_script_setup_true_lang-CEGGw3rO.js";import{_ as j}from"./Label.vue_vue_type_script_setup_true_lang-CwXf_K5B.js";import{_ as B,a as N,b as O,c as R,d as z}from"./SelectValue.vue_vue_type_script_setup_true_lang-D9yGIlG7.js";import{_ as ie}from"./Pagination2.vue_vue_type_script_setup_true_lang-UwFSP9P0.js";import{S as ue}from"./search-CpBuPifN.js";import{X as de}from"./_plugin-vue_export-helper-BNB2DzGT.js";import{F as me}from"./filter-CRsKWOLw.js";import{C as fe}from"./clock-DYVrIRvW.js";import{C as ce}from"./calendar-CRnI_OQW.js";import{U as _e}from"./user-BVdXE_id.js";import"./index-DhkpjM5c.js";import"./index-B3JELWNU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ufvh6NzD.js";import"./useForwardPropsEmits-8hdV0QLI.js";import"./Presence-yU-1-Ora.js";import"./ConfigProvider-DhHMB9ze.js";import"./useForwardExpose-D0dJ5CPZ.js";import"./Teleport-BIo1Gt-o.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-2aGdiIe0.js";import"./Collection-DSROSw6D.js";import"./usePrimitiveElement-B4u4F1g0.js";import"./check-Bo8td30r.js";import"./useSize-D4rPSYi8.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-CDl9cf2-.js";const pe={class:"flex h-full flex-1 flex-col gap-6 p-4 sm:p-6"},ve={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},we={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},xe={class:"relative w-full sm:w-64"},he={class:"flex flex-col sm:flex-row gap-4"},ge={class:"flex-1 space-y-2"},be={class:"flex-1 space-y-2"},ye={class:"flex items-end"},$e={class:"space-y-4"},ke={key:0,class:"text-center py-12"},De={class:"flex flex-col sm:flex-row sm:items-center gap-4"},Ae={class:"flex items-start flex-1 gap-3"},Ce={class:"flex-1 min-w-0 space-y-2"},Ve={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"},Fe={class:"text-sm font-medium break-words"},Me={class:"text-xs text-muted-foreground whitespace-nowrap"},Se={class:"flex flex-wrap items-center gap-2"},Te={class:"flex items-center text-xs text-muted-foreground gap-1"},Ue={key:1,class:"flex items-center text-xs text-muted-foreground gap-1"},Le={key:0,class:"flex justify-center items-center mt-8"},wt=te({__name:"All",props:{activities:Object,isAdmin:{type:Boolean,default:!1}},setup(y){const M=y,E=[{title:"Dashboard",href:"/dashboard"},{title:"All Activities",href:"/activities"}],c=$(""),x=$(!1),h=$("all"),_=$("all_time"),Y=[{value:"all",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"enroll",label:"Enroll"},{value:"login",label:"Login"},{value:"complete",label:"Complete"},{value:"attendance",label:"Attendance"}],H=[{value:"all_time",label:"All Time"},{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}],S=ae(()=>{var u;return(u=M.activities)!=null&&u.data?M.activities.data.filter(a=>{var b;const f=!c.value||a.description.toLowerCase().includes(c.value.toLowerCase())||((b=a.user)==null?void 0:b.name)&&a.user.name.toLowerCase().includes(c.value.toLowerCase()),l=h.value==="all"||a.action===h.value;let n=!0;if(_.value!=="all_time"){const p=new Date(a.created_at),d=new Date;if(d.setHours(0,0,0,0),_.value==="today"){const i=new Date(d);i.setDate(i.getDate()+1),n=p>=d&&p<i}else if(_.value==="yesterday"){const i=new Date(d);i.setDate(i.getDate()-1),n=p>=i&&p<d}else if(_.value==="week"){const i=new Date(d);i.setDate(i.getDate()-1),n=p>=i}else if(_.value==="month"){const i=new Date(d.getFullYear(),d.getMonth(),1);n=p>=i}}return f&&l&&n}):[]}),I=u=>{if(!u)return"";const a=new Date(u);return a.toLocaleDateString()+" "+a.toLocaleTimeString()},Q=u=>{if(!u)return"";const a=new Date(u),l=Math.floor((new Date-a)/1e3);if(l<60)return"just now";if(l<3600){const n=Math.floor(l/60);return`${n} minute${n>1?"s":""} ago`}else if(l<86400){const n=Math.floor(l/3600);return`${n} hour${n>1?"s":""} ago`}else{const n=Math.floor(l/86400);return`${n} day${n>1?"s":""} ago`}},W=u=>({create:"secondary",update:"default",delete:"destructive",enroll:"default",login:"secondary",complete:"default",attendance:"secondary"})[u]||"outline",X=()=>{c.value="",h.value="all",_.value="all_time",x.value=!1};return(u,a)=>(m(),w(D,null,[t(e(le),{title:"All Activities"}),t(ee,{breadcrumbs:E},{default:s(()=>[o("div",pe,[t(e(V),null,{default:s(()=>[t(e(oe),null,{default:s(()=>[o("div",ve,[o("div",null,[t(e(L),{class:"text-xl sm:text-2xl"},{default:s(()=>a[6]||(a[6]=[r("All Activities")])),_:1}),t(e(U),null,{default:s(()=>a[7]||(a[7]=[r("Monitor system activities and user actions")])),_:1})]),o("div",we,[o("div",xe,[t(e(ue),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(re),{modelValue:c.value,"onUpdate:modelValue":a[0]||(a[0]=f=>c.value=f),type:"text",placeholder:"Search activities...",class:"pl-10 pr-10"},null,8,["modelValue"]),c.value?(m(),k(e(C),{key:0,onClick:a[1]||(a[1]=f=>c.value=""),variant:"ghost",size:"sm",class:"absolute right-1 top-1/2 -translate-y-1/2 h-6 w-6 p-0"},{default:s(()=>[t(e(de),{class:"h-4 w-4"})]),_:1})):g("",!0)]),t(e(T),{open:x.value,"onUpdate:open":a[2]||(a[2]=f=>x.value=f)},{default:s(()=>[t(e(q),{asChild:""},{default:s(()=>[t(e(C),{variant:"outline",class:"gap-2"},{default:s(()=>[t(e(me),{class:"h-4 w-4"}),a[8]||(a[8]=r(" Filters ")),t(e(G),{class:se(["h-4 w-4 transition-transform duration-200",{"rotate-180":x.value}])},null,8,["class"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1}),t(e(F),null,{default:s(()=>{var f;return[t(e(T),{open:x.value,"onUpdate:open":a[5]||(a[5]=l=>x.value=l)},{default:s(()=>[t(e(J),{class:"space-y-4"},{default:s(()=>[t(e(V),{class:"mb-6"},{default:s(()=>[t(e(F),{class:"p-4"},{default:s(()=>[o("div",he,[o("div",ge,[t(e(j),null,{default:s(()=>a[9]||(a[9]=[r("Action Type")])),_:1}),t(e(B),{modelValue:h.value,"onUpdate:modelValue":a[3]||(a[3]=l=>h.value=l)},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(O),{placeholder:"All Actions"})]),_:1}),t(e(R),null,{default:s(()=>[(m(),w(D,null,A(Y,l=>t(e(z),{key:l.value,value:l.value},{default:s(()=>[r(v(l.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),o("div",be,[t(e(j),null,{default:s(()=>a[10]||(a[10]=[r("Date Range")])),_:1}),t(e(B),{modelValue:_.value,"onUpdate:modelValue":a[4]||(a[4]=l=>_.value=l)},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(O),{placeholder:"All Time"})]),_:1}),t(e(R),null,{default:s(()=>[(m(),w(D,null,A(H,l=>t(e(z),{key:l.value,value:l.value},{default:s(()=>[r(v(l.label),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1},8,["modelValue"])]),o("div",ye,[t(e(C),{onClick:X,variant:"outline",class:"w-full sm:w-auto"},{default:s(()=>a[11]||(a[11]=[r(" Clear Filters ")])),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),o("div",$e,[S.value.length===0?(m(),w("div",ke,[t(e(fe),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),t(e(L),{class:"mb-2"},{default:s(()=>a[12]||(a[12]=[r("No activities found")])),_:1}),t(e(U),null,{default:s(()=>[r(v(c.value||h.value!=="all"||_.value!=="all_time"?"Try adjusting your filters":"Activity history will appear here"),1)]),_:1})])):g("",!0),(m(!0),w(D,null,A(S.value,l=>(m(),k(e(V),{key:l.id,class:"hover:shadow-md transition-shadow duration-200"},{default:s(()=>[t(e(F),{class:"p-4"},{default:s(()=>{var n;return[o("div",De,[o("div",Ae,[t(e(K),{class:"w-10 h-10 shrink-0"},{default:s(()=>{var b,p;return[(b=l.user)!=null&&b.avatar?(m(),k(e(P),{key:0,src:l.user.avatar,alt:(p=l.user)==null?void 0:p.name},null,8,["src","alt"])):g("",!0),t(e(Z),null,{default:s(()=>{var d;return[r(v((d=l.user)!=null&&d.name?l.user.name.charAt(0).toUpperCase():"S"),1)]}),_:2},1024)]}),_:2},1024),o("div",Ce,[o("div",Ve,[o("p",Fe,v(l.description),1),o("div",Me,v(Q(l.created_at)),1)]),o("div",Se,[l.action?(m(),k(e(ne),{key:0,variant:W(l.action),class:"text-xs"},{default:s(()=>[r(v(l.action),1)]),_:2},1032,["variant"])):g("",!0),o("div",Te,[t(e(ce),{class:"h-3 w-3"}),r(" "+v(I(l.created_at)),1)]),(n=l.user)!=null&&n.name?(m(),w("div",Ue,[t(e(_e),{class:"h-3 w-3"}),r(" "+v(l.user.name),1)])):g("",!0)])])])])]}),_:2},1024)]),_:2},1024))),128))]),(f=y.activities)!=null&&f.links&&y.activities.links.length>0?(m(),w("div",Le,[t(ie,{links:y.activities.links},null,8,["links"])])):g("",!0)]}),_:1})]),_:1})])]),_:1})],64))}});export{wt as default};
