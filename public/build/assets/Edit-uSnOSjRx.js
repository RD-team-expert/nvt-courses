import{d as A,C as B,g as k,o as n,w as d,e as o,b as i,u as e,f as u,j as F,a as m,h as f,t as _,s as V,E as w,F as $,i as S,P as W}from"./app-CwrLmt4H.js";import{_ as L}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVdVdrtJ.js";import{E as z}from"./Editor-nYZM_GtK.js";import{_ as R}from"./Card.vue_vue_type_script_setup_true_lang-A8WG6GOp.js";import{_ as G}from"./CardContent.vue_vue_type_script_setup_true_lang-C0P-sboE.js";import{_ as H}from"./CardHeader.vue_vue_type_script_setup_true_lang-B1JXwWzJ.js";import{_ as J}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfsAIejd.js";import{_ as x}from"./Button.vue_vue_type_script_setup_true_lang-DNqWTjl2.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-rmXnsLaI.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-CU7Va5Ql.js";import{_ as h,a as U,b as D,c as C,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-FEW3_Jd3.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-KHSjz1qE.js";import"./index-DJ8elu12.js";import"./index-Bl0m2vYu.js";import"./_plugin-vue_export-helper-C_B9qUyA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wO9CZrtp.js";import"./clock-B3hXeEnL.js";import"./useForwardPropsEmits-Bv9ZfZA8.js";import"./Presence-D5fWEiXU.js";import"./ConfigProvider-DYoe7gBq.js";import"./useForwardExpose-aFpDTqrD.js";import"./Teleport-jnYm4bVA.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BFDwzHBd.js";import"./Collection-B9kSM2sl.js";import"./usePrimitiveElement-D1W1Ae6N.js";import"./check-D3O_WcEY.js";import"./useSize-d0DSIEo7.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-xEP9wB1T.js";const K={class:"px-4 sm:px-0"},Q={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},X={class:"col-span-full"},Y={key:0,class:"text-destructive text-sm mt-1"},Z={class:"col-span-1"},ee={key:0,class:"text-destructive text-sm mt-1"},se={class:"col-span-1"},te={class:"flex items-center space-x-4 mt-2"},ie={class:"flex items-center"},oe=["disabled"],le={class:"flex items-center"},ae=["disabled"],de={key:0,class:"mt-1 text-sm text-destructive"},re={class:"col-span-1"},ne={key:0,class:"text-destructive text-sm mt-1"},ue={class:"col-span-1"},me={key:0,class:"text-destructive text-sm mt-1"},pe={class:"col-span-1"},_e={key:0,class:"text-destructive text-sm mt-1"},fe={class:"col-span-1"},ce={key:0,class:"text-destructive text-sm mt-1"},ve={class:"col-span-full"},be={key:0,class:"text-destructive text-sm mt-1"},ge={key:1,class:"mt-2"},ye=["src"],xe={class:"col-span-full"},ke={key:0,class:"text-destructive text-sm mt-1"},Ve={class:"mb-6"},we={class:"flex justify-between items-center mb-4"},$e={class:"space-y-4"},Se={class:"flex justify-between items-center mb-3"},he={class:"font-medium"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},De={class:"md:col-span-2"},Ce={class:"grid grid-cols-4 md:grid-cols-7 gap-2"},Te=["id","checked","onChange","disabled"],je={class:"text-xs text-muted-foreground mt-1"},Ne={key:0,class:"text-destructive text-sm mt-1"},Pe={key:0,class:"text-destructive text-sm mt-1"},qe={key:0,class:"text-destructive text-sm mt-1"},Ee={key:0,class:"text-destructive text-sm mt-1"},Ie={key:0,class:"text-destructive text-sm mt-1"},Me={key:0,class:"text-destructive text-sm mt-1"},Oe={key:0,class:"text-destructive text-sm mt-1"},Ae={key:0,class:"text-destructive text-sm mt-1"},Be={key:0,class:"text-destructive text-sm mt-1"},Fe={class:"md:col-span-2"},We={key:0,class:"text-destructive text-sm mt-1"},Le={key:0,class:"text-destructive text-sm mt-2"},ze={class:"flex justify-end space-x-4 mt-6"},Re={key:0},Ge={key:1},Ss=A({__name:"Edit",props:{course:Object},setup(T){const v=T,j=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],y=a=>{if(!a)return"";const s=a.split("T")[0].split("-");if(s.length!==3){const l=new Date(a);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]}return s.join("-")},N=a=>a?a.split(",").filter(s=>s.trim()!==""):[],t=B({name:v.course.name,description:v.course.description,start_date:y(v.course.start_date),end_date:y(v.course.end_date),status:v.course.status||"pending",level:v.course.level||"",privacy:v.course.privacy||"public",duration:v.course.duration||"",image:null,availabilities:v.course.availabilities&&v.course.availabilities.length?v.course.availabilities.map(a=>({id:a.id,start_date:a.start_date?new Date(a.start_date).toISOString().slice(0,16):"",end_date:a.end_date?new Date(a.end_date).toISOString().slice(0,16):"",capacity:a.capacity||25,sessions:a.sessions||1,notes:a.notes||"",status:a.status||"active",days_of_week:N(a.days_of_week||""),duration_weeks:a.duration_weeks||1,session_time_shift_2:a.session_time_shift_2||"",session_time_shift_3:a.session_time_shift_3||"",session_duration_minutes:a.session_duration_minutes||60})):[{start_date:"",end_date:"",capacity:25,sessions:1,notes:"",status:"active",days_of_week:[],duration_weeks:1,session_time_shift_2:"",session_time_shift_3:"",session_duration_minutes:60}]});function P(a,s){const l=t.availabilities[a],r=l.days_of_week.indexOf(s);r>-1?l.days_of_week.splice(r,1):l.days_of_week.push(s)}function q(a,s){return t.availabilities[a].days_of_week.includes(s)}function E(a){if(a.days_of_week.length===0)return"No days selected";const s={monday:"Mon",tuesday:"Tue",wednesday:"Wed",thursday:"Thu",friday:"Fri",saturday:"Sat",sunday:"Sun"};return a.days_of_week.map(l=>s[l]).join(", ")}function I(){t.availabilities.length<5&&t.availabilities.push({start_date:"",end_date:"",capacity:25,sessions:1,notes:"",status:"active",days_of_week:[],duration_weeks:1,session_time_shift_2:"",session_time_shift_3:"",session_duration_minutes:60})}function M(a){t.availabilities.length>1&&t.availabilities.splice(a,1)}function O(){const a={...t.data(),availabilities:t.availabilities.map(s=>({...s,days_of_week:s.days_of_week.length>0?s.days_of_week.join(","):""}))};a.start_date&&(a.start_date=y(a.start_date)),a.end_date&&(a.end_date=y(a.end_date)),t.post(`/admin/courses/${v.course.id}?_method=PUT`,{data:a,forceFormData:!0})}return(a,s)=>(n(),k(L,null,{default:d(()=>[o("div",K,[i(e(R),{class:"max-w-4xl"},{default:d(()=>[i(e(H),null,{default:d(()=>[i(e(J),null,{default:d(()=>s[10]||(s[10]=[u("Edit Course")])),_:1})]),_:1}),i(e(G),null,{default:d(()=>[o("form",{onSubmit:F(O,["prevent"])},[o("div",Q,[o("div",X,[i(e(c),null,{default:d(()=>s[11]||(s[11]=[u("Course Name")])),_:1}),i(e(b),{type:"text",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=l=>e(t).name=l),disabled:e(t).processing,required:""},null,8,["modelValue","disabled"]),e(t).errors.name?(n(),m("div",Y,_(e(t).errors.name),1)):f("",!0)]),o("div",Z,[i(e(c),null,{default:d(()=>s[12]||(s[12]=[u("Status")])),_:1}),i(e(h),{modelValue:e(t).status,"onUpdate:modelValue":s[1]||(s[1]=l=>e(t).status=l),disabled:e(t).processing},{default:d(()=>[i(e(U),null,{default:d(()=>[i(e(D),{placeholder:"Select status"})]),_:1}),i(e(C),null,{default:d(()=>[i(e(g),{value:"pending"},{default:d(()=>s[13]||(s[13]=[u("Pending")])),_:1}),i(e(g),{value:"in_progress"},{default:d(()=>s[14]||(s[14]=[u("In Progress")])),_:1}),i(e(g),{value:"completed"},{default:d(()=>s[15]||(s[15]=[u("Completed")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e(t).errors.status?(n(),m("div",ee,_(e(t).errors.status),1)):f("",!0)]),o("div",se,[i(e(c),{class:"text-base font-semibold"},{default:d(()=>s[16]||(s[16]=[u("Course Privacy")])),_:1}),o("div",te,[o("div",ie,[V(o("input",{id:"privacy-public",name:"privacy",type:"radio",value:"public","onUpdate:modelValue":s[2]||(s[2]=l=>e(t).privacy=l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",disabled:e(t).processing},null,8,oe),[[w,e(t).privacy]]),i(e(c),{for:"privacy-public",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:d(()=>s[17]||(s[17]=[u(" 🌍 Public ")])),_:1})]),o("div",le,[V(o("input",{id:"privacy-private",name:"privacy",type:"radio",value:"private","onUpdate:modelValue":s[3]||(s[3]=l=>e(t).privacy=l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300",disabled:e(t).processing},null,8,ae),[[w,e(t).privacy]]),i(e(c),{for:"privacy-private",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:d(()=>s[18]||(s[18]=[u(" 🔒 Private ")])),_:1})])]),s[19]||(s[19]=o("p",{class:"mt-1 text-xs text-muted-foreground"}," Public courses are visible to everyone. Private courses are only visible to enrolled users. ",-1)),e(t).errors.privacy?(n(),m("div",de,_(e(t).errors.privacy),1)):f("",!0)]),o("div",re,[i(e(c),null,{default:d(()=>s[20]||(s[20]=[u("Level (Optional)")])),_:1}),i(e(h),{modelValue:e(t).level,"onUpdate:modelValue":s[4]||(s[4]=l=>e(t).level=l),disabled:e(t).processing},{default:d(()=>[i(e(U),null,{default:d(()=>[i(e(D),{placeholder:"Select Level"})]),_:1}),i(e(C),null,{default:d(()=>[i(e(g),{value:"beginner"},{default:d(()=>s[21]||(s[21]=[u("Beginner")])),_:1}),i(e(g),{value:"intermediate"},{default:d(()=>s[22]||(s[22]=[u("Intermediate")])),_:1}),i(e(g),{value:"advanced"},{default:d(()=>s[23]||(s[23]=[u("Advanced")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e(t).errors.level?(n(),m("div",ne,_(e(t).errors.level),1)):f("",!0)]),o("div",ue,[i(e(c),null,{default:d(()=>s[24]||(s[24]=[u("Duration (hours)")])),_:1}),i(e(b),{type:"number",step:"0.1",modelValue:e(t).duration,"onUpdate:modelValue":s[5]||(s[5]=l=>e(t).duration=l),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.duration?(n(),m("div",me,_(e(t).errors.duration),1)):f("",!0)]),o("div",pe,[i(e(c),null,{default:d(()=>s[25]||(s[25]=[u("Start Date")])),_:1}),i(e(b),{type:"date",modelValue:e(t).start_date,"onUpdate:modelValue":s[6]||(s[6]=l=>e(t).start_date=l),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.start_date?(n(),m("div",_e,_(e(t).errors.start_date),1)):f("",!0)]),o("div",fe,[i(e(c),null,{default:d(()=>s[26]||(s[26]=[u("End Date")])),_:1}),i(e(b),{type:"date",modelValue:e(t).end_date,"onUpdate:modelValue":s[7]||(s[7]=l=>e(t).end_date=l),disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.end_date?(n(),m("div",ce,_(e(t).errors.end_date),1)):f("",!0)]),o("div",ve,[i(e(c),null,{default:d(()=>s[27]||(s[27]=[u("Course Image (Optional)")])),_:1}),i(e(b),{type:"file",onInput:s[8]||(s[8]=l=>e(t).image=l.target.files[0]),disabled:e(t).processing},null,8,["disabled"]),e(t).errors.image?(n(),m("div",be,_(e(t).errors.image),1)):f("",!0),v.course.image_path?(n(),m("div",ge,[s[28]||(s[28]=o("p",{class:"text-sm text-muted-foreground"},"Current image:",-1)),o("img",{src:`/storage/${v.course.image_path}`,alt:"Current course image",class:"mt-1 h-32 w-full sm:w-48 object-cover rounded"},null,8,ye)])):f("",!0)]),o("div",xe,[i(e(c),null,{default:d(()=>s[29]||(s[29]=[u("Description")])),_:1}),i(e(z),{modelValue:e(t).description,"onUpdate:modelValue":s[9]||(s[9]=l=>e(t).description=l),disabled:e(t).processing,"api-key":"r1racrxd2joy9wp9xp9sj91ka9j4m3humenifqvwtx9s6i3y",init:{toolbar_mode:"sliding",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",mobile:{menubar:!1,toolbar:"undo redo | bold italic | link | bullist numlist",toolbar_mode:"scrolling"}}},null,8,["modelValue","disabled"]),e(t).errors.description?(n(),m("div",ke,_(e(t).errors.description),1)):f("",!0)])]),o("div",Ve,[o("div",we,[s[30]||(s[30]=o("h2",{class:"text-lg font-semibold"},"Course Session Schedules",-1)),i(e(x),{type:"button",onClick:I,disabled:e(t).availabilities.length>=5||e(t).processing,variant:"default"},{default:d(()=>[u(" Add Session Schedule ("+_(e(t).availabilities.length)+"/5) ",1)]),_:1},8,["disabled"])]),o("div",$e,[(n(!0),m($,null,S(e(t).availabilities,(l,r)=>(n(),m("div",{key:r,class:"border border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800"},[o("div",Se,[o("h3",he,"Session Schedule "+_(r+1),1),e(t).availabilities.length>1?(n(),k(e(x),{key:0,type:"button",onClick:p=>M(r),variant:"destructive",size:"sm",disabled:e(t).processing},{default:d(()=>s[31]||(s[31]=[u(" Remove ")])),_:2},1032,["onClick","disabled"])):f("",!0)]),o("div",Ue,[o("div",De,[s[32]||(s[32]=o("label",{class:"block font-medium mb-2"},"Days of the Week",-1)),o("div",Ce,[(n(),m($,null,S(j,p=>o("div",{key:p.value,class:"flex items-center"},[o("input",{id:`day-${r}-${p.value}`,type:"checkbox",checked:q(r,p.value),onChange:He=>P(r,p.value),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:e(t).processing},null,40,Te),i(e(c),{for:`day-${r}-${p.value}`,class:"ml-2 text-sm"},{default:d(()=>[u(_(p.label),1)]),_:2},1032,["for"])])),64))]),o("p",je," Selected: "+_(E(l)),1),e(t).errors[`availabilities.${r}.days_of_week`]?(n(),m("div",Ne,_(e(t).errors[`availabilities.${r}.days_of_week`]),1)):f("",!0)]),o("div",null,[s[33]||(s[33]=o("label",{class:"block font-medium mb-1"},"Duration (Weeks)",-1)),i(e(b),{type:"number",modelValue:l.duration_weeks,"onUpdate:modelValue":p=>l.duration_weeks=p,min:"1",max:"52",disabled:e(t).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[34]||(s[34]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Number of weeks this course runs",-1)),e(t).errors[`availabilities.${r}.duration_weeks`]?(n(),m("div",Pe,_(e(t).errors[`availabilities.${r}.duration_weeks`]),1)):f("",!0)]),o("div",null,[s[35]||(s[35]=o("label",{class:"block font-medium mb-1"},"Session Time - Shift 2",-1)),i(e(b),{type:"time",modelValue:l.session_time_shift_2,"onUpdate:modelValue":p=>l.session_time_shift_2=p,disabled:e(t).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[36]||(s[36]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Start time for Shift 2 sessions (optional)",-1)),e(t).errors[`availabilities.${r}.session_time_shift_2`]?(n(),m("div",qe,_(e(t).errors[`availabilities.${r}.session_time_shift_2`]),1)):f("",!0)]),o("div",null,[s[37]||(s[37]=o("label",{class:"block font-medium mb-1"},"Session Time - Shift 3",-1)),i(e(b),{type:"time",modelValue:l.session_time_shift_3,"onUpdate:modelValue":p=>l.session_time_shift_3=p,disabled:e(t).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[38]||(s[38]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Start time for Shift 3 sessions (optional)",-1)),e(t).errors[`availabilities.${r}.session_time_shift_3`]?(n(),m("div",Ee,_(e(t).errors[`availabilities.${r}.session_time_shift_3`]),1)):f("",!0)]),o("div",null,[s[39]||(s[39]=o("label",{class:"block font-medium mb-1"},"Session Duration (Minutes)",-1)),i(e(b),{type:"number",modelValue:l.session_duration_minutes,"onUpdate:modelValue":p=>l.session_duration_minutes=p,min:"15",max:"480",step:"15",disabled:e(t).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[40]||(s[40]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Duration of each session in minutes",-1)),e(t).errors[`availabilities.${r}.session_duration_minutes`]?(n(),m("div",Ie,_(e(t).errors[`availabilities.${r}.session_duration_minutes`]),1)):f("",!0)]),o("div",null,[i(e(c),null,{default:d(()=>s[41]||(s[41]=[u("Start Date")])),_:1}),i(e(b),{type:"datetime-local",modelValue:l.start_date,"onUpdate:modelValue":p=>l.start_date=p,disabled:e(t).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(t).errors[`availabilities.${r}.start_date`]?(n(),m("div",Me,_(e(t).errors[`availabilities.${r}.start_date`]),1)):f("",!0)]),o("div",null,[i(e(c),null,{default:d(()=>s[42]||(s[42]=[u("End Date")])),_:1}),i(e(b),{type:"datetime-local",modelValue:l.end_date,"onUpdate:modelValue":p=>l.end_date=p,disabled:e(t).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(t).errors[`availabilities.${r}.end_date`]?(n(),m("div",Oe,_(e(t).errors[`availabilities.${r}.end_date`]),1)):f("",!0)]),o("div",null,[i(e(c),null,{default:d(()=>s[43]||(s[43]=[u("Seats Available")])),_:1}),i(e(b),{type:"number",modelValue:l.capacity,"onUpdate:modelValue":p=>l.capacity=p,modelModifiers:{number:!0},min:"1",max:"1000",disabled:e(t).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[44]||(s[44]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Maximum number of seats available for this schedule",-1)),e(t).errors[`availabilities.${r}.capacity`]?(n(),m("div",Ae,_(e(t).errors[`availabilities.${r}.capacity`]),1)):f("",!0)]),o("div",null,[i(e(c),null,{default:d(()=>s[45]||(s[45]=[u("Sessions")])),_:1}),i(e(b),{type:"number",modelValue:l.sessions,"onUpdate:modelValue":p=>l.sessions=p,modelModifiers:{number:!0},min:"1",max:"100",disabled:e(t).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),s[46]||(s[46]=o("p",{class:"text-xs text-muted-foreground mt-1"},"Number of sessions in this schedule",-1)),e(t).errors[`availabilities.${r}.sessions`]?(n(),m("div",Be,_(e(t).errors[`availabilities.${r}.sessions`]),1)):f("",!0)]),o("div",Fe,[i(e(c),null,{default:d(()=>s[47]||(s[47]=[u("Notes (Optional)")])),_:1}),i(e(b),{type:"text",modelValue:l.notes,"onUpdate:modelValue":p=>l.notes=p,placeholder:"Special instructions or requirements",disabled:e(t).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(t).errors[`availabilities.${r}.notes`]?(n(),m("div",We,_(e(t).errors[`availabilities.${r}.notes`]),1)):f("",!0)])])]))),128))]),e(t).errors.availabilities?(n(),m("div",Le,_(e(t).errors.availabilities),1)):f("",!0)]),o("div",ze,[i(e(x),{variant:"outline","as-child":"",disabled:e(t).processing},{default:d(()=>[i(e(W),{href:a.route("admin.courses.index")},{default:d(()=>s[48]||(s[48]=[u(" Cancel ")])),_:1},8,["href"])]),_:1},8,["disabled"]),i(e(x),{type:"submit",disabled:e(t).processing},{default:d(()=>[e(t).processing?(n(),m("span",Re,"Updating...")):(n(),m("span",Ge,"Update Course"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1}))}});export{Ss as default};
