import{a as i,o as l,e,C as Y,r as f,c as E,l as M,w as x,t as m,F as C,h as F,b as g,u as v,n as p,P,j as b,p as O,f as V,g as R,v as D}from"./app-HrX2RBWd.js";import{_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-VZXSYjGU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bg8MQd81.js";import"./index-DNBfp-oV.js";function j(o,d){return l(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule":"evenodd"})])}const T={class:"py-12"},$={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},q={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},z={class:"p-6 bg-white border-b border-gray-200"},H={class:"mb-6"},U={class:"text-2xl font-bold text-gray-800"},W={key:0,class:"mb-8 p-4 bg-green-50 rounded-lg"},Z={class:"mt-2"},A={class:"flex items-center"},G={class:"flex"},I={class:"mt-2"},J={class:"mt-1 text-gray-600"},K={class:"mt-4"},Q={class:"mt-1 flex items-center"},X=["onClick"],ee={key:0,class:"mt-2 text-sm text-red-600"},te={class:"mt-1"},se={key:0,class:"mt-2 text-sm text-red-600"},oe={class:"flex items-center justify-between"},ae=["disabled"],ce={__name:"Completion",props:{course:Object,completion:Object},setup(o){var k,y,w,_;const d=o,h=Y({rating:((k=d.completion)==null?void 0:k.rating)||0,feedback:((y=d.completion)==null?void 0:y.feedback)||""}),c=f(((w=d.completion)==null?void 0:w.rating)||0),n=f(((_=d.completion)==null?void 0:_.feedback)||""),a=f({}),u=f(!1),B=E(()=>c.value>0&&n.value.trim().length>0),S=()=>{const s={};return(!c.value||c.value===0)&&(s.rating="Please provide a rating for this course."),!n.value||n.value.trim().length===0?s.feedback="Please provide your feedback about this course.":n.value.trim().length<10&&(s.feedback="Feedback must be at least 10 characters long."),a.value=s,Object.keys(s).length===0},N=()=>{S()&&(h.rating=c.value,h.feedback=n.value.trim(),u.value=!0,h.post(route("courses.rating.submit",d.course.id),{onSuccess:()=>{u.value=!1,a.value={}},onError:s=>{a.value=s,u.value=!1}}))};return(s,t)=>(l(),M(L,{title:"Course Completion"},{default:x(()=>[e("div",T,[e("div",$,[e("div",q,[e("div",z,[e("div",H,[e("h2",U,' Congratulations on completing "'+m(o.course.name)+'"! ',1),t[1]||(t[1]=e("p",{class:"mt-2 text-gray-600"}," We'd love to hear your feedback on this course. Please provide both a rating and feedback to complete your course evaluation. ",-1))]),o.completion&&o.completion.rating?(l(),i("div",W,[t[5]||(t[5]=e("h3",{class:"text-lg font-semibold text-green-700"}," You've already rated this course ",-1)),e("div",Z,[e("div",A,[t[2]||(t[2]=e("span",{class:"text-gray-700 mr-2"},"Your rating:",-1)),e("div",G,[(l(),i(C,null,F(5,r=>g(v(j),{key:r,class:p(["h-5 w-5",r<=o.completion.rating?"text-yellow-400":"text-gray-300"])},null,8,["class"])),64))])]),e("div",I,[t[3]||(t[3]=e("span",{class:"text-gray-700"},"Your feedback:",-1)),e("p",J,m(o.completion.feedback),1)])]),e("div",K,[g(v(P),{href:s.route("courses.show",o.course.id),class:"text-indigo-600 hover:text-indigo-800"},{default:x(()=>t[4]||(t[4]=[b(" Return to course ")])),_:1},8,["href"])])])):(l(),i("form",{key:1,onSubmit:O(N,["prevent"]),class:"space-y-6"},[e("div",null,[t[6]||(t[6]=e("label",{class:"block text-sm font-medium text-gray-700"},[b(" How would you rate this course? "),e("span",{class:"text-red-500"},"*")],-1)),e("div",Q,[(l(),i(C,null,F(5,r=>e("button",{key:r,type:"button",onClick:re=>c.value=r,class:"focus:outline-none hover:scale-110 transition-transform"},[g(v(j),{class:p(["h-8 w-8",r<=c.value?"text-yellow-400":"text-gray-300"])},null,8,["class"])],8,X)),64))]),a.value.rating?(l(),i("p",ee,m(a.value.rating),1)):V("",!0)]),e("div",null,[t[7]||(t[7]=e("label",{for:"feedback",class:"block text-sm font-medium text-gray-700"},[b(" Your feedback "),e("span",{class:"text-red-500"},"*")],-1)),e("div",te,[R(e("textarea",{id:"feedback","onUpdate:modelValue":t[0]||(t[0]=r=>n.value=r),rows:"4",class:p(["border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500",{"border-red-300 focus:ring-red-500":a.value.feedback,"border-gray-300":!a.value.feedback}]),placeholder:"Please share your detailed thoughts about this course...",required:""},null,2),[[D,n.value]])]),a.value.feedback?(l(),i("p",se,m(a.value.feedback),1)):V("",!0)]),e("div",oe,[g(v(P),{href:s.route("courses.show",o.course.id),class:"text-indigo-600 hover:text-indigo-800"},{default:x(()=>t[8]||(t[8]=[b(" Return to course ")])),_:1},8,["href"]),e("button",{type:"submit",class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value||!B.value},m(u.value?"Submitting...":"Submit Feedback"),9,ae)])],32))])])])])]),_:1}))}};export{ce as default};
