import{d as O,C as K,r as g,c as Z,a as m,o as n,b as o,u as e,m as W,w as r,e as l,P as D,f as d,j as y,h as v,n as _,t as u,F as L,i as X,g as U,y as J}from"./app-Dt0F0blK.js";import{m as Q,f as Y}from"./AppLayout.vue_vue_type_script_setup_true_lang-Bum0PHdh.js";import{c as ee,_ as x}from"./Button.vue_vue_type_script_setup_true_lang-Bur818go.js";import{_ as V}from"./Card.vue_vue_type_script_setup_true_lang-CtkgQZFl.js";import{_ as k}from"./CardContent.vue_vue_type_script_setup_true_lang-DqRxUlIL.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-_kdebesn.js";import{_ as S}from"./CardHeader.vue_vue_type_script_setup_true_lang-BlBmqPCI.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3lRuw6Y.js";import{_ as F}from"./Input.vue_vue_type_script_setup_true_lang-CEGGw3rO.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-CwXf_K5B.js";import{_ as te}from"./Textarea.vue_vue_type_script_setup_true_lang-CtQGyA7X.js";import{_ as oe}from"./Switch.vue_vue_type_script_setup_true_lang-D2kghy2Q.js";import{_ as se,a as re,b as le,c as ie,d as ae}from"./SelectValue.vue_vue_type_script_setup_true_lang-D9yGIlG7.js";import{_ as de,a as B}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-B3QrGGxb.js";import{A as ne}from"./arrow-left-tHbuDoSZ.js";import{S as ue}from"./square-play-DEK64DeN.js";import{H as z,C as me}from"./hard-drive-aHSD875x.js";import{L as fe}from"./link-2-DnYRD9DZ.js";import{L as ce}from"./loader-circle-sIYfF5bu.js";import{T as pe}from"./test-tube-32MnmVBo.js";import{U as ve}from"./upload-Us0q2mPG.js";import{X as _e}from"./_plugin-vue_export-helper-BNB2DzGT.js";import{S as ge}from"./save-BdwYLwqZ.js";import"./index-DhkpjM5c.js";import"./index-B3JELWNU.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ufvh6NzD.js";import"./clock-DYVrIRvW.js";import"./useForwardPropsEmits-8hdV0QLI.js";import"./useForwardExpose-D0dJ5CPZ.js";import"./VisuallyHidden-CDl9cf2-.js";import"./VisuallyHiddenInput--hRIQWMB.js";import"./usePrimitiveElement-B4u4F1g0.js";import"./Presence-yU-1-Ora.js";import"./ConfigProvider-DhHMB9ze.js";import"./Teleport-BIo1Gt-o.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-2aGdiIe0.js";import"./Collection-DSROSw6D.js";import"./check-Bo8td30r.js";import"./useSize-D4rPSYi8.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./RovingFocusItem-BiwWbwrQ.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=ee("FileVideoIcon",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]),xe={class:"max-w-4xl mx-auto space-y-6"},be={class:"flex items-center gap-4"},he={class:"space-y-2"},Ve={key:0,class:"text-sm text-destructive"},ke={class:"space-y-2"},we={key:0,class:"text-sm text-destructive"},Se={class:"space-y-2"},Ce={key:0,class:"text-sm text-destructive"},$e={key:0,class:"space-y-2"},Me={class:"flex gap-2"},Ue={key:0,class:"text-sm text-destructive"},Fe={key:1,class:"space-y-2"},De={class:"space-y-3"},Le={key:0},Be={class:"text-xs text-muted-foreground"},ze={key:1,class:"flex items-center gap-3"},Pe={class:"flex-1 text-left"},Te={class:"text-sm font-medium"},Ae={class:"text-xs text-muted-foreground"},Ie={key:0,class:"space-y-2"},je={class:"flex justify-between text-sm"},Ge={class:"w-full bg-secondary rounded-full h-2"},Re={key:0,class:"text-sm text-destructive"},qe={class:"space-y-2"},Ne={class:"flex gap-2"},Ee={class:"flex items-center px-3 py-2 bg-muted rounded-md text-sm text-muted-foreground min-w-0"},He={key:0,class:"text-sm text-destructive"},Oe={class:"text-sm text-muted-foreground"},Ke={class:"flex items-center justify-between"},Ze={class:"space-y-1"},We={class:"flex justify-between items-center"},jt=O({__name:"Create",props:{categories:{},storageOptions:{},maxFileSize:{},allowedMimes:{}},setup(P){const T=P,A=[{title:"Video Management",href:"/admin/videos"},{title:"Create Video Course",href:""}],s=K({name:"",description:"",storage_type:"google_drive",google_drive_url:"",video_file:null,duration:null,content_category_id:null,is_active:!0}),b=g(!1),h=g(!1),c=g(0),$=g(!1),M=g(null),I=Z(()=>Math.round((T.maxFileSize||512e3)/1024)),j=a=>{var f;const i=(f=a.target.files)==null?void 0:f[0];i&&(s.video_file=i,c.value=0)},G=a=>{var i;$.value=!1;const t=(i=a.dataTransfer)==null?void 0:i.files[0];t&&(s.video_file=t,c.value=0)},R=()=>{s.video_file=null,c.value=0,M.value&&(M.value.value="")},q=a=>{if(a===0)return"0 Bytes";const t=1024,i=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(a)/Math.log(t));return Math.round(a/Math.pow(t,f)*100)/100+" "+i[f]},N=async()=>{if(s.google_drive_url){h.value=!0;try{console.log("Testing URL:",s.google_drive_url),await new Promise(a=>setTimeout(a,2e3)),alert("Video URL is valid!")}catch(a){console.error("URL test failed:",a),alert("Failed to validate video URL. Please check the link.")}finally{h.value=!1}}},E=a=>{if(!a)return"00:00";const t=Math.floor(a/3600),i=Math.floor(a%3600/60),f=a%60;return t>0?`${t.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${i.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`},H=async()=>{b.value=!0,s.post("/admin/videos",{forceFormData:!0,onProgress:a=>{c.value=Math.round(a.percentage||0)},onFinish:()=>{b.value=!1,c.value=0},onSuccess:()=>{console.log("Video created successfully")}})};return(a,t)=>(n(),m(L,null,[o(e(W),{title:"Create Video Course"}),o(Y,{breadcrumbs:A},{default:r(()=>[l("div",xe,[l("div",be,[o(e(x),{"as-child":"",variant:"ghost"},{default:r(()=>[o(e(D),{href:"/admin/videos"},{default:r(()=>[o(e(ne),{class:"h-4 w-4 mr-2"}),t[10]||(t[10]=d(" Back to Videos "))]),_:1})]),_:1}),t[11]||(t[11]=l("div",null,[l("h1",{class:"text-2xl font-bold"},"Create Video Course"),l("p",{class:"text-muted-foreground"},"Add a new video course to your library")],-1))]),l("form",{onSubmit:y(H,["prevent"]),class:"space-y-6"},[o(e(V),null,{default:r(()=>[o(e(S),null,{default:r(()=>[o(e(C),{class:"flex items-center gap-2"},{default:r(()=>[o(e(ue),{class:"h-5 w-5"}),t[12]||(t[12]=d(" Video Information "))]),_:1}),o(e(w),null,{default:r(()=>t[13]||(t[13]=[d(" Enter the basic details for your video course ")])),_:1})]),_:1}),o(e(k),{class:"space-y-4"},{default:r(()=>[l("div",he,[o(e(p),{for:"name"},{default:r(()=>t[14]||(t[14]=[d("Video Title")])),_:1}),o(e(F),{id:"name",modelValue:e(s).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(s).name=i),type:"text",placeholder:"Enter video course title...",class:_({"border-destructive":e(s).errors.name}),required:""},null,8,["modelValue","class"]),e(s).errors.name?(n(),m("div",Ve,u(e(s).errors.name),1)):v("",!0)]),l("div",ke,[o(e(p),{for:"description"},{default:r(()=>t[15]||(t[15]=[d("Description")])),_:1}),o(e(te),{id:"description",modelValue:e(s).description,"onUpdate:modelValue":t[1]||(t[1]=i=>e(s).description=i),placeholder:"Describe what students will learn from this video course...",rows:"5",class:_({"border-destructive":e(s).errors.description})},null,8,["modelValue","class"]),e(s).errors.description?(n(),m("div",we,u(e(s).errors.description),1)):v("",!0)]),l("div",Se,[o(e(p),{for:"content_category_id"},{default:r(()=>t[16]||(t[16]=[d("Category")])),_:1}),o(e(se),{modelValue:e(s).content_category_id,"onUpdate:modelValue":t[2]||(t[2]=i=>e(s).content_category_id=i)},{default:r(()=>[o(e(re),{class:_({"border-destructive":e(s).errors.content_category_id})},{default:r(()=>[o(e(le),{placeholder:"Select a category..."})]),_:1},8,["class"]),o(e(ie),null,{default:r(()=>[(n(!0),m(L,null,X(a.categories,i=>(n(),U(e(ae),{key:i.id,value:i.id.toString()},{default:r(()=>[d(u(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(s).errors.content_category_id?(n(),m("div",Ce,u(e(s).errors.content_category_id),1)):v("",!0)])]),_:1})]),_:1}),o(e(V),null,{default:r(()=>[o(e(S),null,{default:r(()=>[o(e(C),{class:"flex items-center gap-2"},{default:r(()=>[o(e(z),{class:"h-5 w-5"}),t[17]||(t[17]=d(" Storage Type "))]),_:1}),o(e(w),null,{default:r(()=>t[18]||(t[18]=[d(" Choose where to store your video ")])),_:1})]),_:1}),o(e(k),{class:"space-y-4"},{default:r(()=>[o(e(de),{modelValue:e(s).storage_type,"onUpdate:modelValue":t[3]||(t[3]=i=>e(s).storage_type=i),class:"grid grid-cols-2 gap-4"},{default:r(()=>[o(e(p),{for:"google_drive",class:_(["flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground cursor-pointer",{"border-primary":e(s).storage_type==="google_drive"}])},{default:r(()=>[o(e(B),{value:"google_drive",id:"google_drive",class:"sr-only"}),o(e(me),{class:"mb-3 h-6 w-6"}),t[19]||(t[19]=l("div",{class:"space-y-1 text-center"},[l("p",{class:"text-sm font-medium leading-none"},"Google Drive"),l("p",{class:"text-xs text-muted-foreground"}," Store video on Google Drive ")],-1))]),_:1},8,["class"]),o(e(p),{for:"local",class:_(["flex flex-col items-center justify-between rounded-md border-2 border-muted bg-popover p-4 hover:bg-accent hover:text-accent-foreground cursor-pointer",{"border-primary":e(s).storage_type==="local"}])},{default:r(()=>[o(e(B),{value:"local",id:"local",class:"sr-only"}),o(e(z),{class:"mb-3 h-6 w-6"}),t[20]||(t[20]=l("div",{class:"space-y-1 text-center"},[l("p",{class:"text-sm font-medium leading-none"},"Local Storage"),l("p",{class:"text-xs text-muted-foreground"}," Upload video to server ")],-1))]),_:1},8,["class"])]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(e(V),null,{default:r(()=>[o(e(S),null,{default:r(()=>[o(e(C),{class:"flex items-center gap-2"},{default:r(()=>[o(e(fe),{class:"h-5 w-5"}),t[21]||(t[21]=d(" Video Source "))]),_:1}),o(e(w),null,{default:r(()=>[d(u(e(s).storage_type==="google_drive"?"Provide Google Drive URL":"Upload video file"),1)]),_:1})]),_:1}),o(e(k),{class:"space-y-4"},{default:r(()=>[e(s).storage_type==="google_drive"?(n(),m("div",$e,[o(e(p),{for:"google_drive_url"},{default:r(()=>t[22]||(t[22]=[d("Google Drive Video URL")])),_:1}),l("div",Me,[o(e(F),{id:"google_drive_url",modelValue:e(s).google_drive_url,"onUpdate:modelValue":t[4]||(t[4]=i=>e(s).google_drive_url=i),type:"url",placeholder:"https://drive.google.com/file/d/...",class:_({"border-destructive":e(s).errors.google_drive_url})},null,8,["modelValue","class"]),o(e(x),{type:"button",variant:"outline",size:"icon",onClick:N,disabled:!e(s).google_drive_url||h.value},{default:r(()=>[h.value?(n(),U(e(ce),{key:0,class:"h-4 w-4 animate-spin"})):(n(),U(e(pe),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),e(s).errors.google_drive_url?(n(),m("div",Ue,u(e(s).errors.google_drive_url),1)):v("",!0),t[23]||(t[23]=l("div",{class:"text-sm text-muted-foreground"},' Paste the shareable link from Google Drive. Make sure the video is set to "Anyone with the link can view" ',-1))])):e(s).storage_type==="local"?(n(),m("div",Fe,[o(e(p),{for:"video_file"},{default:r(()=>t[24]||(t[24]=[d("Video File")])),_:1}),l("div",De,[l("div",{class:_(["border-2 border-dashed rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",{"border-destructive":e(s).errors.video_file,"border-primary bg-primary/5":c.value>0}]),onClick:t[5]||(t[5]=i=>{var f;return(f=a.$refs.videoFileInput)==null?void 0:f.click()}),onDragover:t[6]||(t[6]=y(i=>$.value=!0,["prevent"])),onDragleave:t[7]||(t[7]=y(i=>$.value=!1,["prevent"])),onDrop:y(G,["prevent"])},[l("input",{ref_key:"videoFileInput",ref:M,type:"file",accept:"video/mp4,video/webm,video/avi,video/mov,video/x-matroska",class:"hidden",onChange:j},null,544),e(s).video_file?(n(),m("div",ze,[o(e(ye),{class:"h-8 w-8 text-primary"}),l("div",Pe,[l("p",Te,u(e(s).video_file.name),1),l("p",Ae,u(q(e(s).video_file.size)),1)]),o(e(x),{type:"button",variant:"ghost",size:"sm",onClick:y(R,["stop"])},{default:r(()=>[o(e(_e),{class:"h-4 w-4"})]),_:1})])):(n(),m("div",Le,[o(e(ve),{class:"h-10 w-10 mx-auto text-muted-foreground mb-4"}),t[25]||(t[25]=l("p",{class:"text-sm font-medium mb-1"}," Click to upload or drag and drop ",-1)),l("p",Be," MP4, WebM, AVI, MOV, MKV (Max "+u(I.value)+"MB) ",1)]))],34),c.value>0&&c.value<100?(n(),m("div",Ie,[l("div",je,[t[26]||(t[26]=l("span",null,"Uploading...",-1)),l("span",null,u(c.value)+"%",1)]),l("div",Ge,[l("div",{class:"bg-primary h-2 rounded-full transition-all duration-300",style:J({width:`${c.value}%`})},null,4)])])):v("",!0)]),e(s).errors.video_file?(n(),m("div",Re,u(e(s).errors.video_file),1)):v("",!0)])):v("",!0),l("div",qe,[o(e(p),{for:"duration"},{default:r(()=>t[27]||(t[27]=[d("Duration (seconds)")])),_:1}),l("div",Ne,[o(e(F),{id:"duration",modelValue:e(s).duration,"onUpdate:modelValue":t[8]||(t[8]=i=>e(s).duration=i),type:"number",min:"1",max:"86400",placeholder:"e.g., 3600 for 1 hour",class:_({"border-destructive":e(s).errors.duration})},null,8,["modelValue","class"]),l("div",Ee,u(E(e(s).duration)),1)]),e(s).errors.duration?(n(),m("div",He,u(e(s).errors.duration),1)):v("",!0),l("div",Oe,u(e(s).storage_type==="local"?"Optional - will be auto-detected from video file":"Video duration in seconds (optional)"),1)])]),_:1})]),_:1}),o(e(V),null,{default:r(()=>[o(e(S),null,{default:r(()=>[o(e(C),{class:"flex items-center gap-2"},{default:r(()=>[o(e(Q),{class:"h-5 w-5"}),t[28]||(t[28]=d(" Settings "))]),_:1}),o(e(w),null,{default:r(()=>t[29]||(t[29]=[d(" Configure the video course settings ")])),_:1})]),_:1}),o(e(k),null,{default:r(()=>[l("div",Ke,[l("div",Ze,[o(e(p),null,{default:r(()=>t[30]||(t[30]=[d("Active Status")])),_:1}),t[31]||(t[31]=l("div",{class:"text-sm text-muted-foreground"}," Make this video course available to students ",-1))]),o(e(oe),{checked:e(s).is_active,"onUpdate:checked":t[9]||(t[9]=i=>e(s).is_active=i)},null,8,["checked"])])]),_:1})]),_:1}),l("div",We,[o(e(x),{"as-child":"",variant:"outline"},{default:r(()=>[o(e(D),{href:"/admin/videos"},{default:r(()=>t[32]||(t[32]=[d("Cancel")])),_:1})]),_:1}),o(e(x),{type:"submit",disabled:b.value||e(s).processing},{default:r(()=>[o(e(ge),{class:"h-4 w-4 mr-2"}),d(" "+u(b.value?"Creating...":"Create Video Course"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{jt as default};
