import{d as le,r as S,C as P,c as x,k as ne,o as n,w as W,e,a as r,f as m,n as E,j as M,t as o,u as a,g as f,F as _,h,i as G,v as C,q as N,b as ie,P as re,l as ae,W as F}from"./app-iYB6CK9s.js";import{_ as de}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const ue={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8"},ce={class:"mb-8"},me={class:"flex items-center justify-between"},ge={class:"flex space-x-3"},pe={key:0,class:"ml-2 inline-flex items-center justify-center w-5 h-5 text-xs bg-indigo-500 text-white rounded-full"},ve={key:0,class:"mb-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},fe={class:"flex items-center justify-between mb-4"},xe={class:"flex space-x-2"},be={class:"grid grid-cols-1 md:grid-cols-5 gap-4"},ye=["value"],_e=["value"],he={class:"mt-4 flex justify-end"},we=["disabled"],ke={key:0,class:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Se={key:1},Ce={key:2},je={key:1,class:"mb-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6"},Ee={class:"flex items-center justify-between"},Me={class:"flex items-center space-x-4"},Ne={class:"text-sm text-gray-600"},Fe={class:"flex items-center space-x-2"},Le={class:"flex space-x-2"},Ve={class:"inline-flex items-center"},Ae={class:"inline-flex items-center"},Pe={class:"inline-flex items-center"},ze={class:"flex space-x-3"},Be=["disabled"],De={class:"bg-white rounded-xl shadow-sm border border-gray-200"},Ue={class:"px-6 py-4 border-b border-gray-200"},$e={class:"flex items-center justify-between"},qe={class:"text-sm text-gray-500"},Re={key:0,class:"p-8 text-center"},Te={class:"mt-2 text-sm text-gray-500"},He={key:0,class:"mt-4"},Ie={key:1},Oe={class:"px-6 py-3 bg-gray-50 border-b border-gray-200"},We={class:"flex items-center"},Ge=["checked","indeterminate"],Je={class:"ml-3 text-sm font-medium text-gray-700"},Ke={class:"divide-y divide-gray-200"},Qe={class:"flex items-start space-x-4"},Xe=["value"],Ye={class:"flex-1"},Ze={class:"flex items-center justify-between"},et={class:"text-lg font-semibold text-gray-900"},tt={class:"text-sm text-gray-600"},st={class:"text-right"},ot={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},lt={class:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm"},nt={class:"text-gray-600"},it={class:"text-gray-600"},rt={key:0},at={class:"text-gray-600"},dt={key:0,class:"mt-3 p-3 bg-gray-50 rounded-lg border border-gray-200"},ut={class:"flex items-center justify-between"},ct={class:"text-sm font-medium text-gray-900"},mt={class:"flex items-center space-x-3"},gt={class:"text-right"},pt={class:"text-lg font-bold text-gray-900"},vt={class:"text-right"},ft={class:"text-lg font-bold text-green-600"},xt={key:2,class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},bt={class:"px-6 py-4 border-b border-gray-200"},yt={class:"flex items-center justify-between"},_t={class:"divide-y divide-gray-200"},ht={class:"flex items-center justify-between"},wt={class:"text-sm font-medium text-gray-900"},kt={class:"text-sm text-gray-600"},St={class:"text-xs text-gray-500"},Ct={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},jt={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Et={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},Mt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Nt={class:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6"},Ft={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Lt={class:"font-medium text-blue-900"},Vt={class:"font-medium text-blue-900"},At={class:"font-medium text-blue-900"},Pt={class:"font-medium text-blue-900"},zt={class:"space-y-4"},Bt={key:0},Dt={class:"font-medium text-gray-900 mb-2"},Ut={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},$t={class:"font-medium text-gray-900"},qt={class:"text-sm text-gray-600"},Rt={class:"text-xs text-gray-500"},Tt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ht={key:1,class:"fixed inset-0 z-50 overflow-y-auto"},It={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Ot={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Wt={class:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Gt={class:"flex items-center justify-between mb-4"},Jt={class:"mb-4"},Kt=["placeholder"],Qt={class:"mb-4"},Xt={class:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Yt=["disabled"],Zt={key:0,class:"mr-2 h-4 w-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},ns=le({__name:"Notifications",props:{employees:{},departments:{},courses:{},filters:{},recentNotifications:{},preview:{},showPreview:{type:Boolean}},setup(J){var q,R,T,H,I;const d=J,u=S([]),L=S(!1),w=S(!1),b=S(!1),g=S(["L2"]),l=P({department_id:((q=d.filters)==null?void 0:q.department_id)||null,course_id:((R=d.filters)==null?void 0:R.course_id)||null,start_date:((T=d.filters)==null?void 0:T.start_date)||"",end_date:((H=d.filters)==null?void 0:H.end_date)||"",search:((I=d.filters)==null?void 0:I.search)||"",performance_level:""}),y=P({employee_ids:[],target_manager_levels:[],email_subject:""}),p=P({employee_ids:[],target_manager_levels:[],email_subject:"",custom_message:""}),v=x(()=>d.employees||[]),K=x(()=>d.departments||[]),Q=x(()=>d.courses||[]),z=x(()=>d.recentNotifications||[]),k=x(()=>l.department_id||l.course_id||l.start_date||l.end_date||l.search),B=x(()=>v.value.length>0&&u.value.length===v.value.length),X=x(()=>u.value.length>0&&u.value.length<v.value.length),D=x(()=>u.value.length>0&&g.value.length>0);d.showPreview&&d.preview&&(w.value=!0);function Y(){B.value?u.value=[]:u.value=v.value.map(i=>i.id)}function Z(){console.log("Starting filter application..."),console.log("Current filter form data:",l.data);const i={department_id:l.department_id||null,course_id:l.course_id||null,start_date:l.start_date||"",end_date:l.end_date||"",search:l.search||"",performance_level:l.performance_level||""},t={};for(const[s,c]of Object.entries(i))c!==null&&c!==""&&c!==void 0&&(t[s]=c);console.log("Cleaned filter data:",t),F.get(route("admin.evaluations.notifications"),t,{preserveState:!0,preserveScroll:!0,onStart:()=>{console.log("Filter request started")},onSuccess:()=>{console.log("Filter request successful")},onError:s=>{console.error("Filter errors:",s)},onFinish:()=>{console.log("Filter request finished")}})}function U(){l.reset(),F.get(route("admin.evaluations.notifications"))}function ee(){if(!D.value){console.log("Cannot preview - missing requirements"),console.log("Selected employees:",u.value),console.log("Target levels:",g.value);return}console.log("Starting preview notification..."),console.log("Selected employees:",u.value),console.log("Target levels:",g.value),y.employee_ids=u.value,y.target_manager_levels=g.value,y.email_subject=V(),console.log("Form data:",y.data),console.log("Route URL:",route("admin.evaluations.notifications.preview")),y.post(route("admin.evaluations.notifications.preview"),{preserveState:!0,onStart:()=>{console.log("Request started")},onSuccess:i=>{console.log("Request successful"),console.log("Page props:",i.props),console.log("Preview prop:",i.props.preview),console.log("ShowPreview prop:",i.props.showPreview),i.props.preview&&(w.value=!0,console.log("Modal should be visible now"))},onError:i=>{console.error("Preview errors:",i)},onFinish:()=>{console.log("Request finished")}})}function te(){d.preview&&(p.employee_ids=u.value,p.target_manager_levels=g.value,p.email_subject=p.email_subject||V(),p.post(route("admin.evaluations.notifications.send"),{preserveState:!1,onSuccess:()=>{console.log("✅ Notifications sent successfully"),b.value=!1,w.value=!1,u.value=[],g.value=["L2"],F.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!1,replace:!0,onSuccess:()=>{console.log("✅ Successfully redirected to notifications page")},onError:i=>{console.error("❌ Error redirecting:",i)}})},onError:i=>{console.error("❌ Error sending notifications:",i)}}))}function V(){if(u.value.length===0)return"Evaluation Report";const i=v.value.filter(c=>u.value.includes(c.id)),t=[...new Set(i.map(c=>c.department))];return`Evaluation Report - ${t.length===1?t[0]:`${t.length} Departments`} (${u.value.length} Employees)`}function $(i){return i>=20?{label:"Exceptional",class:"bg-emerald-100 text-emerald-800 border-emerald-200"}:i>=15?{label:"Excellent",class:"bg-green-100 text-green-800 border-green-200"}:i>=10?{label:"Good",class:"bg-blue-100 text-blue-800 border-blue-200"}:i>=5?{label:"Average",class:"bg-yellow-100 text-yellow-800 border-yellow-200"}:{label:"Needs Improvement",class:"bg-red-100 text-red-800 border-red-200"}}function se(i){const t=parseFloat((i==null?void 0:i.toString())||"0");return isNaN(t)?"$0.00":`$${t.toFixed(2)}`}function A(){console.log("Closing preview modal..."),w.value=!1,b.value=!1,F.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{console.log("Successfully navigated back to notifications page")},onError:i=>{console.error("Error navigating back:",i)}})}const oe=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Notifications",href:null}];return(i,t)=>(n(),ne(de,{breadcrumbs:oe},{default:W(()=>[e("div",ue,[e("div",ce,[e("div",me,[t[18]||(t[18]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Evaluation Notifications"),e("p",{class:"mt-2 text-sm text-gray-600"}," Send evaluation reports to department managers ")],-1)),e("div",ge,[e("button",{onClick:t[0]||(t[0]=s=>L.value=!L.value),class:E(["inline-flex items-center rounded-lg px-4 py-2 text-sm font-semibold transition-colors duration-200 focus:outline-hidden focus:ring-2 focus:ring-indigo-500",k.value?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},[t[16]||(t[16]=e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.414A1 1 0 013 6.707V4z"})],-1)),t[17]||(t[17]=M(" Filters ")),k.value?(n(),r("span",pe,o([a(l).department_id,a(l).course_id,a(l).start_date,a(l).end_date,a(l).search].filter(Boolean).length),1)):m("",!0)],2)])])]),L.value?(n(),r("div",ve,[e("div",fe,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Filter L1 Employees",-1)),e("div",xe,[k.value?(n(),r("button",{key:0,onClick:U,type:"button",class:"inline-flex items-center rounded-lg bg-gray-100 px-3 py-2 text-sm font-medium text-gray-700 transition-colors duration-200 hover:bg-gray-200"}," Clear All ")):m("",!0)])]),e("div",be,[e("div",null,[t[21]||(t[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Department",-1)),f(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>a(l).department_id=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},[t[20]||(t[20]=e("option",{value:null},"All Departments",-1)),(n(!0),r(_,null,h(K.value,s=>(n(),r("option",{key:s.id,value:s.id},o(s.name),9,ye))),128))],512),[[G,a(l).department_id]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Course",-1)),f(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>a(l).course_id=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},[t[22]||(t[22]=e("option",{value:null},"All Courses",-1)),(n(!0),r(_,null,h(Q.value,s=>(n(),r("option",{key:s.id,value:s.id},o(s.name),9,_e))),128))],512),[[G,a(l).course_id]])]),e("div",null,[t[24]||(t[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Start Date",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[3]||(t[3]=s=>a(l).start_date=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},null,512),[[C,a(l).start_date]])]),e("div",null,[t[25]||(t[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"End Date",-1)),f(e("input",{type:"date","onUpdate:modelValue":t[4]||(t[4]=s=>a(l).end_date=s),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},null,512),[[C,a(l).end_date]])]),e("div",null,[t[26]||(t[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Employee",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=s=>a(l).search=s),placeholder:"Search by name or email",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm transition-colors duration-200 focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},null,512),[[C,a(l).search]])])]),e("div",he,[e("button",{onClick:Z,type:"button",class:"inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-indigo-700 focus:outline-hidden focus:ring-2 focus:ring-indigo-500",disabled:a(l).processing},[a(l).processing?(n(),r("svg",ke,t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),a(l).processing?(n(),r("span",Se,"Applying...")):(n(),r("span",Ce,"Apply Filters"))],8,we)])])):m("",!0),v.value.length>0?(n(),r("div",je,[e("div",Ee,[e("div",Me,[e("div",null,[e("p",Ne,o(u.value.length)+" of "+o(v.value.length)+" employees selected ",1)]),e("div",Fe,[t[31]||(t[31]=e("label",{class:"text-sm font-medium text-gray-700"},"Send to:",-1)),e("div",Le,[e("label",Ve,[f(e("input",{type:"checkbox",value:"L2","onUpdate:modelValue":t[6]||(t[6]=s=>g.value=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[N,g.value]]),t[28]||(t[28]=e("span",{class:"ml-2 text-sm text-gray-700"},"L2 Managers",-1))]),e("label",Ae,[f(e("input",{type:"checkbox",value:"L3","onUpdate:modelValue":t[7]||(t[7]=s=>g.value=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[N,g.value]]),t[29]||(t[29]=e("span",{class:"ml-2 text-sm text-gray-700"},"L3 Managers",-1))]),e("label",Pe,[f(e("input",{type:"checkbox",value:"L4","onUpdate:modelValue":t[8]||(t[8]=s=>g.value=s),class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,512),[[N,g.value]]),t[30]||(t[30]=e("span",{class:"ml-2 text-sm text-gray-700"},"L4 Managers",-1))])])])]),e("div",ze,[e("button",{onClick:ee,disabled:!D.value||a(y).processing,class:"inline-flex items-center rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-blue-700 focus:outline-hidden focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"},t[32]||(t[32]=[e("svg",{class:"mr-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),M(" Preview Notification ")]),8,Be)])])])):m("",!0),e("div",De,[e("div",Ue,[e("div",$e,[t[33]||(t[33]=e("h3",{class:"text-lg font-semibold text-gray-900"},"L1 Employees with Evaluations",-1)),e("div",qe,o(v.value.length)+" employees found ",1)])]),v.value.length===0?(n(),r("div",Re,[t[34]||(t[34]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),t[35]||(t[35]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No L1 Employees Found",-1)),e("p",Te,o(k.value?"No employees match your filter criteria.":"There are no L1 employees with evaluations."),1),k.value?(n(),r("div",He,[e("button",{onClick:U,class:"inline-flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-indigo-700"}," Clear Filters ")])):m("",!0)])):(n(),r("div",Ie,[e("div",Oe,[e("div",We,[e("input",{type:"checkbox",checked:B.value,indeterminate:X.value,onChange:Y,class:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,40,Ge),e("label",Je," Select All ("+o(v.value.length)+") ",1)])]),e("div",Ke,[(n(!0),r(_,null,h(v.value,s=>(n(),r("div",{key:s.id,class:E(["px-6 py-4 hover:bg-gray-50 transition-colors duration-200",{"bg-blue-50":u.value.includes(s.id)}])},[e("div",Qe,[f(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[9]||(t[9]=c=>u.value=c),class:"mt-1 rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500"},null,8,Xe),[[N,u.value]]),e("div",Ye,[e("div",Ze,[e("div",null,[e("h4",et,o(s.name),1),e("p",tt,o(s.email),1)]),e("div",st,[e("span",ot,o(s.level),1)])]),e("div",lt,[e("div",null,[t[36]||(t[36]=e("span",{class:"font-medium text-gray-700"},"Department:",-1)),e("span",nt,o(s.department),1)]),e("div",null,[t[37]||(t[37]=e("span",{class:"font-medium text-gray-700"},"Evaluations:",-1)),e("span",it,o(s.evaluation_count),1)]),s.latest_evaluation?(n(),r("div",rt,[t[38]||(t[38]=e("span",{class:"font-medium text-gray-700"},"Latest:",-1)),e("span",at,o(s.latest_evaluation.created_at),1)])):m("",!0)]),s.latest_evaluation?(n(),r("div",dt,[e("div",ut,[e("div",null,[e("p",ct,o(s.latest_evaluation.course_name),1),t[39]||(t[39]=e("p",{class:"text-xs text-gray-600"},"Latest evaluation",-1))]),e("div",mt,[e("div",gt,[e("div",pt,o(s.latest_evaluation.total_score),1),t[40]||(t[40]=e("div",{class:"text-xs text-gray-500"},"Score",-1))]),e("div",vt,[e("div",ft,o(se(s.latest_evaluation.incentive_amount)),1),t[41]||(t[41]=e("div",{class:"text-xs text-gray-500"},"Incentive",-1))]),e("span",{class:E(["inline-flex items-center px-2 py-1 rounded-full text-xs font-medium border",$(s.latest_evaluation.total_score).class])},o($(s.latest_evaluation.total_score).label),3)])])])):m("",!0)])])],2))),128))])]))]),z.value.length>0?(n(),r("div",xt,[e("div",bt,[e("div",yt,[t[43]||(t[43]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Notifications",-1)),ie(a(re),{href:i.route("admin.evaluations.notifications.history"),class:"text-sm text-indigo-600 hover:text-indigo-500"},{default:W(()=>t[42]||(t[42]=[M(" View All → ")])),_:1},8,["href"])])]),e("div",_t,[(n(!0),r(_,null,h(z.value,s=>(n(),r("div",{key:s.id,class:"px-6 py-4 hover:bg-gray-50 transition-colors duration-200"},[e("div",ht,[e("div",null,[e("p",wt,o(s.name),1),e("p",kt,o(s.department_name)+" • "+o(s.employee_count)+" employees • "+o(s.managers_notified)+" managers ("+o(s.target_manager_level)+") ",1),e("p",St," Sent by "+o(s.sent_by)+" on "+o(s.sent_at),1)]),e("span",{class:E(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.status_class])},o(s.status_label),3)])]))),128))])])):m("",!0)]),w.value&&d.preview?(n(),r("div",Ct,[e("div",jt,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:A}),e("div",Et,[e("div",Mt,[e("div",{class:"flex items-center justify-between mb-4"},[t[45]||(t[45]=e("h3",{class:"text-lg font-medium text-gray-900"},"Preview Notification",-1)),e("button",{onClick:A,class:"text-gray-400 hover:text-gray-500"},t[44]||(t[44]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Nt,[t[50]||(t[50]=e("h4",{class:"font-medium text-blue-900 mb-2"},"Summary",-1)),e("div",Ft,[e("div",null,[t[46]||(t[46]=e("span",{class:"text-blue-700"},"Employees:",-1)),e("span",Lt,o(d.preview.summary.total_employees),1)]),e("div",null,[t[47]||(t[47]=e("span",{class:"text-blue-700"},"Managers:",-1)),e("span",Vt,o(d.preview.summary.total_managers),1)]),e("div",null,[t[48]||(t[48]=e("span",{class:"text-blue-700"},"Departments:",-1)),e("span",At,o(d.preview.summary.departments.join(", ")),1)]),e("div",null,[t[49]||(t[49]=e("span",{class:"text-blue-700"},"Levels:",-1)),e("span",Pt,o(d.preview.summary.target_levels.join(", ")),1)])])]),e("div",zt,[(n(!0),r(_,null,h(d.preview.managers,(s,c)=>(n(),r("div",{key:c},[s.length>0?(n(),r("div",Bt,[e("h4",Dt,o(c)+" Managers ("+o(s.length)+")",1),e("div",Ut,[(n(!0),r(_,null,h(s,j=>{var O;return n(),r("div",{key:j.id,class:"p-3 bg-gray-50 rounded-lg border border-gray-200"},[e("p",$t,o(j.name),1),e("p",qt,o(j.email),1),e("p",Rt,o((O=j.departments)==null?void 0:O.join(", ")),1)])}),128))])])):m("",!0)]))),128))])]),e("div",Tt,[e("button",{onClick:t[10]||(t[10]=s=>b.value=!0),class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-green-600 text-base font-medium text-white hover:bg-green-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-green-500 sm:ml-3 sm:w-auto sm:text-sm"}," Send Notifications "),e("button",{onClick:A,class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])])])])):m("",!0),b.value?(n(),r("div",Ht,[e("div",It,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:t[11]||(t[11]=s=>b.value=!1)}),e("div",Ot,[e("form",{onSubmit:ae(te,["prevent"])},[e("div",Wt,[e("div",Gt,[t[52]||(t[52]=e("h3",{class:"text-lg font-medium text-gray-900"},"Send Notifications",-1)),e("button",{onClick:t[12]||(t[12]=s=>b.value=!1),type:"button",class:"text-gray-400 hover:text-gray-500"},t[51]||(t[51]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),e("div",Jt,[t[53]||(t[53]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Email Subject",-1)),f(e("input",{type:"text","onUpdate:modelValue":t[13]||(t[13]=s=>a(p).email_subject=s),placeholder:V(),class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500",required:""},null,8,Kt),[[C,a(p).email_subject]])]),e("div",Qt,[t[54]||(t[54]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Custom Message (Optional)",-1)),f(e("textarea",{"onUpdate:modelValue":t[14]||(t[14]=s=>a(p).custom_message=s),rows:"3",placeholder:"Add any additional message for the managers...",class:"block w-full rounded-lg border border-gray-300 px-3 py-2 text-sm shadow-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500"},null,512),[[C,a(p).custom_message]])])]),e("div",Xt,[e("button",{type:"submit",disabled:a(p).processing,class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50"},[a(p).processing?(n(),r("svg",Zt,t[55]||(t[55]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):m("",!0),M(" "+o(a(p).processing?"Sending...":"Send Now"),1)],8,Yt),e("button",{onClick:t[15]||(t[15]=s=>b.value=!1),type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-hidden focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"}," Cancel ")])],32)])])])):m("",!0)]),_:1}))}});export{ns as default};
