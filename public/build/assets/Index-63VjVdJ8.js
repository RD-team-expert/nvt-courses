import{d as q,r as g,g as $,o as m,w as s,e as n,h as b,b as t,u as e,P as _,f as l,t as i,a as c,F as k,i as N,W as J}from"./app-sfv6CYbu.js";import{_ as K}from"./AdminLayout.vue_vue_type_script_setup_true_lang-vvSRP-jI.js";import{_ as f}from"./Button.vue_vue_type_script_setup_true_lang-Ccdh52Vd.js";import{_ as C}from"./Card.vue_vue_type_script_setup_true_lang-C1bT-eXd.js";import{_ as j}from"./CardContent.vue_vue_type_script_setup_true_lang-Khif222k.js";import{_ as Q,a as X,b as z,c as x,d as Z,e as u}from"./TableHeader.vue_vue_type_script_setup_true_lang-HEEiC_Nq.js";import{_ as A}from"./index-Dq640zwT.js";import{_ as E,b as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-BqoVmqtq.js";import{_ as P,a as U,b as F,c as I,d as T,e as ee,f as te,g as se}from"./AlertDialogTitle.vue_vue_type_script_setup_true_lang-1k-0zjGr.js";import{_ as ae,a as ne}from"./index-B6tKGzdl.js";import{B as W}from"./building-DXASrS_m.js";import{C as le}from"./circle-check-big-Dm31aE_G.js";import{U as oe}from"./x-BJKYekbZ.js";import{L as ie}from"./loader-circle-Bs3wlpar.js";import"./index-DdH2r2B8.js";import"./index-C4PRPqD0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DttcJlkw.js";import"./clock-DTvpSLd-.js";import"./useForwardPropsEmits--cawDwsm.js";import"./useForwardExpose-C32JnqdD.js";import"./Presence-CHrFqoPB.js";import"./ConfigProvider-CuMY5RD4.js";import"./Teleport-DTKdiWK5.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";const re={class:"px-4 sm:px-0 space-y-6"},de={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ue={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},me={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fe={class:"flex items-center"},_e={class:"shrink-0"},ce={class:"w-8 h-8 bg-primary rounded-md flex items-center justify-center"},ve={class:"ml-5 w-0 flex-1"},ge={class:"text-lg font-medium text-foreground"},xe={class:"flex items-center"},pe={class:"shrink-0"},we={class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},he={class:"ml-5 w-0 flex-1"},ye={class:"text-lg font-medium text-foreground"},$e={class:"flex items-center"},be={class:"shrink-0"},ke={class:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center"},Ce={class:"ml-5 w-0 flex-1"},De={class:"text-lg font-medium text-foreground"},Ne={class:"overflow-x-auto"},je={class:"flex items-center"},ze={class:"ml-4"},Ae={class:"font-medium text-foreground"},Me={class:"text-sm text-muted-foreground"},Be={class:"text-sm text-foreground"},Ve={class:"flex flex-col space-y-1"},Se={class:"font-medium text-foreground"},Ee={class:"text-muted-foreground"},Le={key:0,class:"text-sm text-muted-foreground"},Pe={class:"flex items-center justify-end space-x-2"},Ue={class:"flex items-center pl-8"},Fe={class:"ml-4"},Ie={class:"font-medium text-foreground"},Te={class:"text-xs text-muted-foreground"},We={class:"text-sm text-foreground"},Oe={class:"flex items-center justify-end space-x-2"},Ge={key:0,class:"text-center py-12"},He={class:"text-muted-foreground"},Re={class:"mt-6"},Ye={class:"flex justify-between items-start"},qe={class:"font-medium"},Je={class:"text-sm"},yt=q({__name:"Index",props:{departments:Array,stats:Object},setup(v){const D=g(!1),p=g(!1),w=g(!1),y=g({type:"info",title:"",message:""}),h=g({title:"",message:"",action:null}),M=g({message:"Loading..."}),B=(d,a,o)=>{y.value={type:d,title:a,message:o},D.value=!0},O=(d,a,o)=>{h.value={title:d,message:a,action:o},p.value=!0},V=(d,a)=>{O("Delete Department",`Are you sure you want to delete "${a}"? This action cannot be undone and will permanently remove all associated data.`,()=>{w.value=!0,M.value.message="Deleting department...",J.delete(route("admin.departments.destroy",d),{preserveState:!0,onSuccess:()=>{w.value=!1,B("success","Success","Department deleted successfully!")},onError:o=>{w.value=!1,console.error("Delete failed:",o);const r=o.delete||"Failed to delete department. Please try again.";B("error","Error",r)}})})},G=()=>{p.value=!1,h.value.action&&h.value.action()},H=()=>{D.value=!1},R=()=>{p.value=!1},Y=[{name:"Dashboard",href:route("dashboard")},{name:"Organizational Management",href:route("admin.departments.index")},{name:"Departments",href:route("admin.departments.index")}],S=d=>d?"default":"destructive";return(d,a)=>(m(),$(K,{breadcrumbs:Y},{default:s(()=>[n("div",re,[n("div",de,[a[4]||(a[4]=n("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Department Management",-1)),n("div",ue,[t(e(f),{as:e(_),href:d.route("admin.departments.create"),class:"w-full sm:w-auto"},{default:s(()=>a[2]||(a[2]=[l(" Add New Department ")])),_:1},8,["as","href"]),t(e(f),{as:e(_),href:d.route("admin.manager-roles.create"),variant:"secondary",class:"w-full sm:w-auto"},{default:s(()=>a[3]||(a[3]=[l(" Assign Manager Roles ")])),_:1},8,["as","href"])])]),n("div",me,[t(e(C),null,{default:s(()=>[t(e(j),{class:"p-6"},{default:s(()=>[n("div",fe,[n("div",_e,[n("div",ce,[t(e(W),{class:"h-5 w-5 text-primary-foreground"})])]),n("div",ve,[a[5]||(a[5]=n("div",{class:"text-sm font-medium text-muted-foreground"},"Total Departments",-1)),n("div",ge,i(v.stats.total_departments||0),1)])])]),_:1})]),_:1}),t(e(C),null,{default:s(()=>[t(e(j),{class:"p-6"},{default:s(()=>[n("div",xe,[n("div",pe,[n("div",we,[t(e(le),{class:"h-5 w-5 text-white"})])]),n("div",he,[a[6]||(a[6]=n("div",{class:"text-sm font-medium text-muted-foreground"},"Active Departments",-1)),n("div",ye,i(v.stats.active_departments||0),1)])])]),_:1})]),_:1}),t(e(C),null,{default:s(()=>[t(e(j),{class:"p-6"},{default:s(()=>[n("div",$e,[n("div",be,[n("div",ke,[t(e(oe),{class:"h-5 w-5 text-white"})])]),n("div",Ce,[a[7]||(a[7]=n("div",{class:"text-sm font-medium text-muted-foreground"},"With Managers",-1)),n("div",De,i(v.stats.departments_with_managers||0),1)])])]),_:1})]),_:1})]),t(e(C),null,{default:s(()=>[n("div",Ne,[t(e(Q),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(z),null,{default:s(()=>[t(e(x),null,{default:s(()=>a[8]||(a[8]=[l("Department")])),_:1}),t(e(x),null,{default:s(()=>a[9]||(a[9]=[l("Hierarchy")])),_:1}),t(e(x),null,{default:s(()=>a[10]||(a[10]=[l("Managers")])),_:1}),t(e(x),null,{default:s(()=>a[11]||(a[11]=[l("Users")])),_:1}),t(e(x),null,{default:s(()=>a[12]||(a[12]=[l("Status")])),_:1}),t(e(x),{class:"text-right"},{default:s(()=>a[13]||(a[13]=[l("Actions")])),_:1})]),_:1})]),_:1}),t(e(Z),null,{default:s(()=>[(m(!0),c(k,null,N(v.departments,o=>(m(),c(k,{key:o.id},[t(e(z),null,{default:s(()=>[t(e(u),null,{default:s(()=>[n("div",je,[t(e(E),{class:"h-10 w-10"},{default:s(()=>[t(e(L),{class:"bg-primary/10 text-primary"},{default:s(()=>[l(i(o.department_code),1)]),_:2},1024)]),_:2},1024),n("div",ze,[n("div",Ae,i(o.name),1),n("div",Me,i(o.description),1)])])]),_:2},1024),t(e(u),null,{default:s(()=>[n("div",Be,i(o.hierarchy_path),1)]),_:2},1024),t(e(u),null,{default:s(()=>[n("div",Ve,[(m(!0),c(k,null,N(o.managers,r=>(m(),c("div",{key:r.name,class:"text-sm"},[n("span",Se,i(r.name),1),n("span",Ee,"("+i(r.role_type)+")",1),r.is_primary?(m(),$(e(A),{key:0,variant:"secondary",class:"ml-1"},{default:s(()=>a[14]||(a[14]=[l(" Primary ")])),_:1})):b("",!0)]))),128)),o.managers.length===0?(m(),c("div",Le," No managers assigned ")):b("",!0)])]),_:2},1024),t(e(u),{class:"text-foreground"},{default:s(()=>[l(i(o.users_count)+" users ",1)]),_:2},1024),t(e(u),null,{default:s(()=>[t(e(A),{variant:S(o.is_active)},{default:s(()=>[l(i(o.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),{class:"text-right"},{default:s(()=>[n("div",Pe,[t(e(f),{as:e(_),href:d.route("admin.departments.show",o.id),variant:"outline",size:"sm"},{default:s(()=>a[15]||(a[15]=[l(" View ")])),_:2},1032,["as","href"]),t(e(f),{as:e(_),href:d.route("admin.departments.edit",o.id),variant:"outline",size:"sm"},{default:s(()=>a[16]||(a[16]=[l(" Edit ")])),_:2},1032,["as","href"]),t(e(f),{onClick:r=>V(o.id,o.name),variant:"destructive",size:"sm"},{default:s(()=>a[17]||(a[17]=[l(" Delete ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024),(m(!0),c(k,null,N(o.children,r=>(m(),$(e(z),{key:r.id,class:"bg-muted/50"},{default:s(()=>[t(e(u),null,{default:s(()=>[n("div",Ue,[t(e(E),{class:"h-8 w-8"},{default:s(()=>[t(e(L),{class:"bg-muted text-muted-foreground text-xs"},{default:s(()=>[l(i(r.department_code),1)]),_:2},1024)]),_:2},1024),n("div",Fe,[n("div",Ie,i(r.name),1),n("div",Te,i(r.description),1)])])]),_:2},1024),t(e(u),null,{default:s(()=>[n("div",We,i(r.hierarchy_path),1)]),_:2},1024),t(e(u),{class:"text-foreground"},{default:s(()=>[l(i(r.managers_count)+" managers",1)]),_:2},1024),t(e(u),{class:"text-foreground"},{default:s(()=>[l(i(r.users_count)+" users",1)]),_:2},1024),t(e(u),null,{default:s(()=>[t(e(A),{variant:S(r.is_active)},{default:s(()=>[l(i(r.is_active?"Active":"Inactive"),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(u),{class:"text-right"},{default:s(()=>[n("div",Oe,[t(e(f),{as:e(_),href:d.route("admin.departments.show",r.id),variant:"outline",size:"sm"},{default:s(()=>a[18]||(a[18]=[l(" View ")])),_:2},1032,["as","href"]),t(e(f),{as:e(_),href:d.route("admin.departments.edit",r.id),variant:"outline",size:"sm"},{default:s(()=>a[19]||(a[19]=[l(" Edit ")])),_:2},1032,["as","href"]),t(e(f),{onClick:Ke=>V(r.id,r.name),variant:"destructive",size:"sm"},{default:s(()=>a[20]||(a[20]=[l(" Delete ")])),_:2},1032,["onClick"])])]),_:2},1024)]),_:2},1024))),128))],64))),128))]),_:1})]),_:1})]),!v.departments||v.departments.length===0?(m(),c("div",Ge,[n("div",He,[t(e(W),{class:"mx-auto h-12 w-12 text-muted-foreground/50"}),a[22]||(a[22]=n("h3",{class:"mt-2 text-sm font-medium text-foreground"},"No departments found",-1)),a[23]||(a[23]=n("p",{class:"mt-1 text-sm text-muted-foreground"},"Get started by creating a new department.",-1)),n("div",Re,[t(e(f),{as:e(_),href:d.route("admin.departments.create")},{default:s(()=>a[21]||(a[21]=[l(" Add New Department ")])),_:1},8,["as","href"])])])])):b("",!0)]),_:1})]),D.value?(m(),$(e(ae),{key:0,class:"fixed top-4 right-4 w-96 z-50",variant:y.value.type==="error"?"destructive":"default"},{default:s(()=>[t(e(ne),null,{default:s(()=>[n("div",Ye,[n("div",null,[n("div",qe,i(y.value.title),1),n("div",Je,i(y.value.message),1)]),t(e(f),{onClick:H,variant:"ghost",size:"sm",class:"h-6 w-6 p-0"},{default:s(()=>a[24]||(a[24]=[l(" × ")])),_:1})])]),_:1})]),_:1},8,["variant"])):b("",!0),t(e(P),{open:p.value,"onUpdate:open":a[0]||(a[0]=o=>p.value=o)},{default:s(()=>[t(e(U),null,{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(I),null,{default:s(()=>[l(i(h.value.title),1)]),_:1}),t(e(T),null,{default:s(()=>[l(i(h.value.message),1)]),_:1})]),_:1}),t(e(ee),null,{default:s(()=>[t(e(te),{onClick:R},{default:s(()=>a[25]||(a[25]=[l("Cancel")])),_:1}),t(e(se),{onClick:G,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:s(()=>a[26]||(a[26]=[l(" Yes, Delete ")])),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),t(e(P),{open:w.value,"onUpdate:open":a[1]||(a[1]=o=>w.value=o)},{default:s(()=>[t(e(U),{class:"sm:max-w-md"},{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(I),{class:"flex items-center gap-2"},{default:s(()=>[t(e(ie),{class:"h-4 w-4 animate-spin"}),a[27]||(a[27]=l(" Processing "))]),_:1}),t(e(T),null,{default:s(()=>[l(i(M.value.message),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{yt as default};
