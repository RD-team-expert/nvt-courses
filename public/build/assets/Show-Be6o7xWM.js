import{d as O,c as U,a as x,o as f,b as o,u as s,m as q,w as r,e,P as b,f as d,t as l,g as w,h as $,y as P,F as S,i as z,n as J,k as K,W as Q}from"./app-D1iuQuAS.js";import{m as G,f as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BJ4v1iK_.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-B6guOrk9.js";import{_ as n}from"./Card.vue_vue_type_script_setup_true_lang-C8owrlZX.js";import{_ as u}from"./CardContent.vue_vue_type_script_setup_true_lang-Dv9L4bYL.js";import{_ as C}from"./CardDescription.vue_vue_type_script_setup_true_lang-Cr3sIgbe.js";import{_ as p}from"./CardHeader.vue_vue_type_script_setup_true_lang-BYd_UuNO.js";import{_}from"./CardTitle.vue_vue_type_script_setup_true_lang-DYKMAbSa.js";import{_ as V}from"./index-C6bUSNpo.js";import{_ as Y,a as Z,b as j,c as v,d as ee,e as c}from"./TableHeader.vue_vue_type_script_setup_true_lang-BLVMulAi.js";import{_ as te}from"./Separator.vue_vue_type_script_setup_true_lang-B6H8V2iW.js";import{A as se}from"./arrow-left-yIB4sOA_.js";import{C as oe}from"./chart-column-DNpl6THP.js";import{S as D}from"./square-pen-4yY8n0M7.js";import{E}from"./external-link-CS3eFWy9.js";import{S as re}from"./square-play-xsO7TCDb.js";import{C as L}from"./clock-DuWYNqKe.js";import{F as ae}from"./folder-open-D2Kc2fiK.js";import{U as A,_ as le}from"./_plugin-vue_export-helper-CNTzoLEc.js";import{C as de}from"./circle-check-big-Cah-hv3l.js";import{T as W}from"./trending-up-DOuVZkJI.js";import{C as ie}from"./chart-pie-YlCYk7tO.js";import{T as ne}from"./target-Ckpqt4JH.js";import{A as ue}from"./activity-n74oIj2j.js";import"./index-C-eXEaxx.js";import"./index-cxKlnwRr.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B8mjJVhD.js";const fe={class:"space-y-6 bg-background text-foreground"},me={class:"flex flex-col lg:flex-row justify-between items-start lg:items-center gap-4"},ce={class:"flex items-center gap-4"},ge={class:"text-2xl font-bold flex items-center gap-2"},pe={class:"text-muted-foreground"},_e={class:"flex gap-2"},ve={class:"flex items-start gap-6"},be={class:"w-48 h-32 rounded-lg overflow-hidden bg-gradient-to-br from-blue-100 to-purple-100 dark:from-blue-950/50 dark:to-purple-950/50 flex items-center justify-center shrink-0 border border-muted"},we=["src","alt"],xe={class:"flex-1 space-y-3"},he={class:"text-xl font-semibold text-foreground"},ye={key:0,class:"text-muted-foreground mt-1"},ke={class:"flex items-center gap-6 text-sm text-muted-foreground"},$e={class:"flex items-center gap-1"},Ce={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Ve={class:"flex items-center gap-3"},je={class:"p-3 bg-blue-500 dark:bg-blue-600 rounded-lg"},Ae={class:"text-2xl font-bold text-blue-900 dark:text-blue-100"},Te={class:"flex items-center gap-3"},Pe={class:"p-3 bg-green-500 dark:bg-green-600 rounded-lg"},Se={class:"text-2xl font-bold text-green-900 dark:text-green-100"},De={class:"flex items-center gap-3"},Ee={class:"p-3 bg-purple-500 dark:bg-purple-600 rounded-lg"},Le={class:"text-2xl font-bold text-purple-900 dark:text-purple-100"},We={class:"flex items-center gap-3"},Ie={class:"p-3 bg-orange-500 dark:bg-orange-600 rounded-lg"},Me={class:"text-2xl font-bold text-orange-900 dark:text-orange-100"},Be={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ne={class:"space-y-4"},Re={class:"flex items-center justify-between p-3 bg-red-50 dark:bg-red-950/50 rounded-lg"},Fe={class:"text-sm text-muted-foreground"},He={class:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-950/50 rounded-lg"},Oe={class:"text-sm text-muted-foreground"},Ue={class:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-950/50 rounded-lg"},qe={class:"text-sm text-muted-foreground"},ze={class:"space-y-4"},Je={class:"flex items-center justify-between"},Ke={class:"font-medium"},Qe={class:"w-full bg-muted rounded-full h-2"},Ge={class:"space-y-3"},Xe={class:"flex justify-between"},Ye={class:"font-medium"},Ze={class:"flex justify-between"},et={class:"font-medium"},tt={class:"flex justify-between"},st={class:"font-medium"},ot={class:"font-medium"},rt={class:"text-sm text-muted-foreground"},at={class:"flex items-center gap-2"},lt={class:"w-full max-w-20 bg-muted rounded-full h-2"},dt={class:"text-sm font-medium min-w-0"},it={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},nt={class:"flex justify-between"},ut={class:"font-medium"},ft={class:"flex justify-between"},mt={class:"font-medium"},ct={class:"flex justify-between"},gt={class:"flex justify-between"},pt={class:"font-medium"},_t={class:"flex justify-between"},vt={class:"font-medium"},bt={class:"flex justify-between"},wt={class:"font-medium text-green-600"},xt={class:"flex justify-between"},ht={class:"font-medium"},yt={class:"flex justify-between"},kt={class:"font-medium"},$t=O({__name:"Show",props:{video:{},analytics:{},recent_activity:{}},setup(I){const h=I,M=[{title:"Video Management",href:"/admin/videos"},{title:"Analytics",href:""}],y=U(()=>{const a=h.recent_activity;return{low:a.filter(t=>t.completion_percentage<25).length,medium:a.filter(t=>t.completion_percentage>=25&&t.completion_percentage<75).length,high:a.filter(t=>t.completion_percentage>=75).length}}),k=a=>{if(!a||a<1)return"0s";const t=Math.floor(a/3600),i=Math.floor(a%3600/60),m=Math.floor(a%60);return t>0?i>0?`${t}h ${i}m`:`${t}h`:i>0?m>0?`${i}m ${m}s`:`${i}m`:`${m}s`},B=(a,t)=>{if(!t||a===0)return"0m";const i=a/100*t;return k(i)},N=a=>{if(!a)return"Never";const t=new Date(a),m=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60));if(m<1)return"Just now";if(m<24)return`${m}h ago`;const T=Math.floor(m/24);return T<7?`${T}d ago`:t.toLocaleDateString()},R=a=>a>=80?"text-green-600":a>=60?"text-yellow-600":"text-red-600",F=a=>{const t=a.target;t.style.display="none"},H=()=>{Q.post(`/admin/videos/${h.video.id}/toggle-active`,{},{preserveScroll:!0,onSuccess:()=>{console.log(`Video ${h.video.is_active?"deactivated":"activated"} successfully`)}})};return(a,t)=>(f(),x(S,null,[o(s(q),{title:`Analytics - ${a.video.name}`},null,8,["title"]),o(X,{breadcrumbs:M},{default:r(()=>[e("div",fe,[e("div",me,[e("div",ce,[o(s(g),{"as-child":"",variant:"ghost"},{default:r(()=>[o(s(b),{href:"/admin/videos"},{default:r(()=>[o(s(se),{class:"h-4 w-4 mr-2"}),t[0]||(t[0]=d(" Back to Videos "))]),_:1})]),_:1}),e("div",null,[e("h1",ge,[o(s(oe),{class:"h-7 w-7 text-blue-600 dark:text-blue-500"}),t[1]||(t[1]=d(" Video Analytics "))]),e("p",pe,l(a.video.name),1)])]),e("div",_e,[o(s(g),{"as-child":"",variant:"outline"},{default:r(()=>[o(s(b),{href:`/admin/videos/${a.video.id}/edit`},{default:r(()=>[o(s(D),{class:"h-4 w-4 mr-2"}),t[2]||(t[2]=d(" Edit Video "))]),_:1},8,["href"])]),_:1}),o(s(g),{"as-child":""},{default:r(()=>[o(s(b),{href:`/videos/${a.video.id}`,target:"_blank"},{default:r(()=>[o(s(E),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=d(" View Video "))]),_:1},8,["href"])]),_:1})])]),o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(u),{class:"p-6"},{default:r(()=>[e("div",ve,[e("div",be,[a.video.thumbnail_url?(f(),x("img",{key:0,src:a.video.thumbnail_url,alt:a.video.name,class:"w-full h-full object-cover",onError:F},null,40,we)):(f(),w(s(re),{key:1,class:"h-16 w-16 text-blue-500 dark:text-blue-400 opacity-50"}))]),e("div",xe,[e("div",null,[e("h2",he,l(a.video.name),1),a.video.description?(f(),x("p",ye,l(a.video.description),1)):$("",!0)]),e("div",ke,[e("div",$e,[o(s(L),{class:"h-4 w-4"}),d(" "+l(a.video.formatted_duration),1)]),a.video.category?(f(),w(s(V),{key:0,variant:"outline",class:"bg-background border-border text-foreground"},{default:r(()=>[o(s(ae),{class:"h-3 w-3 mr-1"}),d(" "+l(a.video.category.name),1)]),_:1})):$("",!0),o(s(V),{variant:a.video.is_active?"default":"secondary",class:"bg-background border-border"},{default:r(()=>[d(l(a.video.is_active?"Active":"Inactive"),1)]),_:1},8,["variant"]),e("span",null,"Created "+l(new Date(a.video.created_at).toLocaleDateString()),1)])])])]),_:1})]),_:1}),e("div",Ce,[o(s(n),{class:"border-0 bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/50 border border-blue-200/50 dark:border-blue-800/50"},{default:r(()=>[o(s(u),{class:"p-6"},{default:r(()=>[e("div",Ve,[e("div",je,[o(s(A),{class:"h-6 w-6 text-white"})]),e("div",null,[e("div",Ae,l(a.analytics.total_viewers),1),t[4]||(t[4]=e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},"Total Viewers",-1))])])]),_:1})]),_:1}),o(s(n),{class:"border-0 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/50 dark:to-green-900/50 border border-green-200/50 dark:border-green-800/50"},{default:r(()=>[o(s(u),{class:"p-6"},{default:r(()=>[e("div",Te,[e("div",Pe,[o(s(de),{class:"h-6 w-6 text-white"})]),e("div",null,[e("div",Se,l(a.analytics.completed_viewers),1),t[5]||(t[5]=e("div",{class:"text-sm text-green-700 dark:text-green-300"},"Completed",-1))])])]),_:1})]),_:1}),o(s(n),{class:"border-0 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/50 dark:to-purple-900/50 border border-purple-200/50 dark:border-purple-800/50"},{default:r(()=>[o(s(u),{class:"p-6"},{default:r(()=>[e("div",De,[e("div",Ee,[o(s(W),{class:"h-6 w-6 text-white"})]),e("div",null,[e("div",Le,l(a.analytics.completion_rate)+"% ",1),t[6]||(t[6]=e("div",{class:"text-sm text-purple-700 dark:text-purple-300"},"Completion Rate",-1))])])]),_:1})]),_:1}),o(s(n),{class:"border-0 bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/50 dark:to-orange-900/50 border border-orange-200/50 dark:border-orange-800/50"},{default:r(()=>[o(s(u),{class:"p-6"},{default:r(()=>[e("div",We,[e("div",Ie,[o(s(L),{class:"h-6 w-6 text-white"})]),e("div",null,[e("div",Me,l(a.analytics.total_watch_hours)+"h ",1),t[7]||(t[7]=e("div",{class:"text-sm text-orange-700 dark:text-orange-300"},"Watch Hours",-1))])])]),_:1})]),_:1})]),e("div",Be,[o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(ie),{class:"h-5 w-5"}),t[8]||(t[8]=d(" Progress Distribution "))]),_:1}),o(s(C),null,{default:r(()=>t[9]||(t[9]=[d(" How viewers are progressing through the video ")])),_:1})]),_:1}),o(s(u),null,{default:r(()=>[e("div",Ne,[e("div",Re,[t[10]||(t[10]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-red-500 rounded-full"}),e("span",{class:"text-sm font-medium"},"0-25% Progress")],-1)),e("span",Fe,l(y.value.low)+" viewers ",1)]),e("div",He,[t[11]||(t[11]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-yellow-500 rounded-full"}),e("span",{class:"text-sm font-medium"},"25-75% Progress")],-1)),e("span",Oe,l(y.value.medium)+" viewers ",1)]),e("div",Ue,[t[12]||(t[12]=e("div",{class:"flex items-center gap-2"},[e("div",{class:"w-3 h-3 bg-green-500 rounded-full"}),e("span",{class:"text-sm font-medium"},"75-100% Progress")],-1)),e("span",qe,l(y.value.high)+" viewers ",1)])])]),_:1})]),_:1}),o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(ne),{class:"h-5 w-5"}),t[13]||(t[13]=d(" Engagement Insights "))]),_:1}),o(s(C),null,{default:r(()=>t[14]||(t[14]=[d(" Key performance indicators ")])),_:1})]),_:1}),o(s(u),null,{default:r(()=>[e("div",ze,[e("div",Je,[t[15]||(t[15]=e("span",{class:"text-sm text-muted-foreground"},"Average Progress",-1)),e("span",Ke,l(a.analytics.avg_progress)+"%",1)]),e("div",Qe,[e("div",{class:"bg-blue-500 rounded-full h-2 transition-all",style:P({width:`${a.analytics.avg_progress}%`})},null,4)]),o(s(te)),e("div",Ge,[e("div",Xe,[t[16]||(t[16]=e("span",{class:"text-sm text-muted-foreground"},"Drop-off Rate",-1)),e("span",Ye,l(100-a.analytics.completion_rate)+"%",1)]),e("div",Ze,[t[17]||(t[17]=e("span",{class:"text-sm text-muted-foreground"},"Avg Watch Time",-1)),e("span",et,l(B(a.analytics.avg_progress,a.video.duration)),1)]),e("div",tt,[t[18]||(t[18]=e("span",{class:"text-sm text-muted-foreground"},"Total Engagement",-1)),e("span",st,l(a.analytics.total_watch_hours)+"h",1)])])])]),_:1})]),_:1})]),o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(ue),{class:"h-5 w-5"}),t[19]||(t[19]=d(" Recent Viewer Activity "))]),_:1}),o(s(C),null,{default:r(()=>[d(" Latest "+l(a.recent_activity.length)+" viewers and their progress ",1)]),_:1})]),_:1}),o(s(u),{class:"p-0"},{default:r(()=>[o(s(Y),null,{default:r(()=>[o(s(Z),null,{default:r(()=>[o(s(j),{class:"border-border"},{default:r(()=>[o(s(v),{class:"text-foreground"},{default:r(()=>t[20]||(t[20]=[d("Viewer")])),_:1}),o(s(v),{class:"text-foreground"},{default:r(()=>t[21]||(t[21]=[d("Progress")])),_:1}),o(s(v),{class:"text-foreground"},{default:r(()=>t[22]||(t[22]=[d("Current Position")])),_:1}),o(s(v),{class:"text-foreground"},{default:r(()=>t[23]||(t[23]=[d("Watch Time")])),_:1}),o(s(v),{class:"text-foreground"},{default:r(()=>t[24]||(t[24]=[d("Last Accessed")])),_:1}),o(s(v),{class:"text-foreground"},{default:r(()=>t[25]||(t[25]=[d("Status")])),_:1})]),_:1})]),_:1}),o(s(ee),null,{default:r(()=>[(f(!0),x(S,null,z(a.recent_activity,i=>(f(),w(s(j),{key:i.id,class:"hover:bg-accent/50 border-border"},{default:r(()=>[o(s(c),null,{default:r(()=>[e("div",ot,l(i.user.name),1),e("div",rt,l(i.user.email),1)]),_:2},1024),o(s(c),null,{default:r(()=>[e("div",at,[e("div",lt,[e("div",{class:"bg-blue-500 rounded-full h-2",style:P({width:`${i.completion_percentage}%`})},null,4)]),e("span",dt,l(Math.round(i.completion_percentage))+"% ",1)])]),_:2},1024),o(s(c),{class:"text-sm"},{default:r(()=>[d(l(i.formatted_current_time),1)]),_:2},1024),o(s(c),{class:"text-sm"},{default:r(()=>[d(l(k(i.total_watched_time)),1)]),_:2},1024),o(s(c),{class:"text-sm text-muted-foreground"},{default:r(()=>[d(l(N(i.last_accessed_at)),1)]),_:2},1024),o(s(c),null,{default:r(()=>[o(s(V),{variant:i.is_completed?"default":"secondary",class:"bg-background border-border"},{default:r(()=>[d(l(i.is_completed?"Completed":"In Progress"),1)]),_:2},1032,["variant"])]),_:2},1024)]),_:2},1024))),128)),a.recent_activity.length===0?(f(),w(s(j),{key:0,class:"border-border"},{default:r(()=>[o(s(c),{colspan:"6",class:"text-center py-8 text-muted-foreground"},{default:r(()=>[o(s(A),{class:"h-12 w-12 mx-auto mb-4 opacity-50"}),t[26]||(t[26]=e("div",{class:"text-lg font-medium mb-2"},"No viewer activity yet",-1)),t[27]||(t[27]=e("p",null,"Once users start watching this video, their activity will appear here",-1))]),_:1})]),_:1})):$("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e("div",it,[o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(W),{class:"h-5 w-5"}),t[28]||(t[28]=d(" Performance Summary "))]),_:1})]),_:1}),o(s(u),{class:"space-y-3"},{default:r(()=>[e("div",nt,[t[29]||(t[29]=e("span",{class:"text-sm text-muted-foreground"},"Video Length",-1)),e("span",ut,l(a.video.formatted_duration),1)]),e("div",ft,[t[30]||(t[30]=e("span",{class:"text-sm text-muted-foreground"},"Total Views",-1)),e("span",mt,l(a.analytics.total_viewers),1)]),e("div",ct,[t[31]||(t[31]=e("span",{class:"text-sm text-muted-foreground"},"Completion Rate",-1)),e("span",{class:J(["font-medium",R(a.analytics.completion_rate)])},l(a.analytics.completion_rate)+"% ",3)]),e("div",gt,[t[32]||(t[32]=e("span",{class:"text-sm text-muted-foreground"},"Avg Progress",-1)),e("span",pt,l(a.analytics.avg_progress)+"%",1)])]),_:1})]),_:1}),o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(A),{class:"h-5 w-5"}),t[33]||(t[33]=d(" Engagement Stats "))]),_:1})]),_:1}),o(s(u),{class:"space-y-3"},{default:r(()=>[e("div",_t,[t[34]||(t[34]=e("span",{class:"text-sm text-muted-foreground"},"Active Viewers",-1)),e("span",vt,l(a.analytics.total_viewers-a.analytics.completed_viewers),1)]),e("div",bt,[t[35]||(t[35]=e("span",{class:"text-sm text-muted-foreground"},"Completed Viewers",-1)),e("span",wt,l(a.analytics.completed_viewers),1)]),e("div",xt,[t[36]||(t[36]=e("span",{class:"text-sm text-muted-foreground"},"Total Watch Hours",-1)),e("span",ht,l(a.analytics.total_watch_hours)+"h",1)]),e("div",yt,[t[37]||(t[37]=e("span",{class:"text-sm text-muted-foreground"},"Avg per Viewer",-1)),e("span",kt,l(a.analytics.total_viewers>0?k(a.analytics.total_watch_hours*3600/a.analytics.total_viewers):"0s"),1)])]),_:1})]),_:1}),o(s(n),{class:"bg-card border-border"},{default:r(()=>[o(s(p),null,{default:r(()=>[o(s(_),{class:"flex items-center gap-2"},{default:r(()=>[o(s(G),{class:"h-5 w-5"}),t[38]||(t[38]=d(" Quick Actions "))]),_:1})]),_:1}),o(s(u),{class:"space-y-3"},{default:r(()=>[o(s(g),{"as-child":"",class:"w-full justify-start",variant:"outline"},{default:r(()=>[o(s(b),{href:`/admin/videos/${a.video.id}/edit`},{default:r(()=>[o(s(D),{class:"h-4 w-4 mr-2"}),t[39]||(t[39]=d(" Edit Video Details "))]),_:1},8,["href"])]),_:1}),o(s(g),{"as-child":"",class:"w-full justify-start",variant:"outline"},{default:r(()=>[o(s(b),{href:`/videos/${a.video.id}`,target:"_blank"},{default:r(()=>[o(s(E),{class:"h-4 w-4 mr-2"}),t[40]||(t[40]=d(" Preview Video "))]),_:1},8,["href"])]),_:1}),o(s(g),{onClick:H,class:"w-full justify-start",variant:a.video.is_active?"destructive":"default"},{default:r(()=>[(f(),w(K(a.video.is_active?"EyeOff":"Eye"),{class:"h-4 w-4 mr-2"})),d(" "+l(a.video.is_active?"Deactivate":"Activate")+" Video ",1)]),_:1},8,["variant"])]),_:1})]),_:1})])])]),_:1})],64))}}),Yt=le($t,[["__scopeId","data-v-c4e0dd04"]]);export{Yt as default};
