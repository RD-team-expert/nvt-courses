import{P as de,bo as b,g as N,o as d,w as n,e as s,a as u,h,b as i,f,t as p,F as S,i as A,n as v,j as te,s as ce,H as ue,O as me,r as U,C as fe,l as pe,c as P,x as se,W as re}from"./app-CwrLmt4H.js";import{M as _e}from"./Modal-Bk01EMsi.js";import{_ as he}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVdVdrtJ.js";import{_ as ge}from"./Button.vue_vue_type_script_setup_true_lang-DNqWTjl2.js";import{_ as ve}from"./Input.vue_vue_type_script_setup_true_lang-rmXnsLaI.js";import{_ as be}from"./Label.vue_vue_type_script_setup_true_lang-CU7Va5Ql.js";import{b as xe,a as ye,d as we,c as ke,_ as Ce}from"./SelectValue.vue_vue_type_script_setup_true_lang-FEW3_Jd3.js";import{_ as Ee}from"./Textarea.vue_vue_type_script_setup_true_lang-ChuE_6eQ.js";import{_ as ze}from"./Card.vue_vue_type_script_setup_true_lang-A8WG6GOp.js";import{_ as Ve}from"./CardContent.vue_vue_type_script_setup_true_lang-C0P-sboE.js";import{_ as Fe}from"./CardHeader.vue_vue_type_script_setup_true_lang-B1JXwWzJ.js";import{_ as Qe}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfsAIejd.js";import{_ as Te}from"./_plugin-vue_export-helper-C_B9qUyA.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-KHSjz1qE.js";import"./index-DJ8elu12.js";import"./index-Bl0m2vYu.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wO9CZrtp.js";import"./clock-B3hXeEnL.js";import"./useForwardPropsEmits-Bv9ZfZA8.js";import"./Presence-D5fWEiXU.js";import"./ConfigProvider-DYoe7gBq.js";import"./useForwardExpose-aFpDTqrD.js";import"./Teleport-jnYm4bVA.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BFDwzHBd.js";import"./Collection-B9kSM2sl.js";import"./usePrimitiveElement-D1W1Ae6N.js";import"./check-D3O_WcEY.js";import"./useSize-d0DSIEo7.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-xEP9wB1T.js";const qe={components:{AdminLayout:he,Link:de,Modal:_e,Button:ge,Input:ve,Label:be,Select:Ce,SelectContent:ke,SelectItem:we,SelectTrigger:ye,SelectValue:xe,Textarea:Ee,Card:ze,CardContent:Ve,CardHeader:Fe,CardTitle:Qe},props:{quiz:{type:Object,required:!0},courses:{type:Array,default:()=>[]}},setup(C){var K,X,Y,Z,I,$;const t=me(),L=U(!1),e=U(!1),E=U([]),G=U(0),j={success:"border-green-200 bg-green-50",error:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},k={success:"text-green-500 bg-green-100",error:"text-red-500 bg-red-100",info:"text-blue-500 bg-blue-100"},V=U({}),D=l=>!l||!Array.isArray(l)?[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""}]:l.map(r=>{if(!r)return{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""};if(r.type==="text")return{id:r.id||null,question_text:r.question_text||"",type:"text",points:0,options:[],correct_answer:[],correct_answer_explanation:r.correct_answer_explanation||""};let c=["",""];r.options&&Array.isArray(r.options)&&(c=r.options.map(y=>typeof y=="string"?y:(y==null?void 0:y.option_text)||""),c.length<2&&(c=[...c,"",""].slice(0,2)));let x=[];return r.correct_answer&&Array.isArray(r.correct_answer)&&(x=r.correct_answer.map(y=>typeof y=="string"?y:(y==null?void 0:y.option_text)||"")),{id:r.id||null,question_text:r.question_text||"",type:r.type||"radio",points:r.points||0,options:c,correct_answer:x,correct_answer_explanation:r.correct_answer_explanation||""}}),m=fe({course_id:((K=C.quiz)==null?void 0:K.course_id)||"",title:((X=C.quiz)==null?void 0:X.title)||"",description:((Y=C.quiz)==null?void 0:Y.description)||"",status:((Z=C.quiz)==null?void 0:Z.status)||"draft",pass_threshold:((I=C.quiz)==null?void 0:I.pass_threshold)||80,questions:D(($=C.quiz)==null?void 0:$.questions)});pe(()=>t.props.errors,l=>{V.value=l||{}},{immediate:!0,deep:!0});const F=P(()=>({...m.errors,...V.value})),B=P(()=>Object.keys(F.value).length>0),z=P(()=>{var l;return{hasTitle:!!((l=m.title)!=null&&l.trim()),hasCourse:!!m.course_id,hasValidThreshold:m.pass_threshold>=0&&m.pass_threshold<=100,hasQuestions:m.questions.length>0,allQuestionsValid:m.questions.every(r=>{var c;return(c=r.question_text)!=null&&c.trim()?r.type==="text"?!0:!(!r.points||r.points<=0||!r.options||r.options.length<2||!r.options.every(x=>x==null?void 0:x.trim())||!r.correct_answer||r.correct_answer.length===0):!1})}}),Q=P(()=>Object.values(z.value).every(Boolean)),O=P(()=>!Q.value),T=P(()=>{const l=Object.keys(F.value).length;return l===0?{title:"",message:""}:{title:l===1?"Please fix the following issue:":`Please fix the following ${l} issues:`,message:"Review the highlighted fields below and correct any errors before saving."}}),w=(l,r="info",c=5e3)=>{const x=++G.value,y={id:x,message:l,type:r,show:!1};return E.value.push(y),se(()=>{const ee=E.value.findIndex(ae=>ae.id===x);ee!==-1&&(E.value[ee].show=!0)}),c>0&&setTimeout(()=>M(x),c),x},M=l=>{const r=E.value.findIndex(c=>c.id===l);r!==-1&&(E.value[r].show=!1,setTimeout(()=>{const c=E.value.findIndex(x=>x.id===l);c!==-1&&E.value.splice(c,1)},300))},H=l=>l.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()).replace(/questions\.(\d+)\./,"Question $1 "),R=l=>{const r=F.value[l];return Array.isArray(r)?r[0]:r||null},W=l=>[`questions.${l}.question_text`,`questions.${l}.type`,`questions.${l}.points`,`questions.${l}.options`,`questions.${l}.correct_answer`].some(c=>R(c)),o=()=>{se(()=>{const l=document.querySelector(".text-red-600, .border-red-300");l&&l.scrollIntoView({behavior:"smooth",block:"center"})})},a=()=>{try{m.questions.length<20&&m.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""})}catch(l){console.error("Error adding question:",l),w("Failed to add question. Please try again.","error")}},_=l=>{try{m.questions.length>1&&m.questions.splice(l,1)}catch(r){console.error("Error removing question:",r),w("Failed to remove question. Please try again.","error")}},g=l=>{try{m.questions[l].options.length<10&&m.questions[l].options.push("")}catch(r){console.error("Error adding option:",r),w("Failed to add option. Please try again.","error")}},q=(l,r)=>{try{const c=m.questions[l];if(c.options.length>2){const x=c.options[r];c.options.splice(r,1),Array.isArray(c.correct_answer)&&(c.correct_answer=c.correct_answer.filter(y=>y!==x))}}catch(c){console.error("Error removing option:",c),w("Failed to remove option. Please try again.","error")}},oe=l=>{try{const r=m.questions[l];r.type==="text"?(r.options=[],r.correct_answer=[],r.points=0):((!r.options||r.options.length<2)&&(r.options=["",""]),r.correct_answer=[]),r.correct_answer_explanation=""}catch(r){console.error("Error resetting question options:",r),w("Failed to reset question options. Please try again.","error")}},le=(l,r)=>{try{const c=m.questions[l];c.type==="radio"&&(c.correct_answer=[r])}catch(c){console.error("Error updating correct answer:",c),w("Failed to update correct answer. Please try again.","error")}},ie=()=>{try{if(V.value={},e.value=!1,m.status==="published"&&!Q.value){w("Cannot publish quiz. Please fix all required fields first.","error",8e3),o();return}m.transform(l=>({course_id:m.course_id,title:m.title,description:m.description,status:m.status,pass_threshold:m.pass_threshold,questions:m.questions.map(r=>({id:r.id||null,question_text:r.question_text,type:r.type,points:r.type==="text"?0:r.points,options:r.options?r.options.filter(c=>c&&c.trim()):[],correct_answer:Array.isArray(r.correct_answer)?r.correct_answer.filter(c=>c&&c.trim()):r.correct_answer?[r.correct_answer]:[],correct_answer_explanation:r.correct_answer_explanation||""}))})).put(route("admin.quizzes.update",C.quiz.id),{preserveState:!0,preserveScroll:!0,onStart:()=>{E.value.forEach(l=>M(l.id))},onSuccess:l=>{e.value=!0,w("Quiz updated successfully!","success",4e3),setTimeout(()=>{re.visit(route("admin.quizzes.index"),{replace:!0})},1500)},onError:l=>{V.value=l;const r=Object.keys(l).length,c=r===1?"Please correct the error below.":`Please correct the ${r} errors below.`;w(c,"error",8e3),setTimeout(()=>{o()},100)},onFinish:()=>{}})}catch(l){console.error("Critical error in submitQuiz:",l),w("An unexpected error occurred. Please try again.","error")}},ne=()=>{m.isDirty?L.value=!0:J()},J=()=>{m.reset(),V.value={},L.value=!1,e.value=!1,re.visit(route("admin.quizzes.index"))};return{form:m,hasErrors:B,allErrors:F,errorSummary:T,publishingChecklist:z,canPublish:Q,hasPublishingRequirements:O,showDiscardModal:L,showSuccessMessage:e,toasts:E,toastClasses:j,toastIconClasses:k,formatFieldName:H,getFieldError:R,hasQuestionErrors:W,scrollToFirstError:o,addQuestion:a,removeQuestion:_,addOption:g,removeOption:q,resetQuestionOptions:oe,updateCorrectAnswer:le,submitQuiz:ie,confirmDiscard:ne,discardChanges:J,addToast:w,removeToast:M,breadcrumbs:[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Edit",route:null}]}}},Se={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},Ae={class:"mb-8 flex items-center justify-between"},Me={key:0,class:"mb-6 rounded-lg border border-red-200 bg-red-50 p-6 shadow-sm"},Pe={class:"flex items-start"},Le={class:"ml-3 flex-1"},Be={class:"text-sm font-medium text-red-800"},Oe={class:"mt-2 text-sm text-red-700"},Ue={class:"mb-3"},je={class:"list-disc pl-5 space-y-1"},De={class:"font-medium"},He={class:"ml-4 flex-shrink-0"},Re={key:1,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 shadow-sm"},Ne={key:2,class:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4 shadow-sm"},We={class:"flex items-start"},Ge={class:"ml-3"},Je={class:"mt-2 text-sm text-blue-700"},Ke={class:"list-disc pl-5 space-y-1"},Xe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},Ye={key:0,class:"mt-1 text-sm text-red-600"},Ze={key:0,class:"mt-1 text-sm text-red-600"},Ie={class:"sm:col-span-2"},$e={key:0,class:"mt-1 text-sm text-red-600"},et={class:"sm:col-span-2"},tt={key:0,class:"mt-1 text-sm text-red-600"},st={key:0,class:"mt-1 text-sm text-red-600"},rt={class:"mb-4 flex items-center justify-between"},ot={key:0,class:"inline-flex items-center ml-2 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},lt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},it={class:"sm:col-span-2"},nt={key:0,class:"mt-1 text-sm text-red-600"},at={key:0,class:"mt-1 text-sm text-red-600"},dt={key:0},ct={key:0,class:"mt-1 text-sm text-red-600"},ut={key:0,class:"mt-4"},mt={key:0,class:"mt-1 text-sm text-red-600"},ft={class:"mt-4"},pt={key:0,class:"space-y-2"},_t=["id","checked","value","name","disabled","onChange"],ht=["for"],gt={key:1,class:"space-y-2"},vt=["id","value","onUpdate:modelValue","disabled"],bt=["for"],xt={key:2,class:"mt-1 text-sm text-red-600"},yt={class:"mt-4"},wt={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},kt={class:"flex justify-end space-x-3"},Ct={key:0,class:"flex items-center"},Et={key:1},zt={class:"p-6 sm:p-8"},Vt={class:"flex justify-end space-x-3"},Ft={key:3,class:"fixed top-4 right-4 z-50 space-y-2"},Qt={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Tt={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},qt={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},St={class:"ml-3 text-sm font-normal"},At=["onClick"];function Mt(C,t,L,e,E,G){const j=b("Link"),k=b("Button"),V=b("CardTitle"),D=b("CardHeader"),m=b("Label"),F=b("SelectValue"),B=b("SelectTrigger"),z=b("SelectItem"),Q=b("SelectContent"),O=b("Select"),T=b("Input"),w=b("Textarea"),M=b("CardContent"),H=b("Card"),R=b("Modal"),W=b("AdminLayout");return d(),N(W,{breadcrumbs:e.breadcrumbs},{default:n(()=>[s("div",Se,[s("div",Ae,[t[10]||(t[10]=s("h1",{class:"text-3xl font-bold ttext-white0"},"Edit Quiz",-1)),i(k,{"as-child":"",variant:"outline"},{default:n(()=>[i(j,{href:C.route("admin.quizzes.index")},{default:n(()=>t[9]||(t[9]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),f(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),e.hasErrors?(d(),u("div",Me,[s("div",Pe,[t[11]||(t[11]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),s("div",Le,[s("h3",Be,p(e.errorSummary.title),1),s("div",Oe,[s("p",Ue,p(e.errorSummary.message),1),s("ul",je,[(d(!0),u(S,null,A(e.allErrors,(o,a)=>(d(),u("li",{key:a,class:"break-words"},[s("span",De,p(e.formatFieldName(a))+":",1),f(" "+p(Array.isArray(o)?o[0]:o),1)]))),128))])])]),s("div",He,[s("button",{onClick:t[0]||(t[0]=(...o)=>e.scrollToFirstError&&e.scrollToFirstError(...o)),class:"inline-flex items-center rounded-md bg-red-100 px-3 py-1.5 text-xs font-medium text-red-800 hover:bg-red-200 transition-colors"}," Go to first error ")])])])):h("",!0),e.showSuccessMessage?(d(),u("div",Re,t[12]||(t[12]=[s("div",{class:"flex items-center"},[s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),s("p",{class:"ml-3 text-sm text-green-700 font-medium"}," Quiz saved successfully! ")],-1)]))):h("",!0),e.form.status==="published"&&e.hasPublishingRequirements?(d(),u("div",Ne,[s("div",We,[t[15]||(t[15]=s("div",{class:"flex-shrink-0"},[s("svg",{class:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),s("div",Ge,[t[14]||(t[14]=s("h3",{class:"text-sm font-medium text-blue-800"},"Publishing Requirements",-1)),s("div",Je,[t[13]||(t[13]=s("p",{class:"mb-2"},"To publish this quiz, please ensure:",-1)),s("ul",Ke,[s("li",{class:v(e.publishingChecklist.hasTitle?"text-green-600":"text-red-600")},p(e.publishingChecklist.hasTitle?"âœ“":"âœ—")+" Quiz has a title ",3),s("li",{class:v(e.publishingChecklist.hasCourse?"text-green-600":"text-red-600")},p(e.publishingChecklist.hasCourse?"âœ“":"âœ—")+" Course is selected ",3),s("li",{class:v(e.publishingChecklist.hasValidThreshold?"text-green-600":"text-red-600")},p(e.publishingChecklist.hasValidThreshold?"âœ“":"âœ—")+" Pass threshold is set (0-100%) ",3),s("li",{class:v(e.publishingChecklist.hasQuestions?"text-green-600":"text-red-600")},p(e.publishingChecklist.hasQuestions?"âœ“":"âœ—")+" At least one valid question ",3),s("li",{class:v(e.publishingChecklist.allQuestionsValid?"text-green-600":"text-red-600")},p(e.publishingChecklist.allQuestionsValid?"âœ“":"âœ—")+" All questions have correct answers ",3)])])])])])):h("",!0),s("form",{onSubmit:t[6]||(t[6]=te((...o)=>e.submitQuiz&&e.submitQuiz(...o),["prevent"])),class:"space-y-8"},[i(H,null,{default:n(()=>[i(D,null,{default:n(()=>[i(V,null,{default:n(()=>t[16]||(t[16]=[f("Quiz Details")])),_:1})]),_:1}),i(M,{class:"space-y-6"},{default:n(()=>[s("div",Xe,[s("div",null,[i(m,{for:"course_id",class:v(e.getFieldError("course_id")?"text-red-700":"")},{default:n(()=>t[17]||(t[17]=[f(" Course "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),i(O,{modelValue:e.form.course_id,"onUpdate:modelValue":t[1]||(t[1]=o=>e.form.course_id=o),disabled:e.form.processing},{default:n(()=>[i(B,null,{default:n(()=>[i(F,{placeholder:"Select a Course"})]),_:1}),i(Q,null,{default:n(()=>[(d(!0),u(S,null,A(L.courses,o=>(d(),N(z,{key:o.id,value:o.id},{default:n(()=>[f(p(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("course_id")?(d(),u("div",Ye,p(e.getFieldError("course_id")),1)):h("",!0)]),s("div",null,[i(m,{for:"status",class:v(e.getFieldError("status")?"text-red-700":"")},{default:n(()=>t[18]||(t[18]=[f(" Status "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),i(O,{modelValue:e.form.status,"onUpdate:modelValue":t[2]||(t[2]=o=>e.form.status=o),disabled:e.form.processing},{default:n(()=>[i(B,null,{default:n(()=>[i(F,{placeholder:"Select Status"})]),_:1}),i(Q,null,{default:n(()=>[i(z,{value:"draft"},{default:n(()=>t[19]||(t[19]=[f("Draft")])),_:1}),i(z,{value:"published"},{default:n(()=>t[20]||(t[20]=[f("Published")])),_:1}),i(z,{value:"archived"},{default:n(()=>t[21]||(t[21]=[f("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("status")?(d(),u("div",Ze,p(e.getFieldError("status")),1)):h("",!0)]),s("div",Ie,[i(m,{for:"title",class:v(e.getFieldError("title")?"text-red-700":"")},{default:n(()=>t[22]||(t[22]=[f(" Title "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),i(T,{id:"title",modelValue:e.form.title,"onUpdate:modelValue":t[3]||(t[3]=o=>e.form.title=o),type:"text",placeholder:"Enter quiz title",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("title")?(d(),u("div",$e,p(e.getFieldError("title")),1)):h("",!0)]),s("div",et,[i(m,{for:"description"},{default:n(()=>t[23]||(t[23]=[f("Description")])),_:1}),i(w,{id:"description",modelValue:e.form.description,"onUpdate:modelValue":t[4]||(t[4]=o=>e.form.description=o),rows:"4",placeholder:"Enter quiz description (optional)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("description")?(d(),u("div",tt,p(e.getFieldError("description")),1)):h("",!0)]),s("div",null,[i(m,{for:"pass_threshold",class:v(e.getFieldError("pass_threshold")?"text-red-700":"")},{default:n(()=>t[24]||(t[24]=[f(" Pass Threshold (%) "),s("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),i(T,{id:"pass_threshold",modelValue:e.form.pass_threshold,"onUpdate:modelValue":t[5]||(t[5]=o=>e.form.pass_threshold=o),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter pass threshold (e.g., 80.00)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("pass_threshold")?(d(),u("div",st,p(e.getFieldError("pass_threshold")),1)):h("",!0)])])]),_:1})]),_:1}),i(H,null,{default:n(()=>[i(D,null,{default:n(()=>[i(V,null,{default:n(()=>[f("Questions ("+p(e.form.questions.length)+"/20)",1)]),_:1})]),_:1}),i(M,null,{default:n(()=>[(d(!0),u(S,null,A(e.form.questions,(o,a)=>(d(),u("div",{key:`question-${a}`,class:v(["border dark rounded-lg p-4 mb-4",e.hasQuestionErrors(a)?"border-red-300 bg-red-50":""])},[s("div",rt,[s("h3",{class:v(["text-sm font-medium",e.hasQuestionErrors(a)?"text-red-900":"text-white"])},[f(" Question "+p(a+1)+" ",1),e.hasQuestionErrors(a)?(d(),u("span",ot," Has errors ")):h("",!0)],2),e.form.questions.length>1?(d(),N(k,{key:0,onClick:_=>e.removeQuestion(a),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:e.form.processing},{default:n(()=>t[25]||(t[25]=[f(" Remove ")])),_:2},1032,["onClick","disabled"])):h("",!0)]),s("div",lt,[s("div",it,[i(m,{for:`question_text_${a}`,class:v(e.getFieldError(`questions.${a}.question_text`)?"text-red-700":"")},{default:n(()=>t[26]||(t[26]=[f(" Question Text "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),i(T,{id:`question_text_${a}`,modelValue:o.question_text,"onUpdate:modelValue":_=>o.question_text=_,type:"text",placeholder:"Enter question text",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${a}.question_text`)?(d(),u("div",nt,p(e.getFieldError(`questions.${a}.question_text`)),1)):h("",!0)]),s("div",null,[i(m,{for:`type_${a}`,class:v(e.getFieldError(`questions.${a}.type`)?"text-red-700":"")},{default:n(()=>t[27]||(t[27]=[f(" Type "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),i(O,{id:`type_${a}`,modelValue:o.type,"onUpdate:modelValue":[_=>o.type=_,_=>e.resetQuestionOptions(a)],disabled:e.form.processing},{default:n(()=>[i(B,null,{default:n(()=>[i(F,{placeholder:"Select question type"})]),_:1}),i(Q,null,{default:n(()=>[i(z,{value:"radio"},{default:n(()=>t[28]||(t[28]=[f("Radio (Single Choice)")])),_:1}),i(z,{value:"checkbox"},{default:n(()=>t[29]||(t[29]=[f("Checkbox (Multiple Choice)")])),_:1}),i(z,{value:"text"},{default:n(()=>t[30]||(t[30]=[f("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${a}.type`)?(d(),u("div",at,p(e.getFieldError(`questions.${a}.type`)),1)):h("",!0)]),o.type!=="text"?(d(),u("div",dt,[i(m,{for:`points_${a}`,class:v(e.getFieldError(`questions.${a}.points`)?"text-red-700":"")},{default:n(()=>t[31]||(t[31]=[f(" Points "),s("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),i(T,{id:`points_${a}`,modelValue:o.points,"onUpdate:modelValue":_=>o.points=_,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter points",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${a}.points`)?(d(),u("div",ct,p(e.getFieldError(`questions.${a}.points`)),1)):h("",!0)])):h("",!0)]),o.type!=="text"?(d(),u("div",ut,[t[36]||(t[36]=s("h4",{class:"mb-2 text-sm font-medium text-white"},"Options",-1)),(d(!0),u(S,null,A(o.options,(_,g)=>(d(),u("div",{key:`option-${a}-${g}`,class:"mb-2 flex items-center"},[i(T,{modelValue:o.options[g],"onUpdate:modelValue":q=>o.options[g]=q,type:"text",class:"flex-1",placeholder:`Option ${g+1}`,disabled:e.form.processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),o.options.length>2?(d(),N(k,{key:0,onClick:q=>e.removeOption(a,g),type:"button",variant:"ghost",size:"sm",class:"ml-2 text-destructive",disabled:e.form.processing},{default:n(()=>t[32]||(t[32]=[f(" Remove ")])),_:2},1032,["onClick","disabled"])):h("",!0)]))),128)),e.getFieldError(`questions.${a}.options`)?(d(),u("div",mt,p(e.getFieldError(`questions.${a}.options`)),1)):h("",!0),i(k,{onClick:_=>e.addOption(a),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:e.form.processing||o.options.length>=10},{default:n(()=>t[33]||(t[33]=[f(" Add Option ")])),_:2},1032,["onClick","disabled"]),s("div",ft,[t[34]||(t[34]=s("label",{class:"mb-1 block text-sm font-medium ttext-white0"},[f(" Correct Answer(s) "),s("span",{class:"text-red-500"},"*")],-1)),o.type==="radio"?(d(),u("div",pt,[(d(!0),u(S,null,A(o.options,(_,g)=>(d(),u("div",{key:`radio-${a}-${g}`,class:"flex items-center"},[s("input",{id:`correct_answer_${a}_${g}`,checked:o.correct_answer.includes(_),value:_,type:"radio",name:`correct_answer_${a}`,class:"h-4 w-4 dark text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!_.trim(),onChange:q=>e.updateCorrectAnswer(a,_)},null,40,_t),s("label",{for:`correct_answer_${a}_${g}`,class:"ml-2 text-sm ttext-white0"},p(_||`Option ${g+1}`),9,ht)]))),128))])):o.type==="checkbox"?(d(),u("div",gt,[(d(!0),u(S,null,A(o.options,(_,g)=>(d(),u("div",{key:`checkbox-${a}-${g}`,class:"flex items-center"},[ce(s("input",{id:`correct_answer_${a}_${g}`,value:_,type:"checkbox","onUpdate:modelValue":q=>o.correct_answer=q,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!_.trim()},null,8,vt),[[ue,o.correct_answer]]),s("label",{for:`correct_answer_${a}_${g}`,class:"ml-2 text-sm ttext-white0"},p(_||`Option ${g+1}`),9,bt)]))),128))])):h("",!0),e.getFieldError(`questions.${a}.correct_answer`)?(d(),u("div",xt,p(e.getFieldError(`questions.${a}.correct_answer`)),1)):h("",!0)]),s("div",yt,[i(m,{for:`correct_answer_explanation_${a}`},{default:n(()=>t[35]||(t[35]=[f("Correct Answer Explanation")])),_:2},1032,["for"]),i(w,{id:`correct_answer_explanation_${a}`,modelValue:o.correct_answer_explanation,"onUpdate:modelValue":_=>o.correct_answer_explanation=_,rows:"2",placeholder:"Explain why this is correct (optional)",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])])):h("",!0),o.type==="text"?(d(),u("div",wt,t[37]||(t[37]=[s("p",{class:"text-sm text-blue-700"}," ðŸ“ This is an open-ended text question. Students will provide their own written response. ",-1)]))):h("",!0)],2))),128)),i(k,{onClick:e.addQuestion,type:"button",disabled:e.form.processing||e.form.questions.length>=20},{default:n(()=>t[38]||(t[38]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),f(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),s("div",kt,[i(k,{"as-child":"",variant:"outline",disabled:e.form.processing},{default:n(()=>[i(j,{href:C.route("admin.quizzes.index"),onClick:te(e.confirmDiscard,["prevent"])},{default:n(()=>t[39]||(t[39]=[f(" Cancel ")])),_:1},8,["href","onClick"])]),_:1},8,["disabled"]),i(k,{type:"submit",disabled:e.form.processing||e.form.status==="published"&&!e.canPublish},{default:n(()=>[e.form.processing?(d(),u("span",Ct,t[40]||(t[40]=[s("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),f(" Saving... ")]))):(d(),u("span",Et,"Update Quiz"))]),_:1},8,["disabled"])])],32),i(R,{show:e.showDiscardModal,onClose:t[8]||(t[8]=o=>e.showDiscardModal=!1)},{default:n(()=>[s("div",zt,[t[43]||(t[43]=s("h2",{class:"mb-3 text-xl font-semibold ttext-white0"},"Discard Changes",-1)),t[44]||(t[44]=s("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),s("div",Vt,[i(k,{onClick:t[7]||(t[7]=o=>e.showDiscardModal=!1),variant:"outline",disabled:e.form.processing},{default:n(()=>t[41]||(t[41]=[f(" Cancel ")])),_:1},8,["disabled"]),i(k,{onClick:e.discardChanges,variant:"destructive",disabled:e.form.processing},{default:n(()=>t[42]||(t[42]=[f(" Discard ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"]),e.toasts.length>0?(d(),u("div",Ft,[(d(!0),u(S,null,A(e.toasts,o=>(d(),u("div",{key:o.id,class:v(["transform transition-all duration-300 ease-in-out",o.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[s("div",{class:v(["flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg border",e.toastClasses[o.type]])},[s("div",{class:v(["inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",e.toastIconClasses[o.type]])},[o.type==="success"?(d(),u("svg",Qt,t[45]||(t[45]=[s("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):o.type==="error"?(d(),u("svg",Tt,t[46]||(t[46]=[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(d(),u("svg",qt,t[47]||(t[47]=[s("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),s("div",St,p(o.message),1),s("button",{onClick:a=>e.removeToast(o.id),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:ttext-white0 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8"},t[48]||(t[48]=[s("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,At)],2)],2))),128))])):h("",!0)])]),_:1},8,["breadcrumbs"])}const ps=Te(qe,[["render",Mt],["__scopeId","data-v-cdcdb76c"]]);export{ps as default};
