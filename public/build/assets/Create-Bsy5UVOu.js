import{d as g,C as _,k as v,o as n,w as u,e as o,l as y,g as i,a,f as d,u as s,v as m,t as l,F as w,h,i as k,q as C,b as D,P as V,n as N,j as S}from"./app-iYB6CK9s.js";import{_ as U}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const A={class:"px-4 sm:px-0"},B={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},M={class:"col-span-full"},T=["disabled"],q={key:0,class:"text-red-600 text-sm mt-1"},z={class:"col-span-1"},E=["disabled"],I={key:0,class:"text-red-600 text-sm mt-1"},L={class:"col-span-1"},P=["disabled"],j=["value"],F={key:0,class:"text-red-600 text-sm mt-1"},H={class:"col-span-full"},R=["disabled"],Z={key:0,class:"text-red-600 text-sm mt-1"},$={class:"col-span-full"},G={class:"flex items-center"},J=["disabled"],K={class:"flex flex-col sm:flex-row gap-2 mb-4"},O=["disabled"],Q={key:0,class:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24"},W={key:1},X={key:2},re=g({__name:"Create",props:{parentDepartments:Array},setup(c){const t=_({name:"",description:"",parent_id:"",department_code:"",is_active:!0});function b(){t.post("/admin/departments",{onSuccess:()=>{},onError:p=>{console.error("Validation errors:",p)}})}const f=()=>{t.name&&(t.department_code=t.name.toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,10))},x=[{name:"Dashboard",href:route("dashboard")},{name:"Departments",href:route("admin.departments.index")},{name:"Create Department",href:route("admin.departments.create")}];return(p,e)=>(n(),v(U,{breadcrumbs:x},{default:u(()=>[o("div",A,[e[15]||(e[15]=o("h1",{class:"text-xl sm:text-2xl font-bold mb-4"},"Create New Department",-1)),o("form",{onSubmit:y(b,["prevent"]),class:"max-w-2xl"},[o("div",B,[o("div",M,[e[5]||(e[5]=o("label",{class:"block font-semibold mb-1"},"Department Name",-1)),i(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=r=>s(t).name=r),onInput:f,class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:s(t).processing,required:""},null,40,T),[[m,s(t).name]]),s(t).errors.name?(n(),a("div",q,l(s(t).errors.name),1)):d("",!0)]),o("div",z,[e[6]||(e[6]=o("label",{class:"block font-semibold mb-1"},"Department Code",-1)),i(o("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=r=>s(t).department_code=r),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:s(t).processing,maxlength:"20",required:""},null,8,E),[[m,s(t).department_code]]),e[7]||(e[7]=o("p",{class:"text-xs text-gray-500 mt-1"},"Short code for the department (e.g., HR, IT, SALES)",-1)),s(t).errors.department_code?(n(),a("div",I,l(s(t).errors.department_code),1)):d("",!0)]),o("div",L,[e[9]||(e[9]=o("label",{class:"block font-semibold mb-1"},"Parent Department",-1)),i(o("select",{"onUpdate:modelValue":e[2]||(e[2]=r=>s(t).parent_id=r),class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:s(t).processing},[e[8]||(e[8]=o("option",{value:""},"None (Top Level)",-1)),(n(!0),a(w,null,h(c.parentDepartments,r=>(n(),a("option",{key:r.id,value:r.id},l(r.name),9,j))),128))],8,P),[[k,s(t).parent_id]]),s(t).errors.parent_id?(n(),a("div",F,l(s(t).errors.parent_id),1)):d("",!0)]),o("div",H,[e[10]||(e[10]=o("label",{class:"block font-semibold mb-1"},"Description",-1)),i(o("textarea",{"onUpdate:modelValue":e[3]||(e[3]=r=>s(t).description=r),rows:"3",class:"border px-3 py-2 rounded w-full focus:outline-hidden focus:ring-2 focus:ring-blue-500",disabled:s(t).processing},null,8,R),[[m,s(t).description]]),s(t).errors.description?(n(),a("div",Z,l(s(t).errors.description),1)):d("",!0)]),o("div",$,[o("div",G,[i(o("input",{id:"is_active","onUpdate:modelValue":e[4]||(e[4]=r=>s(t).is_active=r),type:"checkbox",class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",disabled:s(t).processing},null,8,J),[[C,s(t).is_active]]),e[11]||(e[11]=o("label",{for:"is_active",class:"ml-2 block text-sm text-gray-900"}," Active Department ",-1))]),e[12]||(e[12]=o("p",{class:"text-xs text-gray-500 mt-1"},"Inactive departments won't be available for user assignment",-1))])]),o("div",K,[o("button",{type:"submit",class:"bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition w-full sm:w-auto font-medium flex items-center justify-center gap-2",disabled:s(t).processing},[s(t).processing?(n(),a("svg",Q,e[13]||(e[13]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):d("",!0),s(t).processing?(n(),a("span",W,"Creating Department...")):(n(),a("span",X,"Create Department"))],8,O),D(s(V),{href:p.route("admin.departments.index"),class:N(["bg-gray-300 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-400 transition w-full sm:w-auto text-center font-medium",{"pointer-events-none opacity-50":s(t).processing}])},{default:u(()=>e[14]||(e[14]=[S(" Cancel ")])),_:1},8,["href","class"])])],32)])]),_:1}))}});export{re as default};
