import{d as D,r as V,C as N,p as S,g as _,o as n,w as r,e as o,b as a,u as e,f as d,j as U,a as m,h as c,t as u,F as A,i as B,P as T,x as I}from"./app-B5QCrb6m.js";import{_ as L}from"./AdminLayout.vue_vue_type_script_setup_true_lang-q1ez3TJ_.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-HglPE9Uv.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-BlrxH3n2.js";import{_ as P}from"./Textarea.vue_vue_type_script_setup_true_lang-C5pU3-Wp.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-EtyyyGjz.js";import{_ as E}from"./Card.vue_vue_type_script_setup_true_lang-rG1y8srZ.js";import{_ as M}from"./CardContent.vue_vue_type_script_setup_true_lang-ByYzS1sI.js";import{_ as q}from"./CardHeader.vue_vue_type_script_setup_true_lang-i8h8wdgE.js";import{_ as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-DIcnVnqd.js";import{_ as F,a as H,b as j,c as R,d as y}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dh59Np6e.js";import{_ as Z}from"./Switch.vue_vue_type_script_setup_true_lang-9hp-lYeE.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-DJEC7YWG.js";import"./index-Wv3lFKee.js";import"./index-DwxW3oru.js";import"./_plugin-vue_export-helper-De2CCZJH.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BsvRm7AT.js";import"./clock-Bxh51ez1.js";import"./useForwardPropsEmits-XLtpt7jX.js";import"./Presence-90U5lUsH.js";import"./ConfigProvider-Ck7rlyMT.js";import"./useForwardExpose-CdWF3mxt.js";import"./Teleport-CDIEPvRZ.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BElrq5kp.js";import"./Collection-gYpN21x9.js";import"./usePrimitiveElement-BCH5APh8.js";import"./check-CsM0Sj6i.js";import"./useSize--YsBV0yD.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-DFMZRLOE.js";import"./VisuallyHiddenInput-D4a6WLgo.js";const G={class:"px-4 sm:px-0"},J={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6"},K={class:"col-span-full space-y-2"},O={key:0,class:"text-destructive text-sm"},Q={class:"col-span-1 space-y-2"},W={key:0,class:"text-destructive text-sm"},X={class:"col-span-1 space-y-2"},Y={key:0,class:"text-destructive text-sm"},ee={class:"col-span-full space-y-2"},te={key:0,class:"text-destructive text-sm"},se={class:"col-span-full space-y-3"},ae={class:"flex items-center space-x-3"},re={class:"space-y-1"},oe={class:"flex flex-col sm:flex-row gap-3 pt-6 border-t"},ne={key:0,class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},ie={key:1},de={key:2},He=D({__name:"Create",props:{parentDepartments:Array},setup(v){const p=V(!0),t=N({name:"",description:"",parent_id:"",department_code:"",is_active:!0});function k(){p.value&&t.post("/admin/departments",{onSuccess:()=>{},onError:l=>{console.error("Validation errors:",l)}})}const C=async()=>{!p.value||!t.name||(await I(),t.name&&p.value&&(t.department_code=t.name.toUpperCase().replace(/[^A-Z0-9]/g,"").substring(0,10)))},w=l=>{p.value&&(t.parent_id=l==="none"?"":l)},$=l=>{p.value&&(t.is_active=l)},h=[{name:"Dashboard",href:route("dashboard")},{name:"Departments",href:route("admin.departments.index")},{name:"Create Department",href:route("admin.departments.create")}];return S(()=>{p.value=!1}),(l,s)=>(n(),_(L,{breadcrumbs:h},{default:r(()=>[o("div",G,[s[14]||(s[14]=o("h1",{class:"text-xl sm:text-2xl font-bold text-foreground mb-6"},"Create New Department",-1)),a(e(E),{class:"max-w-2xl"},{default:r(()=>[a(e(q),null,{default:r(()=>[a(e(z),null,{default:r(()=>s[3]||(s[3]=[d("Department Information")])),_:1})]),_:1}),a(e(M),null,{default:r(()=>{var x;return[o("form",{onSubmit:U(k,["prevent"]),class:"space-y-6"},[o("div",J,[o("div",K,[a(e(f),{for:"name",class:"font-semibold"},{default:r(()=>s[4]||(s[4]=[d("Department Name *")])),_:1}),a(e(g),{id:"name",type:"text",modelValue:e(t).name,"onUpdate:modelValue":s[0]||(s[0]=i=>e(t).name=i),onInput:C,disabled:e(t).processing,required:""},null,8,["modelValue","disabled"]),e(t).errors.name?(n(),m("div",O,u(e(t).errors.name),1)):c("",!0)]),o("div",Q,[a(e(f),{for:"department_code",class:"font-semibold"},{default:r(()=>s[5]||(s[5]=[d("Department Code *")])),_:1}),a(e(g),{id:"department_code",type:"text",modelValue:e(t).department_code,"onUpdate:modelValue":s[1]||(s[1]=i=>e(t).department_code=i),disabled:e(t).processing,maxlength:"20",required:""},null,8,["modelValue","disabled"]),s[6]||(s[6]=o("p",{class:"text-xs text-muted-foreground"},"Short code for the department (e.g., HR, IT, SALES)",-1)),e(t).errors.department_code?(n(),m("div",W,u(e(t).errors.department_code),1)):c("",!0)]),o("div",X,[a(e(f),{for:"parent_id",class:"font-semibold"},{default:r(()=>s[7]||(s[7]=[d("Parent Department")])),_:1}),(n(),_(e(F),{key:`parent-select-${((x=v.parentDepartments)==null?void 0:x.length)||0}`,"model-value":e(t).parent_id||"none","onUpdate:modelValue":w,disabled:e(t).processing},{default:r(()=>[a(e(H),{id:"parent_id"},{default:r(()=>[a(e(j),{placeholder:"None (Top Level)"})]),_:1}),a(e(R),null,{default:r(()=>[a(e(y),{value:"none"},{default:r(()=>s[8]||(s[8]=[d("None (Top Level)")])),_:1}),(n(!0),m(A,null,B(v.parentDepartments||[],i=>(n(),_(e(y),{key:`dept-${i.id}`,value:i.id.toString()},{default:r(()=>[d(u(i.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"])),e(t).errors.parent_id?(n(),m("div",Y,u(e(t).errors.parent_id),1)):c("",!0)]),o("div",ee,[a(e(f),{for:"description",class:"font-semibold"},{default:r(()=>s[9]||(s[9]=[d("Description")])),_:1}),a(e(P),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=i=>e(t).description=i),rows:"3",disabled:e(t).processing},null,8,["modelValue","disabled"]),e(t).errors.description?(n(),m("div",te,u(e(t).errors.description),1)):c("",!0)]),o("div",se,[o("div",ae,[a(e(Z),{id:"is_active",checked:e(t).is_active,"onUpdate:checked":$,disabled:e(t).processing},null,8,["checked","disabled"]),o("div",re,[a(e(f),{for:"is_active",class:"text-sm font-medium cursor-pointer"},{default:r(()=>s[10]||(s[10]=[d(" Active Department ")])),_:1}),s[11]||(s[11]=o("p",{class:"text-xs text-muted-foreground"},"Inactive departments won't be available for user assignment",-1))])])])]),o("div",oe,[a(e(b),{type:"submit",class:"w-full sm:w-auto",disabled:e(t).processing||!p.value},{default:r(()=>[e(t).processing?(n(),m("svg",ne,s[12]||(s[12]=[o("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),o("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):c("",!0),e(t).processing?(n(),m("span",ie,"Creating Department...")):(n(),m("span",de,"Create Department"))]),_:1},8,["disabled"]),a(e(b),{as:e(T),href:l.route("admin.departments.index"),variant:"secondary",class:"w-full sm:w-auto",disabled:e(t).processing},{default:r(()=>s[13]||(s[13]=[d(" Cancel ")])),_:1},8,["as","href","disabled"])])],32)]}),_:1})]),_:1})])]),_:1}))}});export{He as default};
