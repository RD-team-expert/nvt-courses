import{d as Ee,c as h,r as F,C as Ue,l as Y,bU as me,p as De,g as w,o as u,w as a,e as s,b as o,u as e,f as d,P as _e,j as Fe,a as m,h as g,F as G,i as q,t as i,n as ce}from"./app-Dt0F0blK.js";import{_ as Ie}from"./AdminLayout.vue_vue_type_script_setup_true_lang-nzVObB-S.js";import{_ as O}from"./Button.vue_vue_type_script_setup_true_lang-Bur818go.js";import{_ as Ce}from"./Input.vue_vue_type_script_setup_true_lang-CEGGw3rO.js";import{_ as ve}from"./Textarea.vue_vue_type_script_setup_true_lang-CtQGyA7X.js";import{_ as T}from"./Label.vue_vue_type_script_setup_true_lang-CwXf_K5B.js";import{_ as P}from"./Card.vue_vue_type_script_setup_true_lang-CtkgQZFl.js";import{_ as N}from"./CardContent.vue_vue_type_script_setup_true_lang-DqRxUlIL.js";import{_ as Z}from"./CardDescription.vue_vue_type_script_setup_true_lang-_kdebesn.js";import{_ as ee}from"./CardHeader.vue_vue_type_script_setup_true_lang-BlBmqPCI.js";import{_ as te}from"./CardTitle.vue_vue_type_script_setup_true_lang-C3lRuw6Y.js";import{_ as se,a as le,b as oe,c as ae,d as R}from"./SelectValue.vue_vue_type_script_setup_true_lang-D9yGIlG7.js";import{_ as Ae,a as je}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-B3QrGGxb.js";import{_ as I}from"./index-CRLHLk8F.js";import{_ as Oe,a as Pe,b as Ne,c as Re}from"./DialogTitle.vue_vue_type_script_setup_true_lang-DOrRJ3jC.js";import{_ as Be}from"./DialogDescription.vue_vue_type_script_setup_true_lang-BwY1GVzI.js";import{_ as Me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cyk_7bUO.js";import{_ as J,a as K}from"./index-DTK1gSK4.js";import{_ as Ge}from"./Progress.vue_vue_type_script_setup_true_lang-Co7NzCBh.js";import{M as qe}from"./monitor-CThfHwqN.js";import{R as fe}from"./rotate-ccw-DxVF156M.js";import{U as ze}from"./user-BVdXE_id.js";import{L as Q}from"./loader-circle-sIYfF5bu.js";import{C as re}from"./circle-check-big-mxlCKCiU.js";import{T as He}from"./target-Dwa8s9MC.js";import{T as pe}from"./trending-up-qu34OlKv.js";import{D as Je}from"./dollar-sign-2gMHQzJI.js";import{A as Ke}from"./award-aKKBpmSA.js";import{L as Qe}from"./layers-DTxV0ES-.js";import{S as We}from"./send-DOPrN_yN.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-Bum0PHdh.js";import"./index-DhkpjM5c.js";import"./index-B3JELWNU.js";import"./_plugin-vue_export-helper-BNB2DzGT.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-ufvh6NzD.js";import"./clock-DYVrIRvW.js";import"./useForwardPropsEmits-8hdV0QLI.js";import"./Presence-yU-1-Ora.js";import"./ConfigProvider-DhHMB9ze.js";import"./useForwardExpose-D0dJ5CPZ.js";import"./Teleport-BIo1Gt-o.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-2aGdiIe0.js";import"./Collection-DSROSw6D.js";import"./usePrimitiveElement-B4u4F1g0.js";import"./check-Bo8td30r.js";import"./useSize-D4rPSYi8.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-CDl9cf2-.js";import"./RovingFocusItem-BiwWbwrQ.js";import"./VisuallyHiddenInput--hRIQWMB.js";const Xe={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},Ye={class:"flex items-center justify-between"},Ze={class:"flex items-center gap-3"},et={class:"flex gap-2"},tt={class:"flex items-center"},st={class:"shrink-0 mr-4"},lt={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-primary/10"},ot={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},at={class:"space-y-2"},rt={class:"space-y-2"},nt={class:"relative"},it={key:0,class:"absolute right-8 top-2.5"},ut={key:0,class:"text-xs text-muted-foreground"},dt={key:1,class:"text-xs text-destructive"},mt={key:2,class:"text-sm text-destructive"},_t={class:"space-y-2"},ct={class:"relative"},vt={key:0,class:"absolute right-8 top-2.5"},ft={key:0,class:"text-xs text-muted-foreground"},pt={key:1,class:"text-xs text-destructive"},gt={key:2,class:"text-sm text-destructive"},xt={class:"space-y-2"},yt={key:0,class:"text-sm text-destructive"},bt={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-4 text-sm"},ht={key:0},wt={key:1},kt={key:2},$t={key:3},St={key:0,class:"mt-3 p-3 bg-yellow-50 border border-yellow-200 rounded-md"},Lt={class:"flex items-center"},Tt={class:"text-yellow-800 text-sm"},Vt={key:0,class:"space-y-6"},Et={class:"flex items-center justify-between"},Ut={class:"grid gap-6"},Dt={class:"flex items-start justify-between"},Ft={class:"flex-1"},It={class:"flex items-center space-x-3 mb-2"},Ct={key:0,class:"text-right"},At={class:"text-2xl font-bold text-foreground"},jt={class:"text-xs text-muted-foreground"},Ot={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Pt={class:"space-y-4"},Nt={class:"flex-1 flex items-center justify-between"},Rt={class:"text-sm text-muted-foreground"},Bt={key:0,class:"text-sm text-destructive"},Mt={key:0,class:"space-y-4"},Gt={class:"space-y-3"},qt={class:"flex items-center justify-between"},zt={class:"flex items-center justify-between"},Ht={class:"text-sm font-bold"},Jt={class:"mt-6 space-y-2"},Kt={key:0,class:"text-sm text-destructive"},Qt={class:"flex items-center"},Wt={class:"shrink-0 mr-4"},Xt={class:"flex items-center justify-center h-10 w-10 rounded-lg bg-green-100"},Yt={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6"},Zt={class:"flex items-center"},es={class:"flex items-center"},ts={class:"text-2xl font-bold text-green-600"},ss={class:"flex items-center"},ls={class:"text-lg font-bold text-purple-600"},os={class:"font-semibold text-yellow-900 mb-2"},as={class:"grid grid-cols-2 gap-4 text-sm text-yellow-700"},rs={key:0},ns={class:"font-bold"},is={class:"space-y-2"},us={key:0,class:"text-sm text-destructive"},ds={key:2,class:"flex flex-col sm:flex-row justify-end space-y-3 sm:space-y-0 sm:space-x-4"},ms={key:2},_s={key:3},cs={class:"flex items-start"},vs={class:"shrink-0 mr-4"},fs={class:"flex items-center justify-center h-12 w-12 rounded-full bg-green-100"},ps={class:"flex-1"},gs={class:"font-semibold"},xs={class:"grid grid-cols-2 gap-4 text-sm"},ys={class:"font-medium"},bs={class:"font-medium"},hs={class:"font-medium"},ws={class:"font-medium"},ks={class:"font-medium"},$s={key:0},Ss={class:"font-medium"},Ls={key:1},Ts={key:2},Ll=Ee({__name:"OnlineCourseEvaluation",props:{users:{},categories:{},departments:{},courses:{},incentives:{},userLevels:{}},setup(ge){const V=ge,z=h(()=>V.users||[]),x=h(()=>V.categories||[]),xe=h(()=>V.departments||[]),B=h(()=>V.courses||[]),C=h(()=>V.incentives||[]);h(()=>V.userLevels||[]);const A=F(!1),W=F(!1),k=F(z.value),$=F(B.value),E=F(!1),U=F(!1),S=F(!0),r=Ue({user_id:null,course_online_id:null,department_id:null,evaluation_date:new Date().toISOString().split("T")[0],notes:"",categories:[]}),X=()=>{r.categories=x.value.map(n=>({category_id:n.id,evaluation_type_id:null,comments:""}))};Y(()=>V.categories,()=>{X()},{immediate:!0});const ye=n=>{S.value&&(r.department_id=n==="none"?null:parseInt(n))},be=n=>{S.value&&(r.user_id=n==="none"?null:parseInt(n))},he=n=>{S.value&&(r.course_online_id=n==="none"?null:parseInt(n))};Y(()=>r.department_id,async n=>{if(S.value){if(n){E.value=!0;try{const t=route("admin.evaluations.online.users-by-department"),l={department_id:n},_=await me.get(t,{params:l});k.value=_.data.users||[]}catch(t){console.error("Error fetching users by department:",t),k.value=[]}finally{E.value=!1}}else k.value=z.value;r.user_id=null,r.course_online_id=null,$.value=B.value}}),Y(()=>r.user_id,async n=>{if(S.value){if(n){U.value=!0;try{const t=route("admin.evaluations.online.user-courses"),l={user_id:n},_=await me.get(t,{params:l});$.value=_.data.courses||[]}catch(t){console.error("Error fetching user online courses:",t);const l=k.value.find(_=>_.id===n);$.value=(l==null?void 0:l.completed_courses)||[]}finally{U.value=!1}}else $.value=B.value;r.course_online_id=null}});const v=h(()=>r.user_id&&k.value.find(n=>n.id===r.user_id)||null),M=h(()=>r.course_online_id&&$.value.find(n=>n.id===r.course_online_id)||null),L=(n,t)=>{if(!t)return null;const l=x.value.find(_=>_.id===n);return l&&l.types.find(_=>_.id===t)||null},f=h(()=>r.categories.reduce((n,t)=>{const l=L(t.category_id,t.evaluation_type_id);return n+((l==null?void 0:l.score_value)||0)},0)),ne=h(()=>{if(f.value===0||!v.value)return 0;const n=v.value;if(n.user_level&&n.user_level_tier){const l=C.value.find(_=>_.user_level_id===n.user_level.id&&_.user_level_tier_id===n.user_level_tier.id&&f.value>=_.min_score&&f.value<=_.max_score);if(l)return parseFloat(l.incentive_amount.toString())}if(n.user_level){const l=C.value.find(_=>_.user_level_id===n.user_level.id&&!_.user_level_tier_id&&f.value>=_.min_score&&f.value<=_.max_score);if(l)return parseFloat(l.incentive_amount.toString())}const t=C.value.find(l=>!l.user_level_id&&!l.user_level_tier_id&&f.value>=l.min_score&&f.value<=l.max_score);return t?parseFloat(t.incentive_amount.toString()):0}),D=h(()=>{if(f.value===0||!v.value)return null;const n=v.value;let t=null;return n.user_level&&n.user_level_tier&&(t=C.value.find(l=>l.user_level_id===n.user_level.id&&l.user_level_tier_id===n.user_level_tier.id&&f.value>=l.min_score&&f.value<=l.max_score)),!t&&n.user_level&&(t=C.value.find(l=>l.user_level_id===n.user_level.id&&!l.user_level_tier_id&&f.value>=l.min_score&&f.value<=l.max_score)),t||(t=C.value.find(l=>!l.user_level_id&&!l.user_level_tier_id&&f.value>=l.min_score&&f.value<=l.max_score)),t?{range:`${t.min_score}-${t.max_score}`,amount:parseFloat(t.incentive_amount.toString()),tier:we(t),level_info:t.user_level?t.user_level.name:"Global",tier_info:t.user_level_tier?t.user_level_tier.tier_name:null}:null}),we=(n,t)=>n.user_level&&n.user_level_tier?`${n.user_level.code} - ${n.user_level_tier.tier_name}`:n.user_level?`${n.user_level.name} Level`:"Global Tier",ie=n=>n>=13?{label:"Excellent",variant:"default"}:n>=10?{label:"Good",variant:"secondary"}:n>=7?{label:"Average",variant:"outline"}:n>=4?{label:"Below Average",variant:"secondary"}:n>=1?{label:"Poor",variant:"destructive"}:{label:"No Score",variant:"secondary"},ke=(n,t)=>{const l=n/t*100;return l>=90?"default":l>=80?"secondary":l>=70?"outline":l>=60?"secondary":"destructive"},$e=(n,t)=>{if(!S.value)return;const l=r.categories.findIndex(_=>_.category_id===n);l!==-1&&(r.categories[l].evaluation_type_id=parseInt(t),ue())},ue=()=>{W.value=!!(r.user_id&&r.course_online_id&&r.evaluation_date&&r.categories.length>0&&r.categories.every(n=>n.evaluation_type_id!==null))};function Se(){ue(),W.value&&(A.value=!0)}function Le(){S.value&&r.post(route("admin.evaluations.online.store"),{onSuccess:()=>{A.value=!1,r.reset(),k.value=z.value,$.value=B.value,X()},onError:n=>{A.value=!1,console.error("Validation errors:",n)}})}function Te(){S.value&&(r.reset(),k.value=z.value,$.value=B.value,X())}const Ve=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Online Course Evaluation",href:null}];return De(()=>{S.value=!1}),(n,t)=>(u(),w(Ie,{breadcrumbs:Ve},{default:a(()=>[s("div",Xe,[s("div",null,[s("div",Ye,[s("div",null,[s("div",Ze,[t[5]||(t[5]=s("h1",{class:"text-3xl font-bold text-foreground"},"Online Course Evaluation",-1)),o(e(I),{variant:"secondary",class:"text-xs"},{default:a(()=>[o(e(qe),{class:"mr-1 h-3 w-3"}),t[4]||(t[4]=d(" Online Courses "))]),_:1})]),t[6]||(t[6]=s("p",{class:"mt-2 text-sm text-muted-foreground"},"Assess employee performance on online courses with Level + Tier based incentive calculations.",-1))]),s("div",et,[o(e(O),{as:e(_e),href:n.route("admin.evaluations.user-evaluation"),variant:"outline"},{default:a(()=>t[7]||(t[7]=[d(" Regular Courses ")])),_:1},8,["as","href"]),o(e(O),{as:e(_e),href:n.route("admin.evaluations.index"),variant:"outline"},{default:a(()=>[o(e(fe),{class:"mr-2 h-4 w-4"}),t[8]||(t[8]=d(" Back "))]),_:1},8,["as","href"])])])]),s("form",{onSubmit:Fe(Se,["prevent"]),class:"space-y-8"},[o(e(P),null,{default:a(()=>[o(e(ee),null,{default:a(()=>[s("div",tt,[s("div",st,[s("div",lt,[o(e(ze),{class:"h-6 w-6 text-primary"})])]),s("div",null,[o(e(te),null,{default:a(()=>t[9]||(t[9]=[d("Select Department, Employee & Online Course")])),_:1}),o(e(Z),null,{default:a(()=>t[10]||(t[10]=[d("Choose department first, then employee, and finally their completed online course")])),_:1})])])]),_:1}),o(e(N),null,{default:a(()=>{var l,_,y;return[s("div",ot,[s("div",at,[o(e(T),{for:"department"},{default:a(()=>t[11]||(t[11]=[d("Select Department")])),_:1}),o(e(se),{"model-value":((l=e(r).department_id)==null?void 0:l.toString())||"none","onUpdate:modelValue":ye,disabled:e(r).processing},{default:a(()=>[o(e(le),{id:"department"},{default:a(()=>[o(e(oe),{placeholder:"All Departments"})]),_:1}),o(e(ae),null,{default:a(()=>[o(e(R),{value:"none"},{default:a(()=>t[12]||(t[12]=[d("All Departments")])),_:1}),(u(!0),m(G,null,q(xe.value,c=>(u(),w(e(R),{key:c.id,value:c.id.toString()},{default:a(()=>[d(i(c.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),t[13]||(t[13]=s("p",{class:"text-xs text-muted-foreground"},"Filter employees by department",-1))]),s("div",rt,[o(e(T),{for:"user"},{default:a(()=>t[14]||(t[14]=[d("Select Employee *")])),_:1}),s("div",nt,[o(e(se),{"model-value":((_=e(r).user_id)==null?void 0:_.toString())||"none","onUpdate:modelValue":be,disabled:e(r).processing||E.value},{default:a(()=>[o(e(le),{id:"user"},{default:a(()=>[o(e(oe),{placeholder:E.value?"Loading users...":"Choose an employee..."},null,8,["placeholder"])]),_:1}),o(e(ae),null,{default:a(()=>[o(e(R),{value:"none"},{default:a(()=>[d(i(E.value?"Loading users...":"Choose an employee..."),1)]),_:1}),(u(!0),m(G,null,q(k.value,c=>(u(),w(e(R),{key:c.id,value:c.id.toString()},{default:a(()=>[d(i(c.name)+" "+i(c.department?`(${c.department.name})`:""),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),E.value?(u(),m("div",it,[o(e(Q),{class:"h-4 w-4 animate-spin text-primary"})])):g("",!0)]),e(r).department_id?k.value.length===0&&!E.value?(u(),m("p",dt,"No employees found in this department")):g("",!0):(u(),m("p",ut,"Showing all employees")),e(r).errors.user_id?(u(),m("span",mt,i(e(r).errors.user_id),1)):g("",!0)]),s("div",_t,[o(e(T),{for:"course"},{default:a(()=>t[15]||(t[15]=[d("Select Completed Online Course *")])),_:1}),s("div",ct,[o(e(se),{"model-value":((y=e(r).course_online_id)==null?void 0:y.toString())||"none","onUpdate:modelValue":he,disabled:e(r).processing||!e(r).user_id||U.value},{default:a(()=>[o(e(le),{id:"course"},{default:a(()=>[o(e(oe),{placeholder:e(r).user_id?U.value?"Loading courses...":"Choose a completed online course...":"Select employee first..."},null,8,["placeholder"])]),_:1}),o(e(ae),null,{default:a(()=>[o(e(R),{value:"none"},{default:a(()=>[d(i(e(r).user_id?U.value?"Loading courses...":"Choose a completed online course...":"Select employee first..."),1)]),_:1}),(u(!0),m(G,null,q($.value,c=>(u(),w(e(R),{key:c.id,value:c.id.toString()},{default:a(()=>[d(i(c.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","disabled"]),U.value?(u(),m("div",vt,[o(e(Q),{class:"h-4 w-4 animate-spin text-primary"})])):g("",!0)]),e(r).user_id?$.value.length===0&&!U.value?(u(),m("p",pt,"This employee hasn't completed any online courses yet")):g("",!0):(u(),m("p",ft,"Select an employee to see their completed online courses")),e(r).errors.course_online_id?(u(),m("span",gt,i(e(r).errors.course_online_id),1)):g("",!0)]),s("div",xt,[o(e(T),{for:"date"},{default:a(()=>t[16]||(t[16]=[d("Evaluation Date *")])),_:1}),o(e(Ce),{id:"date",type:"date",modelValue:e(r).evaluation_date,"onUpdate:modelValue":t[0]||(t[0]=c=>e(r).evaluation_date=c),disabled:e(r).processing,required:""},null,8,["modelValue","disabled"]),e(r).errors.evaluation_date?(u(),m("span",yt,i(e(r).errors.evaluation_date),1)):g("",!0)])]),v.value&&M.value?(u(),w(e(J),{key:0,class:"mt-6"},{default:a(()=>[o(e(re),{class:"h-4 w-4"}),o(e(K),null,{default:a(()=>[s("div",bt,[s("div",null,[t[17]||(t[17]=s("span",{class:"font-medium"},"Employee:",-1)),s("p",null,i(v.value.name),1)]),s("div",null,[t[18]||(t[18]=s("span",{class:"font-medium"},"Online Course:",-1)),s("p",null,i(M.value.title),1)]),M.value.completed_at?(u(),m("div",ht,[t[19]||(t[19]=s("span",{class:"font-medium"},"Completed:",-1)),s("p",null,i(new Date(M.value.completed_at).toLocaleDateString()),1)])):g("",!0),v.value.department?(u(),m("div",wt,[t[20]||(t[20]=s("span",{class:"font-medium"},"Department:",-1)),s("p",null,i(v.value.department.name),1)])):g("",!0),v.value.user_level?(u(),m("div",kt,[t[21]||(t[21]=s("span",{class:"font-medium"},"Level:",-1)),s("p",null,[o(e(I),{variant:"secondary",class:"text-xs"},{default:a(()=>[d(i(v.value.user_level.code)+" - "+i(v.value.user_level.name),1)]),_:1})])])):g("",!0),v.value.user_level_tier?(u(),m("div",$t,[t[22]||(t[22]=s("span",{class:"font-medium"},"Tier:",-1)),s("p",null,[o(e(I),{variant:"outline",class:"text-xs"},{default:a(()=>[d(i(v.value.user_level_tier.tier_name)+" (T"+i(v.value.user_level_tier.tier_order)+") ",1)]),_:1})])])):g("",!0)]),!v.value.user_level||!v.value.user_level_tier?(u(),m("div",St,[s("div",Lt,[o(e(He),{class:"h-4 w-4 text-yellow-600 mr-2"}),s("div",Tt,[t[23]||(t[23]=s("p",{class:"font-medium"},"Incomplete Assignment",-1)),s("p",null," This employee is missing "+i(v.value.user_level?"":"level assignment")+" "+i(!v.value.user_level&&!v.value.user_level_tier?" and ":"")+" "+i(v.value.user_level_tier?"":"tier assignment")+". Incentive calculation may fall back to global rates. ",1)])])])):g("",!0)]),_:1})]),_:1})):g("",!0)]}),_:1})]),_:1}),e(r).user_id&&e(r).course_online_id&&x.value.length>0?(u(),m("div",Vt,[s("div",Et,[t[24]||(t[24]=s("h2",{class:"text-xl font-semibold text-foreground"},"Evaluation Categories",-1)),o(e(I),{variant:"secondary"},{default:a(()=>[d(i(x.value.length)+" categories",1)]),_:1})]),s("div",Ut,[(u(!0),m(G,null,q(e(r).categories,(l,_)=>(u(),w(e(P),{key:l.category_id,class:"hover:shadow-md transition-shadow duration-200"},{default:a(()=>[o(e(ee),null,{default:a(()=>{var y,c;return[s("div",Dt,[s("div",Ft,[s("div",It,[o(e(te),{class:"text-lg"},{default:a(()=>{var p;return[d(i(((p=x.value.find(b=>b.id===l.category_id))==null?void 0:p.name)||"Category"),1)]}),_:2},1024),o(e(I),{variant:"outline"},{default:a(()=>{var p;return[d(i(((p=x.value.find(b=>b.id===l.category_id))==null?void 0:p.weight)||0)+"% weight ",1)]}),_:2},1024)]),o(e(Z),null,{default:a(()=>{var p;return[d(i(((p=x.value.find(b=>b.id===l.category_id))==null?void 0:p.description)||"No description available"),1)]}),_:2},1024)]),L(l.category_id,l.evaluation_type_id)?(u(),m("div",Ct,[s("div",At,i((y=L(l.category_id,l.evaluation_type_id))==null?void 0:y.score_value),1),s("div",jt," out of "+i((c=x.value.find(p=>p.id===l.category_id))==null?void 0:c.max_score),1)])):g("",!0)])]}),_:2},1024),o(e(N),null,{default:a(()=>{var y;return[s("div",Ot,[s("div",Pt,[o(e(T),{class:"text-sm font-medium"},{default:a(()=>t[25]||(t[25]=[d("Select Performance Level")])),_:1}),o(e(Ae),{"model-value":((y=l.evaluation_type_id)==null?void 0:y.toString())||"","onUpdate:modelValue":c=>$e(l.category_id,c),class:"space-y-2"},{default:a(()=>{var c;return[(u(!0),m(G,null,q(((c=x.value.find(p=>p.id===l.category_id))==null?void 0:c.types)||[],p=>{var b;return u(),m("div",{key:p.id,class:ce(["flex items-center space-x-3 p-4 border rounded-lg hover:bg-accent/50 transition-colors",{"border-primary bg-primary/5":l.evaluation_type_id===p.id}])},[o(e(je),{value:p.id.toString(),id:`type_${l.category_id}_${p.id}`},null,8,["value","id"]),s("div",Nt,[s("div",null,[o(e(T),{for:`type_${l.category_id}_${p.id}`,class:"font-medium cursor-pointer"},{default:a(()=>[d(i(p.type_name),1)]),_:2},1032,["for"]),s("p",Rt,i(p.description),1)]),o(e(I),{variant:ke(p.score_value,((b=x.value.find(H=>H.id===l.category_id))==null?void 0:b.max_score)||100)},{default:a(()=>[d(i(p.score_value)+" pts ",1)]),_:2},1032,["variant"])])],2)}),128))]}),_:2},1032,["model-value","onUpdate:modelValue"]),e(r).errors[`categories.${_}.evaluation_type_id`]?(u(),m("span",Bt,i(e(r).errors[`categories.${_}.evaluation_type_id`]),1)):g("",!0)]),L(l.category_id,l.evaluation_type_id)?(u(),m("div",Mt,[o(e(J),null,{default:a(()=>[o(e(pe),{class:"h-4 w-4"}),o(e(K),null,{default:a(()=>{var c,p,b,H,de;return[t[28]||(t[28]=s("h4",{class:"font-medium mb-3"},"Selected Performance Level",-1)),s("div",Gt,[s("div",qt,[t[26]||(t[26]=s("span",{class:"text-sm font-medium"},"Performance:",-1)),o(e(I),{variant:ie(((c=L(l.category_id,l.evaluation_type_id))==null?void 0:c.score_value)||0).variant},{default:a(()=>{var j;return[d(i((j=L(l.category_id,l.evaluation_type_id))==null?void 0:j.type_name),1)]}),_:2},1032,["variant"])]),s("div",zt,[t[27]||(t[27]=s("span",{class:"text-sm font-medium"},"Score:",-1)),s("span",Ht,i((p=L(l.category_id,l.evaluation_type_id))==null?void 0:p.score_value)+" / "+i((b=x.value.find(j=>j.id===l.category_id))==null?void 0:b.max_score),1)]),o(e(Ge),{value:Math.round((((H=L(l.category_id,l.evaluation_type_id))==null?void 0:H.score_value)||0)/(((de=x.value.find(j=>j.id===l.category_id))==null?void 0:de.max_score)||100)*100),class:"h-2"},null,8,["value"])])]}),_:2},1024)]),_:2},1024)])):g("",!0)]),s("div",Jt,[o(e(T),{for:`comments_${l.category_id}`},{default:a(()=>t[29]||(t[29]=[d("Detailed Comments & Feedback")])),_:2},1032,["for"]),o(e(ve),{id:`comments_${l.category_id}`,modelValue:l.comments,"onUpdate:modelValue":c=>l.comments=c,rows:"3",disabled:e(r).processing,placeholder:"Provide specific feedback, strengths, areas for improvement, and recommendations..."},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e(r).errors[`categories.${_}.comments`]?(u(),m("span",Kt,i(e(r).errors[`categories.${_}.comments`]),1)):g("",!0)])]}),_:2},1024)]),_:2},1024))),128))])])):g("",!0),e(r).user_id&&e(r).course_online_id&&e(r).categories.some(l=>l.evaluation_type_id!==null)?(u(),w(e(P),{key:1},{default:a(()=>[o(e(ee),null,{default:a(()=>[s("div",Qt,[s("div",Wt,[s("div",Xt,[o(e(re),{class:"h-6 w-6 text-green-600"})])]),s("div",null,[o(e(te),null,{default:a(()=>t[30]||(t[30]=[d("Overall Assessment")])),_:1}),o(e(Z),null,{default:a(()=>t[31]||(t[31]=[d("Summary with Level + Tier based incentive calculation")])),_:1})])])]),_:1}),o(e(N),null,{default:a(()=>[s("div",Yt,[o(e(P),{class:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200"},{default:a(()=>[o(e(N),{class:"p-4"},{default:a(()=>[s("div",Zt,[o(e(pe),{class:"h-8 w-8 text-blue-600 mr-4"}),s("div",null,[t[32]||(t[32]=s("p",{class:"text-sm font-medium text-blue-900"},"Total Score",-1)),s("p",{class:ce(["text-2xl font-bold",{"text-emerald-600":f.value>=13,"text-green-600":f.value>=10&&f.value<13,"text-blue-600":f.value>=7&&f.value<10,"text-yellow-600":f.value>=4&&f.value<7,"text-red-600":f.value<4}])},i(f.value),3)])])]),_:1})]),_:1}),o(e(P),{class:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200"},{default:a(()=>[o(e(N),{class:"p-4"},{default:a(()=>[s("div",es,[o(e(Je),{class:"h-8 w-8 text-green-600 mr-4"}),s("div",null,[t[33]||(t[33]=s("p",{class:"text-sm font-medium text-green-900"},"Incentive Amount",-1)),s("p",ts," $"+i(ne.value.toFixed(2)),1)])])]),_:1})]),_:1}),o(e(P),{class:"bg-gradient-to-r from-purple-50 to-pink-50 border-purple-200"},{default:a(()=>[o(e(N),{class:"p-4"},{default:a(()=>[s("div",ss,[o(e(Ke),{class:"h-8 w-8 text-purple-600 mr-4"}),s("div",null,[t[34]||(t[34]=s("p",{class:"text-sm font-medium text-purple-900"},"Performance Rating",-1)),s("p",ls,i(ie(f.value).label),1)])])]),_:1})]),_:1})]),D.value?(u(),w(e(J),{key:0,class:"mb-6 bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200"},{default:a(()=>[o(e(Qe),{class:"h-4 w-4"}),o(e(K),null,{default:a(()=>[s("h4",os,i(D.value.tier),1),s("div",as,[s("div",null,[t[35]||(t[35]=s("span",{class:"font-medium"},"Incentive Level:",-1)),s("p",null,i(D.value.level_info),1)]),D.value.tier_info?(u(),m("div",rs,[t[36]||(t[36]=s("span",{class:"font-medium"},"Performance Tier:",-1)),s("p",null,i(D.value.tier_info),1)])):g("",!0),s("div",null,[t[37]||(t[37]=s("span",{class:"font-medium"},"Score Range:",-1)),s("p",null,i(D.value.range)+" points",1)]),s("div",null,[t[38]||(t[38]=s("span",{class:"font-medium"},"Reward Amount:",-1)),s("p",ns,"$"+i(D.value.amount.toFixed(2)),1)])])]),_:1})]),_:1})):g("",!0),s("div",is,[o(e(T),{for:"notes"},{default:a(()=>t[39]||(t[39]=[d("Overall Notes & Recommendations")])),_:1}),o(e(ve),{id:"notes",modelValue:e(r).notes,"onUpdate:modelValue":t[1]||(t[1]=l=>e(r).notes=l),rows:"4",disabled:e(r).processing,placeholder:"Provide overall assessment, key achievements, development areas, goals for improvement, and recommendations for career development..."},null,8,["modelValue","disabled"]),e(r).errors.notes?(u(),m("span",us,i(e(r).errors.notes),1)):g("",!0)])]),_:1})]),_:1})):g("",!0),e(r).user_id&&e(r).course_online_id?(u(),m("div",ds,[o(e(O),{type:"button",onClick:Te,variant:"outline",disabled:e(r).processing},{default:a(()=>[o(e(fe),{class:"mr-2 h-4 w-4"}),t[40]||(t[40]=d(" Reset Form "))]),_:1},8,["disabled"]),o(e(O),{type:"submit",disabled:e(r).processing||!W.value||f.value===0},{default:a(()=>[e(r).processing?(u(),w(e(Q),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(u(),w(e(We),{key:1,class:"mr-2 h-4 w-4"})),e(r).processing?(u(),m("span",ms,"Submitting Evaluation...")):(u(),m("span",_s,"Submit Evaluation"))]),_:1},8,["disabled"])])):g("",!0)],32)]),o(e(Oe),{open:A.value,"onUpdate:open":t[3]||(t[3]=l=>A.value=l)},{default:a(()=>[o(e(Pe),{class:"sm:max-w-lg"},{default:a(()=>[o(e(Ne),null,{default:a(()=>[s("div",cs,[s("div",vs,[s("div",fs,[o(e(re),{class:"h-6 w-6 text-green-600"})])]),s("div",ps,[o(e(Re),null,{default:a(()=>t[41]||(t[41]=[d("Confirm Online Course Evaluation")])),_:1}),o(e(Be),null,{default:a(()=>{var l;return[t[42]||(t[42]=d(" Please review the evaluation details before submitting. This action will record the online course performance evaluation for ")),s("span",gs,i((l=v.value)==null?void 0:l.name),1),t[43]||(t[43]=d(". "))]}),_:1})])])]),_:1}),o(e(J),{class:"my-4"},{default:a(()=>[o(e(K),null,{default:a(()=>{var l,_,y,c;return[t[50]||(t[50]=s("h4",{class:"font-medium mb-2"},"Evaluation Summary",-1)),s("div",xs,[s("div",null,[t[44]||(t[44]=s("span",{class:"text-muted-foreground"},"Employee:",-1)),s("p",ys,i((l=v.value)==null?void 0:l.name),1)]),s("div",null,[t[45]||(t[45]=s("span",{class:"text-muted-foreground"},"Online Course:",-1)),s("p",bs,i((_=M.value)==null?void 0:_.title),1)]),s("div",null,[t[46]||(t[46]=s("span",{class:"text-muted-foreground"},"Date:",-1)),s("p",hs,i(e(r).evaluation_date),1)]),s("div",null,[t[47]||(t[47]=s("span",{class:"text-muted-foreground"},"Total Score:",-1)),s("p",ws,i(f.value),1)]),s("div",null,[t[48]||(t[48]=s("span",{class:"text-muted-foreground"},"Incentive Amount:",-1)),s("p",ks,"$"+i(ne.value.toFixed(2)),1)]),(y=v.value)!=null&&y.user_level&&((c=v.value)!=null&&c.user_level_tier)?(u(),m("div",$s,[t[49]||(t[49]=s("span",{class:"text-muted-foreground"},"Level + Tier:",-1)),s("p",Ss,i(v.value.user_level.code)+" - "+i(v.value.user_level_tier.tier_name),1)])):g("",!0)])]}),_:1})]),_:1}),o(e(Me),null,{default:a(()=>[o(e(O),{onClick:t[2]||(t[2]=l=>A.value=!1),variant:"outline"},{default:a(()=>t[51]||(t[51]=[d(" Cancel ")])),_:1}),o(e(O),{onClick:Le,disabled:e(r).processing},{default:a(()=>[e(r).processing?(u(),w(e(Q),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):g("",!0),e(r).processing?(u(),m("span",Ls,"Submitting...")):(u(),m("span",Ts,"Confirm & Submit"))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ll as default};
