import{P as ne,bo as y,g as H,o as d,w as a,e as t,a as u,h as _,b as l,f as c,t as g,F as B,i as A,j as re,n as v,s as ae,D as de,O as ce,r as O,C as ue,l as te,c as R,x as oe,W as se}from"./app-BZwAv8dq.js";import{M as me}from"./Modal-z_FsL4hj.js";import{_ as fe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CIPSDiT2.js";import{_ as pe}from"./Button.vue_vue_type_script_setup_true_lang-4lZsQt59.js";import{_ as _e}from"./Input.vue_vue_type_script_setup_true_lang-CJqAZfWw.js";import{_ as ge}from"./Label.vue_vue_type_script_setup_true_lang-CNakpKD7.js";import{b as ve,a as xe,d as ye,c as he,_ as be}from"./SelectValue.vue_vue_type_script_setup_true_lang-CCKCgIxu.js";import{_ as ke}from"./Textarea.vue_vue_type_script_setup_true_lang-CfZYghAK.js";import{_ as we}from"./Card.vue_vue_type_script_setup_true_lang-BJm6kBy6.js";import{_ as Ce}from"./CardContent.vue_vue_type_script_setup_true_lang-BXRzdPtq.js";import{_ as Ee}from"./CardHeader.vue_vue_type_script_setup_true_lang-Ct0wYraa.js";import{_ as ze}from"./CardTitle.vue_vue_type_script_setup_true_lang-CO_-dAUi.js";import{_ as Fe}from"./_plugin-vue_export-helper-UZz0T33w.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-D01E0yaI.js";import"./index-sueaCbYz.js";import"./index-CGOr_o6A.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DTTiC0zJ.js";import"./clock-DidiESwg.js";import"./useForwardPropsEmits-Cc5ARJG3.js";import"./Presence-KheNhFRk.js";import"./ConfigProvider-B5IQFxSX.js";import"./useForwardExpose-BdPZxDO_.js";import"./Teleport-CYVcTiu8.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BAKKKvXB.js";import"./Collection-BAD8QVcp.js";import"./usePrimitiveElement-2VB3_hwL.js";import"./check-BUtWZy8S.js";import"./useSize-x2EYAV0x.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-CYo-gsOw.js";const Me={components:{AdminLayout:fe,Link:ne,Modal:me,Button:pe,Input:_e,Label:ge,Select:be,SelectContent:he,SelectItem:ye,SelectTrigger:xe,SelectValue:ve,Textarea:ke,Card:we,CardContent:Ce,CardHeader:Ee,CardTitle:ze},props:{quiz:{type:Object,required:!0},courses:{type:Array,default:()=>[]}},setup(w){var J,K,X,Y,Z,$;const e=ce(),T=O(!1),r=O(!1),E=O([]),W=O(0),D={success:"border-green-200 bg-green-50",error:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},C={success:"text-green-500 bg-green-100",error:"text-red-500 bg-red-100",info:"text-blue-500 bg-blue-100"},F=O({}),j=i=>!i||!Array.isArray(i)?[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""}]:i.map(o=>{if(!o)return{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""};if(o.type==="text")return{question_text:o.question_text||"",type:"text",points:0,options:[],correct_answer:[],correct_answer_explanation:o.correct_answer_explanation||""};let f=["",""];o.options&&Array.isArray(o.options)&&(f=o.options.map(h=>typeof h=="string"?h:(h==null?void 0:h.option_text)||""),f.length<2&&(f=[...f,"",""].slice(0,2)));let k=[];return o.correct_answer&&Array.isArray(o.correct_answer)&&(k=o.correct_answer.map(h=>typeof h=="string"?h:(h==null?void 0:h.option_text)||"")),{question_text:o.question_text||"",type:o.type||"radio",points:o.points||0,options:f,correct_answer:k,correct_answer_explanation:o.correct_answer_explanation||""}}),m=ue({course_id:((J=w.quiz)==null?void 0:J.course_id)||"",title:((K=w.quiz)==null?void 0:K.title)||"",description:((X=w.quiz)==null?void 0:X.description)||"",status:((Y=w.quiz)==null?void 0:Y.status)||"draft",pass_threshold:((Z=w.quiz)==null?void 0:Z.pass_threshold)||80,questions:j(($=w.quiz)==null?void 0:$.questions)});te(()=>e.props.errors,i=>{F.value=i||{}},{immediate:!0,deep:!0});const M=R(()=>({...m.errors,...F.value})),L=R(()=>Object.keys(M.value).length>0),z=R(()=>{const i=Object.keys(M.value).length;return i===0?{title:"",message:""}:{title:i===1?"Please fix the following issue:":`Please fix the following ${i} issues:`,message:"Review the highlighted fields below and correct any errors before saving."}}),b=(i,o="info",f=5e3)=>{const k=++W.value,h={id:k,message:i,type:o,show:!1};return E.value.push(h),oe(()=>{const ee=E.value.findIndex(ie=>ie.id===k);ee!==-1&&(E.value[ee].show=!0)}),f>0&&setTimeout(()=>q(k),f),k},q=i=>{const o=E.value.findIndex(f=>f.id===i);o!==-1&&(E.value[o].show=!1,setTimeout(()=>{const f=E.value.findIndex(k=>k.id===i);f!==-1&&E.value.splice(f,1)},300))},V=i=>i.replace(/_/g," ").replace(/\b\w/g,o=>o.toUpperCase()).replace(/questions\.(\d+)\./,"Question $1 "),Q=i=>{const o=M.value[i];return Array.isArray(o)?o[0]:o||null},P=i=>[`questions.${i}.question_text`,`questions.${i}.type`,`questions.${i}.points`,`questions.${i}.options`,`questions.${i}.correct_answer`].some(f=>Q(f)),U=()=>{oe(()=>{const i=document.querySelector(".text-red-600, .border-red-300");i&&i.scrollIntoView({behavior:"smooth",block:"center"})})},N=()=>{try{m.questions.length<20&&m.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""})}catch(i){console.error("Error adding question:",i),b("Failed to add question. Please try again.","error")}},I=i=>{try{m.questions.length>1&&m.questions.splice(i,1)}catch(o){console.error("Error removing question:",o),b("Failed to remove question. Please try again.","error")}},s=i=>{try{m.questions[i].options.length<10&&m.questions[i].options.push("")}catch(o){console.error("Error adding option:",o),b("Failed to add option. Please try again.","error")}},n=(i,o)=>{try{const f=m.questions[i];if(f.options.length>2){const k=f.options[o];f.options.splice(o,1),Array.isArray(f.correct_answer)&&(f.correct_answer=f.correct_answer.filter(h=>h!==k))}}catch(f){console.error("Error removing option:",f),b("Failed to remove option. Please try again.","error")}},p=i=>{try{const o=m.questions[i];o.type==="text"?(o.options=[],o.correct_answer=[],o.points=0):((!o.options||o.options.length<2)&&(o.options=["",""]),o.correct_answer=[]),o.correct_answer_explanation=""}catch(o){console.error("Error resetting question options:",o),b("Failed to reset question options. Please try again.","error")}},x=(i,o)=>{try{const f=m.questions[i];f.type==="radio"&&(f.correct_answer=[o])}catch(f){console.error("Error updating correct answer:",f),b("Failed to update correct answer. Please try again.","error")}},S=()=>{try{F.value={},r.value=!1;const i={course_id:m.course_id,title:m.title,description:m.description,status:m.status,pass_threshold:m.pass_threshold,questions:m.questions.map(o=>({question_text:o.question_text,type:o.type,points:o.type==="text"?0:o.points,options:o.options,correct_answer:Array.isArray(o.correct_answer)?o.correct_answer:o.correct_answer?[o.correct_answer]:[],correct_answer_explanation:o.correct_answer_explanation||""}))};m.put(route("admin.quizzes.update",w.quiz.id),{preserveState:!0,preserveScroll:!0,onStart:()=>{E.value.forEach(o=>q(o.id))},onSuccess:o=>{r.value=!0,b("Quiz updated successfully!","success",4e3),setTimeout(()=>{se.visit(route("admin.quizzes.index"),{replace:!0})},1500)},onError:o=>{F.value=o;const f=Object.keys(o).length,k=f===1?"Please correct the error below.":`Please correct the ${f} errors below.`;b(k,"error",8e3),setTimeout(()=>{U()},100)},onFinish:()=>{}})}catch(i){console.error("Critical error in submitQuiz:",i),b("An unexpected error occurred. Please try again.","error")}},le=()=>{m.isDirty?T.value=!0:G()},G=()=>{m.reset(),F.value={},T.value=!1,r.value=!1,se.visit(route("admin.quizzes.index"))};return te(()=>w.quiz,i=>{i&&(m.course_id=i.course_id||"",m.title=i.title||"",m.description=i.description||"",m.status=i.status||"draft",m.pass_threshold=i.pass_threshold||80,m.questions=j(i.questions))},{deep:!0}),{form:m,hasErrors:L,allErrors:M,errorSummary:z,showDiscardModal:T,showSuccessMessage:r,toasts:E,toastClasses:D,toastIconClasses:C,formatFieldName:V,getFieldError:Q,hasQuestionErrors:P,scrollToFirstError:U,addQuestion:N,removeQuestion:I,addOption:s,removeOption:n,resetQuestionOptions:p,updateCorrectAnswer:x,submitQuiz:S,confirmDiscard:le,discardChanges:G,addToast:b,removeToast:q,breadcrumbs:[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Edit",route:null}]}}},qe={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},Ve={class:"mb-8 flex items-center justify-between"},Se={key:0,class:"mb-6 rounded-lg border border-red-200 bg-red-50 p-6 shadow-sm"},Be={class:"flex items-start"},Ae={class:"ml-3 flex-1"},Te={class:"text-sm font-medium text-red-800"},je={class:"mt-2 text-sm text-red-700"},Le={class:"mb-3"},Qe={class:"list-disc pl-5 space-y-1"},Ue={class:"font-medium"},Oe={class:"ml-4 flex-shrink-0"},De={key:1,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 shadow-sm"},Pe={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},He={key:0,class:"mt-1 flex items-center text-sm text-red-600"},Ne={key:0,class:"mt-1 flex items-center text-sm text-red-600"},Ie={class:"sm:col-span-2"},Re={key:0,class:"mt-1 flex items-center text-sm text-red-600"},We={class:"sm:col-span-2"},Ge={key:0,class:"mt-1 flex items-center text-sm text-red-600"},Je={key:0,class:"mt-1 flex items-center text-sm text-red-600"},Ke={class:"mb-4 flex items-center justify-between"},Xe={key:0,class:"inline-flex items-center ml-2 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},Ye={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Ze={class:"sm:col-span-2"},$e={key:0,class:"mt-1 flex items-center text-sm text-red-600"},er={key:0,class:"mt-1 flex items-center text-sm text-red-600"},rr={key:0},tr={key:0,class:"mt-1 flex items-center text-sm text-red-600"},or={key:0,class:"mt-4"},sr={key:0,class:"mt-1 flex items-center text-sm text-red-600"},lr={class:"mt-4"},ir={key:0,class:"space-y-2"},nr=["id","checked","value","name","disabled","onChange"],ar=["for"],dr={key:1,class:"space-y-2"},cr=["id","value","onUpdate:modelValue","disabled"],ur=["for"],mr={key:2,class:"mt-1 flex items-center text-sm text-red-600"},fr={class:"mt-4"},pr={key:0,class:"mt-1 flex items-center text-sm text-red-600"},_r={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},gr={class:"flex justify-end space-x-3"},vr={key:0,class:"flex items-center"},xr={key:1},yr={class:"p-6 sm:p-8"},hr={class:"flex justify-end space-x-3"},br={key:2,class:"fixed top-4 right-4 z-50 space-y-2"},kr={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},wr={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Cr={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},Er={class:"ml-3 text-sm font-normal"},zr=["onClick"];function Fr(w,e,T,r,E,W){const D=y("Link"),C=y("Button"),F=y("CardTitle"),j=y("CardHeader"),m=y("Label"),M=y("SelectValue"),L=y("SelectTrigger"),z=y("SelectItem"),b=y("SelectContent"),q=y("Select"),V=y("Input"),Q=y("Textarea"),P=y("CardContent"),U=y("Card"),N=y("Modal"),I=y("AdminLayout");return d(),H(I,{breadcrumbs:r.breadcrumbs},{default:a(()=>[t("div",qe,[t("div",Ve,[e[10]||(e[10]=t("h1",{class:"text-3xl font-bold text-gray-900"},"Edit Quiz",-1)),l(C,{"as-child":"",variant:"outline"},{default:a(()=>[l(D,{href:w.route("admin.quizzes.index")},{default:a(()=>e[9]||(e[9]=[t("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),c(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),r.hasErrors?(d(),u("div",Se,[t("div",Be,[e[11]||(e[11]=t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),t("div",Ae,[t("h3",Te,g(r.errorSummary.title),1),t("div",je,[t("p",Le,g(r.errorSummary.message),1),t("ul",Qe,[(d(!0),u(B,null,A(r.allErrors,(s,n)=>(d(),u("li",{key:n,class:"break-words"},[t("span",Ue,g(r.formatFieldName(n))+":",1),c(" "+g(Array.isArray(s)?s[0]:s),1)]))),128))])])]),t("div",Oe,[t("button",{onClick:e[0]||(e[0]=(...s)=>r.scrollToFirstError&&r.scrollToFirstError(...s)),class:"inline-flex items-center rounded-md bg-red-100 px-3 py-1.5 text-xs font-medium text-red-800 hover:bg-red-200 transition-colors"}," Go to first error ")])])])):_("",!0),r.showSuccessMessage?(d(),u("div",De,e[12]||(e[12]=[t("div",{class:"flex items-center"},[t("div",{class:"flex-shrink-0"},[t("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),t("p",{class:"ml-3 text-sm text-green-700 font-medium"}," Quiz saved successfully! ")],-1)]))):_("",!0),t("form",{onSubmit:e[6]||(e[6]=re((...s)=>r.submitQuiz&&r.submitQuiz(...s),["prevent"])),class:"space-y-8"},[l(U,null,{default:a(()=>[l(j,null,{default:a(()=>[l(F,null,{default:a(()=>e[13]||(e[13]=[c("Quiz Details")])),_:1})]),_:1}),l(P,{class:"space-y-6"},{default:a(()=>[t("div",Pe,[t("div",null,[l(m,{for:"course_id",class:v(r.getFieldError("course_id")?"text-red-700":"")},{default:a(()=>e[14]||(e[14]=[c(" Course "),t("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),l(q,{modelValue:r.form.course_id,"onUpdate:modelValue":e[1]||(e[1]=s=>r.form.course_id=s),disabled:r.form.processing,class:v(r.getFieldError("course_id")?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},{default:a(()=>[l(L,null,{default:a(()=>[l(M,{placeholder:"Select a Course"})]),_:1}),l(b,null,{default:a(()=>[(d(!0),u(B,null,A(T.courses,s=>(d(),H(z,{key:s.id,value:s.id},{default:a(()=>[c(g(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled","class"]),r.getFieldError("course_id")?(d(),u("div",He,[e[15]||(e[15]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError("course_id")),1)])):_("",!0)]),t("div",null,[l(m,{for:"status",class:v(r.getFieldError("status")?"text-red-700":"")},{default:a(()=>e[16]||(e[16]=[c(" Status "),t("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),l(q,{modelValue:r.form.status,"onUpdate:modelValue":e[2]||(e[2]=s=>r.form.status=s),disabled:r.form.processing,class:v(r.getFieldError("status")?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},{default:a(()=>[l(L,null,{default:a(()=>[l(M,{placeholder:"Select Status"})]),_:1}),l(b,null,{default:a(()=>[l(z,{value:"draft"},{default:a(()=>e[17]||(e[17]=[c("Draft")])),_:1}),l(z,{value:"published"},{default:a(()=>e[18]||(e[18]=[c("Published")])),_:1}),l(z,{value:"archived"},{default:a(()=>e[19]||(e[19]=[c("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled","class"]),r.getFieldError("status")?(d(),u("div",Ne,[e[20]||(e[20]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError("status")),1)])):_("",!0)]),t("div",Ie,[l(m,{for:"title",class:v(r.getFieldError("title")?"text-red-700":"")},{default:a(()=>e[21]||(e[21]=[c(" Title "),t("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),l(V,{id:"title",modelValue:r.form.title,"onUpdate:modelValue":e[3]||(e[3]=s=>r.form.title=s),type:"text",placeholder:"Enter quiz title",disabled:r.form.processing,class:v(r.getFieldError("title")?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},null,8,["modelValue","disabled","class"]),r.getFieldError("title")?(d(),u("div",Re,[e[22]||(e[22]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError("title")),1)])):_("",!0)]),t("div",We,[l(m,{for:"description"},{default:a(()=>e[23]||(e[23]=[c("Description")])),_:1}),l(Q,{id:"description",modelValue:r.form.description,"onUpdate:modelValue":e[4]||(e[4]=s=>r.form.description=s),rows:"4",placeholder:"Enter quiz description (optional)",disabled:r.form.processing,class:v(r.getFieldError("description")?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},null,8,["modelValue","disabled","class"]),r.getFieldError("description")?(d(),u("div",Ge,[e[24]||(e[24]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError("description")),1)])):_("",!0)]),t("div",null,[l(m,{for:"pass_threshold",class:v(r.getFieldError("pass_threshold")?"text-red-700":"")},{default:a(()=>e[25]||(e[25]=[c(" Pass Threshold (%) "),t("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),l(V,{id:"pass_threshold",modelValue:r.form.pass_threshold,"onUpdate:modelValue":e[5]||(e[5]=s=>r.form.pass_threshold=s),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter pass threshold (e.g., 80.00)",disabled:r.form.processing,class:v(r.getFieldError("pass_threshold")?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},null,8,["modelValue","disabled","class"]),r.getFieldError("pass_threshold")?(d(),u("div",Je,[e[26]||(e[26]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError("pass_threshold")),1)])):_("",!0)])])]),_:1})]),_:1}),l(U,null,{default:a(()=>[l(j,null,{default:a(()=>[l(F,null,{default:a(()=>[c("Questions ("+g(r.form.questions.length)+"/20)",1)]),_:1})]),_:1}),l(P,null,{default:a(()=>[(d(!0),u(B,null,A(r.form.questions,(s,n)=>(d(),u("div",{key:`question-${n}`,class:v(["border border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800 mb-4",r.hasQuestionErrors(n)?"border-red-300 bg-red-50":""])},[t("div",Ke,[t("h3",{class:v(["text-sm font-medium",r.hasQuestionErrors(n)?"text-red-900":"text-gray-900 dark:text-gray-100"])},[c(" Question "+g(n+1)+" ",1),r.hasQuestionErrors(n)?(d(),u("span",Xe,e[27]||(e[27]=[t("svg",{class:"mr-1 h-3 w-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),c(" Has errors ")]))):_("",!0)],2),r.form.questions.length>1?(d(),H(C,{key:0,onClick:p=>r.removeQuestion(n),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:r.form.processing},{default:a(()=>e[28]||(e[28]=[c(" Remove ")])),_:2},1032,["onClick","disabled"])):_("",!0)]),t("div",Ye,[t("div",Ze,[l(m,{for:`question_text_${n}`,class:v(r.getFieldError(`questions.${n}.question_text`)?"text-red-700":"")},{default:a(()=>e[29]||(e[29]=[c(" Question Text "),t("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),l(V,{id:`question_text_${n}`,modelValue:s.question_text,"onUpdate:modelValue":p=>s.question_text=p,type:"text",placeholder:"Enter question text",disabled:r.form.processing,class:v(r.getFieldError(`questions.${n}.question_text`)?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},null,8,["id","modelValue","onUpdate:modelValue","disabled","class"]),r.getFieldError(`questions.${n}.question_text`)?(d(),u("div",$e,[e[30]||(e[30]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.question_text`)),1)])):_("",!0)]),t("div",null,[l(m,{for:`type_${n}`,class:v(r.getFieldError(`questions.${n}.type`)?"text-red-700":"")},{default:a(()=>e[31]||(e[31]=[c(" Type "),t("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),l(q,{id:`type_${n}`,modelValue:s.type,"onUpdate:modelValue":[p=>s.type=p,p=>r.resetQuestionOptions(n)],disabled:r.form.processing,class:v(r.getFieldError(`questions.${n}.type`)?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},{default:a(()=>[l(L,null,{default:a(()=>[l(M,{placeholder:"Select question type"})]),_:1}),l(b,null,{default:a(()=>[l(z,{value:"radio"},{default:a(()=>e[32]||(e[32]=[c("Radio (Single Choice)")])),_:1}),l(z,{value:"checkbox"},{default:a(()=>e[33]||(e[33]=[c("Checkbox (Multiple Choice)")])),_:1}),l(z,{value:"text"},{default:a(()=>e[34]||(e[34]=[c("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["id","modelValue","onUpdate:modelValue","disabled","class"]),r.getFieldError(`questions.${n}.type`)?(d(),u("div",er,[e[35]||(e[35]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.type`)),1)])):_("",!0)]),s.type!=="text"?(d(),u("div",rr,[l(m,{for:`points_${n}`,class:v(r.getFieldError(`questions.${n}.points`)?"text-red-700":"")},{default:a(()=>e[36]||(e[36]=[c(" Points "),t("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),l(V,{id:`points_${n}`,modelValue:s.points,"onUpdate:modelValue":p=>s.points=p,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter points",disabled:r.form.processing,class:v(r.getFieldError(`questions.${n}.points`)?"border-red-300 focus:border-red-500 focus:ring-red-500":"")},null,8,["id","modelValue","onUpdate:modelValue","disabled","class"]),r.getFieldError(`questions.${n}.points`)?(d(),u("div",tr,[e[37]||(e[37]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.points`)),1)])):_("",!0)])):_("",!0)]),s.type!=="text"?(d(),u("div",or,[e[45]||(e[45]=t("h4",{class:"mb-2 text-sm font-medium text-gray-900 dark:text-gray-100"},"Options",-1)),(d(!0),u(B,null,A(s.options,(p,x)=>(d(),u("div",{key:`option-${n}-${x}`,class:"mb-2 flex items-center"},[l(V,{modelValue:s.options[x],"onUpdate:modelValue":S=>s.options[x]=S,type:"text",class:"flex-1",placeholder:`Option ${x+1}`,disabled:r.form.processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),s.options.length>2?(d(),H(C,{key:0,onClick:S=>r.removeOption(n,x),type:"button",variant:"ghost",size:"sm",class:"ml-2 text-destructive",disabled:r.form.processing},{default:a(()=>e[38]||(e[38]=[c(" Remove ")])),_:2},1032,["onClick","disabled"])):_("",!0)]))),128)),r.getFieldError(`questions.${n}.options`)?(d(),u("div",sr,[e[39]||(e[39]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.options`)),1)])):_("",!0),l(C,{onClick:p=>r.addOption(n),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:r.form.processing||s.options.length>=10},{default:a(()=>e[40]||(e[40]=[c(" Add Option ")])),_:2},1032,["onClick","disabled"]),t("div",lr,[e[42]||(e[42]=t("label",{class:"mb-1 block text-sm font-medium text-gray-900 dark:text-gray-100"},[c(" Correct Answer(s) "),t("span",{class:"text-red-500"},"*")],-1)),s.type==="radio"?(d(),u("div",ir,[(d(!0),u(B,null,A(s.options,(p,x)=>(d(),u("div",{key:`radio-${n}-${x}`,class:"flex items-center"},[t("input",{id:`correct_answer_${n}_${x}`,checked:s.correct_answer.includes(p),value:p,type:"radio",name:`correct_answer_${n}`,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:r.form.processing,onChange:S=>r.updateCorrectAnswer(n,p)},null,40,nr),t("label",{for:`correct_answer_${n}_${x}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300"},g(p||`Option ${x+1}`),9,ar)]))),128))])):s.type==="checkbox"?(d(),u("div",dr,[(d(!0),u(B,null,A(s.options,(p,x)=>(d(),u("div",{key:`checkbox-${n}-${x}`,class:"flex items-center"},[ae(t("input",{id:`correct_answer_${n}_${x}`,value:p,type:"checkbox","onUpdate:modelValue":S=>s.correct_answer=S,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:r.form.processing},null,8,cr),[[de,s.correct_answer]]),t("label",{for:`correct_answer_${n}_${x}`,class:"ml-2 text-sm text-gray-900 dark:text-gray-300"},g(p||`Option ${x+1}`),9,ur)]))),128))])):_("",!0),r.getFieldError(`questions.${n}.correct_answer`)?(d(),u("div",mr,[e[41]||(e[41]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.correct_answer`)),1)])):_("",!0)]),t("div",fr,[l(m,{for:`correct_answer_explanation_${n}`},{default:a(()=>e[43]||(e[43]=[c("Correct Answer Explanation")])),_:2},1032,["for"]),l(Q,{id:`correct_answer_explanation_${n}`,modelValue:s.correct_answer_explanation,"onUpdate:modelValue":p=>s.correct_answer_explanation=p,rows:"2",placeholder:"Explain why this is correct (optional)",disabled:r.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),r.getFieldError(`questions.${n}.correct_answer_explanation`)?(d(),u("div",pr,[e[44]||(e[44]=t("svg",{class:"mr-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),c(" "+g(r.getFieldError(`questions.${n}.correct_answer_explanation`)),1)])):_("",!0)])])):_("",!0),s.type==="text"?(d(),u("div",_r,e[46]||(e[46]=[t("p",{class:"text-sm text-blue-700"}," 📝 This is an open-ended text question. Students will provide their own written response. ",-1)]))):_("",!0)],2))),128)),l(C,{onClick:r.addQuestion,type:"button",disabled:r.form.processing||r.form.questions.length>=20},{default:a(()=>e[47]||(e[47]=[t("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),t("div",gr,[l(C,{"as-child":"",variant:"outline",disabled:r.form.processing},{default:a(()=>[l(D,{href:w.route("admin.quizzes.index"),onClick:re(r.confirmDiscard,["prevent"])},{default:a(()=>e[48]||(e[48]=[c(" Cancel ")])),_:1},8,["href","onClick"])]),_:1},8,["disabled"]),l(C,{type:"submit",disabled:r.form.processing||r.hasErrors},{default:a(()=>[r.form.processing?(d(),u("span",vr,e[49]||(e[49]=[t("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[t("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),t("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),c(" Saving... ")]))):(d(),u("span",xr,"Update Quiz"))]),_:1},8,["disabled"])])],32),l(N,{show:r.showDiscardModal,onClose:e[8]||(e[8]=s=>r.showDiscardModal=!1)},{default:a(()=>[t("div",yr,[e[52]||(e[52]=t("h2",{class:"mb-3 text-xl font-semibold text-gray-900"},"Discard Changes",-1)),e[53]||(e[53]=t("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),t("div",hr,[l(C,{onClick:e[7]||(e[7]=s=>r.showDiscardModal=!1),variant:"outline",disabled:r.form.processing},{default:a(()=>e[50]||(e[50]=[c(" Cancel ")])),_:1},8,["disabled"]),l(C,{onClick:r.discardChanges,variant:"destructive",disabled:r.form.processing},{default:a(()=>e[51]||(e[51]=[c(" Discard ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"]),r.toasts.length>0?(d(),u("div",br,[(d(!0),u(B,null,A(r.toasts,s=>(d(),u("div",{key:s.id,class:v(["transform transition-all duration-300 ease-in-out",s.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[t("div",{class:v(["flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg border",r.toastClasses[s.type]])},[t("div",{class:v(["inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",r.toastIconClasses[s.type]])},[s.type==="success"?(d(),u("svg",kr,e[54]||(e[54]=[t("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):s.type==="error"?(d(),u("svg",wr,e[55]||(e[55]=[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(d(),u("svg",Cr,e[56]||(e[56]=[t("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),t("div",Er,g(s.message),1),t("button",{onClick:n=>r.removeToast(s.id),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-gray-900 rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8","aria-label":"Close"},e[57]||(e[57]=[t("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[t("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,zr)],2)],2))),128))])):_("",!0)])]),_:1},8,["breadcrumbs"])}const nt=Fe(Me,[["render",Fr],["__scopeId","data-v-6b007ada"]]);export{nt as default};
