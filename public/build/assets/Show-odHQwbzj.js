import{d as mt,c as F,r as f,z as pt,p as De,x as gt,l as $e,a as x,o as i,b as o,u as a,m as ht,w as n,e as s,g as p,h as g,k as _t,t as c,f as h,n as Me,P as yt,s as xt,B as wt,y as re,F as bt,bU as W,W as ie}from"./app-CV2cPHwK.js";import{V as kt,n as Pt,o as Ct,p as Ft,q as Dt,f as $t}from"./AppLayout.vue_vue_type_script_setup_true_lang-BSvNWHlH.js";import{c as Y,_}from"./Button.vue_vue_type_script_setup_true_lang-C5sOPNae.js";import{_ as R}from"./Card.vue_vue_type_script_setup_true_lang--D3KWfGq.js";import{_ as I}from"./CardContent.vue_vue_type_script_setup_true_lang-RDGa4TMZ.js";import{_ as Mt}from"./CardHeader.vue_vue_type_script_setup_true_lang-mDEJg-F9.js";import{_ as St}from"./CardTitle.vue_vue_type_script_setup_true_lang-BSzOzICM.js";import{_ as jt}from"./Progress.vue_vue_type_script_setup_true_lang-COqmNCR1.js";import{_ as Se,a as je}from"./index-DKiGTmAa.js";import{_ as te}from"./index-CjSyc0sf.js";import{_ as Lt}from"./Separator.vue_vue_type_script_setup_true_lang-yDr5oeYP.js";import{_ as Tt}from"./TooltipProvider.vue_vue_type_script_setup_true_lang-D-ANmy_R.js";import{V as Et}from"./video-VemHBwTo.js";import{F as Le}from"./file-text-P0QvyLE1.js";import{C as Rt}from"./clock-BeTrlB51.js";import{B as It}from"./book-open-BqIuda0t.js";import{A as zt}from"./arrow-left-BoEBVeWb.js";import{L as ue}from"./loader-circle-BY952dbN.js";import{P as Vt}from"./play-BfS4iDvR.js";import{P as Ut}from"./pause-IrNxDmBr.js";import{R as Te}from"./rotate-ccw-CruzDfeM.js";import{S as Ee}from"./skip-forward-BTMb1oOq.js";import{D as Nt}from"./download-CZoaB_8_.js";import{C as Re}from"./circle-alert-BfaQk4mY.js";import{C as Ot}from"./chevron-left-CnB4IqWJ.js";import{T as Wt}from"./trending-up-DyRrxsBT.js";import{T as Bt}from"./timer-DCqV2PCB.js";import{T as At}from"./target-ChE4qNk7.js";import{C as ae}from"./circle-check-big-ClKQO3IC.js";import{A as Zt}from"./activity-CrBsS4KY.js";import{S as qt}from"./skip-back-B7lXxfvQ.js";import{E as Gt}from"./eye-CfdVgX_S.js";import{_ as Ht}from"./_plugin-vue_export-helper-BqS9F3Z2.js";import"./index-3f0HzYe1.js";import"./index-DhfkKPqp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CWDFjwen.js";import"./useForwardExpose-CFKb2kDd.js";import"./nullish-CHIgUVhi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=Y("MaximizeIcon",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=Y("MinimizeIcon",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Y("RotateCwIcon",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=Y("ZoomInIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=Y("ZoomOutIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Qt={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},ea={class:"flex items-center justify-between mb-6"},ta={class:"flex items-center space-x-4"},aa={class:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center"},sa={class:"text-2xl font-bold"},oa={class:"text-muted-foreground"},na={class:"flex items-center gap-4 mt-2"},la={key:2,class:"text-xs text-muted-foreground flex items-center gap-1"},ra={key:3,class:"text-xs text-muted-foreground flex items-center gap-1"},ia={class:"grid grid-cols-1 lg:grid-cols-4 gap-6"},ua={class:"lg:col-span-3"},ca={class:"relative bg-black aspect-video"},da=["src","poster"],va={key:0,class:"absolute inset-0 flex flex-col items-center justify-center bg-black/70 z-10"},fa={class:"text-center text-white"},ma={class:"text-sm text-gray-300 mt-2"},pa={key:1,class:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4"},ga={class:"mb-4"},ha=["value","max"],_a={class:"flex items-center justify-between text-white"},ya={class:"flex items-center gap-4"},xa={class:"text-sm"},wa={class:"flex items-center gap-4"},ba={class:"flex items-center gap-2"},ka=["value"],Pa={class:"flex items-center justify-between"},Ca={class:"flex items-center gap-2"},Fa={key:0,class:"flex items-center justify-center py-16"},Da={class:"text-center"},$a={class:"text-xs text-muted-foreground mt-2"},Ma={key:1,class:"flex items-center justify-center py-16"},Sa={class:"text-center"},ja={key:2,class:"px-6 pb-4 flex items-center justify-between border-b"},La={class:"flex items-center gap-2"},Ta={class:"flex items-center gap-2 px-4"},Ea=["max"],Ra={class:"text-sm text-muted-foreground"},Ia={class:"flex items-center gap-2"},za={class:"px-3 py-1 text-sm bg-muted rounded"},Va={key:0,class:"flex items-center justify-center p-4"},Ua=["src"],Na={key:1,class:"flex items-center justify-center h-96 w-full bg-muted"},Oa={class:"text-center"},Wa={class:"lg:col-span-1 space-y-4"},Ba={class:"flex items-center justify-between mb-2"},Aa={class:"text-sm font-medium flex items-center gap-2"},Za={class:"text-sm font-bold text-primary"},qa={class:"text-xs text-muted-foreground"},Ga={key:0},Ha={key:1},Ka={key:2},Xa={class:"flex items-center justify-between mb-2"},Ya={class:"text-sm font-medium flex items-center gap-2"},Ja={class:"text-lg font-bold text-green-600"},Qa={class:"flex items-center justify-between mb-2"},es={class:"text-sm font-medium flex items-center gap-2"},ts={class:"flex items-center gap-2"},as={class:"text-sm font-medium"},ss={class:"flex items-center justify-between pt-6"},os={class:"flex-1"},ns={class:"text-left"},ls={class:"font-medium text-sm"},rs={class:"text-xs text-muted-foreground"},is={class:"flex-1 text-right"},us={class:"text-right"},cs={class:"font-medium text-sm"},ds={class:"text-xs opacity-75"},vs={key:0},fs=mt({__name:"Show",props:{content:{},module:{},course:{},userProgress:{},navigation:{}},setup(ze){var Fe;const l=ze,z=(Fe=document.querySelector('meta[name="csrf-token"]'))==null?void 0:Fe.getAttribute("content"),Ve=F(()=>l.module||{id:0,name:"Unknown Module",order_number:1}),B=F(()=>l.course||{id:0,name:"Unknown Course"}),P=F(()=>l.userProgress||{id:0,current_position:0,completion_percentage:0,is_completed:!1,time_spent:0}),y=F(()=>l.navigation||{previous:null,next:null}),Ue=[{title:"My Courses",href:"/courses-online"},{title:B.value.name,href:`/courses-online/${B.value.id}`},{title:l.content.title,href:"#"}],m=f(null),V=f(!1),M=f(0),U=f(0),J=f(1),ce=f(!1),T=f(!0),A=f(!1),se=f(null),Z=f(null),v=f(1),r=f(0),C=f(100),oe=f(0),w=f(!1),q=f(!1),de=f(0),Ne=f(0),$=f(0),N=f(200),ne=f(!1),S=f(null),ve=f(0),j=f(!1),Q=f(null),O=f(P.value.completion_percentage||0),L=f(P.value.is_completed||!1),fe=f(P.value.time_spent||0),me=F(()=>H(M.value)),pe=F(()=>H(U.value)),Oe=F(()=>H(fe.value*60)),We=F(()=>H(de.value));F(()=>H($.value*60));const G=F(()=>l.content.content_type==="video"?U.value>0?M.value/U.value*100:0:l.content.content_type==="pdf"&&r.value>0?v.value/r.value*100:0),Be=F(()=>l.content.content_type==="video"?Et:Le),k=e=>e?e.includes("drive.google.com")?"google_drive":e.includes("/storage/")||e.includes("app/public/")||e.startsWith("/")||e.includes("localhost")||e.includes(window.location.hostname)?"storage":"external":"unknown",ge=()=>{if(!l.content.file_url)return"";const e=l.content.file_url,t=k(e);switch(console.log(`🔍 PDF source detected: ${t} for URL: ${e}`),t){case"google_drive":const d=e.match(/\/file\/d\/([a-zA-Z0-9_-]+)/)||e.match(/id=([a-zA-Z0-9_-]+)/)||e.match(/open\?id=([a-zA-Z0-9_-]+)/);return d&&d[1]?`https://drive.google.com/file/d/${d[1]}/preview`:`https://docs.google.com/viewer?embedded=true&url=${encodeURIComponent(e)}`;case"storage":let u=e;return!u.startsWith("http://")&&!u.startsWith("https://")&&(u.startsWith("/storage/")?u=u:u.includes("app/public/")?u=u.replace(/.*app\/public\//,"/storage/"):u.startsWith("/")?u=u:u=`/storage/${u}`),`${u}#page=${v.value}&zoom=${C.value}`;case"external":default:return`${e}#page=${v.value}&zoom=${C.value}`}},H=e=>{const t=Math.floor(e/3600),d=Math.floor(e%3600/60),u=Math.floor(e%60);return t>0?`${t}:${d.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`:`${d}:${u.toString().padStart(2,"0")}`},E=async()=>{console.log("🚀 Starting session for content:",l.content.id);try{const e={action:"start",current_position:l.content.content_type==="video"?M.value:v.value},t=await W.post(`/content/${l.content.id}/session`,e,{headers:{"X-CSRF-TOKEN":z}});t.data.success&&(S.value=t.data.session_id,Q.value=Date.now(),console.log("✅ Session started:",S.value))}catch(e){console.error("❌ Failed to start session:",e)}},K=async()=>{var t;if(!S.value)return;const e=Date.now();if(!(e-ve.value<5e3)){ve.value=e;try{const d=l.content.content_type==="video"?M.value:v.value,u=Q.value?Math.floor((e-Q.value)/6e4):0,b={current_position:d,completion_percentage:G.value,watch_time:u};console.log("📤 Sending progress update:",b);const D=await W.post(`/content/${l.content.id}/progress`,b,{headers:{"X-CSRF-TOKEN":z,"Content-Type":"application/json",Accept:"application/json"}});D.data.success&&(O.value=D.data.completion_percentage||G.value,L.value=D.data.is_completed||!1,fe.value=D.data.total_watch_time||u,console.log("✅ Progress updated:",O.value+"%")),await W.post(`/content/${l.content.id}/session`,{action:"heartbeat",current_position:d},{headers:{"X-CSRF-TOKEN":z}})}catch(d){console.error("❌ Failed to update progress:",d),d.response&&(console.error("Response status:",d.response.status),console.error("Response data:",d.response.data),d.response.status===422&&((t=d.response.data)!=null&&t.errors)&&console.error("🔴 Validation errors:",d.response.data.errors))}}},le=async()=>{if(S.value){console.log("🛑 Ending session:",S.value);try{await W.post(`/content/${l.content.id}/session`,{action:"end",current_position:l.content.content_type==="video"?M.value:v.value},{headers:{"X-CSRF-TOKEN":z}}),console.log("✅ Session ended"),S.value=null,Q.value=null}catch(e){console.error("❌ Failed to end session:",e)}}},he=async()=>{var e,t,d,u;console.log("🎯 Marking content as completed:",l.content.id);try{j.value=!0;let b;try{b=await W.post(`/content/${l.content.id}/complete`,{},{headers:{"X-CSRF-TOKEN":z}})}catch(D){if(((e=D.response)==null?void 0:e.status)===404)console.log("🔄 /complete route not found, trying /mark-complete"),b=await W.post(`/content/${l.content.id}/mark-complete`,{},{headers:{"X-CSRF-TOKEN":z}});else throw D}b.data.success&&(L.value=!0,O.value=100,console.log("✅ Content marked as completed successfully!"),(t=y.value.next)!=null&&t.is_unlocked?setTimeout(()=>{ie.visit(route("content.show",y.value.next.id))},2e3):setTimeout(()=>{ie.visit(route("courses-online.show",B.value.id))},2e3))}catch(b){console.error("❌ Failed to mark as completed:",b),(u=(d=b.response)==null?void 0:d.data)!=null&&u.message?alert(`Error: ${b.response.data.message}`):alert("Failed to mark content as completed. Please try again.")}finally{j.value=!1}},Ae=async()=>{m.value&&(V.value?await m.value.pause():await m.value.play())},_e=e=>{m.value&&(m.value.currentTime=Math.max(0,Math.min(U.value,e)))},ye=e=>{_e(M.value+e)},Ze=e=>{J.value=Math.max(0,Math.min(1,e)),m.value&&(m.value.volume=J.value)},qe=async()=>{if(m.value)try{ce.value?await document.exitFullscreen():await m.value.requestFullscreen()}catch(e){console.error("Fullscreen error:",e)}},xe=async()=>{if(!l.content.file_url){console.error("❌ No PDF URL available"),ne.value=!0;return}try{j.value=!0,console.log("📄 Loading PDF data from:",l.content.file_url);const e=l.content.file_url,t=k(e);switch(console.log(`🔍 Detected PDF source: ${t}`),t){case"google_drive":await Ge();break;case"storage":await He(e);break;case"external":default:await Ke(e);break}}catch(e){console.error("❌ Failed to load PDF data:",e),await Xe(e)}finally{j.value=!1}},Ge=async()=>{console.log("📱 Handling Google Drive PDF"),r.value=5,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,P.value.current_position||1),console.log("✅ Google Drive PDF loaded with defaults:",{totalPages:r.value,currentPage:v.value,estimatedReadingTime:$.value}),await E()},He=async e=>{console.log("🗃️ Handling Laravel storage PDF");try{window.pdfjsLib||await be();let t=e;t.startsWith("http")||(t.startsWith("/storage/")?t=t:t.includes("app/public/")?t=t.replace(/.*app\/public\//,"/storage/"):t.startsWith("/")?t=t:t=`/storage/${t}`);const d=await window.pdfjsLib.getDocument(t).promise;r.value=d.numPages,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,Math.min(r.value,P.value.current_position||1)),console.log("✅ Storage PDF loaded with PDF.js:",{totalPages:r.value,currentPage:v.value,url:t}),await E()}catch(t){console.warn("⚠️ PDF.js failed for storage PDF, using fallback:",t),r.value=5,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,P.value.current_position||1),console.log("✅ Storage PDF loaded with fallback"),await E()}},Ke=async e=>{console.log("🌐 Handling external PDF"),window.pdfjsLib||await be();const t=await window.pdfjsLib.getDocument(e).promise;r.value=t.numPages,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,Math.min(r.value,P.value.current_position||1)),console.log("✅ External PDF loaded with PDF.js:",{totalPages:r.value,currentPage:v.value,url:e}),await E()},Xe=async e=>{var t;if(console.log("🔄 PDF loading failed, trying fallback methods"),e.name==="InvalidPDFException"||(t=e.message)!=null&&t.includes("CORS")){console.log("🔄 CORS/Invalid PDF error, using fallback"),r.value=5,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,P.value.current_position||1),console.log("✅ PDF fallback activated"),await E();return}ne.value=!0,setTimeout(()=>{we()},2e3)},we=()=>{try{Z.value&&(Z.value.onload=()=>{console.log("📄 PDF iframe loaded, using fallback data"),r.value=5,$.value=Math.ceil(r.value*250/N.value),w.value=!0,v.value=Math.max(1,P.value.current_position||1),S.value||E()})}catch(e){console.error("❌ Fallback PDF loading failed:",e)}},be=()=>new Promise((e,t)=>{if(window.pdfjsLib){e(window.pdfjsLib);return}const d=document.createElement("script");d.src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js",d.onload=()=>{window.pdfjsLib.GlobalWorkerOptions.workerSrc="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js",console.log("✅ PDF.js library loaded"),e(window.pdfjsLib)},d.onerror=t,document.head.appendChild(d)}),Ye=()=>{v.value<r.value&&(v.value++,ee())},Je=()=>{v.value>1&&(v.value--,ee())},Qe=e=>{e>=1&&e<=r.value&&(v.value=e,ee())},ke=e=>{e==="in"&&C.value<200?C.value+=25:e==="out"&&C.value>50&&(C.value-=25)},et=()=>{oe.value=(oe.value+90)%360},tt=async()=>{if(se.value)try{q.value?await document.exitFullscreen():await se.value.requestFullscreen()}catch(e){console.error("PDF Fullscreen error:",e)}},at=()=>{if(l.content.file_url){const e=document.createElement("a");e.href=l.content.file_url,e.download=l.content.pdf_name||l.content.title+".pdf",e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e)}},ee=()=>{Ne.value=v.value/r.value*100,K()},Pe=e=>{le(),ie.visit(route("content.show",e))},st=()=>{console.log("📹 Video loading started"),T.value=!0,A.value=!1},ot=()=>{console.log("📹 Video data loaded"),T.value=!1,A.value=!0},nt=()=>{console.log("📹 Video can start playing"),T.value=!1,A.value=!0},lt=()=>{console.log("📹 Video waiting for more data"),T.value=!0},rt=()=>{console.log("📹 Video started playing"),T.value=!1},it=()=>{m.value&&(U.value=m.value.duration,m.value.currentTime=P.value.current_position||0)},ut=()=>{m.value&&(M.value=m.value.currentTime)},ct=()=>{V.value=!0,S.value||E()},dt=()=>{V.value=!1,K()},vt=()=>{V.value=!1,K(),G.value>=95&&he()},ft=()=>{m.value&&(J.value=m.value.volume)},Ce=()=>{ce.value=!!document.fullscreenElement,q.value=!!document.fullscreenElement};return pt(async()=>{if(document.addEventListener("fullscreenchange",Ce),l.content.content_type==="pdf"){await xe();const d=setInterval(()=>{w.value&&de.value++},1e3);De(()=>{clearInterval(d)})}else l.content.content_type==="video"&&m.value&&(await gt(),m.value.currentTime=P.value.current_position||0);const e=setInterval(()=>{(l.content.content_type==="video"&&V.value||l.content.content_type==="pdf"&&w.value)&&K()},15e3),t=()=>{K(),le()};window.addEventListener("beforeunload",t),De(()=>{clearInterval(e),le(),document.removeEventListener("fullscreenchange",Ce),window.removeEventListener("beforeunload",t)})}),$e(v,e=>{l.content.content_type==="pdf"&&w.value&&ee()}),$e(C,()=>{l.content.content_type==="pdf"&&w.value&&Z.value&&k(l.content.file_url||"")==="storage"&&(Z.value.src=ge())}),(e,t)=>(i(),x(bt,null,[o(a(ht),{title:e.content.title},null,8,["title"]),o($t,{breadcrumbs:Ue},{default:n(()=>{var d;return[s("div",Qt,[s("div",ea,[s("div",ta,[s("div",aa,[(i(),p(_t(Be.value),{class:"h-6 w-6 text-primary"}))]),s("div",null,[s("h1",sa,c(e.content.title),1),s("p",oa,c(Ve.value.name)+" • "+c(B.value.name),1),s("div",na,[o(a(te),{variant:"outline",class:"text-xs"},{default:n(()=>[h(c(e.content.content_type.toUpperCase()),1)]),_:1}),e.content.is_required?(i(),p(a(te),{key:0,variant:"destructive",class:"text-xs"},{default:n(()=>t[10]||(t[10]=[h(" Required ")])),_:1})):g("",!0),e.content.content_type==="pdf"&&e.content.file_url?(i(),p(a(te),{key:1,variant:"outline",class:Me(["text-xs",{"bg-blue-50 text-blue-700":k(e.content.file_url)==="google_drive","bg-green-50 text-green-700":k(e.content.file_url)==="storage","bg-gray-50 text-gray-700":k(e.content.file_url)==="external"}])},{default:n(()=>[h(c(k(e.content.file_url)==="google_drive"?"Google Drive":k(e.content.file_url)==="storage"?"Local Storage":"External PDF"),1)]),_:1},8,["class"])):g("",!0),e.content.content_type==="video"&&((d=e.content.video)!=null&&d.duration)?(i(),x("span",la,[o(a(Rt),{class:"h-3 w-3"}),h(" "+c(Math.ceil(e.content.video.duration/60))+" min ",1)])):g("",!0),e.content.content_type==="pdf"&&r.value>0?(i(),x("span",ra,[o(a(It),{class:"h-3 w-3"}),h(" "+c(r.value)+" pages • ~"+c($.value)+"min read ",1)])):g("",!0)])])]),o(a(_),{asChild:"",variant:"outline"},{default:n(()=>[o(a(yt),{href:e.route("courses-online.show",B.value.id)},{default:n(()=>[o(a(zt),{class:"h-4 w-4 mr-2"}),t[11]||(t[11]=h(" Back to Course "))]),_:1},8,["href"])]),_:1})]),s("div",ia,[s("div",ua,[e.content.content_type==="video"?(i(),p(a(R),{key:0,class:"overflow-hidden"},{default:n(()=>[o(a(I),{class:"p-0"},{default:n(()=>{var u,b,D;return[s("div",ca,[s("video",{ref_key:"videoElement",ref:m,src:((u=e.content.video)==null?void 0:u.streaming_url)||"",poster:((b=e.content.video)==null?void 0:b.thumbnail_url)||"",class:"w-full h-full",preload:"metadata",onLoadstart:st,onLoadeddata:ot,onCanplay:nt,onWaiting:lt,onPlaying:rt,onLoadedmetadata:it,onTimeupdate:ut,onPlay:ct,onPause:dt,onEnded:vt,onVolumechange:ft}," Your browser does not support the video tag. ",40,da),T.value||!A.value?(i(),x("div",va,[s("div",fa,[o(a(ue),{class:"h-12 w-12 animate-spin mx-auto mb-4"}),t[12]||(t[12]=s("p",{class:"text-lg font-medium"},"Loading video...",-1)),s("p",ma,c((D=e.content.video)==null?void 0:D.name),1),t[13]||(t[13]=s("div",{class:"mt-4"},[s("div",{class:"w-48 h-1 bg-white/20 rounded-full mx-auto"},[s("div",{class:"h-1 bg-primary rounded-full animate-pulse",style:{width:"60%"}})])],-1))])])):g("",!0),A.value&&!T.value?(i(),x("div",pa,[s("div",ga,[s("input",{type:"range",value:M.value,max:U.value,onInput:t[0]||(t[0]=X=>_e(Number(X.target.value))),class:"w-full h-1 bg-white/30 rounded-lg appearance-none cursor-pointer slider"},null,40,ha)]),s("div",_a,[s("div",ya,[o(a(_),{onClick:Ae,variant:"ghost",size:"sm",class:"text-white hover:bg-white/20"},{default:n(()=>[V.value?(i(),p(a(Ut),{key:1,class:"h-5 w-5"})):(i(),p(a(Vt),{key:0,class:"h-5 w-5"}))]),_:1}),o(a(_),{onClick:t[1]||(t[1]=X=>ye(-10)),variant:"ghost",size:"sm",class:"text-white hover:bg-white/20"},{default:n(()=>[o(a(Te),{class:"h-4 w-4"})]),_:1}),o(a(_),{onClick:t[2]||(t[2]=X=>ye(10)),variant:"ghost",size:"sm",class:"text-white hover:bg-white/20"},{default:n(()=>[o(a(Ee),{class:"h-4 w-4"})]),_:1}),s("span",xa,c(me.value)+" / "+c(pe.value),1)]),s("div",wa,[s("div",ba,[o(a(kt),{class:"h-4 w-4"}),s("input",{type:"range",value:J.value,min:"0",max:"1",step:"0.1",onInput:t[3]||(t[3]=X=>Ze(Number(X.target.value))),class:"w-20 h-1 bg-white/30 rounded-lg appearance-none cursor-pointer"},null,40,ka)]),o(a(_),{onClick:qe,variant:"ghost",size:"sm",class:"text-white hover:bg-white/20"},{default:n(()=>[o(a(Ie),{class:"h-4 w-4"})]),_:1})])])])):g("",!0)])]}),_:1})]),_:1})):g("",!0),e.content.content_type==="pdf"?(i(),p(a(R),{key:1,class:"overflow-hidden"},{default:n(()=>[o(a(Mt),null,{default:n(()=>[s("div",Pa,[o(a(St),{class:"flex items-center gap-2"},{default:n(()=>[o(a(Le),{class:"h-5 w-5"}),h(" "+c(e.content.pdf_name||e.content.title),1)]),_:1}),s("div",Ca,[o(a(Tt),null,{default:n(()=>[o(a(Pt),null,{default:n(()=>[o(a(Ct),{asChild:""},{default:n(()=>[o(a(_),{onClick:at,variant:"outline",size:"sm"},{default:n(()=>[o(a(Nt),{class:"h-4 w-4"})]),_:1})]),_:1}),o(a(Ft),null,{default:n(()=>t[14]||(t[14]=[h("Download PDF")])),_:1})]),_:1})]),_:1})])])]),_:1}),j.value&&!w.value?(i(),x("div",Fa,[s("div",Da,[o(a(ue),{class:"h-12 w-12 animate-spin text-primary mx-auto mb-4"}),t[15]||(t[15]=s("p",{class:"text-muted-foreground"},"Loading PDF data...",-1)),s("p",$a," Reading "+c(e.content.pdf_name)+" • "+c(k(e.content.file_url||"")==="google_drive"?"Google Drive":k(e.content.file_url||"")==="storage"?"Local Storage":"External PDF"),1)])])):ne.value&&!w.value?(i(),x("div",Ma,[s("div",Sa,[o(a(Re),{class:"h-12 w-12 text-destructive mx-auto mb-4"}),t[17]||(t[17]=s("p",{class:"text-destructive"},"Failed to load PDF metadata",-1)),t[18]||(t[18]=s("p",{class:"text-xs text-muted-foreground mt-2"},"Using fallback viewer",-1)),o(a(_),{onClick:xe,variant:"outline",size:"sm",class:"mt-4"},{default:n(()=>[o(a(Te),{class:"h-4 w-4 mr-2"}),t[16]||(t[16]=h(" Retry "))]),_:1})])])):g("",!0),w.value||r.value>0?(i(),x("div",ja,[s("div",La,[o(a(_),{onClick:Je,variant:"outline",size:"sm",disabled:v.value<=1},{default:n(()=>[o(a(Ot),{class:"h-4 w-4"})]),_:1},8,["disabled"]),s("div",Ta,[xt(s("input",{"onUpdate:modelValue":t[4]||(t[4]=u=>v.value=u),onChange:t[5]||(t[5]=u=>Qe(v.value)),type:"number",min:1,max:r.value,class:"w-16 px-2 py-1 text-sm border rounded text-center"},null,40,Ea),[[wt,v.value,void 0,{number:!0}]]),s("span",Ra,"of "+c(r.value),1)]),o(a(_),{onClick:Ye,variant:"outline",size:"sm",disabled:v.value>=r.value},{default:n(()=>[o(a(Dt),{class:"h-4 w-4"})]),_:1},8,["disabled"])]),s("div",Ia,[o(a(_),{onClick:t[6]||(t[6]=u=>ke("out")),variant:"outline",size:"sm",disabled:C.value<=50},{default:n(()=>[o(a(Jt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),s("span",za,c(C.value)+"%",1),o(a(_),{onClick:t[7]||(t[7]=u=>ke("in")),variant:"outline",size:"sm",disabled:C.value>=200},{default:n(()=>[o(a(Yt),{class:"h-4 w-4"})]),_:1},8,["disabled"]),o(a(Lt),{orientation:"vertical",class:"h-6 mx-2"}),o(a(_),{onClick:et,variant:"outline",size:"sm"},{default:n(()=>[o(a(Xt),{class:"h-4 w-4"})]),_:1}),o(a(_),{onClick:tt,variant:"outline",size:"sm"},{default:n(()=>[q.value?(i(),p(a(Kt),{key:1,class:"h-4 w-4"})):(i(),p(a(Ie),{key:0,class:"h-4 w-4"}))]),_:1})])])):g("",!0),o(a(I),{class:"p-0"},{default:n(()=>[s("div",{ref_key:"pdfContainer",ref:se,class:"relative bg-gray-100 dark:bg-gray-800",style:re({minHeight:q.value?"100vh":"800px"})},[w.value||r.value>0?(i(),x("div",Va,[s("div",{class:"bg-white shadow-lg transition-transform duration-300",style:re({transform:`scale(${C.value/100}) rotate(${oe.value}deg)`,transformOrigin:"center center"})},[e.content.file_url?(i(),x("iframe",{key:0,ref_key:"pdfIframe",ref:Z,src:ge(),class:"w-full border-0",style:re({height:q.value?"90vh":"700px",width:"100%",minWidth:"800px"}),title:"PDF Viewer",onLoad:we},null,44,Ua)):(i(),x("div",Na,[s("div",Oa,[o(a(Re),{class:"h-12 w-12 text-muted-foreground mx-auto mb-2"}),t[19]||(t[19]=s("p",{class:"text-muted-foreground"},"PDF not available",-1))])]))],4)])):g("",!0)],4)]),_:1})]),_:1})):g("",!0)]),s("div",Wa,[o(a(R),null,{default:n(()=>[o(a(I),{class:"p-4"},{default:n(()=>[s("div",Ba,[s("span",Aa,[o(a(Wt),{class:"h-4 w-4 text-blue-500"}),t[20]||(t[20]=h(" Progress "))]),s("span",Za,c(Math.round(O.value))+"% ",1)]),o(a(jt),{value:O.value,class:"mb-2"},null,8,["value"]),s("div",qa,[e.content.content_type==="video"?(i(),x("span",Ga,c(me.value)+" / "+c(pe.value),1)):e.content.content_type==="pdf"&&r.value>0?(i(),x("span",Ha," Page "+c(v.value)+" of "+c(r.value),1)):e.content.content_type==="pdf"?(i(),x("span",Ka," Loading pages... ")):g("",!0)])]),_:1})]),_:1}),o(a(R),null,{default:n(()=>[o(a(I),{class:"p-4"},{default:n(()=>[s("div",Xa,[s("span",Ya,[o(a(Bt),{class:"h-4 w-4 text-green-500"}),t[21]||(t[21]=h(" Time Spent "))])]),s("div",Ja,c(e.content.content_type==="pdf"?We.value:Oe.value),1),t[22]||(t[22]=s("div",{class:"text-xs text-muted-foreground"}," Learning session ",-1))]),_:1})]),_:1}),o(a(R),null,{default:n(()=>[o(a(I),{class:"p-4"},{default:n(()=>[s("div",Qa,[s("span",es,[o(a(At),{class:"h-4 w-4 text-purple-500"}),t[23]||(t[23]=h(" Status "))])]),s("div",ts,[L.value?(i(),p(a(ae),{key:0,class:"h-5 w-5 text-green-500"})):(i(),p(a(Zt),{key:1,class:"h-5 w-5 text-blue-500"})),s("span",as,c(L.value?"Completed":"In Progress"),1)])]),_:1})]),_:1}),!L.value&&(G.value>=90||O.value>=90)?(i(),p(a(R),{key:0},{default:n(()=>[o(a(I),{class:"p-4"},{default:n(()=>[o(a(_),{onClick:he,disabled:j.value,variant:"default",class:"w-full bg-green-600 hover:bg-green-700"},{default:n(()=>[j.value?(i(),p(a(ue),{key:0,class:"h-4 w-4 mr-2 animate-spin"})):(i(),p(a(ae),{key:1,class:"h-4 w-4 mr-2"})),h(" "+c(j.value?"Completing...":"Mark as Complete"),1)]),_:1},8,["disabled"])]),_:1})]),_:1})):g("",!0),L.value?(i(),p(a(R),{key:1},{default:n(()=>[o(a(I),{class:"p-4 text-center"},{default:n(()=>[o(a(te),{variant:"outline",class:"px-4 py-2 text-green-600 border-green-200 bg-green-50 w-full justify-center"},{default:n(()=>[o(a(ae),{class:"h-4 w-4 mr-2"}),t[24]||(t[24]=h(" Completed "))]),_:1})]),_:1})]),_:1})):g("",!0)])]),s("div",ss,[s("div",os,[y.value.previous?(i(),p(a(_),{key:0,onClick:t[8]||(t[8]=u=>Pe(y.value.previous.id)),variant:"outline",class:"flex items-center gap-3 max-w-xs hover:bg-blue-50 hover:border-blue-300 hover:text-blue-700 transition-colors"},{default:n(()=>[o(a(qt),{class:"h-4 w-4"}),s("div",ns,[s("div",ls,c(y.value.previous.title),1),s("div",rs,c(y.value.previous.content_type.toUpperCase()),1)])]),_:1})):g("",!0)]),s("div",is,[y.value.next?(i(),p(a(_),{key:0,onClick:t[9]||(t[9]=u=>Pe(y.value.next.id)),variant:y.value.next.is_unlocked?"default":"outline",disabled:!y.value.next.is_unlocked,class:Me(["flex items-center gap-3 max-w-xs ml-auto transition-colors",y.value.next.is_unlocked?"bg-blue-600 hover:bg-blue-700 text-white":"opacity-50 cursor-not-allowed"])},{default:n(()=>[s("div",us,[s("div",cs,c(y.value.next.title),1),s("div",ds,c(y.value.next.content_type.toUpperCase()),1)]),o(a(Ee),{class:"h-4 w-4"})]),_:1},8,["variant","disabled","class"])):g("",!0)])]),L.value?(i(),p(a(Se),{key:0,class:"border-green-200 bg-green-50 dark:bg-green-950"},{default:n(()=>[o(a(ae),{class:"h-4 w-4 text-green-600"}),o(a(je),null,{default:n(()=>[t[25]||(t[25]=s("strong",{class:"text-green-800 dark:text-green-200"},"Excellent work!",-1)),t[26]||(t[26]=h(" You've successfully completed this content. ")),y.value.next&&y.value.next.is_unlocked?(i(),x("span",vs," Continue to the next content to keep learning. ")):g("",!0)]),_:1})]),_:1})):g("",!0),e.content.content_type==="pdf"&&!L.value&&r.value>0?(i(),p(a(Se),{key:1,class:"border-blue-200 bg-blue-50 dark:bg-blue-950"},{default:n(()=>[o(a(Gt),{class:"h-4 w-4 text-blue-600"}),o(a(je),null,{default:n(()=>[t[27]||(t[27]=s("strong",{class:"text-blue-800 dark:text-blue-200"},"Reading Progress:",-1)),h(" Your progress is automatically tracked as you navigate through the "+c(r.value)+" pages. Current page: "+c(v.value)+"/"+c(r.value)+" ("+c(Math.round(G.value))+"% complete) • Source: "+c(k(e.content.file_url||"")==="google_drive"?"Google Drive":k(e.content.file_url||"")==="storage"?"Local Storage":"External PDF"),1)]),_:1})]),_:1})):g("",!0)])]}),_:1})],64))}}),Js=Ht(fs,[["__scopeId","data-v-68e4a919"]]);export{Js as default};
