import{d as V,r as A,W as U,k as D,l as F,o as a,w as B,e as t,j as P,g as u,a as l,F as p,h as m,t as i,i as w,v as _,n as h}from"./app-UYTjIL7K.js";import{_ as j}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CVMNqIh0.js";import{l as L}from"./lodash-FgkEC9m7.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CuKQ7c1n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DXk8l_l7.js";import"./index-DN_WECjT.js";const M={class:"bg-white p-6 rounded-lg shadow mb-6"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-6"},z=["value"],E={class:"bg-white rounded-lg shadow overflow-hidden"},N={class:"min-w-full divide-y divide-gray-200"},W={class:"bg-white divide-y divide-gray-200"},q={key:0},H={class:"px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},O={class:"text-sm font-medium text-gray-900"},$={class:"text-sm text-gray-500"},G={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},J={class:"px-6 py-4 whitespace-nowrap"},K={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Q={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},X={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},Y={key:0,class:"flex items-center"},Z={class:"ml-1 flex"},tt={key:1},it=V({__name:"CourseRegistrations",props:{registrations:Array,courses:Array,filters:Object},setup(n){var f,x,y,v;const d=n,k=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Course Registrations",href:route("admin.reports.course-registrations")}],r=A({course_id:((f=d.filters)==null?void 0:f.course_id)||"",status:((x=d.filters)==null?void 0:x.status)||"",date_from:((y=d.filters)==null?void 0:y.date_from)||"",date_to:((v=d.filters)==null?void 0:v.date_to)||""}),c=L.debounce(()=>{const o={...r.value};o.date_from&&(o.date_from=o.date_from.trim()),o.date_to&&(o.date_to=o.date_to.trim()),U.get(route("admin.reports.course-registrations"),o,{preserveState:!0,replace:!0})},500);D(r,()=>{c()},{deep:!0});const C=()=>{r.value={course_id:"",status:"",date_from:"",date_to:""},c()},R=()=>{const o=new URLSearchParams(r.value).toString();window.location.href=route("admin.reports.export.course-registrations")+"?"+o},g=o=>o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—";return(o,e)=>(a(),F(j,{breadcrumbs:k},{default:B(()=>[t("div",{class:"flex justify-between items-center mb-6"},[e[5]||(e[5]=t("h1",{class:"text-2xl font-bold"},"Course Registrations Report",-1)),t("button",{onClick:R,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center"},e[4]||(e[4]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),P(" Export to CSV ")]))]),t("div",M,[e[12]||(e[12]=t("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Registrations",-1)),t("div",T,[t("div",null,[e[7]||(e[7]=t("label",{for:"course_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),u(t("select",{id:"course_filter","onUpdate:modelValue":e[0]||(e[0]=s=>r.value.course_id=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[6]||(e[6]=t("option",{value:""},"All Courses",-1)),(a(!0),l(p,null,m(n.courses,s=>(a(),l("option",{key:s.id,value:s.id},i(s.name),9,z))),128))],512),[[w,r.value.course_id]])]),t("div",null,[e[9]||(e[9]=t("label",{for:"status_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),u(t("select",{id:"status_filter","onUpdate:modelValue":e[1]||(e[1]=s=>r.value.status=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},e[8]||(e[8]=[t("option",{value:""},"All Statuses",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1)]),512),[[w,r.value.status]])]),t("div",null,[e[10]||(e[10]=t("label",{for:"date_from",class:"block text-sm font-medium text-gray-700 mb-1"},"Date From",-1)),u(t("input",{id:"date_from",type:"date","onUpdate:modelValue":e[2]||(e[2]=s=>r.value.date_from=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[_,r.value.date_from]])]),t("div",null,[e[11]||(e[11]=t("label",{for:"date_to",class:"block text-sm font-medium text-gray-700 mb-1"},"Date To",-1)),u(t("input",{id:"date_to",type:"date","onUpdate:modelValue":e[3]||(e[3]=s=>r.value.date_to=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[_,r.value.date_to]])]),t("div",{class:"flex items-end md:col-span-4"},[t("button",{onClick:C,class:"inline-flex items-center px-4 py-2 bg-gray-100 border border-transparent rounded-md font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition"}," Reset Filters ")])])]),t("div",E,[t("table",N,[e[15]||(e[15]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Course "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Registered At "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completed At "),t("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Rating ")])],-1)),t("tbody",W,[n.registrations.length===0?(a(),l("tr",q,e[13]||(e[13]=[t("td",{colspan:"6",class:"px-6 py-4 text-center text-gray-500"},"No registration records found",-1)]))):(a(!0),l(p,{key:1},m(n.registrations,(s,S)=>(a(),l("tr",{key:S,class:"hover:bg-gray-50"},[t("td",H,[t("div",I,[t("div",null,[t("div",O,i(s.user_name),1),t("div",$,i(s.user_email),1)])])]),t("td",G,i(s.course_name),1),t("td",J,[t("span",{class:h(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-yellow-100 text-yellow-800":s.status==="pending","bg-blue-100 text-blue-800":s.status==="in_progress","bg-green-100 text-green-800":s.status==="completed"}])},i(s.status.replace("_"," ").charAt(0).toUpperCase()+s.status.replace("_"," ").slice(1)),3)]),t("td",K,i(g(s.registered_at)),1),t("td",Q,i(s.completed_at?g(s.completed_at):"—"),1),t("td",X,[s.rating?(a(),l("div",Y,[t("span",null,i(s.rating)+"/5",1),t("div",Z,[(a(),l(p,null,m(5,b=>t("svg",{key:b,class:h(["h-4 w-4",b<=s.rating?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},e[14]||(e[14]=[t("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))])])):(a(),l("span",tt,"—"))])]))),128))])])])]),_:1}))}});export{it as default};
