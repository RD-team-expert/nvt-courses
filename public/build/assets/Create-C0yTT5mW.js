import{d as N,C as G,r as S,a as u,o as d,b as s,u as e,m as q,w as r,e as i,P as T,f as a,j as E,h as c,n as _,t as m,F as P,i as I,g as $}from"./app-CwrLmt4H.js";import{m as z,f as J}from"./AppLayout.vue_vue_type_script_setup_true_lang-KHSjz1qE.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-DNqWTjl2.js";import{_ as y}from"./Card.vue_vue_type_script_setup_true_lang-A8WG6GOp.js";import{_ as h}from"./CardContent.vue_vue_type_script_setup_true_lang-C0P-sboE.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bu6T4zC6.js";import{_ as V}from"./CardHeader.vue_vue_type_script_setup_true_lang-B1JXwWzJ.js";import{_ as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfsAIejd.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-rmXnsLaI.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-CU7Va5Ql.js";import{_ as H}from"./Textarea.vue_vue_type_script_setup_true_lang-ChuE_6eQ.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-BagkaLYc.js";import{_ as O,a as Q,b as W,c as X,d as Y}from"./SelectValue.vue_vue_type_script_setup_true_lang-FEW3_Jd3.js";import{A as Z}from"./arrow-left-IwkGRVeb.js";import{S as ee}from"./square-play-C7hJObWD.js";import{L as te,T as se}from"./test-tube-DoFRfmwO.js";import{L as oe}from"./loader-circle-Cclobs7m.js";import{I as D}from"./image-B_A-GFVp.js";import{S as re}from"./save-D3MMEjI3.js";import"./index-DJ8elu12.js";import"./index-Bl0m2vYu.js";import"./_plugin-vue_export-helper-C_B9qUyA.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wO9CZrtp.js";import"./clock-B3hXeEnL.js";import"./useForwardPropsEmits-Bv9ZfZA8.js";import"./useForwardExpose-aFpDTqrD.js";import"./VisuallyHidden-xEP9wB1T.js";import"./VisuallyHiddenInput-DWU8lSiW.js";import"./usePrimitiveElement-D1W1Ae6N.js";import"./Presence-D5fWEiXU.js";import"./ConfigProvider-DYoe7gBq.js";import"./Teleport-jnYm4bVA.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BFDwzHBd.js";import"./Collection-B9kSM2sl.js";import"./check-D3O_WcEY.js";import"./useSize-d0DSIEo7.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";const ie={class:"max-w-4xl mx-auto space-y-6"},le={class:"flex items-center gap-4"},ae={class:"space-y-2"},de={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2"},ue={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},ce={class:"space-y-2"},_e={class:"flex gap-2"},pe={key:0,class:"text-sm text-destructive"},ve={class:"space-y-2"},ge={class:"flex gap-2"},xe={class:"flex items-center px-3 py-2 bg-muted rounded-md text-sm text-muted-foreground min-w-0"},be={key:0,class:"text-sm text-destructive"},ye={class:"space-y-2"},he={class:"flex items-start gap-4"},we={class:"w-32 h-24 rounded-lg border-2 border-dashed border-muted-foreground/25 bg-muted/50 flex items-center justify-center overflow-hidden shrink-0"},Ve=["src"],ke={key:1,class:"text-center"},Ce={class:"flex-1"},Se={key:0,class:"text-sm text-destructive mt-1"},$e={class:"flex items-center justify-between"},Ue={class:"space-y-1"},Le={class:"flex justify-between items-center"},vt=N({__name:"Create",props:{categories:{}},setup(Te){const R=[{title:"Video Management",href:"/admin/videos"},{title:"Create Video Course",href:""}],o=G({name:"",description:"",google_drive_url:"",duration:null,thumbnail:null,video_category_id:null,is_active:!0}),v=S(!1),g=S(!1),x=S(null),M=n=>{var p;const l=(p=n.target.files)==null?void 0:p[0];if(l){o.thumbnail=l;const U=new FileReader;U.onload=F=>{var L;x.value=(L=F.target)==null?void 0:L.result},U.readAsDataURL(l)}else o.thumbnail=null,x.value=null},A=async()=>{if(o.google_drive_url){g.value=!0;try{console.log("Testing URL:",o.google_drive_url),await new Promise(n=>setTimeout(n,2e3)),alert("Video URL is valid!")}catch(n){console.error("URL test failed:",n),alert("Failed to validate video URL. Please check the link.")}finally{g.value=!1}}},B=n=>{if(!n)return"00:00";const t=Math.floor(n/3600),l=Math.floor(n%3600/60),p=n%60;return t>0?`${t.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`:`${l.toString().padStart(2,"0")}:${p.toString().padStart(2,"0")}`},j=async()=>{v.value=!0,o.post("/admin/videos",{onFinish:()=>{v.value=!1}})};return(n,t)=>(d(),u(P,null,[s(e(q),{title:"Create Video Course"}),s(J,{breadcrumbs:R},{default:r(()=>[i("div",ie,[i("div",le,[s(e(b),{"as-child":"",variant:"ghost"},{default:r(()=>[s(e(T),{href:"/admin/videos"},{default:r(()=>[s(e(Z),{class:"h-4 w-4 mr-2"}),t[6]||(t[6]=a(" Back to Videos "))]),_:1})]),_:1}),t[7]||(t[7]=i("div",null,[i("h1",{class:"text-2xl font-bold"},"Create Video Course"),i("p",{class:"text-muted-foreground"},"Add a new video course to your library")],-1))]),i("form",{onSubmit:E(j,["prevent"]),class:"space-y-6"},[s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(ee),{class:"h-5 w-5"}),t[8]||(t[8]=a(" Video Information "))]),_:1}),s(e(w),null,{default:r(()=>t[9]||(t[9]=[a(" Enter the basic details for your video course ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[i("div",ae,[s(e(f),{for:"name"},{default:r(()=>t[10]||(t[10]=[a("Video Title")])),_:1}),s(e(C),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).name=l),type:"text",placeholder:"Enter video course title...",class:_({"border-destructive":e(o).errors.name}),required:""},null,8,["modelValue","class"]),e(o).errors.name?(d(),u("div",de,m(e(o).errors.name),1)):c("",!0)]),i("div",ne,[s(e(f),{for:"description"},{default:r(()=>t[11]||(t[11]=[a("Description")])),_:1}),s(e(H),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).description=l),placeholder:"Describe what students will learn from this video course...",rows:"5",class:_({"border-destructive":e(o).errors.description})},null,8,["modelValue","class"]),e(o).errors.description?(d(),u("div",ue,m(e(o).errors.description),1)):c("",!0)]),i("div",me,[s(e(f),{for:"video_category_id"},{default:r(()=>t[12]||(t[12]=[a("Category")])),_:1}),s(e(O),{modelValue:e(o).video_category_id,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).video_category_id=l)},{default:r(()=>[s(e(Q),{class:_({"border-destructive":e(o).errors.video_category_id})},{default:r(()=>[s(e(W),{placeholder:"Select a category..."})]),_:1},8,["class"]),s(e(X),null,{default:r(()=>[(d(!0),u(P,null,I(n.categories,l=>(d(),$(e(Y),{key:l.id,value:l.id.toString()},{default:r(()=>[a(m(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(o).errors.video_category_id?(d(),u("div",fe,m(e(o).errors.video_category_id),1)):c("",!0)])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(te),{class:"h-5 w-5"}),t[13]||(t[13]=a(" Video Source "))]),_:1}),s(e(w),null,{default:r(()=>t[14]||(t[14]=[a(" Configure the video source and metadata ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[i("div",ce,[s(e(f),{for:"google_drive_url"},{default:r(()=>t[15]||(t[15]=[a("Google Drive Video URL")])),_:1}),i("div",_e,[s(e(C),{id:"google_drive_url",modelValue:e(o).google_drive_url,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).google_drive_url=l),type:"url",placeholder:"https://drive.google.com/file/d/...",class:_({"border-destructive":e(o).errors.google_drive_url}),required:""},null,8,["modelValue","class"]),s(e(b),{type:"button",variant:"outline",size:"icon",onClick:A,disabled:!e(o).google_drive_url||g.value},{default:r(()=>[g.value?(d(),$(e(oe),{key:0,class:"h-4 w-4 animate-spin"})):(d(),$(e(se),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),e(o).errors.google_drive_url?(d(),u("div",pe,m(e(o).errors.google_drive_url),1)):c("",!0),t[16]||(t[16]=i("div",{class:"text-sm text-muted-foreground"},' Paste the shareable link from Google Drive. Make sure the video is set to "Anyone with the link can view" ',-1))]),i("div",ve,[s(e(f),{for:"duration"},{default:r(()=>t[17]||(t[17]=[a("Duration (seconds)")])),_:1}),i("div",ge,[s(e(C),{id:"duration",modelValue:e(o).duration,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).duration=l),type:"number",min:"1",max:"86400",placeholder:"e.g., 3600 for 1 hour",class:_({"border-destructive":e(o).errors.duration})},null,8,["modelValue","class"]),i("div",xe,m(B(e(o).duration)),1)]),e(o).errors.duration?(d(),u("div",be,m(e(o).errors.duration),1)):c("",!0),t[18]||(t[18]=i("div",{class:"text-sm text-muted-foreground"}," Video duration in seconds (optional - can be auto-detected) ",-1))])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(D),{class:"h-5 w-5"}),t[19]||(t[19]=a(" Thumbnail "))]),_:1}),s(e(w),null,{default:r(()=>t[20]||(t[20]=[a(" Upload a custom thumbnail for your video course ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[i("div",ye,[s(e(f),{for:"thumbnail"},{default:r(()=>t[21]||(t[21]=[a("Custom Thumbnail")])),_:1}),i("div",he,[i("div",we,[x.value?(d(),u("img",{key:0,src:x.value,class:"w-full h-full object-cover",alt:"Thumbnail preview"},null,8,Ve)):(d(),u("div",ke,[s(e(D),{class:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),t[22]||(t[22]=i("div",{class:"text-xs text-muted-foreground"},"Preview",-1))]))]),i("div",Ce,[s(e(C),{id:"thumbnail",type:"file",accept:"image/*",class:_({"border-destructive":e(o).errors.thumbnail}),onChange:M},null,8,["class"]),e(o).errors.thumbnail?(d(),u("div",Se,m(e(o).errors.thumbnail),1)):c("",!0),t[23]||(t[23]=i("div",{class:"text-sm text-muted-foreground mt-1"}," Recommended: 1280x720px (16:9 ratio), JPG or PNG, max 2MB ",-1))])])])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(z),{class:"h-5 w-5"}),t[24]||(t[24]=a(" Settings "))]),_:1}),s(e(w),null,{default:r(()=>t[25]||(t[25]=[a(" Configure the video course settings ")])),_:1})]),_:1}),s(e(h),null,{default:r(()=>[i("div",$e,[i("div",Ue,[s(e(f),null,{default:r(()=>t[26]||(t[26]=[a("Active Status")])),_:1}),t[27]||(t[27]=i("div",{class:"text-sm text-muted-foreground"}," Make this video course available to students ",-1))]),s(e(K),{checked:e(o).is_active,"onUpdate:checked":t[5]||(t[5]=l=>e(o).is_active=l)},null,8,["checked"])])]),_:1})]),_:1}),i("div",Le,[s(e(b),{"as-child":"",variant:"outline"},{default:r(()=>[s(e(T),{href:"/admin/videos"},{default:r(()=>t[28]||(t[28]=[a("Cancel")])),_:1})]),_:1}),s(e(b),{type:"submit",disabled:v.value||e(o).processing},{default:r(()=>[s(e(re),{class:"h-4 w-4 mr-2"}),a(" "+m(v.value?"Creating...":"Create Video Course"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{vt as default};
