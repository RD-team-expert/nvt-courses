import{d as B,r as w,c as q,a,o as r,b as d,u as v,m as O,w as R,e,f as y,g as k,v as E,n as j,F as _,h as D,t as m,i as S,j as $}from"./app-n_cIwlLT.js";import{X as H,C as Y,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Rz_S81Vw.js";import{_ as Q}from"./Pagination.vue_vue_type_script_setup_true_lang-D4dbHMXX.js";import{c as h}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B9XjMpGI.js";import{_ as W}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BgSmG8al.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=h("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=h("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=h("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=h("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=h("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Z={class:"flex h-full flex-1 flex-col gap-4 p-4 sm:p-6"},ee={class:"bg-white rounded-xl border border-sidebar-border/70 p-4 sm:p-6 shadow-sm"},te={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4"},se={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},le={class:"relative w-full sm:w-64"},oe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ae={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200 animate-fadeIn"},re={class:"flex flex-col sm:flex-row gap-4"},ne={class:"flex-1"},ie=["value"],de={class:"flex-1"},ce=["value"],ue={class:"space-y-4"},me={key:0,class:"text-center py-8"},fe={class:"text-gray-500"},ve={class:"flex items-start flex-1"},be={class:"w-10 h-10 rounded-full bg-gray-200 flex-shrink-0 mr-3 overflow-hidden"},ge=["src"],xe={key:1,class:"w-full h-full flex items-center justify-center text-gray-500 font-medium text-sm"},pe={class:"flex-1 min-w-0"},ye={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},he={class:"text-sm font-medium text-gray-900 break-words"},we={class:"mt-1 sm:mt-0 text-xs text-gray-500 sm:ml-4 whitespace-nowrap"},_e={class:"flex flex-wrap items-center mt-2 gap-2"},ke={class:"flex items-center text-xs text-gray-500"},De={key:1,class:"flex items-center text-xs text-gray-500"},Ce={class:"mt-6"},Ae=B({__name:"All",props:{activities:Object,isAdmin:{type:Boolean,default:!1}},setup(C){const A=C,F=[{title:"Dashboard",href:"/dashboard"},{title:"All Activities",href:"/activities"}],c=w(""),x=w(!1),b=w(""),u=w(""),I=[{value:"",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"enroll",label:"Enroll"},{value:"login",label:"Login"},{value:"complete",label:"Complete"},{value:"attendance",label:"Attendance"}],L=[{value:"",label:"All Time"},{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}],M=q(()=>{var n;return(n=A.activities)!=null&&n.data?A.activities.data.filter(t=>{var p;const s=!c.value||t.description.toLowerCase().includes(c.value.toLowerCase())||((p=t.user)==null?void 0:p.name)&&t.user.name.toLowerCase().includes(c.value.toLowerCase()),i=!b.value||t.action===b.value;let l=!0;if(u.value){const g=new Date(t.created_at),f=new Date;if(f.setHours(0,0,0,0),u.value==="today"){const o=new Date(f);o.setDate(o.getDate()+1),l=g>=f&&g<o}else if(u.value==="yesterday"){const o=new Date(f);o.setDate(o.getDate()-1),l=g>=o&&g<f}else if(u.value==="week"){const o=new Date(f);o.setDate(o.getDate()-o.getDay()),l=g>=o}else if(u.value==="month"){const o=new Date(f.getFullYear(),f.getMonth(),1);l=g>=o}}return s&&i&&l}):[]}),T=n=>{if(!n)return"";const t=new Date(n);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},U=n=>{if(!n)return"";const t=new Date(n),i=Math.floor((new Date-t)/1e3);if(i<60)return"just now";if(i<3600){const l=Math.floor(i/60);return`${l} minute${l>1?"s":""} ago`}else if(i<86400){const l=Math.floor(i/3600);return`${l} hour${l>1?"s":""} ago`}else{const l=Math.floor(i/86400);return`${l} day${l>1?"s":""} ago`}},V=n=>({create:"bg-blue-100 text-blue-800 border-blue-200",update:"bg-green-100 text-green-800 border-green-200",delete:"bg-red-100 text-red-800 border-red-200",enroll:"bg-purple-100 text-purple-800 border-purple-200",login:"bg-yellow-100 text-yellow-800 border-yellow-200",complete:"bg-indigo-100 text-indigo-800 border-indigo-200",attendance:"bg-teal-100 text-teal-800 border-teal-200"})[n]||"bg-gray-100 text-gray-800 border-gray-200",N=()=>{c.value="",b.value="",u.value="",x.value=!1};return(n,t)=>(r(),a(_,null,[d(v(O),{title:"All Activities"}),d(z,{breadcrumbs:F},{default:R(()=>[e("div",Z,[e("div",ee,[e("div",te,[t[6]||(t[6]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-0"}," All Activities ",-1)),e("div",se,[e("div",le,[e("div",oe,[d(v(K),{class:"h-4 w-4 text-gray-400"})]),k(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s),type:"text",placeholder:"Search activities...",class:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[E,c.value]]),c.value?(r(),a("button",{key:0,onClick:t[1]||(t[1]=s=>c.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[d(v(H),{class:"h-4 w-4 text-gray-400 hover:text-gray-600"})])):y("",!0)]),e("button",{onClick:t[2]||(t[2]=s=>x.value=!x.value),class:"flex items-center justify-center gap-1 px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},[d(v(J),{class:"h-4 w-4"}),t[5]||(t[5]=e("span",null,"Filters",-1)),d(v(G),{class:j(["h-4 w-4 transition-transform",{"rotate-180":x.value}])},null,8,["class"])])])]),x.value?(r(),a("div",ae,[e("div",re,[e("div",ne,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action Type",-1)),k(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>b.value=s),class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(r(),a(_,null,D(I,s=>e("option",{key:s.value,value:s.value},m(s.label),9,ie)),64))],512),[[S,b.value]])]),e("div",de,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Range",-1)),k(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(r(),a(_,null,D(L,s=>e("option",{key:s.value,value:s.value},m(s.label),9,ce)),64))],512),[[S,u.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:N,class:"w-full sm:w-auto px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Clear Filters ")])])])):y("",!0),e("div",ue,[M.value.length===0?(r(),a("div",me,[d(v(Y),{class:"h-12 w-12 mx-auto text-gray-400 mb-2"}),t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900"},"No activities found",-1)),e("p",fe,m(c.value||b.value||u.value?"Try adjusting your filters":"Activity history will appear here"),1)])):y("",!0),(r(!0),a(_,null,D(M.value,s=>{var i,l,p;return r(),a("div",{key:s.id,class:"flex flex-col sm:flex-row sm:items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",ve,[e("div",be,[(i=s.user)!=null&&i.avatar?(r(),a("img",{key:0,src:s.user.avatar,class:"w-full h-full object-cover",alt:"User avatar"},null,8,ge)):(r(),a("div",xe,m((l=s.user)!=null&&l.name?s.user.name.charAt(0).toUpperCase():"S"),1))]),e("div",pe,[e("div",ye,[e("p",he,m(s.description),1),e("div",we,m(U(s.created_at)),1)]),e("div",_e,[s.action?(r(),a("span",{key:0,class:j(["px-2 py-1 text-xs rounded-full border",V(s.action)])},m(s.action),3)):y("",!0),e("div",ke,[d(v(X),{class:"h-3 w-3 mr-1"}),$(" "+m(T(s.created_at)),1)]),(p=s.user)!=null&&p.name?(r(),a("div",De,[d(v(P),{class:"h-3 w-3 mr-1"}),$(" "+m(s.user.name),1)])):y("",!0)])])])])}),128))]),e("div",Ce,[d(Q,{links:C.activities.links},null,8,["links"])])])])]),_:1})],64))}}),Le=W(Ae,[["__scopeId","data-v-d7ddf825"]]);export{Le as default};
