import{d as E,C as I,k as V,o as r,w as a,e as i,b as l,u as e,j as d,l as O,a as n,f as u,t as m,g as k,y as $,F as q,h,P as A}from"./app-iYB6CK9s.js";import{_ as B}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import{E as M}from"./Editor-DwVqN609.js";import{_ as T,b as F,c as L,a as z}from"./CardTitle.vue_vue_type_script_setup_true_lang-I7s4fTue.js";import{_ as x}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-CluRSO0O.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-DyyG2Z7t.js";import{_ as U,a as S,b as w,c as C,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-Dk196kS3.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./index-BHiy4VMt.js";import"./chevron-down-CwfBg4LM.js";import"./check-CHod0wEF.js";const R={class:"px-4 sm:px-0"},G={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},H={class:"col-span-full"},J={key:0,class:"text-destructive text-sm mt-1"},K={class:"col-span-1"},Q={key:0,class:"text-destructive text-sm mt-1"},W={class:"col-span-1"},X={class:"flex items-center space-x-4 mt-2"},Y={class:"flex items-center"},Z={class:"flex items-center"},ee={key:0,class:"mt-1 text-sm text-destructive"},te={class:"col-span-1"},se={key:0,class:"text-destructive text-sm mt-1"},le={class:"col-span-1"},ae={key:0,class:"text-destructive text-sm mt-1"},ie={class:"col-span-1"},oe={key:0,class:"text-destructive text-sm mt-1"},de={class:"col-span-1"},re={key:0,class:"text-destructive text-sm mt-1"},ne={class:"mb-6"},ue={class:"flex justify-between items-center mb-4"},me={class:"space-y-4"},pe={class:"flex justify-between items-center mb-3"},ce={class:"font-medium"},ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},fe={key:0,class:"text-destructive text-sm mt-1"},_e={key:0,class:"text-destructive text-sm mt-1"},be={key:0,class:"text-destructive text-sm mt-1"},ge={key:0,class:"text-destructive text-sm mt-1"},ye={class:"md:col-span-2"},xe={key:0,class:"text-destructive text-sm mt-1"},Ve={key:0,class:"text-destructive text-sm mt-2"},ke={class:"col-span-full"},$e={key:0,class:"text-destructive text-sm mt-1"},Ue={key:1,class:"mt-2"},Se=["src"],we={class:"col-span-full"},Ce={key:0,class:"text-destructive text-sm mt-1"},De={class:"flex justify-end space-x-4 mt-6"},je={key:0},Pe={key:1},ze=E({__name:"Edit",props:{course:Object},setup(D){const v=D,y=p=>{if(!p)return"";const t=p.split("T")[0].split("-");if(t.length!==3){const o=new Date(p);return isNaN(o.getTime())?"":o.toISOString().split("T")[0]}return t.join("-")},s=I({name:v.course.name,description:v.course.description,start_date:y(v.course.start_date),end_date:y(v.course.end_date),status:v.course.status||"pending",level:v.course.level||"",privacy:v.course.privacy||"public",duration:v.course.duration||"",image:null,availabilities:v.course.availabilities&&v.course.availabilities.length?v.course.availabilities.map(p=>({id:p.id,start_date:p.start_date?new Date(p.start_date).toISOString().slice(0,16):"",end_date:p.end_date?new Date(p.end_date).toISOString().slice(0,16):"",capacity:p.capacity||25,notes:p.notes||"",status:p.status||"active"})):[{start_date:"",end_date:"",capacity:25,notes:"",status:"active"}]});function j(){s.availabilities.length<5&&s.availabilities.push({start_date:"",end_date:"",capacity:25,notes:"",status:"active"})}function P(p){s.availabilities.length>1&&s.availabilities.splice(p,1)}function N(){s.start_date&&(s.start_date=y(s.start_date)),s.end_date&&(s.end_date=y(s.end_date)),s.post(`/admin/courses/${v.course.id}?_method=PUT`,{forceFormData:!0})}return(p,t)=>(r(),V(B,null,{default:a(()=>[i("div",R,[l(e(T),{class:"max-w-4xl"},{default:a(()=>[l(e(F),null,{default:a(()=>[l(e(L),null,{default:a(()=>t[10]||(t[10]=[d("Edit Course")])),_:1})]),_:1}),l(e(z),null,{default:a(()=>[i("form",{onSubmit:O(N,["prevent"])},[i("div",G,[i("div",H,[l(e(c),null,{default:a(()=>t[11]||(t[11]=[d("Course Name")])),_:1}),l(e(b),{type:"text",modelValue:e(s).name,"onUpdate:modelValue":t[0]||(t[0]=o=>e(s).name=o)},null,8,["modelValue"]),e(s).errors.name?(r(),n("div",J,m(e(s).errors.name),1)):u("",!0)]),i("div",K,[l(e(c),null,{default:a(()=>t[12]||(t[12]=[d("Status")])),_:1}),l(e(U),{modelValue:e(s).status,"onUpdate:modelValue":t[1]||(t[1]=o=>e(s).status=o)},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(w),{placeholder:"Select status"})]),_:1}),l(e(C),null,{default:a(()=>[l(e(g),{value:"pending"},{default:a(()=>t[13]||(t[13]=[d("Pending")])),_:1}),l(e(g),{value:"in_progress"},{default:a(()=>t[14]||(t[14]=[d("In Progress")])),_:1}),l(e(g),{value:"completed"},{default:a(()=>t[15]||(t[15]=[d("Completed")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.status?(r(),n("div",Q,m(e(s).errors.status),1)):u("",!0)]),i("div",W,[l(e(c),{class:"text-base font-semibold"},{default:a(()=>t[16]||(t[16]=[d("Course Privacy")])),_:1}),i("div",X,[i("div",Y,[k(i("input",{id:"privacy-public",name:"privacy",type:"radio",value:"public","onUpdate:modelValue":t[2]||(t[2]=o=>e(s).privacy=o),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[$,e(s).privacy]]),l(e(c),{for:"privacy-public",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:a(()=>t[17]||(t[17]=[d(" 🌍 Public ")])),_:1})]),i("div",Z,[k(i("input",{id:"privacy-private",name:"privacy",type:"radio",value:"private","onUpdate:modelValue":t[3]||(t[3]=o=>e(s).privacy=o),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[$,e(s).privacy]]),l(e(c),{for:"privacy-private",class:"ml-2 block text-sm text-gray-900 cursor-pointer"},{default:a(()=>t[18]||(t[18]=[d(" 🔒 Private ")])),_:1})])]),t[19]||(t[19]=i("p",{class:"mt-1 text-xs text-muted-foreground"}," Public courses are visible to everyone. Private courses are only visible to enrolled users. ",-1)),e(s).errors.privacy?(r(),n("div",ee,m(e(s).errors.privacy),1)):u("",!0)]),i("div",te,[l(e(c),null,{default:a(()=>t[20]||(t[20]=[d("Level (Optional)")])),_:1}),l(e(U),{modelValue:e(s).level,"onUpdate:modelValue":t[4]||(t[4]=o=>e(s).level=o)},{default:a(()=>[l(e(S),null,{default:a(()=>[l(e(w),{placeholder:"Select Level"})]),_:1}),l(e(C),null,{default:a(()=>[l(e(g),{value:"beginner"},{default:a(()=>t[21]||(t[21]=[d("Beginner")])),_:1}),l(e(g),{value:"intermediate"},{default:a(()=>t[22]||(t[22]=[d("Intermediate")])),_:1}),l(e(g),{value:"advanced"},{default:a(()=>t[23]||(t[23]=[d("Advanced")])),_:1})]),_:1})]),_:1},8,["modelValue"]),e(s).errors.level?(r(),n("div",se,m(e(s).errors.level),1)):u("",!0)]),i("div",le,[l(e(c),null,{default:a(()=>t[24]||(t[24]=[d("Duration (hours)")])),_:1}),l(e(b),{type:"number",step:"0.1",modelValue:e(s).duration,"onUpdate:modelValue":t[5]||(t[5]=o=>e(s).duration=o)},null,8,["modelValue"]),e(s).errors.duration?(r(),n("div",ae,m(e(s).errors.duration),1)):u("",!0)]),i("div",ie,[l(e(c),null,{default:a(()=>t[25]||(t[25]=[d("Start Date")])),_:1}),l(e(b),{type:"date",modelValue:e(s).start_date,"onUpdate:modelValue":t[6]||(t[6]=o=>e(s).start_date=o)},null,8,["modelValue"]),e(s).errors.start_date?(r(),n("div",oe,m(e(s).errors.start_date),1)):u("",!0)]),i("div",de,[l(e(c),null,{default:a(()=>t[26]||(t[26]=[d("End Date")])),_:1}),l(e(b),{type:"date",modelValue:e(s).end_date,"onUpdate:modelValue":t[7]||(t[7]=o=>e(s).end_date=o)},null,8,["modelValue"]),e(s).errors.end_date?(r(),n("div",re,m(e(s).errors.end_date),1)):u("",!0)]),i("div",ne,[i("div",ue,[t[27]||(t[27]=i("h2",{class:"text-lg font-semibold"},"Course Session Schedules",-1)),l(e(x),{type:"button",onClick:j,disabled:e(s).availabilities.length>=5||e(s).processing,variant:"default"},{default:a(()=>[d(" Add Session Schedule ("+m(e(s).availabilities.length)+"/5) ",1)]),_:1},8,["disabled"])]),i("div",me,[(r(!0),n(q,null,h(e(s).availabilities,(o,f)=>(r(),n("div",{key:f,class:"border border-gray-300 rounded-lg p-4 bg-gray-50"},[i("div",pe,[i("h3",ce,"Session Schedule "+m(f+1),1),e(s).availabilities.length>1?(r(),V(e(x),{key:0,type:"button",onClick:_=>P(f),variant:"destructive",size:"sm",disabled:e(s).processing},{default:a(()=>t[28]||(t[28]=[d(" Remove ")])),_:2},1032,["onClick","disabled"])):u("",!0)]),i("div",ve,[i("div",null,[l(e(c),null,{default:a(()=>t[29]||(t[29]=[d("Start Date")])),_:1}),l(e(b),{type:"datetime-local",modelValue:o.start_date,"onUpdate:modelValue":_=>o.start_date=_,disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.start_date`]?(r(),n("div",fe,m(e(s).errors[`availabilities.${f}.start_date`]),1)):u("",!0)]),i("div",null,[l(e(c),null,{default:a(()=>t[30]||(t[30]=[d("End Date")])),_:1}),l(e(b),{type:"datetime-local",modelValue:o.end_date,"onUpdate:modelValue":_=>o.end_date=_,disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.end_date`]?(r(),n("div",_e,m(e(s).errors[`availabilities.${f}.end_date`]),1)):u("",!0)]),i("div",null,[l(e(c),null,{default:a(()=>t[31]||(t[31]=[d("Seats Available")])),_:1}),l(e(b),{type:"number",modelValue:o.capacity,"onUpdate:modelValue":_=>o.capacity=_,modelModifiers:{number:!0},min:"1",max:"1000",disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),t[32]||(t[32]=i("p",{class:"text-xs text-muted-foreground mt-1"},"Maximum number of seats available for this schedule",-1)),e(s).errors[`availabilities.${f}.capacity`]?(r(),n("div",be,m(e(s).errors[`availabilities.${f}.capacity`]),1)):u("",!0)]),i("div",null,[l(e(c),null,{default:a(()=>t[33]||(t[33]=[d("Sessions")])),_:1}),l(e(b),{type:"number",modelValue:o.sessions,"onUpdate:modelValue":_=>o.sessions=_,modelModifiers:{number:!0},min:"1",max:"100",disabled:e(s).processing,required:""},null,8,["modelValue","onUpdate:modelValue","disabled"]),t[34]||(t[34]=i("p",{class:"text-xs text-muted-foreground mt-1"},"Number of sessions in this schedule",-1)),e(s).errors[`availabilities.${f}.sessions`]?(r(),n("div",ge,m(e(s).errors[`availabilities.${f}.sessions`]),1)):u("",!0)]),i("div",ye,[l(e(c),null,{default:a(()=>t[35]||(t[35]=[d("Notes (Optional)")])),_:1}),l(e(b),{type:"text",modelValue:o.notes,"onUpdate:modelValue":_=>o.notes=_,placeholder:"Special instructions or requirements",disabled:e(s).processing},null,8,["modelValue","onUpdate:modelValue","disabled"]),e(s).errors[`availabilities.${f}.notes`]?(r(),n("div",xe,m(e(s).errors[`availabilities.${f}.notes`]),1)):u("",!0)])])]))),128))]),e(s).errors.availabilities?(r(),n("div",Ve,m(e(s).errors.availabilities),1)):u("",!0)]),i("div",ke,[l(e(c),null,{default:a(()=>t[36]||(t[36]=[d("Course Image (Optional)")])),_:1}),l(e(b),{type:"file",onInput:t[8]||(t[8]=o=>e(s).image=o.target.files[0])}),e(s).errors.image?(r(),n("div",$e,m(e(s).errors.image),1)):u("",!0),v.course.image_path?(r(),n("div",Ue,[t[37]||(t[37]=i("p",{class:"text-sm text-muted-foreground"},"Current image:",-1)),i("img",{src:`/storage/${v.course.image_path}`,alt:"Current course image",class:"mt-1 h-32 w-full sm:w-48 object-cover rounded"},null,8,Se)])):u("",!0)]),i("div",we,[l(e(c),null,{default:a(()=>t[38]||(t[38]=[d("Description")])),_:1}),l(e(M),{modelValue:e(s).description,"onUpdate:modelValue":t[9]||(t[9]=o=>e(s).description=o),"api-key":"r1racrxd2joy9wp9xp9sj91ka9j4m3humenifqvwtx9s6i3y",init:{toolbar_mode:"sliding",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",mobile:{menubar:!1,toolbar:"undo redo | bold italic | link | bullist numlist",toolbar_mode:"scrolling"}}},null,8,["modelValue"]),e(s).errors.description?(r(),n("div",Ce,m(e(s).errors.description),1)):u("",!0)])]),i("div",De,[l(e(x),{variant:"outline","as-child":""},{default:a(()=>[l(e(A),{href:p.route("admin.courses.index")},{default:a(()=>t[39]||(t[39]=[d(" Cancel ")])),_:1},8,["href"])]),_:1}),l(e(x),{type:"submit",disabled:e(s).processing},{default:a(()=>[e(s).processing?(r(),n("span",je,"Updating...")):(r(),n("span",Pe,"Update Course"))]),_:1},8,["disabled"])])],32)]),_:1})]),_:1})])]),_:1}))}});export{ze as default};
