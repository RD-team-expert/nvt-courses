import{d as K,r as U,g as _,o as r,w as s,e as l,h as g,b as t,u as e,P as v,f as o,t as d,a as f,F as p,i as b,n as Q,W as D}from"./app-CwrLmt4H.js";import{_ as Y}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DVdVdrtJ.js";import{c as Z,_ as c}from"./Button.vue_vue_type_script_setup_true_lang-DNqWTjl2.js";import{_ as k}from"./Card.vue_vue_type_script_setup_true_lang-A8WG6GOp.js";import{_ as w}from"./CardContent.vue_vue_type_script_setup_true_lang-C0P-sboE.js";import{_ as ee}from"./CardDescription.vue_vue_type_script_setup_true_lang-Bu6T4zC6.js";import{_ as te}from"./CardHeader.vue_vue_type_script_setup_true_lang-B1JXwWzJ.js";import{_ as se}from"./CardTitle.vue_vue_type_script_setup_true_lang-CfsAIejd.js";import{_ as M,a as A,b as T,c as z,d as S}from"./SelectValue.vue_vue_type_script_setup_true_lang-FEW3_Jd3.js";import{_ as ae,a as le,b as N,c as x,d as ne,e as h}from"./TableHeader.vue_vue_type_script_setup_true_lang-DfWzzyAT.js";import{_ as C}from"./index-M46Jp1H4.js";import{B as P,c as re,e as oe,m as ie,q as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-KHSjz1qE.js";import{_ as B}from"./Checkbox.vue_vue_type_script_setup_true_lang-BDiYDM-D.js";import{_ as ue,a as me}from"./index-CmixqKtp.js";import{D as fe}from"./download-CzdI61Su.js";import{U as j,X as ce}from"./_plugin-vue_export-helper-C_B9qUyA.js";import{T as I}from"./tag-BZiCBJEk.js";import{C as _e}from"./crown-DD7hAWZW.js";import{T as ve}from"./triangle-alert-Cy80iz42.js";import{E as ge}from"./eye-DVdFhXjT.js";import{C as xe}from"./chevron-left-D8mm_U83.js";import"./useForwardPropsEmits-Bv9ZfZA8.js";import"./Presence-D5fWEiXU.js";import"./ConfigProvider-DYoe7gBq.js";import"./useForwardExpose-aFpDTqrD.js";import"./index-DJ8elu12.js";import"./Teleport-jnYm4bVA.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BFDwzHBd.js";import"./Collection-B9kSM2sl.js";import"./usePrimitiveElement-D1W1Ae6N.js";import"./check-D3O_WcEY.js";import"./useSize-d0DSIEo7.js";import"./index-Bl0m2vYu.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-xEP9wB1T.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-wO9CZrtp.js";import"./clock-B3hXeEnL.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=Z("ImportIcon",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),he={class:"px-4 sm:px-0 space-y-6"},pe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},ye={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},be={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},ke={class:"flex items-center"},we={class:"shrink-0"},$e={class:"w-10 h-10 bg-primary rounded-lg flex items-center justify-center"},Le={class:"ml-4 flex-1"},Ue={class:"text-2xl font-bold text-foreground"},Se={class:"flex items-center"},Ce={class:"shrink-0"},je={class:"w-10 h-10 bg-green-500 rounded-lg flex items-center justify-center"},De={class:"ml-4 flex-1"},Me={class:"text-2xl font-bold text-foreground"},Ae={class:"flex items-center"},Te={class:"shrink-0"},ze={class:"w-10 h-10 bg-purple-500 rounded-lg flex items-center justify-center"},Ne={class:"ml-4 flex-1"},Pe={class:"text-2xl font-bold text-foreground"},Be={class:"flex items-center"},Ie={class:"shrink-0"},Ve={class:"w-10 h-10 bg-orange-500 rounded-lg flex items-center justify-center"},Ee={class:"ml-4 flex-1"},He={class:"text-2xl font-bold text-foreground"},We={class:"flex items-center justify-between mb-4"},Fe={class:"text-amber-800 font-medium"},Oe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},qe={class:"flex gap-2"},Re={class:"flex gap-2"},Xe={class:"overflow-x-auto"},Ge={class:"flex items-center space-x-3"},Je={class:"font-medium text-foreground"},Ke={class:"text-sm text-muted-foreground"},Qe={key:0,class:"text-xs text-muted-foreground"},Ye={key:0},Ze={class:"font-medium text-foreground"},et={class:"text-sm text-muted-foreground"},tt={key:1,class:"text-sm text-muted-foreground italic"},st={key:1,class:"text-sm text-muted-foreground italic"},at={key:0,class:"space-y-1"},lt={class:"font-medium text-foreground"},nt={key:0,class:"text-xs text-muted-foreground"},rt={key:1,class:"text-sm text-muted-foreground italic"},ot={class:"flex items-center justify-end space-x-2"},it={key:0,class:"flex items-center justify-between pt-4"},dt={class:"flex-1 flex justify-between sm:hidden"},ut={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},mt={class:"text-sm text-muted-foreground"},ft={class:"flex space-x-1"},ct={key:1,class:"text-center py-12"},Zt=K({__name:"Index",props:{users:Object,departments:Array,userLevels:Array,stats:Object},setup(i){const E=i,m=U([]);U("");const $=U(""),L=U(""),H=()=>{if(m.value.length===0){alert("Please select users first");return}if(!$.value){alert("Please select a department");return}D.post("/admin/users/bulk-assign-department",{user_ids:m.value,department_id:$.value},{preserveState:!0,onSuccess:()=>{alert("Users assigned to department successfully!"),m.value=[]},onError:u=>{console.error("Bulk assignment failed:",u),alert("Failed to assign users. Please try again.")}})},W=()=>{if(m.value.length===0){alert("Please select users first");return}if(!L.value){alert("Please select a level");return}D.post("/admin/users/bulk-assign-level",{user_ids:m.value,user_level_id:L.value},{preserveState:!0,onSuccess:()=>{alert("Users assigned to level successfully!"),m.value=[]},onError:u=>{console.error("Bulk assignment failed:",u),alert("Failed to assign users. Please try again.")}})},F=u=>{u?m.value=E.users.data.map(a=>a.id):m.value=[]},O=u=>({L1:"secondary",L2:"default",L3:"outline",L4:"destructive"})[u]||"secondary",q=u=>{switch(u){case"active":return"default";case"inactive":return"destructive";case"on_leave":return"secondary";default:return"outline"}},R=()=>{m.value=[]},X=u=>{$.value=u==="select"?"":u},G=u=>{L.value=u==="select"?"":u},J=[{name:"Dashboard",href:route("dashboard")},{name:"User Management",href:route("admin.users.assignment")},{name:"User Assignment",href:route("admin.users.assignment")}];return(u,a)=>(r(),_(Y,{breadcrumbs:J},{default:s(()=>[l("div",he,[l("div",pe,[a[3]||(a[3]=l("div",null,[l("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"User Management & Assignment"),l("p",{class:"text-sm text-muted-foreground mt-1"},"Manage user assignments, departments, and organizational levels")],-1)),l("div",ye,[t(e(c),{as:e(v),href:u.route("admin.users.import"),variant:"outline"},{default:s(()=>[t(e(V),{class:"mr-2 h-4 w-4"}),a[1]||(a[1]=o(" Import Users "))]),_:1},8,["as","href"]),t(e(c),{as:e(v),href:u.route("admin.users.export")},{default:s(()=>[t(e(fe),{class:"mr-2 h-4 w-4"}),a[2]||(a[2]=o(" Export Users "))]),_:1},8,["as","href"])])]),l("div",be,[t(e(k),null,{default:s(()=>[t(e(w),{class:"p-6"},{default:s(()=>[l("div",ke,[l("div",we,[l("div",$e,[t(e(j),{class:"h-5 w-5 text-primary-foreground"})])]),l("div",Le,[a[4]||(a[4]=l("div",{class:"text-sm font-medium text-muted-foreground"},"Total Users",-1)),l("div",Ue,d(i.stats.total_users||0),1)])])]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(w),{class:"p-6"},{default:s(()=>[l("div",Se,[l("div",Ce,[l("div",je,[t(e(P),{class:"h-5 w-5 text-white"})])]),l("div",De,[a[5]||(a[5]=l("div",{class:"text-sm font-medium text-muted-foreground"},"With Departments",-1)),l("div",Me,d(i.stats.users_with_departments||0),1)])])]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(w),{class:"p-6"},{default:s(()=>[l("div",Ae,[l("div",Te,[l("div",ze,[t(e(I),{class:"h-5 w-5 text-white"})])]),l("div",Ne,[a[6]||(a[6]=l("div",{class:"text-sm font-medium text-muted-foreground"},"With Levels",-1)),l("div",Pe,d(i.stats.users_with_levels||0),1)])])]),_:1})]),_:1}),t(e(k),null,{default:s(()=>[t(e(w),{class:"p-6"},{default:s(()=>[l("div",Be,[l("div",Ie,[l("div",Ve,[t(e(_e),{class:"h-5 w-5 text-white"})])]),l("div",Ee,[a[7]||(a[7]=l("div",{class:"text-sm font-medium text-muted-foreground"},"With Managers",-1)),l("div",He,d(i.stats.users_with_managers||0),1)])])]),_:1})]),_:1})]),m.value.length>0?(r(),_(e(ue),{key:0,class:"border-amber-200 bg-amber-50"},{default:s(()=>[t(e(ve),{class:"h-4 w-4 text-amber-600"}),t(e(me),null,{default:s(()=>[l("div",We,[l("span",Fe,d(m.value.length)+" user(s) selected",1),t(e(c),{onClick:R,variant:"ghost",size:"sm",class:"text-amber-600 hover:text-amber-800"},{default:s(()=>[t(e(ce),{class:"mr-1 h-3 w-3"}),a[8]||(a[8]=o(" Clear Selection "))]),_:1})]),l("div",Oe,[l("div",qe,[t(e(M),{"model-value":$.value||"select","onUpdate:modelValue":X},{default:s(()=>[t(e(A),{class:"flex-1"},{default:s(()=>[t(e(T),{placeholder:"Select Department"})]),_:1}),t(e(z),null,{default:s(()=>[t(e(S),{value:"select"},{default:s(()=>a[9]||(a[9]=[o("Select Department")])),_:1}),(r(!0),f(p,null,b(i.departments,n=>(r(),_(e(S),{key:n.id,value:n.id.toString()},{default:s(()=>[o(d(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),t(e(c),{onClick:H,variant:"outline"},{default:s(()=>[t(e(P),{class:"mr-2 h-4 w-4"}),a[10]||(a[10]=o(" Assign Dept "))]),_:1})]),l("div",Re,[t(e(M),{"model-value":L.value||"select","onUpdate:modelValue":G},{default:s(()=>[t(e(A),{class:"flex-1"},{default:s(()=>[t(e(T),{placeholder:"Select Level"})]),_:1}),t(e(z),null,{default:s(()=>[t(e(S),{value:"select"},{default:s(()=>a[11]||(a[11]=[o("Select Level")])),_:1}),(r(!0),f(p,null,b(i.userLevels,n=>(r(),_(e(S),{key:n.id,value:n.id.toString()},{default:s(()=>[o(d(n.code)+" - "+d(n.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"]),t(e(c),{onClick:W,variant:"outline"},{default:s(()=>[t(e(I),{class:"mr-2 h-4 w-4"}),a[12]||(a[12]=o(" Assign Level "))]),_:1})])])]),_:1})]),_:1})):g("",!0),t(e(k),null,{default:s(()=>[t(e(te),null,{default:s(()=>[t(e(se),{class:"flex items-center"},{default:s(()=>[t(e(j),{class:"mr-2 h-5 w-5"}),a[13]||(a[13]=o(" User Management "))]),_:1}),t(e(ee),null,{default:s(()=>a[14]||(a[14]=[o("Manage user assignments and organizational structure")])),_:1})]),_:1}),t(e(w),null,{default:s(()=>[l("div",Xe,[t(e(ae),null,{default:s(()=>[t(e(le),null,{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(x),{class:"w-12"},{default:s(()=>[t(e(B),{"onUpdate:checked":F,checked:m.value.length===i.users.data.length&&i.users.data.length>0,indeterminate:m.value.length>0&&m.value.length<i.users.data.length},null,8,["checked","indeterminate"])]),_:1}),t(e(x),null,{default:s(()=>a[15]||(a[15]=[o("User")])),_:1}),t(e(x),null,{default:s(()=>a[16]||(a[16]=[o("Department")])),_:1}),t(e(x),null,{default:s(()=>a[17]||(a[17]=[o("Level")])),_:1}),t(e(x),null,{default:s(()=>a[18]||(a[18]=[o("Manager")])),_:1}),t(e(x),null,{default:s(()=>a[19]||(a[19]=[o("Status")])),_:1}),t(e(x),{class:"text-right"},{default:s(()=>a[20]||(a[20]=[o("Actions")])),_:1})]),_:1})]),_:1}),t(e(ne),null,{default:s(()=>[(r(!0),f(p,null,b(i.users.data,n=>(r(),_(e(N),{key:n.id,class:Q([{"bg-primary/5":m.value.includes(n.id)},"hover:bg-muted/50"])},{default:s(()=>[t(e(h),null,{default:s(()=>[t(e(B),{checked:m.value,"onUpdate:checked":a[0]||(a[0]=y=>m.value=y),value:n.id},null,8,["checked","value"])]),_:2},1024),t(e(h),null,{default:s(()=>[l("div",Ge,[t(e(re),null,{default:s(()=>[t(e(oe),{class:"bg-muted text-muted-foreground"},{default:s(()=>[o(d(n.name.charAt(0).toUpperCase()),1)]),_:2},1024)]),_:2},1024),l("div",null,[l("div",Je,d(n.name),1),l("div",Ke,d(n.email),1),n.employee_code?(r(),f("div",Qe,"ID: "+d(n.employee_code),1)):g("",!0)])])]),_:2},1024),t(e(h),null,{default:s(()=>[n.department?(r(),f("div",Ye,[l("div",Ze,d(n.department.name),1),l("div",et,d(n.department.department_code),1)])):(r(),f("div",tt," No department assigned "))]),_:2},1024),t(e(h),null,{default:s(()=>[n.user_level?(r(),_(e(C),{key:0,variant:O(n.user_level.code)},{default:s(()=>[o(d(n.user_level.code)+" - "+d(n.user_level.name),1)]),_:2},1032,["variant"])):(r(),f("span",st," No level assigned "))]),_:2},1024),t(e(h),null,{default:s(()=>[n.managers&&n.managers.length>0?(r(),f("div",at,[(r(!0),f(p,null,b(n.managers.slice(0,2),y=>(r(),f("div",{key:y.id,class:"text-sm"},[l("span",lt,d(y.name),1),t(e(C),{variant:"outline",class:"ml-1 text-xs"},{default:s(()=>[o(d(y.pivot.role_type),1)]),_:2},1024)]))),128)),n.managers.length>2?(r(),f("div",nt," +"+d(n.managers.length-2)+" more ",1)):g("",!0)])):(r(),f("div",rt," No manager assigned "))]),_:2},1024),t(e(h),null,{default:s(()=>[t(e(C),{variant:q(n.status)},{default:s(()=>[o(d(n.status),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(h),{class:"text-right"},{default:s(()=>[l("div",ot,[t(e(c),{as:e(v),href:u.route("admin.users.organizational",n.id),variant:"ghost",size:"sm"},{default:s(()=>[t(e(ge),{class:"h-4 w-4"})]),_:2},1032,["as","href"]),t(e(c),{as:e(v),href:u.route("admin.users.assign-form",n.id),variant:"ghost",size:"sm"},{default:s(()=>[t(e(ie),{class:"h-4 w-4"})]),_:2},1032,["as","href"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),i.users.links&&i.users.links.length>3?(r(),f("div",it,[l("div",dt,[i.users.prev_page_url?(r(),_(e(c),{key:0,as:e(v),href:i.users.prev_page_url,variant:"outline"},{default:s(()=>[t(e(xe),{class:"mr-2 h-4 w-4"}),a[21]||(a[21]=o(" Previous "))]),_:1},8,["as","href"])):g("",!0),i.users.next_page_url?(r(),_(e(c),{key:1,as:e(v),href:i.users.next_page_url,variant:"outline"},{default:s(()=>[a[22]||(a[22]=o(" Next ")),t(e(de),{class:"ml-2 h-4 w-4"})]),_:1},8,["as","href"])):g("",!0)]),l("div",ut,[l("div",mt," Showing "+d(i.users.from)+" to "+d(i.users.to)+" of "+d(i.users.total)+" results ",1),l("div",ft,[(r(!0),f(p,null,b(i.users.links,n=>(r(),f(p,{key:n.label},[n.url?(r(),_(e(c),{key:0,as:e(v),href:n.url,variant:n.active?"default":"outline",size:"sm",innerHTML:n.label},null,8,["as","href","variant","innerHTML"])):(r(),_(e(c),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:n.label},null,8,["innerHTML"]))],64))),128))])])])):g("",!0),!i.users.data||i.users.data.length===0?(r(),f("div",ct,[t(e(j),{class:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),a[24]||(a[24]=l("h3",{class:"text-lg font-medium text-foreground mb-2"},"No users found",-1)),a[25]||(a[25]=l("p",{class:"text-sm text-muted-foreground mb-6"},"Start by importing users or check your filters.",-1)),t(e(c),{as:e(v),href:u.route("admin.users.import")},{default:s(()=>[t(e(V),{class:"mr-2 h-4 w-4"}),a[23]||(a[23]=o(" Import Users "))]),_:1},8,["as","href"])])):g("",!0)])]),_:1})]),_:1})])]),_:1}))}});export{Zt as default};
