import{P,bo as p,g as V,o as a,w as r,e as n,b as s,f as c,j as L,a as d,h as _,F as z,i as S,t as b,s as N,H as F,C as R,r as W,W as D}from"./app-WJ99k70a.js";import{M as G}from"./Modal-Bd3dKk4w.js";import{_ as J}from"./AdminLayout.vue_vue_type_script_setup_true_lang-2nOXBGxb.js";import{_ as K}from"./Button.vue_vue_type_script_setup_true_lang-Dy3RlMKi.js";import{_ as X}from"./Input.vue_vue_type_script_setup_true_lang-BSfZbzt_.js";import{_ as Y}from"./Label.vue_vue_type_script_setup_true_lang-CktlMa8u.js";import{b as Z,a as I,d as $,c as ee,_ as te}from"./SelectValue.vue_vue_type_script_setup_true_lang-DpwJwiVN.js";import{_ as oe}from"./Textarea.vue_vue_type_script_setup_true_lang-DLX0fQpc.js";import{_ as se}from"./Card.vue_vue_type_script_setup_true_lang-DflwHKhY.js";import{_ as re}from"./CardContent.vue_vue_type_script_setup_true_lang-BMStSPTP.js";import{_ as ne}from"./CardHeader.vue_vue_type_script_setup_true_lang-DcM25_8J.js";import{_ as ie}from"./CardTitle.vue_vue_type_script_setup_true_lang-CE3nRRvq.js";import{_ as le}from"./_plugin-vue_export-helper-fGKAwq7e.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-Dy1GYN7i.js";import"./index-CLwR-uw6.js";import"./index-Dhh5zSp0.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DJLofgmd.js";import"./clock-D6SfQS9I.js";import"./useForwardPropsEmits-BNdFBwb6.js";import"./Presence-C447BjxN.js";import"./ConfigProvider-BzvyYtnr.js";import"./useForwardExpose-CBKzvtQE.js";import"./Teleport-Fm1ZlnPU.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-f32YkvId.js";import"./Collection-DgIeGgCh.js";import"./usePrimitiveElement-Bq8IOiVk.js";import"./check-Dj8hM6Sv.js";import"./useSize-CepR3Y4N.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-BcuC4gal.js";const ae={components:{AdminLayout:J,Link:P,Modal:G,Button:K,Input:X,Label:Y,Select:te,SelectContent:ee,SelectItem:$,SelectTrigger:I,SelectValue:Z,Textarea:oe,Card:se,CardContent:re,CardHeader:ne,CardTitle:ie},props:{courses:{type:Array,default:()=>[]}},setup(M){const e=R({course_id:"",title:"",description:"",status:"draft",pass_threshold:80,questions:[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:"",correct_answer_explanation:""}],processing:!1}),w=W(!1),t=[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Create",route:null}],q=()=>{e.questions.length<20&&e.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:"",correct_answer_explanation:""})},O=m=>{e.questions.length>1&&e.questions.splice(m,1)},Q=m=>{e.questions[m].options.length<10&&e.questions[m].options.push("")},x=(m,i)=>{if(e.questions[m].options.length>2){const f=e.questions[m],v=f.options[i];f.options.splice(i,1),f.type==="radio"&&f.correct_answer===v?f.correct_answer="":f.type==="checkbox"&&Array.isArray(f.correct_answer)&&(f.correct_answer=f.correct_answer.filter(A=>A!==v))}},T=m=>{const i=e.questions[m];i.type==="text"?(i.options=[],i.correct_answer="",i.points=0,i.correct_answer_explanation=""):((!i.options||i.options.length<2)&&(i.options=["",""]),i.type==="checkbox"?i.correct_answer=[]:i.correct_answer="",i.correct_answer_explanation="")},U=(m,i)=>{const f=e.questions[m];f.type==="radio"&&(f.correct_answer=i)},y=()=>{const m={course_id:e.course_id,title:e.title,description:e.description,status:e.status,pass_threshold:e.pass_threshold,questions:e.questions.map(i=>({question_text:i.question_text,type:i.type,points:i.type==="text"?0:i.points,options:i.options||[],correct_answer:Array.isArray(i.correct_answer)?i.correct_answer:i.correct_answer?[i.correct_answer]:[],correct_answer_explanation:i.correct_answer_explanation||""}))};console.log("Submitting data:",m),e.processing=!0,D.post(route("admin.quizzes.store"),m,{onSuccess:()=>{D.visit(route("admin.quizzes.index"),{replace:!0})},onError:i=>{console.log("Submission errors:",i),e.processing=!1},onFinish:()=>{e.processing=!1}})},k=()=>{e.isDirty?w.value=!0:h()},h=()=>{e.reset(),w.value=!1,D.visit(route("admin.quizzes.index"))};return{form:e,addQuestion:q,removeQuestion:O,addOption:Q,removeOption:x,resetQuestionOptions:T,updateCorrectAnswer:U,submitQuiz:y,showDiscardModal:w,confirmDiscard:k,discardChanges:h,breadcrumbs:t}}},de={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},ce={class:"mb-8 flex items-center justify-between"},me={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},ue={key:0,class:"mt-1 text-xs text-destructive"},_e={key:0,class:"mt-1 text-xs text-destructive"},fe={class:"sm:col-span-2"},pe={key:0,class:"mt-1 text-xs text-destructive"},be={class:"sm:col-span-2"},ge={key:0,class:"mt-1 text-xs text-destructive"},ye={key:0,class:"mt-1 text-xs text-destructive"},xe={class:"mb-4 flex items-center justify-between"},ve={class:"text-sm font-medium text-gray-100"},he={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},we={class:"sm:col-span-2"},ke={key:0,class:"mt-1 text-xs text-destructive"},Ce={key:1,class:"mt-1 text-xs text-destructive"},Ve={key:0},ze={key:0,class:"mt-1 text-xs text-destructive"},Se={key:0,class:"mt-4"},Qe={key:0,class:"mt-1 text-xs text-destructive"},Te={class:"mt-4"},Ue={key:0,class:"space-y-2"},Ae=["id","checked","value","name","disabled","onChange"],Me=["for"],De={key:1,class:"space-y-2"},qe=["id","value","onUpdate:modelValue","disabled"],Oe=["for"],Be={key:2,class:"mt-1 text-xs text-destructive"},Ee={class:"mt-4"},Le={key:0,class:"mt-1 text-xs text-destructive"},je={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},He={class:"flex justify-end space-x-3"},Pe={key:0,class:"flex items-center"},Ne={key:1},Fe={class:"p-6 sm:p-8"},Re={class:"flex justify-end space-x-3"},We=["disabled"],Ge=["disabled"];function Je(M,e,w,t,q,O){const Q=p("Link"),x=p("Button"),T=p("CardTitle"),U=p("CardHeader"),y=p("Label"),k=p("SelectValue"),h=p("SelectTrigger"),m=p("SelectItem"),i=p("SelectContent"),f=p("Select"),v=p("Input"),A=p("Textarea"),B=p("CardContent"),E=p("Card"),j=p("Modal"),H=p("AdminLayout");return a(),V(H,{breadcrumbs:t.breadcrumbs},{default:r(()=>[n("div",de,[n("div",ce,[e[10]||(e[10]=n("h1",{class:"text-3xl font-bold text-gray-900"},"Create Quiz",-1)),s(x,{variant:"outline","as-child":""},{default:r(()=>[s(Q,{href:M.route("admin.quizzes.index")},{default:r(()=>e[9]||(e[9]=[n("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),c(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),n("form",{onSubmit:e[5]||(e[5]=L((...o)=>t.submitQuiz&&t.submitQuiz(...o),["prevent"]))},[s(E,null,{default:r(()=>[s(U,null,{default:r(()=>[s(T,null,{default:r(()=>e[11]||(e[11]=[c("Quiz Details")])),_:1})]),_:1}),s(B,null,{default:r(()=>[n("div",me,[n("div",null,[s(y,{for:"course_id"},{default:r(()=>e[12]||(e[12]=[c("Course")])),_:1}),s(f,{modelValue:t.form.course_id,"onUpdate:modelValue":e[0]||(e[0]=o=>t.form.course_id=o),disabled:t.form.processing},{default:r(()=>[s(h,null,{default:r(()=>[s(k,{placeholder:"Select Course"})]),_:1}),s(i,null,{default:r(()=>[(a(!0),d(z,null,S(w.courses,o=>(a(),V(m,{key:o.id,value:o.id},{default:r(()=>[c(b(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),t.form.errors.course_id?(a(),d("span",ue,b(t.form.errors.course_id),1)):_("",!0)]),n("div",null,[s(y,{for:"status"},{default:r(()=>e[13]||(e[13]=[c("Status")])),_:1}),s(f,{modelValue:t.form.status,"onUpdate:modelValue":e[1]||(e[1]=o=>t.form.status=o),disabled:t.form.processing},{default:r(()=>[s(h,null,{default:r(()=>[s(k)]),_:1}),s(i,null,{default:r(()=>[s(m,{value:"draft"},{default:r(()=>e[14]||(e[14]=[c("Draft")])),_:1}),s(m,{value:"published"},{default:r(()=>e[15]||(e[15]=[c("Published")])),_:1}),s(m,{value:"archived"},{default:r(()=>e[16]||(e[16]=[c("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),t.form.errors.status?(a(),d("span",_e,b(t.form.errors.status),1)):_("",!0)]),n("div",fe,[s(y,{for:"title"},{default:r(()=>e[17]||(e[17]=[c("Title")])),_:1}),s(v,{id:"title",modelValue:t.form.title,"onUpdate:modelValue":e[2]||(e[2]=o=>t.form.title=o),type:"text",disabled:t.form.processing,placeholder:"Enter quiz title"},null,8,["modelValue","disabled"]),t.form.errors.title?(a(),d("span",pe,b(t.form.errors.title),1)):_("",!0)]),n("div",be,[s(y,{for:"description"},{default:r(()=>e[18]||(e[18]=[c("Description")])),_:1}),s(A,{id:"description",modelValue:t.form.description,"onUpdate:modelValue":e[3]||(e[3]=o=>t.form.description=o),rows:"4",disabled:t.form.processing,placeholder:"Enter quiz description (optional)"},null,8,["modelValue","disabled"]),t.form.errors.description?(a(),d("span",ge,b(t.form.errors.description),1)):_("",!0)]),n("div",null,[s(y,{for:"pass_threshold"},{default:r(()=>e[19]||(e[19]=[c("Pass Threshold (%)")])),_:1}),s(v,{id:"pass_threshold",modelValue:t.form.pass_threshold,"onUpdate:modelValue":e[4]||(e[4]=o=>t.form.pass_threshold=o),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",disabled:t.form.processing,placeholder:"Enter pass threshold (e.g., 80.00)"},null,8,["modelValue","disabled"]),t.form.errors.pass_threshold?(a(),d("span",ye,b(t.form.errors.pass_threshold),1)):_("",!0)])])]),_:1})]),_:1}),s(E,{class:"mt-8"},{default:r(()=>[s(U,null,{default:r(()=>[s(T,null,{default:r(()=>[c("Questions ("+b(t.form.questions.length)+"/20)",1)]),_:1})]),_:1}),s(B,null,{default:r(()=>[(a(!0),d(z,null,S(t.form.questions,(o,l)=>(a(),d("div",{key:l,class:"border border-gray-300 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800"},[n("div",xe,[n("h3",ve,"Question "+b(l+1),1),t.form.questions.length>1?(a(),V(x,{key:0,onClick:u=>t.removeQuestion(l),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:t.form.processing},{default:r(()=>e[20]||(e[20]=[c(" Remove ")])),_:2},1032,["onClick","disabled"])):_("",!0)]),n("div",he,[n("div",we,[s(y,{for:`question_text_${l}`},{default:r(()=>e[21]||(e[21]=[c("Question Text")])),_:2},1032,["for"]),s(v,{id:`question_text_${l}`,modelValue:o.question_text,"onUpdate:modelValue":u=>o.question_text=u,type:"text",disabled:t.form.processing,placeholder:"Enter question text"},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t.form.errors[`questions.${l}.question_text`]?(a(),d("span",ke,b(t.form.errors[`questions.${l}.question_text`]),1)):_("",!0)]),n("div",null,[s(y,{for:`type_${l}`},{default:r(()=>e[22]||(e[22]=[c("Type")])),_:2},1032,["for"]),o?(a(),V(f,{key:0,modelValue:o.type,"onUpdate:modelValue":[u=>o.type=u,u=>t.resetQuestionOptions(l)],disabled:t.form.processing},{default:r(()=>[s(h,null,{default:r(()=>[s(k)]),_:1}),s(i,null,{default:r(()=>[s(m,{value:"radio"},{default:r(()=>e[23]||(e[23]=[c("Radio (Single Choice)")])),_:1}),s(m,{value:"checkbox"},{default:r(()=>e[24]||(e[24]=[c("Checkbox (Multiple Choice)")])),_:1}),s(m,{value:"text"},{default:r(()=>e[25]||(e[25]=[c("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])):_("",!0),t.form.errors[`questions.${l}.type`]?(a(),d("span",Ce,b(t.form.errors[`questions.${l}.type`]),1)):_("",!0)]),o&&o.type!=="text"?(a(),d("div",Ve,[s(y,{for:`points_${l}`},{default:r(()=>e[26]||(e[26]=[c("Points")])),_:2},1032,["for"]),s(v,{id:`points_${l}`,modelValue:o.points,"onUpdate:modelValue":u=>o.points=u,modelModifiers:{number:!0},type:"number",min:"0",disabled:t.form.processing,placeholder:"Enter points"},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t.form.errors[`questions.${l}.points`]?(a(),d("span",ze,b(t.form.errors[`questions.${l}.points`]),1)):_("",!0)])):_("",!0)]),o&&o.type!=="text"?(a(),d("div",Se,[e[31]||(e[31]=n("h4",{class:"mb-2 text-sm font-medium text-gray-100"},"Options",-1)),(a(!0),d(z,null,S(o.options,(u,g)=>(a(),d("div",{key:g,class:"mb-2 flex items-center gap-2"},[s(v,{modelValue:o.options[g],"onUpdate:modelValue":C=>o.options[g]=C,type:"text",class:"flex-1",disabled:t.form.processing,placeholder:"Enter option"},null,8,["modelValue","onUpdate:modelValue","disabled"]),o.options.length>2?(a(),V(x,{key:0,onClick:C=>t.removeOption(l,g),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:t.form.processing},{default:r(()=>e[27]||(e[27]=[c(" Remove ")])),_:2},1032,["onClick","disabled"])):_("",!0)]))),128)),t.form.errors[`questions.${l}.options`]?(a(),d("span",Qe,b(t.form.errors[`questions.${l}.options`]),1)):_("",!0),s(x,{onClick:u=>t.addOption(l),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:t.form.processing||o.options.length>=10},{default:r(()=>e[28]||(e[28]=[c(" Add Option ")])),_:2},1032,["onClick","disabled"]),n("div",Te,[e[29]||(e[29]=n("label",{class:"mb-1 block text-sm font-medium text-gray-100"},"Correct Answer(s)",-1)),o&&o.type==="radio"?(a(),d("div",Ue,[(a(!0),d(z,null,S(o.options,(u,g)=>(a(),d("div",{key:`radio_${l}_${g}`,class:"flex items-center"},[n("input",{id:`correct_answer_${l}_${g}`,checked:o.correct_answer===u,value:u,type:"radio",name:`correct_answer_${l}`,class:"h-4 w-4 border-gray-300 border text-indigo-600 focus:ring-indigo-500",disabled:t.form.processing,onChange:C=>t.updateCorrectAnswer(l,u)},null,40,Ae),n("label",{for:`correct_answer_${l}_${g}`,class:"ml-2 text-sm text-gray-300"},b(u||"Option "+(g+1)),9,Me)]))),128))])):o&&o.type==="checkbox"?(a(),d("div",De,[(a(!0),d(z,null,S(o.options,(u,g)=>(a(),d("div",{key:`checkbox_${l}_${g}_${u}`,class:"flex items-center"},[N(n("input",{id:`correct_answer_${l}_${g}`,value:u,type:"checkbox","onUpdate:modelValue":C=>o.correct_answer=C,class:"h-4 w-4 border-gray-300 border text-indigo-600 focus:ring-indigo-500",disabled:t.form.processing},null,8,qe),[[F,o.correct_answer]]),n("label",{for:`correct_answer_${l}_${g}`,class:"ml-2 text-sm text-gray-300"},b(u||"Option "+(g+1)),9,Oe)]))),128))])):_("",!0),t.form.errors[`questions.${l}.correct_answer`]?(a(),d("span",Be,b(t.form.errors[`questions.${l}.correct_answer`]),1)):_("",!0)]),n("div",Ee,[s(y,{for:`correct_answer_explanation_${l}`},{default:r(()=>e[30]||(e[30]=[c("Correct Answer Explanation")])),_:2},1032,["for"]),s(A,{id:`correct_answer_explanation_${l}`,modelValue:o.correct_answer_explanation,"onUpdate:modelValue":u=>o.correct_answer_explanation=u,rows:"2",disabled:t.form.processing,placeholder:"Explain why this is correct (optional)"},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),t.form.errors[`questions.${l}.correct_answer_explanation`]?(a(),d("span",Le,b(t.form.errors[`questions.${l}.correct_answer_explanation`]),1)):_("",!0)])])):_("",!0),o&&o.type==="text"?(a(),d("div",je,e[32]||(e[32]=[n("p",{class:"text-sm text-blue-700"}," 📝 This is an open-ended text question. Students will provide their own written response. ",-1)]))):_("",!0)]))),128)),s(x,{onClick:t.addQuestion,type:"button",class:"inline-flex items-center",disabled:t.form.processing||t.form.questions.length>=20},{default:r(()=>e[33]||(e[33]=[n("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[n("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),n("div",He,[s(x,{"as-child":"",variant:"outline",disabled:t.form.processing,onClick:L(t.confirmDiscard,["prevent"])},{default:r(()=>[s(Q,{href:M.route("admin.quizzes.index")},{default:r(()=>e[34]||(e[34]=[c(" Cancel ")])),_:1},8,["href"])]),_:1},8,["disabled","onClick"]),s(x,{type:"submit",disabled:t.form.processing},{default:r(()=>[t.form.processing?(a(),d("span",Pe,e[35]||(e[35]=[n("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[n("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),n("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),c(" Saving... ")]))):(a(),d("span",Ne,"Create Quiz"))]),_:1},8,["disabled"])])],32),s(j,{show:t.showDiscardModal,onClose:e[8]||(e[8]=o=>t.showDiscardModal=!1)},{default:r(()=>[n("div",Fe,[e[36]||(e[36]=n("h2",{class:"mb-3 text-xl font-semibold text-gray-900"},"Discard Changes",-1)),e[37]||(e[37]=n("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),n("div",Re,[n("button",{onClick:e[6]||(e[6]=o=>t.showDiscardModal=!1),class:"rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-100 transition-colors duration-200 hover:bg-gray-200 focus:outline-hidden focus:ring-2 focus:ring-gray-300",disabled:t.form.processing}," Cancel ",8,We),n("button",{onClick:e[7]||(e[7]=(...o)=>t.discardChanges&&t.discardChanges(...o)),class:"rounded-lg bg-red-600 px-4 py-2 text-sm font-medium text-white transition-colors duration-200 hover:bg-red-700 focus:outline-hidden focus:ring-2 focus:ring-red-500",disabled:t.form.processing}," Discard ",8,Ge)])])]),_:1},8,["show"])])]),_:1},8,["breadcrumbs"])}const zt=le(ae,[["render",Je],["__scopeId","data-v-657a8452"]]);export{zt as default};
