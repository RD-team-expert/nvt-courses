import{P as ke,bo as w,g as W,o as a,w as i,e as r,a as c,h as p,b as o,f as m,t as f,F as U,i as O,n as v,j as me,s as G,J as K,z as Ce,r as N,C as Ee,c as P,l as Ve,x as _e,W as fe}from"./app-B2TyzwsB.js";import{M as ze}from"./Modal-DMtXwIpx.js";import{_ as Fe}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zEZLqRjq.js";import{_ as qe}from"./Button.vue_vue_type_script_setup_true_lang-iSNEsj8d.js";import{_ as Se}from"./Input.vue_vue_type_script_setup_true_lang-B9LaRLN0.js";import{_ as Te}from"./Label.vue_vue_type_script_setup_true_lang-B5_a3XKd.js";import{b as Qe,a as Ae,d as Me,c as Ue,_ as Oe}from"./SelectValue.vue_vue_type_script_setup_true_lang-DI_-b9wq.js";import{_ as Pe}from"./Textarea.vue_vue_type_script_setup_true_lang-CbvGvNh0.js";import{_ as Le}from"./Card.vue_vue_type_script_setup_true_lang-BhjLCCJT.js";import{_ as je}from"./CardContent.vue_vue_type_script_setup_true_lang-BWomgIz1.js";import{_ as Be}from"./CardHeader.vue_vue_type_script_setup_true_lang-BCWyJsSg.js";import{_ as De}from"./CardTitle.vue_vue_type_script_setup_true_lang-3PYPuEYT.js";import{_ as Re}from"./_plugin-vue_export-helper-CvSDNTYT.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CWzenZYn.js";import"./index-Cd5ou6iz.js";import"./index-Cwfj5Uun.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-w123oZCZ.js";import"./clock-B7S3xh-a.js";import"./useForwardPropsEmits-DRaSDPkr.js";import"./Presence-CIvZkQvZ.js";import"./ConfigProvider-BkqonLZk.js";import"./useForwardExpose-DYTOywUL.js";import"./Teleport-8GIBZmM2.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-UB9zkwCN.js";import"./Collection-B6sVCkrA.js";import"./usePrimitiveElement-0y4JLaDs.js";import"./check-a7bTXoSG.js";import"./useSize-CLfBsCYX.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-6aslheoe.js";const Ne={components:{AdminLayout:Fe,Link:ke,Modal:ze,Button:qe,Input:Se,Label:Te,Select:Oe,SelectContent:Ue,SelectItem:Me,SelectTrigger:Ae,SelectValue:Qe,Textarea:Pe,Card:Le,CardContent:je,CardHeader:Be,CardTitle:De},props:{quiz:{type:Object,required:!0},courses:{type:Array,default:()=>[]},onlineCourses:{type:Array,default:()=>[]}},setup(h){var Z,I,$,ee,te,re,se,oe,le,ie,ne,de,ae,ue,ce;const t=Ce(),L=N(!1),e=N(!1),z=N([]),X=N(0),H={success:"border-green-200 bg-green-50",error:"border-red-200 bg-red-50",info:"border-blue-200 bg-blue-50"},E={success:"text-green-500 bg-green-100",error:"text-red-500 bg-red-100",info:"text-blue-500 bg-blue-100"},F=N({}),Q=n=>{if(!n)return null;if(Array.isArray(n))return n;if(typeof n=="object")return Object.values(n);if(typeof n=="string")try{let s=JSON.parse(n);for(;typeof s=="string";)try{s=JSON.parse(s)}catch{break}return Array.isArray(s)?s:Object.values(s)}catch{return[n]}return[]},y=n=>!n||!Array.isArray(n)?[{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""}]:n.map(s=>{if(!s)return{question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""};if(s.type==="text")return{id:s.id||null,question_text:s.question_text||"",type:"text",points:0,options:[],correct_answer:[],correct_answer_explanation:s.correct_answer_explanation||""};let _=["",""];if(s.options)for(_=(Q(s.options)||[]).map(b=>typeof b=="string"?b:b&&typeof b=="object"&&b.option_text?b.option_text:"");_.length<2;)_.push("");let k=[];return s.correct_answer&&(k=(Q(s.correct_answer)||[]).map(b=>typeof b=="string"?b:b&&typeof b=="object"&&b.option_text?b.option_text:"").filter(b=>b!=="")),{id:s.id||null,question_text:s.question_text||"",type:s.type||"radio",points:s.points||0,options:_,correct_answer:k,correct_answer_explanation:s.correct_answer_explanation||""}}),d=Ee({course_type:((Z=h.quiz)==null?void 0:Z.course_type)||((I=h.quiz)!=null&&I.course_online_id?"online":"regular"),course_id:(($=h.quiz)==null?void 0:$.course_id)||"",course_online_id:((ee=h.quiz)==null?void 0:ee.course_online_id)||"",title:((te=h.quiz)==null?void 0:te.title)||"",description:((re=h.quiz)==null?void 0:re.description)||"",status:((se=h.quiz)==null?void 0:se.status)||"draft",pass_threshold:((oe=h.quiz)==null?void 0:oe.pass_threshold)||80,has_deadline:((le=h.quiz)==null?void 0:le.has_deadline)||!1,deadline_date:((ie=h.quiz)==null?void 0:ie.deadline_date)||"",deadline_time:((ne=h.quiz)==null?void 0:ne.deadline_time)||"",enforce_deadline:((de=h.quiz)==null?void 0:de.enforce_deadline)??!0,time_limit_minutes:((ae=h.quiz)==null?void 0:ae.time_limit_minutes)||null,allows_extensions:((ue=h.quiz)==null?void 0:ue.allows_extensions)||!1,questions:y((ce=h.quiz)==null?void 0:ce.questions)}),j=P({get(){return d.course_type==="regular"?d.course_id:d.course_online_id},set(n){d.course_type==="regular"?(d.course_id=n,d.course_online_id=""):(d.course_online_id=n,d.course_id="")}}),V=()=>{d.course_id="",d.course_online_id=""};Ve(()=>t.props.errors,n=>{F.value=n||{}},{immediate:!0,deep:!0});const S=P(()=>({...d.errors,...F.value})),B=P(()=>Object.keys(S.value).length>0),A=P(()=>{var n;return{hasTitle:!!((n=d.title)!=null&&n.trim()),hasCourse:!!(d.course_id||d.course_online_id),hasValidThreshold:d.pass_threshold>=0&&d.pass_threshold<=100,hasQuestions:d.questions.length>0,allQuestionsValid:d.questions.every(s=>{var _;return(_=s.question_text)!=null&&_.trim()?s.type==="text"?!0:!(!s.points||s.points<=0||!s.options||s.options.length<2||!s.options.every(k=>k==null?void 0:k.trim())||!s.correct_answer||s.correct_answer.length===0):!1})}}),T=P(()=>Object.values(A.value).every(Boolean)),q=P(()=>!T.value),J=P(()=>{const n=Object.keys(S.value).length;return n===0?{title:"",message:""}:{title:n===1?"Please fix the following issue:":`Please fix the following ${n} issues:`,message:"Review the highlighted fields below and correct any errors before saving."}}),C=(n,s="info",_=5e3)=>{const k=++X.value,R={id:k,message:n,type:s,show:!1};return z.value.push(R),_e(()=>{const b=z.value.findIndex(we=>we.id===k);b!==-1&&(z.value[b].show=!0)}),_>0&&setTimeout(()=>D(k),_),k},D=n=>{const s=z.value.findIndex(_=>_.id===n);s!==-1&&(z.value[s].show=!1,setTimeout(()=>{const _=z.value.findIndex(k=>k.id===n);_!==-1&&z.value.splice(_,1)},300))},l=n=>n.replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase()).replace(/questions\.(\d+)\./,"Question $1 "),u=n=>{const s=S.value[n];return Array.isArray(s)?s[0]:s||null},g=n=>[`questions.${n}.question_text`,`questions.${n}.type`,`questions.${n}.points`,`questions.${n}.options`,`questions.${n}.correct_answer`].some(_=>u(_)),x=()=>{_e(()=>{const n=document.querySelector(".text-red-600, .border-red-300");n&&n.scrollIntoView({behavior:"smooth",block:"center"})})},M=()=>{try{d.questions.length<20&&d.questions.push({question_text:"",type:"radio",points:0,options:["",""],correct_answer:[],correct_answer_explanation:""})}catch(n){console.error("Error adding question:",n),C("Failed to add question. Please try again.","error")}},pe=n=>{try{d.questions.length>1&&d.questions.splice(n,1)}catch(s){console.error("Error removing question:",s),C("Failed to remove question. Please try again.","error")}},ge=n=>{try{d.questions[n].options.length<10&&d.questions[n].options.push("")}catch(s){console.error("Error adding option:",s),C("Failed to add option. Please try again.","error")}},he=(n,s)=>{try{const _=d.questions[n];if(_.options.length>2){const k=_.options[s];_.options.splice(s,1),Array.isArray(_.correct_answer)&&(_.correct_answer=_.correct_answer.filter(R=>R!==k))}}catch(_){console.error("Error removing option:",_),C("Failed to remove option. Please try again.","error")}},xe=n=>{try{const s=d.questions[n];s.type==="text"?(s.options=[],s.correct_answer=[],s.points=0):((!s.options||s.options.length<2)&&(s.options=["",""]),s.correct_answer=[]),s.correct_answer_explanation=""}catch(s){console.error("Error resetting question options:",s),C("Failed to reset question options. Please try again.","error")}},ye=(n,s)=>{try{const _=d.questions[n];_.type==="radio"&&(_.correct_answer=[s])}catch(_){console.error("Error updating correct answer:",_),C("Failed to update correct answer. Please try again.","error")}},be=()=>{try{if(F.value={},e.value=!1,d.status==="published"&&!T.value){C("Cannot publish quiz. Please fix all required fields first.","error",8e3),x();return}d.transform(n=>({course_type:d.course_type,course_id:d.course_type==="regular"?d.course_id:null,course_online_id:d.course_type==="online"?d.course_online_id:null,title:d.title,description:d.description,status:d.status,pass_threshold:d.pass_threshold,has_deadline:d.has_deadline,deadline_date:d.has_deadline?d.deadline_date:null,deadline_time:d.has_deadline?d.deadline_time:null,enforce_deadline:d.has_deadline?d.enforce_deadline:!0,time_limit_minutes:d.time_limit_minutes||null,allows_extensions:d.has_deadline?d.allows_extensions:!1,questions:d.questions.map(s=>({id:s.id||null,question_text:s.question_text,type:s.type,points:s.type==="text"?0:s.points,options:s.options?s.options.filter(_=>_&&_.trim()):[],correct_answer:Array.isArray(s.correct_answer)?s.correct_answer.filter(_=>_&&_.trim()):s.correct_answer?[s.correct_answer]:[],correct_answer_explanation:s.correct_answer_explanation||""}))})).put(route("admin.quizzes.update",h.quiz.id),{preserveState:!0,preserveScroll:!0,onStart:()=>{z.value.forEach(n=>D(n.id))},onSuccess:n=>{e.value=!0,C("Quiz updated successfully!","success",4e3),setTimeout(()=>{fe.visit(route("admin.quizzes.index"),{replace:!0})},1500)},onError:n=>{F.value=n;const s=Object.keys(n).length,_=s===1?"Please correct the error below.":`Please correct the ${s} errors below.`;C(_,"error",8e3),setTimeout(()=>{x()},100)},onFinish:()=>{}})}catch(n){console.error("Critical error in submitQuiz:",n),C("An unexpected error occurred. Please try again.","error")}},ve=()=>{d.isDirty?L.value=!0:Y()},Y=()=>{d.reset(),F.value={},L.value=!1,e.value=!1,fe.visit(route("admin.quizzes.index"))};return{form:d,hasErrors:B,allErrors:S,errorSummary:J,publishingChecklist:A,canPublish:T,hasPublishingRequirements:q,showDiscardModal:L,showSuccessMessage:e,toasts:z,toastClasses:H,toastIconClasses:E,selectedCourseId:j,resetCourseSelection:V,formatFieldName:l,getFieldError:u,hasQuestionErrors:g,scrollToFirstError:x,addQuestion:M,removeQuestion:pe,addOption:ge,removeOption:he,resetQuestionOptions:xe,updateCorrectAnswer:ye,submitQuiz:be,confirmDiscard:ve,discardChanges:Y,addToast:C,removeToast:D,breadcrumbs:[{name:"Quizzes",route:"admin.quizzes.index"},{name:"Edit",route:null}]}}},He={class:"mx-auto max-w-7xl py-12 sm:px-6 lg:px-8"},Je={class:"mb-8 flex items-center justify-between"},We={key:0,class:"mb-6 rounded-lg border border-red-200 bg-red-50 p-6 shadow-sm"},Ge={class:"flex items-start"},Ke={class:"ml-3 flex-1"},Xe={class:"text-sm font-medium text-red-800"},Ye={class:"mt-2 text-sm text-red-700"},Ze={class:"mb-3"},Ie={class:"list-disc pl-5 space-y-1"},$e={class:"font-medium"},et={class:"ml-4 flex-shrink-0"},tt={key:1,class:"mb-6 rounded-lg border border-green-200 bg-green-50 p-4 shadow-sm"},rt={key:2,class:"mb-6 rounded-lg border border-blue-200 bg-blue-50 p-4 shadow-sm"},st={class:"flex items-start"},ot={class:"ml-3"},lt={class:"mt-2 text-sm text-blue-700"},it={class:"list-disc pl-5 space-y-1"},nt={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},dt={key:0,class:"mt-1 text-sm text-red-600"},at={key:0},ut={key:0,class:"mt-1 text-sm text-red-600"},ct={class:"grid grid-cols-1 gap-6 sm:grid-cols-2"},mt={key:0,class:"mt-1 text-sm text-red-600"},_t={key:0,class:"mt-1 text-sm text-red-600"},ft={class:"sm:col-span-2"},pt={key:0,class:"mt-1 text-sm text-red-600"},gt={class:"sm:col-span-2"},ht={key:0,class:"mt-1 text-sm text-red-600"},xt={class:"space-y-4"},yt={class:"flex items-center space-x-2"},bt=["disabled"],vt={key:0,class:"space-y-4 p-4 border rounded-lg bg-muted/20"},wt={class:"grid grid-cols-2 gap-4"},kt={key:0,class:"mt-1 text-sm text-red-600"},Ct={key:0,class:"mt-1 text-sm text-red-600"},Et={class:"flex items-center space-x-2"},Vt=["disabled"],zt={key:0,class:"mt-1 text-sm text-red-600"},Ft={class:"flex items-center space-x-2"},qt=["disabled"],St={class:"mb-4 flex items-center justify-between"},Tt={key:0,class:"inline-flex items-center ml-2 px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800"},Qt={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},At={class:"sm:col-span-2"},Mt={key:0,class:"mt-1 text-sm text-red-600"},Ut={key:0,class:"mt-1 text-sm text-red-600"},Ot={key:0},Pt={key:0,class:"mt-1 text-sm text-red-600"},Lt={key:0,class:"mt-4"},jt={key:0,class:"mt-1 text-sm text-red-600"},Bt={class:"mt-4"},Dt={key:0,class:"space-y-2"},Rt=["id","checked","value","name","disabled","onChange"],Nt=["for"],Ht={key:1,class:"space-y-2"},Jt=["id","value","onUpdate:modelValue","disabled"],Wt=["for"],Gt={key:2,class:"mt-1 text-sm text-red-600"},Kt={class:"mt-4"},Xt={key:1,class:"mt-4 rounded-lg bg-blue-50 p-3"},Yt={class:"flex justify-end space-x-3"},Zt={key:0,class:"flex items-center"},It={key:1},$t={class:"p-6 sm:p-8"},er={class:"flex justify-end space-x-3"},tr={key:3,class:"fixed top-4 right-4 z-50 space-y-2"},rr={key:0,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},sr={key:1,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},or={key:2,class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},lr={class:"ml-3 text-sm font-normal"},ir=["onClick"];function nr(h,t,L,e,z,X){const H=w("Link"),E=w("Button"),F=w("CardTitle"),Q=w("CardHeader"),y=w("Label"),d=w("SelectValue"),j=w("SelectTrigger"),V=w("SelectItem"),S=w("SelectContent"),B=w("Select"),A=w("CardContent"),T=w("Card"),q=w("Input"),J=w("Textarea"),C=w("Modal"),D=w("AdminLayout");return a(),W(D,{breadcrumbs:e.breadcrumbs},{default:i(()=>[r("div",He,[r("div",Je,[t[17]||(t[17]=r("h1",{class:"text-3xl font-bold text-white"},"Edit Quiz",-1)),o(E,{"as-child":"",variant:"outline"},{default:i(()=>[o(H,{href:h.route("admin.quizzes.index")},{default:i(()=>t[16]||(t[16]=[r("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),m(" Back to Quizzes ")])),_:1},8,["href"])]),_:1})]),e.hasErrors?(a(),c("div",We,[r("div",Ge,[t[18]||(t[18]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),r("div",Ke,[r("h3",Xe,f(e.errorSummary.title),1),r("div",Ye,[r("p",Ze,f(e.errorSummary.message),1),r("ul",Ie,[(a(!0),c(U,null,O(e.allErrors,(l,u)=>(a(),c("li",{key:u,class:"break-words"},[r("span",$e,f(e.formatFieldName(u))+":",1),m(" "+f(Array.isArray(l)?l[0]:l),1)]))),128))])])]),r("div",et,[r("button",{onClick:t[0]||(t[0]=(...l)=>e.scrollToFirstError&&e.scrollToFirstError(...l)),class:"inline-flex items-center rounded-md bg-red-100 px-3 py-1.5 text-xs font-medium text-red-800 hover:bg-red-200 transition-colors"}," Go to first error ")])])])):p("",!0),e.showSuccessMessage?(a(),c("div",tt,t[19]||(t[19]=[r("div",{class:"flex items-center"},[r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])]),r("p",{class:"ml-3 text-sm text-green-700 font-medium"}," Quiz saved successfully! ")],-1)]))):p("",!0),e.form.status==="published"&&e.hasPublishingRequirements?(a(),c("div",rt,[r("div",st,[t[22]||(t[22]=r("div",{class:"flex-shrink-0"},[r("svg",{class:"h-5 w-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),r("div",ot,[t[21]||(t[21]=r("h3",{class:"text-sm font-medium text-blue-800"},"Publishing Requirements",-1)),r("div",lt,[t[20]||(t[20]=r("p",{class:"mb-2"},"To publish this quiz, please ensure:",-1)),r("ul",it,[r("li",{class:v(e.publishingChecklist.hasTitle?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasTitle?"âœ“":"âœ—")+" Quiz has a title ",3),r("li",{class:v(e.publishingChecklist.hasCourse?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasCourse?"âœ“":"âœ—")+" Course is selected ",3),r("li",{class:v(e.publishingChecklist.hasValidThreshold?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasValidThreshold?"âœ“":"âœ—")+" Pass threshold is set (0-100%) ",3),r("li",{class:v(e.publishingChecklist.hasQuestions?"text-green-600":"text-red-600")},f(e.publishingChecklist.hasQuestions?"âœ“":"âœ—")+" At least one valid question ",3),r("li",{class:v(e.publishingChecklist.allQuestionsValid?"text-green-600":"text-red-600")},f(e.publishingChecklist.allQuestionsValid?"âœ“":"âœ—")+" All questions have correct answers ",3)])])])])])):p("",!0),r("form",{onSubmit:t[13]||(t[13]=me((...l)=>e.submitQuiz&&e.submitQuiz(...l),["prevent"])),class:"space-y-8"},[o(T,null,{default:i(()=>[o(Q,null,{default:i(()=>[o(F,null,{default:i(()=>t[23]||(t[23]=[m("Course Assignment")])),_:1})]),_:1}),o(A,null,{default:i(()=>[r("div",nt,[r("div",null,[o(y,{for:"course_type",class:v(e.getFieldError("course_type")?"text-red-700":"")},{default:i(()=>t[24]||(t[24]=[m(" Course Type "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),o(B,{modelValue:e.form.course_type,"onUpdate:modelValue":[t[1]||(t[1]=l=>e.form.course_type=l),e.resetCourseSelection],disabled:e.form.processing},{default:i(()=>[o(j,null,{default:i(()=>[o(d,{placeholder:"Select course type"})]),_:1}),o(S,null,{default:i(()=>[o(V,{value:"regular"},{default:i(()=>t[25]||(t[25]=[m("Regular Course")])),_:1}),o(V,{value:"online"},{default:i(()=>t[26]||(t[26]=[m("Online Course")])),_:1})]),_:1})]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]),e.getFieldError("course_type")?(a(),c("div",dt,f(e.getFieldError("course_type")),1)):p("",!0)]),e.form.course_type?(a(),c("div",at,[o(y,{for:"course_id",class:v(e.getFieldError("course_id")||e.getFieldError("course_online_id")?"text-red-700":"")},{default:i(()=>[m(" Select "+f(e.form.course_type==="regular"?"Regular":"Online")+" Course ",1),t[27]||(t[27]=r("span",{class:"text-red-500"},"*",-1))]),_:1},8,["class"]),o(B,{modelValue:e.selectedCourseId,"onUpdate:modelValue":t[2]||(t[2]=l=>e.selectedCourseId=l),disabled:e.form.processing},{default:i(()=>[o(j,null,{default:i(()=>[o(d,{placeholder:"Select Course"})]),_:1}),o(S,null,{default:i(()=>[(a(!0),c(U,null,O(e.form.course_type==="regular"?L.courses:L.onlineCourses,l=>(a(),W(V,{key:l.id,value:l.id.toString()},{default:i(()=>[m(f(l.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("course_id")||e.getFieldError("course_online_id")?(a(),c("div",ut,f(e.getFieldError("course_id")||e.getFieldError("course_online_id")),1)):p("",!0)])):p("",!0)])]),_:1})]),_:1}),o(T,null,{default:i(()=>[o(Q,null,{default:i(()=>[o(F,null,{default:i(()=>t[28]||(t[28]=[m("Quiz Details")])),_:1})]),_:1}),o(A,{class:"space-y-6"},{default:i(()=>[r("div",ct,[r("div",null,[o(y,{for:"status",class:v(e.getFieldError("status")?"text-red-700":"")},{default:i(()=>t[29]||(t[29]=[m(" Status "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),o(B,{modelValue:e.form.status,"onUpdate:modelValue":t[3]||(t[3]=l=>e.form.status=l),disabled:e.form.processing},{default:i(()=>[o(j,null,{default:i(()=>[o(d,{placeholder:"Select Status"})]),_:1}),o(S,null,{default:i(()=>[o(V,{value:"draft"},{default:i(()=>t[30]||(t[30]=[m("Draft")])),_:1}),o(V,{value:"published"},{default:i(()=>t[31]||(t[31]=[m("Published")])),_:1}),o(V,{value:"archived"},{default:i(()=>t[32]||(t[32]=[m("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),e.getFieldError("status")?(a(),c("div",mt,f(e.getFieldError("status")),1)):p("",!0)]),r("div",null,[o(y,{for:"pass_threshold",class:v(e.getFieldError("pass_threshold")?"text-red-700":"")},{default:i(()=>t[33]||(t[33]=[m(" Pass Threshold (%) "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),o(q,{id:"pass_threshold",modelValue:e.form.pass_threshold,"onUpdate:modelValue":t[4]||(t[4]=l=>e.form.pass_threshold=l),modelModifiers:{number:!0},type:"number",min:"0",max:"100",step:"0.01",placeholder:"Enter pass threshold (e.g., 80.00)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("pass_threshold")?(a(),c("div",_t,f(e.getFieldError("pass_threshold")),1)):p("",!0)]),r("div",ft,[o(y,{for:"title",class:v(e.getFieldError("title")?"text-red-700":"")},{default:i(()=>t[34]||(t[34]=[m(" Title "),r("span",{class:"text-red-500"},"*",-1)])),_:1},8,["class"]),o(q,{id:"title",modelValue:e.form.title,"onUpdate:modelValue":t[5]||(t[5]=l=>e.form.title=l),type:"text",placeholder:"Enter quiz title",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("title")?(a(),c("div",pt,f(e.getFieldError("title")),1)):p("",!0)]),r("div",gt,[o(y,{for:"description"},{default:i(()=>t[35]||(t[35]=[m("Description")])),_:1}),o(J,{id:"description",modelValue:e.form.description,"onUpdate:modelValue":t[6]||(t[6]=l=>e.form.description=l),rows:"4",placeholder:"Enter quiz description (optional)",disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("description")?(a(),c("div",ht,f(e.getFieldError("description")),1)):p("",!0)])])]),_:1})]),_:1}),o(T,null,{default:i(()=>[o(Q,null,{default:i(()=>[o(F,null,{default:i(()=>t[36]||(t[36]=[m("â° Deadline Settings")])),_:1})]),_:1}),o(A,null,{default:i(()=>[r("div",xt,[r("div",yt,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[7]||(t[7]=l=>e.form.has_deadline=l),id:"has_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,bt),[[K,e.form.has_deadline]]),o(y,{for:"has_deadline"},{default:i(()=>t[37]||(t[37]=[m("Set a deadline for this quiz")])),_:1})]),e.form.has_deadline?(a(),c("div",vt,[r("div",wt,[r("div",null,[o(y,{for:"deadline_date"},{default:i(()=>t[38]||(t[38]=[m("Deadline Date")])),_:1}),o(q,{id:"deadline_date",type:"date",modelValue:e.form.deadline_date,"onUpdate:modelValue":t[8]||(t[8]=l=>e.form.deadline_date=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_date")?(a(),c("div",kt,f(e.getFieldError("deadline_date")),1)):p("",!0)]),r("div",null,[o(y,{for:"deadline_time"},{default:i(()=>t[39]||(t[39]=[m("Deadline Time")])),_:1}),o(q,{id:"deadline_time",type:"time",modelValue:e.form.deadline_time,"onUpdate:modelValue":t[9]||(t[9]=l=>e.form.deadline_time=l),disabled:e.form.processing},null,8,["modelValue","disabled"]),e.getFieldError("deadline_time")?(a(),c("div",Ct,f(e.getFieldError("deadline_time")),1)):p("",!0)])]),r("div",Et,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=l=>e.form.enforce_deadline=l),id:"enforce_deadline",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,Vt),[[K,e.form.enforce_deadline]]),o(y,{for:"enforce_deadline"},{default:i(()=>t[40]||(t[40]=[m("Strictly enforce deadline (no late submissions)")])),_:1})]),r("div",null,[o(y,{for:"time_limit_minutes"},{default:i(()=>t[41]||(t[41]=[m("Quiz time limit (minutes per attempt)")])),_:1}),o(q,{id:"time_limit_minutes",type:"number",modelValue:e.form.time_limit_minutes,"onUpdate:modelValue":t[11]||(t[11]=l=>e.form.time_limit_minutes=l),modelModifiers:{number:!0},disabled:e.form.processing,placeholder:"Leave empty for no time limit",min:"1",max:"1440"},null,8,["modelValue","disabled"]),t[42]||(t[42]=r("p",{class:"text-xs text-muted-foreground mt-1"},"Optional: Set how many minutes students have to complete the quiz",-1)),e.getFieldError("time_limit_minutes")?(a(),c("div",zt,f(e.getFieldError("time_limit_minutes")),1)):p("",!0)]),r("div",Ft,[G(r("input",{type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=l=>e.form.allows_extensions=l),id:"allows_extensions",disabled:e.form.processing,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,qt),[[K,e.form.allows_extensions]]),o(y,{for:"allows_extensions"},{default:i(()=>t[43]||(t[43]=[m("Allow deadline extensions upon request")])),_:1})])])):p("",!0)])]),_:1})]),_:1}),o(T,null,{default:i(()=>[o(Q,null,{default:i(()=>[o(F,null,{default:i(()=>[m("Questions ("+f(e.form.questions.length)+"/20)",1)]),_:1})]),_:1}),o(A,null,{default:i(()=>[(a(!0),c(U,null,O(e.form.questions,(l,u)=>(a(),c("div",{key:`question-${u}`,class:v(["border dark rounded-lg p-4 mb-4",e.hasQuestionErrors(u)?"border-red-300 bg-red-50":""])},[r("div",St,[r("h3",{class:v(["text-sm font-medium",e.hasQuestionErrors(u)?"text-red-900":"text-white"])},[m(" Question "+f(u+1)+" ",1),e.hasQuestionErrors(u)?(a(),c("span",Tt," Has errors ")):p("",!0)],2),e.form.questions.length>1?(a(),W(E,{key:0,onClick:g=>e.removeQuestion(u),type:"button",variant:"ghost",size:"sm",class:"text-destructive hover:text-destructive",disabled:e.form.processing},{default:i(()=>t[44]||(t[44]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]),r("div",Qt,[r("div",At,[o(y,{for:`question_text_${u}`,class:v(e.getFieldError(`questions.${u}.question_text`)?"text-red-700":"")},{default:i(()=>t[45]||(t[45]=[m(" Question Text "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),o(q,{id:`question_text_${u}`,modelValue:l.question_text,"onUpdate:modelValue":g=>l.question_text=g,type:"text",placeholder:"Enter question text",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.question_text`)?(a(),c("div",Mt,f(e.getFieldError(`questions.${u}.question_text`)),1)):p("",!0)]),r("div",null,[o(y,{for:`type_${u}`,class:v(e.getFieldError(`questions.${u}.type`)?"text-red-700":"")},{default:i(()=>t[46]||(t[46]=[m(" Type "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),o(B,{id:`type_${u}`,modelValue:l.type,"onUpdate:modelValue":[g=>l.type=g,g=>e.resetQuestionOptions(u)],disabled:e.form.processing},{default:i(()=>[o(j,null,{default:i(()=>[o(d,{placeholder:"Select question type"})]),_:1}),o(S,null,{default:i(()=>[o(V,{value:"radio"},{default:i(()=>t[47]||(t[47]=[m("Radio (Single Choice)")])),_:1}),o(V,{value:"checkbox"},{default:i(()=>t[48]||(t[48]=[m("Checkbox (Multiple Choice)")])),_:1}),o(V,{value:"text"},{default:i(()=>t[49]||(t[49]=[m("Text (Open-ended)")])),_:1})]),_:1})]),_:2},1032,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.type`)?(a(),c("div",Ut,f(e.getFieldError(`questions.${u}.type`)),1)):p("",!0)]),l.type!=="text"?(a(),c("div",Ot,[o(y,{for:`points_${u}`,class:v(e.getFieldError(`questions.${u}.points`)?"text-red-700":"")},{default:i(()=>t[50]||(t[50]=[m(" Points "),r("span",{class:"text-red-500"},"*",-1)])),_:2},1032,["for","class"]),o(q,{id:`points_${u}`,modelValue:l.points,"onUpdate:modelValue":g=>l.points=g,modelModifiers:{number:!0},type:"number",min:"0",placeholder:"Enter points",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"]),e.getFieldError(`questions.${u}.points`)?(a(),c("div",Pt,f(e.getFieldError(`questions.${u}.points`)),1)):p("",!0)])):p("",!0)]),l.type!=="text"?(a(),c("div",Lt,[t[55]||(t[55]=r("h4",{class:"mb-2 text-sm font-medium text-white"},"Options",-1)),(a(!0),c(U,null,O(l.options,(g,x)=>(a(),c("div",{key:`option-${u}-${x}`,class:"mb-2 flex items-center"},[o(q,{modelValue:l.options[x],"onUpdate:modelValue":M=>l.options[x]=M,type:"text",class:"flex-1",placeholder:`Option ${x+1}`,disabled:e.form.processing},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"]),l.options.length>2?(a(),W(E,{key:0,onClick:M=>e.removeOption(u,x),type:"button",variant:"ghost",size:"sm",class:"ml-2 text-destructive",disabled:e.form.processing},{default:i(()=>t[51]||(t[51]=[m(" Remove ")])),_:2},1032,["onClick","disabled"])):p("",!0)]))),128)),e.getFieldError(`questions.${u}.options`)?(a(),c("div",jt,f(e.getFieldError(`questions.${u}.options`)),1)):p("",!0),o(E,{onClick:g=>e.addOption(u),type:"button",variant:"outline",size:"sm",class:"mt-2",disabled:e.form.processing||l.options.length>=10},{default:i(()=>t[52]||(t[52]=[m(" Add Option ")])),_:2},1032,["onClick","disabled"]),r("div",Bt,[t[53]||(t[53]=r("label",{class:"mb-1 block text-sm font-medium text-white"},[m(" Correct Answer(s) "),r("span",{class:"text-red-500"},"*")],-1)),l.type==="radio"?(a(),c("div",Dt,[(a(!0),c(U,null,O(l.options,(g,x)=>(a(),c("div",{key:`radio-${u}-${x}`,class:"flex items-center"},[r("input",{id:`correct_answer_${u}_${x}`,checked:l.correct_answer.includes(g),value:g,type:"radio",name:`correct_answer_${u}`,class:"h-4 w-4 dark text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim(),onChange:M=>e.updateCorrectAnswer(u,g)},null,40,Rt),r("label",{for:`correct_answer_${u}_${x}`,class:"ml-2 text-sm text-white"},f(g||`Option ${x+1}`),9,Nt)]))),128))])):l.type==="checkbox"?(a(),c("div",Ht,[(a(!0),c(U,null,O(l.options,(g,x)=>(a(),c("div",{key:`checkbox-${u}-${x}`,class:"flex items-center"},[G(r("input",{id:`correct_answer_${u}_${x}`,value:g,type:"checkbox","onUpdate:modelValue":M=>l.correct_answer=M,class:"h-4 w-4 border-gray-300 text-indigo-600 focus:ring-indigo-500",disabled:e.form.processing||!g.trim()},null,8,Jt),[[K,l.correct_answer]]),r("label",{for:`correct_answer_${u}_${x}`,class:"ml-2 text-sm text-white"},f(g||`Option ${x+1}`),9,Wt)]))),128))])):p("",!0),e.getFieldError(`questions.${u}.correct_answer`)?(a(),c("div",Gt,f(e.getFieldError(`questions.${u}.correct_answer`)),1)):p("",!0)]),r("div",Kt,[o(y,{for:`correct_answer_explanation_${u}`},{default:i(()=>t[54]||(t[54]=[m("Correct Answer Explanation")])),_:2},1032,["for"]),o(J,{id:`correct_answer_explanation_${u}`,modelValue:l.correct_answer_explanation,"onUpdate:modelValue":g=>l.correct_answer_explanation=g,rows:"2",placeholder:"Explain why this is correct (optional)",disabled:e.form.processing},null,8,["id","modelValue","onUpdate:modelValue","disabled"])])])):p("",!0),l.type==="text"?(a(),c("div",Xt,t[56]||(t[56]=[r("p",{class:"text-sm text-blue-700"}," ðŸ“ This is an open-ended text question. Students will provide their own written response. ",-1)]))):p("",!0)],2))),128)),o(E,{onClick:e.addQuestion,type:"button",disabled:e.form.processing||e.form.questions.length>=20},{default:i(()=>t[57]||(t[57]=[r("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),m(" Add Question ")])),_:1},8,["onClick","disabled"])]),_:1})]),_:1}),r("div",Yt,[o(E,{"as-child":"",variant:"outline",disabled:e.form.processing},{default:i(()=>[o(H,{href:h.route("admin.quizzes.index"),onClick:me(e.confirmDiscard,["prevent"])},{default:i(()=>t[58]||(t[58]=[m(" Cancel ")])),_:1},8,["href","onClick"])]),_:1},8,["disabled"]),o(E,{type:"submit",disabled:e.form.processing||e.form.status==="published"&&!e.canPublish},{default:i(()=>[e.form.processing?(a(),c("span",Zt,t[59]||(t[59]=[r("svg",{class:"mr-2 h-5 w-5 animate-spin text-white",fill:"none",viewBox:"0 0 24 24"},[r("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),r("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),m(" Saving... ")]))):(a(),c("span",It,"Update Quiz"))]),_:1},8,["disabled"])])],32),o(C,{show:e.showDiscardModal,onClose:t[15]||(t[15]=l=>e.showDiscardModal=!1)},{default:i(()=>[r("div",$t,[t[62]||(t[62]=r("h2",{class:"mb-3 text-xl font-semibold text-white"},"Discard Changes",-1)),t[63]||(t[63]=r("p",{class:"mb-6 text-sm text-gray-600"},"Are you sure you want to discard your changes? This action cannot be undone.",-1)),r("div",er,[o(E,{onClick:t[14]||(t[14]=l=>e.showDiscardModal=!1),variant:"outline",disabled:e.form.processing},{default:i(()=>t[60]||(t[60]=[m(" Cancel ")])),_:1},8,["disabled"]),o(E,{onClick:e.discardChanges,variant:"destructive",disabled:e.form.processing},{default:i(()=>t[61]||(t[61]=[m(" Discard ")])),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"]),e.toasts.length>0?(a(),c("div",tr,[(a(!0),c(U,null,O(e.toasts,l=>(a(),c("div",{key:l.id,class:v(["transform transition-all duration-300 ease-in-out",l.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[r("div",{class:v(["flex items-center w-full max-w-xs p-4 text-gray-500 bg-white rounded-lg shadow-lg border",e.toastClasses[l.type]])},[r("div",{class:v(["inline-flex items-center justify-center flex-shrink-0 w-8 h-8 rounded-lg",e.toastIconClasses[l.type]])},[l.type==="success"?(a(),c("svg",rr,t[64]||(t[64]=[r("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)]))):l.type==="error"?(a(),c("svg",sr,t[65]||(t[65]=[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)]))):(a(),c("svg",or,t[66]||(t[66]=[r("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"},null,-1)])))],2),r("div",lr,f(l.message),1),r("button",{onClick:u=>e.removeToast(l.id),type:"button",class:"ml-auto -mx-1.5 -my-1.5 bg-white text-gray-400 hover:text-white rounded-lg focus:ring-2 focus:ring-gray-300 p-1.5 hover:bg-gray-100 inline-flex h-8 w-8"},t[67]||(t[67]=[r("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[r("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)]),8,ir)],2)],2))),128))])):p("",!0)])]),_:1},8,["breadcrumbs"])}const Dr=Re(Ne,[["render",nr],["__scopeId","data-v-9c37468b"]]);export{Dr as default};
