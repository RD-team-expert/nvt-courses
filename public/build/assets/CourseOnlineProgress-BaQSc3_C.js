import{d as ve,r as S,c as q,W as P,l as ge,V as xe,bo as ye,g as $,o as d,w as l,e as r,b as t,u as e,f as n,n as J,t as u,a as i,F as T,i as D,h as A}from"./app-BMyidKIh.js";import{_ as we}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CwtOIFIS.js";import{l as be}from"./lodash-CJ4daae0.js";import{_ as F}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as K}from"./Input.vue_vue_type_script_setup_true_lang-BnRJBFP3.js";import{_ as U}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{_ as y}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_ as w}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as Q}from"./CardDescription.vue_vue_type_script_setup_true_lang-CvcJ_Am_.js";import{_ as b}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as h}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as R,a as j,b as B,c as N,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-TbH3IXvu.js";import{_ as he,a as ke,b as X,c as k,d as Ce,e as C}from"./TableHeader.vue_vue_type_script_setup_true_lang-Vc69-q_L.js";import{_ as Y}from"./index-C3o0bvIk.js";import{_ as Z}from"./Progress.vue_vue_type_script_setup_true_lang-Bm2abfAJ.js";import{R as Se}from"./refresh-cw-eJX7_DY3.js";import{D as $e}from"./download-P5nUW78Q.js";import{B as E}from"./book-open-CrgjHHRr.js";import{C as Ae}from"./circle-check-big-Cmw2hoxS.js";import{A as Te}from"./activity-C-DsEtzk.js";import{C as ee}from"./chart-column-COwNpHUF.js";import{C as te}from"./clock-C9ZtgHl0.js";import{F as Fe}from"./filter-Bpg7K8Uh.js";import{R as Ue}from"./rotate-ccw-vI8G8xvO.js";import{U as Ve}from"./_plugin-vue_export-helper-Cg8ARLjz.js";import{T as Pe}from"./triangle-alert-BGzxpn4P.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./Presence-D_88WakH.js";import"./ConfigProvider-BNe-qVox.js";import"./useForwardExpose-DMAVYlpA.js";import"./Teleport-CcnEHzmd.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BQjwjK-c.js";import"./Collection-CjETHI6E.js";import"./usePrimitiveElement-s00YWk2f.js";import"./check-C-CvZSBJ.js";import"./useSize-DbKzACL9.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-hOZS4qMA.js";const De={class:"px-4 sm:px-0 space-y-6"},Le={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},Me={class:"flex gap-2"},Re={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4"},je={class:"text-2xl font-bold"},Be={class:"text-2xl font-bold text-green-600 dark:text-green-400"},Ne={class:"text-xs text-muted-foreground"},Ee={class:"text-2xl font-bold text-blue-600 dark:text-blue-400"},ze={class:"text-2xl font-bold"},He={class:"text-2xl font-bold"},Ie={class:"flex items-center"},Oe={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4"},We={class:"space-y-2"},Ge={class:"space-y-2"},qe={class:"space-y-2"},Je={class:"space-y-2"},Ke={class:"space-y-2"},Qe={class:"flex items-end"},Xe={class:"flex items-center justify-between"},Ye={key:0,class:"text-center py-8"},Ze={key:1,class:"overflow-x-auto"},et={class:"flex items-center"},tt={class:"flex items-center"},st={class:"flex items-center"},lt={class:"flex items-center"},at={class:"flex items-center"},ot={class:"space-y-1"},rt={class:"font-medium text-foreground"},nt={class:"text-sm text-muted-foreground"},ut={key:0,class:"text-xs text-muted-foreground"},dt={class:"space-y-2"},it={class:"font-medium text-foreground"},ft={class:"space-y-2"},mt={class:"flex items-center justify-between text-sm"},_t={class:"font-medium"},pt={class:"space-y-1"},ct={class:"text-sm font-medium text-foreground"},vt={class:"text-xs text-muted-foreground"},gt={class:"space-y-1"},xt={class:"text-sm"},yt={key:1,class:"text-muted-foreground"},wt={key:0,class:"text-xs text-muted-foreground"},bt={key:1,class:"text-xs text-red-600 dark:text-red-400 flex items-center"},ht={class:"space-y-1"},kt={class:"text-sm text-foreground"},Ct={key:0,class:"text-xs text-muted-foreground"},St={key:1,class:"text-xs text-green-600 dark:text-green-400"},$t={key:2,class:"mt-6"},At={class:"flex items-center justify-between"},Tt={class:"text-sm text-muted-foreground"},Ft={class:"flex space-x-2"},ws=ve({__name:"CourseOnlineProgress",props:{assignments:{default:()=>({data:[],links:[],meta:{current_page:1,from:0,last_page:1,to:0,total:0}})},courses:{default:()=>[]},users:{default:()=>[]},filters:{default:()=>({})},stats:{default:()=>({total_assignments:0,completed_assignments:0,in_progress_assignments:0,average_completion_rate:0,total_learning_hours:0})}},setup(se){var H,I,O,W,G;const x=se,le=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Course Progress",href:"#"}],f=S(((H=x.filters)==null?void 0:H.course_id)||""),m=S(((I=x.filters)==null?void 0:I.status)||""),_=S(((O=x.filters)==null?void 0:O.user_id)||""),c=S(((W=x.filters)==null?void 0:W.date_from)||""),v=S(((G=x.filters)==null?void 0:G.date_to)||""),V=S(!1),ae=q(()=>{var a,s;return((s=(a=x.assignments)==null?void 0:a.meta)==null?void 0:s.total)||0}),oe=q(()=>{var a,s;return((s=(a=x.assignments)==null?void 0:a.meta)==null?void 0:s.last_page)||1}),re=be.debounce(()=>{const a={};f.value&&f.value!=="all"&&(a.course_id=f.value),m.value&&m.value!=="all"&&(a.status=m.value),_.value&&_.value!=="all"&&(a.user_id=_.value),c.value&&(a.date_from=c.value),v.value&&(a.date_to=v.value),P.get(route("admin.reports.course-online.progress"),a,{preserveState:!0,preserveScroll:!0,only:["assignments","stats"]})},300),ne=()=>{f.value="",m.value="",_.value="",c.value="",v.value="",P.get(route("admin.reports.course-online.progress"),{},{preserveState:!0,preserveScroll:!0})},ue=()=>{const a=new URLSearchParams;f.value&&f.value!=="all"&&a.append("course_id",f.value),m.value&&m.value!=="all"&&a.append("status",m.value),_.value&&_.value!=="all"&&a.append("user_id",_.value),c.value&&a.append("date_from",c.value),v.value&&a.append("date_to",v.value);const s=route("admin.reports.course-online.export.progress")+"?"+a.toString();window.open(s,"_blank")},de=()=>{V.value=!0;const a={};f.value&&f.value!=="all"&&(a.course_id=f.value),m.value&&m.value!=="all"&&(a.status=m.value),_.value&&_.value!=="all"&&(a.user_id=_.value),c.value&&(a.date_from=c.value),v.value&&(a.date_to=v.value),P.get(route("admin.reports.course-online.progress"),a,{preserveState:!1,preserveScroll:!0,onFinish:()=>{setTimeout(()=>{V.value=!1},500)}})},ie=a=>{switch(a==null?void 0:a.toLowerCase()){case"assigned":return"secondary";case"in_progress":return"default";case"completed":return"outline";default:return"secondary"}},fe=a=>{switch(a==null?void 0:a.toLowerCase()){case"assigned":return"Not Started";case"in_progress":return"In Progress";case"completed":return"Completed";default:return a||"Unknown"}},me=a=>{switch(a==null?void 0:a.toLowerCase()){case"beginner":return"default";case"intermediate":return"secondary";case"advanced":return"destructive";default:return"outline"}},_e=a=>{if(!a||a<=0)return"0 min";if(a<60)return`${Math.round(a)}m`;const s=Math.floor(a/60),p=Math.round(a%60);return p>0?`${s}h ${p}m`:`${s}h`},L=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}catch{return"Invalid Date"}},z=(a,s)=>{if(!a&&a!==0)return"No Data";let p=a;return s>0&&(p-=s*10),p=Math.max(0,p),p>=85?"Excellent":p>=70?"Good":p>=50?"Average":"Poor"},pe=(a,s)=>{switch(z(a,s)){case"Excellent":return"text-green-600 dark:text-green-400";case"Good":return"text-blue-600 dark:text-blue-400";case"Average":return"text-yellow-600 dark:text-yellow-400";case"Poor":return"text-red-600 dark:text-red-400";default:return"text-muted-foreground"}},ce=ge([f,m,_,c,v],re);return xe(()=>{ce()}),(a,s)=>{const p=ye("Calendar");return d(),$(we,{breadcrumbs:le},{default:l(()=>[r("div",De,[r("div",Le,[s[7]||(s[7]=r("div",null,[r("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Course Online Progress Report"),r("p",{class:"text-sm text-muted-foreground mt-1"},"Track online course assignment progress and performance")],-1)),r("div",Me,[t(e(F),{variant:"outline",size:"sm",onClick:de,disabled:V.value},{default:l(()=>[t(e(Se),{class:J(["mr-2 h-4 w-4",{"animate-spin":V.value}])},null,8,["class"]),s[5]||(s[5]=n(" Refresh "))]),_:1},8,["disabled"]),t(e(F),{onClick:ue,size:"sm"},{default:l(()=>[t(e($e),{class:"mr-2 h-4 w-4"}),s[6]||(s[6]=n(" Export CSV "))]),_:1})])]),r("div",Re,[t(e(y),null,{default:l(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(h),{class:"text-sm font-medium"},{default:l(()=>s[8]||(s[8]=[n("Total Assignments")])),_:1}),t(e(E),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(w),null,{default:l(()=>[r("div",je,u(a.stats.total_assignments.toLocaleString()),1)]),_:1})]),_:1}),t(e(y),null,{default:l(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(h),{class:"text-sm font-medium"},{default:l(()=>s[9]||(s[9]=[n("Completed")])),_:1}),t(e(Ae),{class:"h-4 w-4 text-green-600 dark:text-green-400"})]),_:1}),t(e(w),null,{default:l(()=>[r("div",Be,u(a.stats.completed_assignments.toLocaleString()),1),r("p",Ne,u(a.stats.total_assignments>0?Math.round(a.stats.completed_assignments/a.stats.total_assignments*100):0)+"% completion rate ",1)]),_:1})]),_:1}),t(e(y),null,{default:l(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(h),{class:"text-sm font-medium"},{default:l(()=>s[10]||(s[10]=[n("In Progress")])),_:1}),t(e(Te),{class:"h-4 w-4 text-blue-600 dark:text-blue-400"})]),_:1}),t(e(w),null,{default:l(()=>[r("div",Ee,u(a.stats.in_progress_assignments.toLocaleString()),1),s[11]||(s[11]=r("p",{class:"text-xs text-muted-foreground"},"Currently learning",-1))]),_:1})]),_:1}),t(e(y),null,{default:l(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(h),{class:"text-sm font-medium"},{default:l(()=>s[12]||(s[12]=[n("Avg Progress")])),_:1}),t(e(ee),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(w),null,{default:l(()=>[r("div",ze,u(Math.round(a.stats.average_completion_rate))+"%",1),t(e(Z),{value:a.stats.average_completion_rate,class:"mt-2"},null,8,["value"])]),_:1})]),_:1}),t(e(y),null,{default:l(()=>[t(e(b),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:l(()=>[t(e(h),{class:"text-sm font-medium"},{default:l(()=>s[13]||(s[13]=[n("Total Learning Time")])),_:1}),t(e(te),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(w),null,{default:l(()=>[r("div",He,u(a.stats.total_learning_hours.toFixed(1))+"h",1),s[14]||(s[14]=r("p",{class:"text-xs text-muted-foreground"},"Hours invested",-1))]),_:1})]),_:1})]),t(e(y),null,{default:l(()=>[t(e(b),null,{default:l(()=>[r("div",Ie,[t(e(Fe),{class:"mr-2 h-5 w-5 text-primary"}),r("div",null,[t(e(h),null,{default:l(()=>s[15]||(s[15]=[n("Filter Assignments")])),_:1}),t(e(Q),null,{default:l(()=>s[16]||(s[16]=[n("Use the filters below to narrow down the assignment records")])),_:1})])])]),_:1}),t(e(w),null,{default:l(()=>[r("div",Oe,[r("div",We,[t(e(U),{for:"course_filter"},{default:l(()=>s[17]||(s[17]=[n("Course")])),_:1}),t(e(R),{"model-value":f.value||"all","onUpdate:modelValue":s[0]||(s[0]=o=>f.value=o==="all"?"":o)},{default:l(()=>[t(e(j),{id:"course_filter"},{default:l(()=>[t(e(B),{placeholder:"All Courses"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(g),{value:"all"},{default:l(()=>s[18]||(s[18]=[n("All Courses")])),_:1}),(d(!0),i(T,null,D(a.courses,o=>(d(),$(e(g),{key:o.id,value:o.id.toString()},{default:l(()=>[n(u(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),r("div",Ge,[t(e(U),{for:"status_filter"},{default:l(()=>s[19]||(s[19]=[n("Status")])),_:1}),t(e(R),{"model-value":m.value||"all","onUpdate:modelValue":s[1]||(s[1]=o=>m.value=o==="all"?"":o)},{default:l(()=>[t(e(j),{id:"status_filter"},{default:l(()=>[t(e(B),{placeholder:"All Statuses"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(g),{value:"all"},{default:l(()=>s[20]||(s[20]=[n("All Statuses")])),_:1}),t(e(g),{value:"assigned"},{default:l(()=>s[21]||(s[21]=[n("Not Started")])),_:1}),t(e(g),{value:"in_progress"},{default:l(()=>s[22]||(s[22]=[n("In Progress")])),_:1}),t(e(g),{value:"completed"},{default:l(()=>s[23]||(s[23]=[n("Completed")])),_:1})]),_:1})]),_:1},8,["model-value"])]),r("div",qe,[t(e(U),{for:"user_filter"},{default:l(()=>s[24]||(s[24]=[n("User")])),_:1}),t(e(R),{"model-value":_.value||"all","onUpdate:modelValue":s[2]||(s[2]=o=>_.value=o==="all"?"":o)},{default:l(()=>[t(e(j),{id:"user_filter"},{default:l(()=>[t(e(B),{placeholder:"All Users"})]),_:1}),t(e(N),null,{default:l(()=>[t(e(g),{value:"all"},{default:l(()=>s[25]||(s[25]=[n("All Users")])),_:1}),(d(!0),i(T,null,D(a.users,o=>(d(),$(e(g),{key:o.id,value:o.id.toString()},{default:l(()=>[n(u(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),r("div",Je,[t(e(U),{for:"date_from"},{default:l(()=>s[26]||(s[26]=[n("From Date")])),_:1}),t(e(K),{id:"date_from",type:"date",modelValue:c.value,"onUpdate:modelValue":s[3]||(s[3]=o=>c.value=o),placeholder:"Start date"},null,8,["modelValue"])]),r("div",Ke,[t(e(U),{for:"date_to"},{default:l(()=>s[27]||(s[27]=[n("To Date")])),_:1}),t(e(K),{id:"date_to",type:"date",modelValue:v.value,"onUpdate:modelValue":s[4]||(s[4]=o=>v.value=o),placeholder:"End date"},null,8,["modelValue"])]),r("div",Qe,[t(e(F),{variant:"outline",onClick:ne,class:"w-full"},{default:l(()=>[t(e(Ue),{class:"mr-2 h-4 w-4"}),s[28]||(s[28]=n(" Reset Filters "))]),_:1})])])]),_:1})]),_:1}),t(e(y),null,{default:l(()=>[t(e(b),null,{default:l(()=>[r("div",Xe,[r("div",null,[t(e(h),null,{default:l(()=>s[29]||(s[29]=[n("Assignment Progress")])),_:1}),t(e(Q),null,{default:l(()=>{var o,M;return[n(" Showing "+u(((o=a.assignments.meta)==null?void 0:o.from)||1)+" to "+u(((M=a.assignments.meta)==null?void 0:M.to)||a.assignments.data.length)+" of "+u(ae.value)+" assignments ",1)]}),_:1})])])]),_:1}),t(e(w),null,{default:l(()=>[a.assignments.data.length===0?(d(),i("div",Ye,[t(e(E),{class:"mx-auto h-12 w-12 text-muted-foreground"}),s[30]||(s[30]=r("h3",{class:"mt-2 text-sm font-semibold text-foreground"},"No assignments found",-1)),s[31]||(s[31]=r("p",{class:"mt-1 text-sm text-muted-foreground"},"Try adjusting your filters to see results.",-1))])):(d(),i("div",Ze,[t(e(he),null,{default:l(()=>[t(e(ke),null,{default:l(()=>[t(e(X),null,{default:l(()=>[t(e(k),null,{default:l(()=>[r("div",et,[t(e(Ve),{class:"mr-2 h-4 w-4"}),s[32]||(s[32]=n(" User "))])]),_:1}),t(e(k),null,{default:l(()=>[r("div",tt,[t(e(E),{class:"mr-2 h-4 w-4"}),s[33]||(s[33]=n(" Course "))])]),_:1}),t(e(k),null,{default:l(()=>[r("div",st,[t(e(ee),{class:"mr-2 h-4 w-4"}),s[34]||(s[34]=n(" Progress "))])]),_:1}),t(e(k),null,{default:l(()=>s[35]||(s[35]=[n("Status")])),_:1}),t(e(k),null,{default:l(()=>[r("div",lt,[t(e(te),{class:"mr-2 h-4 w-4"}),s[36]||(s[36]=n(" Time Spent "))])]),_:1}),t(e(k),null,{default:l(()=>s[37]||(s[37]=[n("Performance")])),_:1}),t(e(k),null,{default:l(()=>[r("div",at,[t(p,{class:"mr-2 h-4 w-4"}),s[38]||(s[38]=n(" Assigned Date "))])]),_:1})]),_:1})]),_:1}),t(e(Ce),null,{default:l(()=>[(d(!0),i(T,null,D(a.assignments.data,o=>(d(),$(e(X),{key:o.id,class:"hover:bg-muted/50"},{default:l(()=>[t(e(C),null,{default:l(()=>[r("div",ot,[r("div",rt,u(o.user_name),1),r("div",nt,u(o.user_email),1),o.department_name?(d(),i("div",ut,u(o.department_name),1)):A("",!0)])]),_:2},1024),t(e(C),null,{default:l(()=>[r("div",dt,[r("div",it,u(o.course_name),1),t(e(Y),{variant:me(o.difficulty_level)},{default:l(()=>[n(u(o.difficulty_level||"Unknown"),1)]),_:2},1032,["variant"])])]),_:2},1024),t(e(C),null,{default:l(()=>[r("div",ft,[r("div",mt,[r("span",_t,u(Math.round(o.progress_percentage))+"%",1)]),t(e(Z),{value:o.progress_percentage,class:"h-2"},null,8,["value"])])]),_:2},1024),t(e(C),null,{default:l(()=>[t(e(Y),{variant:ie(o.status)},{default:l(()=>[n(u(fe(o.status)),1)]),_:2},1032,["variant"])]),_:2},1024),t(e(C),null,{default:l(()=>[r("div",pt,[r("div",ct,u(_e(o.total_time_spent)),1),r("div",vt,u(o.total_sessions)+" sessions ",1)])]),_:2},1024),t(e(C),null,{default:l(()=>[r("div",gt,[r("div",xt,[o.avg_attention_score!==null?(d(),i("span",{key:0,class:J(["font-medium",pe(o.avg_attention_score,o.suspicious_sessions)])},u(z(o.avg_attention_score,o.suspicious_sessions)),3)):(d(),i("span",yt,"No data"))]),o.avg_attention_score!==null?(d(),i("div",wt,u(Math.round(o.avg_attention_score))+"% attention ",1)):A("",!0),o.suspicious_sessions>0?(d(),i("div",bt,[t(e(Pe),{class:"h-3 w-3 mr-1"}),n(" "+u(o.suspicious_sessions)+" suspicious ",1)])):A("",!0)])]),_:2},1024),t(e(C),null,{default:l(()=>[r("div",ht,[r("div",kt,u(L(o.assigned_at)),1),o.started_at?(d(),i("div",Ct," Started: "+u(L(o.started_at)),1)):A("",!0),o.completed_at?(d(),i("div",St," Completed: "+u(L(o.completed_at)),1)):A("",!0)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])),oe.value>1?(d(),i("div",$t,[r("div",At,[r("div",Tt," Showing "+u(a.assignments.meta.from)+" to "+u(a.assignments.meta.to)+" of "+u(a.assignments.meta.total)+" results ",1),r("div",Ft,[(d(!0),i(T,null,D(a.assignments.links,o=>(d(),i(T,{key:o.label},[o.url?(d(),$(e(F),{key:0,variant:o.active?"default":"outline",size:"sm",onClick:M=>e(P).get(o.url),innerHTML:o.label},null,8,["variant","onClick","innerHTML"])):(d(),$(e(F),{key:1,variant:"outline",size:"sm",disabled:"",innerHTML:o.label},null,8,["innerHTML"]))],64))),128))])])])):A("",!0)]),_:1})]),_:1})])]),_:1})}}});export{ws as default};
