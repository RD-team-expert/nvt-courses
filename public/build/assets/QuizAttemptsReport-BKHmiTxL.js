import{d as H,r as J,W as S,l as K,g as _,o as m,w as a,e as l,b as e,u as t,f as r,a as y,F as V,i as F,t as d,n as Y,k as Z,h as A}from"./app-C__QVaju.js";import{_ as tt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-COUzsA74.js";import{l as et}from"./lodash-DiIbYfpy.js";import{_ as st}from"./Pagination.vue_vue_type_script_setup_true_lang-BarWIrIb.js";import{_ as U}from"./Button.vue_vue_type_script_setup_true_lang-3wUGolNO.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-aF8VS1eW.js";import{_ as x}from"./Label.vue_vue_type_script_setup_true_lang-B_8So5-r.js";import{_ as P}from"./Card.vue_vue_type_script_setup_true_lang-C6NTCksb.js";import{_ as at}from"./CardContent.vue_vue_type_script_setup_true_lang-CVVI4jBC.js";import{_ as lt}from"./CardDescription.vue_vue_type_script_setup_true_lang-uH9K1n7e.js";import{_ as ot}from"./CardHeader.vue_vue_type_script_setup_true_lang-EmAvtNmd.js";import{_ as rt}from"./CardTitle.vue_vue_type_script_setup_true_lang-D-QOz8Vl.js";import{_ as Q,a as T,b as R,c as j,d as c}from"./SelectValue.vue_vue_type_script_setup_true_lang-CwE9uTNb.js";import{_ as it,a as dt,b,c as p,d as nt,e as f}from"./TableHeader.vue_vue_type_script_setup_true_lang-B2DjVf0H.js";import{_ as w}from"./index-C7BOh4kc.js";import{_ as ut}from"./Progress.vue_vue_type_script_setup_true_lang-CwXvIQJJ.js";import{D as mt}from"./download-BHWi3MLo.js";import{F as ft}from"./filter-nNpkY0n7.js";import{R as _t}from"./rotate-ccw-CMXaEvgf.js";import{U as ct}from"./user-BPfxfiyt.js";import{F as B}from"./file-text-B2QdJJTO.js";import{T as pt}from"./target-CvumHZoC.js";import{T as vt}from"./trophy-1mqS6ljN.js";import{C as xt}from"./calendar-CGmzp4gQ.js";import{C as gt}from"./clock-8P7QZ8ho.js";import{C as ht}from"./circle-check-big-Bfe2MAlp.js";import{C as yt}from"./circle-x-DgI2_cmG.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-B2Dge6gk.js";import"./index-Eaggz7Xa.js";import"./index-DU9IJCLr.js";import"./_plugin-vue_export-helper-DTeMU56P.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B2uDP-vU.js";import"./useForwardPropsEmits-BEVKN6n0.js";import"./Presence-BKN0Rp2q.js";import"./ConfigProvider-CTQWQfDl.js";import"./useForwardExpose-BLcFDH4t.js";import"./Teleport-C5XQXQh9.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-jLbl18n9.js";import"./Collection-t8rO_nU0.js";import"./usePrimitiveElement-kCWVBnpO.js";import"./check-CTP6ugNR.js";import"./useSize-B7neWAfJ.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-cBIp1Q_A.js";const bt={class:"px-4 sm:px-0 space-y-6"},wt={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"},zt={class:"flex items-center"},Ct={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},$t={class:"space-y-2"},kt={class:"space-y-2"},qt={class:"space-y-2"},St={class:"space-y-2"},Vt={class:"flex justify-end mt-4"},Ft={class:"overflow-x-auto"},At={class:"flex items-center"},Ut={class:"flex items-center"},Dt={class:"flex items-center"},Pt={class:"flex items-center"},Qt={class:"flex items-center"},Tt={class:"flex flex-col items-center"},Rt={class:"space-y-1"},jt={class:"font-medium text-foreground"},Bt={class:"text-xs text-muted-foreground hidden sm:block"},Nt={class:"text-xs text-muted-foreground sm:hidden"},Et={class:"space-y-2"},Lt={class:"flex items-center justify-between text-sm"},It={class:"font-mono"},Ot={class:"text-sm text-foreground"},Wt={class:"px-4 sm:px-6 py-3 border-t"},Mt={key:1,class:"text-sm text-muted-foreground mt-2"},Be=H({__name:"QuizAttemptsReport",props:{attempts:Object,quizzes:Array,filters:Object},setup(n){var C,$,k,q;const v=n,N=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Quiz Attempts",href:route("admin.reports.quiz-attempts")}],u=J({quiz_id:((C=v.filters)==null?void 0:C.quiz_id)||"",status:(($=v.filters)==null?void 0:$.status)||"",date_from:((k=v.filters)==null?void 0:k.date_from)||"",date_to:((q=v.filters)==null?void 0:q.date_to)||""}),E=o=>{u.value.quiz_id=o==="all"?"":o},L=o=>{u.value.status=o==="all"?"":o},z=et.debounce(()=>{S.get(route("admin.reports.quiz-attempts"),u.value,{preserveState:!0,replace:!0})},500);K(u,()=>{z()},{deep:!0});const I=()=>{u.value={quiz_id:"",status:"",date_from:"",date_to:""},z()},O=()=>{const o=new URLSearchParams(u.value).toString();window.location.href=route("admin.reports.export.quiz-attempts")+"?"+o},W=o=>o?new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"â€”",M=o=>{S.get(route("admin.reports.quiz-attempts"),{...u.value,page:o},{preserveState:!0,replace:!0,preserveScroll:!0,onSuccess:()=>{var s;(s=document.querySelector(".bg-white.rounded-lg.shadow"))==null||s.scrollIntoView({behavior:"smooth",block:"start"})}})},g=o=>o.completed_at?o.passed?{variant:"default",icon:ht,label:"Passed"}:{variant:"destructive",icon:yt,label:"Failed"}:{variant:"secondary",icon:gt,label:"Pending"},h=o=>!o.quiz_total_points||o.quiz_total_points===0?0:Math.round(o.total_score/o.quiz_total_points*100),X=o=>o>=80?"text-green-600":o>=60?"text-yellow-600":"text-red-600";return(o,s)=>(m(),_(tt,{breadcrumbs:N},{default:a(()=>[l("div",bt,[l("div",wt,[s[3]||(s[3]=l("div",null,[l("h1",{class:"text-xl sm:text-2xl font-bold text-foreground"},"Quiz Attempts Report"),l("p",{class:"text-sm text-muted-foreground mt-1"},"Comprehensive reporting interface for tracking quiz attempts, scores, and performance analytics")],-1)),e(t(U),{onClick:O,class:"w-full sm:w-auto"},{default:a(()=>[e(t(mt),{class:"mr-2 h-4 w-4"}),s[2]||(s[2]=r(" Export to CSV "))]),_:1})]),e(t(P),null,{default:a(()=>[e(t(ot),null,{default:a(()=>[l("div",zt,[e(t(ft),{class:"mr-2 h-5 w-5 text-primary"}),l("div",null,[e(t(rt),null,{default:a(()=>s[4]||(s[4]=[r("Filter Attempts")])),_:1}),e(t(lt),null,{default:a(()=>s[5]||(s[5]=[r("Use the filters below to narrow down the quiz attempt records")])),_:1})])])]),_:1}),e(t(at),null,{default:a(()=>[l("div",Ct,[l("div",$t,[e(t(x),{for:"quiz_filter"},{default:a(()=>s[6]||(s[6]=[r("Quiz")])),_:1}),e(t(Q),{"model-value":u.value.quiz_id||"all","onUpdate:modelValue":E},{default:a(()=>[e(t(T),{id:"quiz_filter"},{default:a(()=>[e(t(R),{placeholder:"All Quizzes"})]),_:1}),e(t(j),null,{default:a(()=>[e(t(c),{value:"all"},{default:a(()=>s[7]||(s[7]=[r("All Quizzes")])),_:1}),(m(!0),y(V,null,F(n.quizzes,i=>(m(),_(t(c),{key:i.id,value:i.id.toString()},{default:a(()=>[r(d(i.title),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),l("div",kt,[e(t(x),{for:"status_filter"},{default:a(()=>s[8]||(s[8]=[r("Status")])),_:1}),e(t(Q),{"model-value":u.value.status||"all","onUpdate:modelValue":L},{default:a(()=>[e(t(T),{id:"status_filter"},{default:a(()=>[e(t(R),{placeholder:"All Statuses"})]),_:1}),e(t(j),null,{default:a(()=>[e(t(c),{value:"all"},{default:a(()=>s[9]||(s[9]=[r("All Statuses")])),_:1}),e(t(c),{value:"passed"},{default:a(()=>s[10]||(s[10]=[r("Passed")])),_:1}),e(t(c),{value:"failed"},{default:a(()=>s[11]||(s[11]=[r("Failed")])),_:1}),e(t(c),{value:"pending"},{default:a(()=>s[12]||(s[12]=[r("Pending")])),_:1})]),_:1})]),_:1},8,["model-value"])]),l("div",qt,[e(t(x),{for:"date_from"},{default:a(()=>s[13]||(s[13]=[r("Date From")])),_:1}),e(t(D),{id:"date_from",type:"date",modelValue:u.value.date_from,"onUpdate:modelValue":s[0]||(s[0]=i=>u.value.date_from=i)},null,8,["modelValue"])]),l("div",St,[e(t(x),{for:"date_to"},{default:a(()=>s[14]||(s[14]=[r("Date To")])),_:1}),e(t(D),{id:"date_to",type:"date",modelValue:u.value.date_to,"onUpdate:modelValue":s[1]||(s[1]=i=>u.value.date_to=i)},null,8,["modelValue"])])]),l("div",Vt,[e(t(U),{onClick:I,variant:"outline"},{default:a(()=>[e(t(_t),{class:"mr-2 h-4 w-4"}),s[15]||(s[15]=r(" Reset Filters "))]),_:1})])]),_:1})]),_:1}),e(t(P),null,{default:a(()=>[l("div",Ft,[e(t(it),null,{default:a(()=>[e(t(dt),null,{default:a(()=>[e(t(b),null,{default:a(()=>[e(t(p),null,{default:a(()=>[l("div",At,[e(t(ct),{class:"mr-2 h-4 w-4"}),s[16]||(s[16]=r(" User "))])]),_:1}),e(t(p),{class:"hidden sm:table-cell"},{default:a(()=>[l("div",Ut,[e(t(B),{class:"mr-2 h-4 w-4"}),s[17]||(s[17]=r(" Quiz "))])]),_:1}),e(t(p),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Dt,[e(t(pt),{class:"mr-2 h-4 w-4"}),s[18]||(s[18]=r(" Score "))])]),_:1}),e(t(p),null,{default:a(()=>s[19]||(s[19]=[r("Status")])),_:1}),e(t(p),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Pt,[e(t(vt),{class:"mr-2 h-4 w-4"}),s[20]||(s[20]=r(" Attempt "))])]),_:1}),e(t(p),null,{default:a(()=>[l("div",Qt,[e(t(xt),{class:"mr-2 h-4 w-4"}),s[21]||(s[21]=r(" Completed "))])]),_:1})]),_:1})]),_:1}),e(t(nt),null,{default:a(()=>[n.attempts.data.length===0?(m(),_(t(b),{key:0},{default:a(()=>[e(t(f),{colspan:"6",class:"text-center text-muted-foreground py-8"},{default:a(()=>[l("div",Tt,[e(t(B),{class:"h-12 w-12 text-muted-foreground mb-2"}),s[22]||(s[22]=r(" No attempt records found "))])]),_:1})]),_:1})):(m(!0),y(V,{key:1},F(n.attempts.data,(i,G)=>(m(),_(t(b),{key:G,class:"hover:bg-muted/50"},{default:a(()=>[e(t(f),null,{default:a(()=>[l("div",Rt,[l("div",jt,d(i.user_name),1),l("div",Bt,d(i.user_email),1),l("div",Nt,d(i.quiz_title),1)])]),_:2},1024),e(t(f),{class:"hidden sm:table-cell"},{default:a(()=>[e(t(w),{variant:"outline"},{default:a(()=>[r(d(i.quiz_title),1)]),_:2},1024)]),_:2},1024),e(t(f),{class:"hidden md:table-cell"},{default:a(()=>[l("div",Et,[l("div",Lt,[l("span",It,d(i.total_score)+"/"+d(i.quiz_total_points),1),l("span",{class:Y(["font-semibold",X(h(i))])},d(h(i))+"% ",3)]),e(t(ut),{value:h(i),class:"h-2"},null,8,["value"])])]),_:2},1024),e(t(f),null,{default:a(()=>[e(t(w),{variant:g(i).variant,class:"flex items-center w-fit"},{default:a(()=>[(m(),_(Z(g(i).icon),{class:"mr-1 h-3 w-3"})),r(" "+d(g(i).label),1)]),_:2},1032,["variant"])]),_:2},1024),e(t(f),{class:"hidden md:table-cell"},{default:a(()=>[e(t(w),{variant:"secondary",class:"font-mono"},{default:a(()=>[r(" #"+d(i.attempt_number),1)]),_:2},1024)]),_:2},1024),e(t(f),null,{default:a(()=>[l("div",Ot,d(W(i.completed_at)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),l("div",Wt,[n.attempts.data&&n.attempts.data.length>0&&n.attempts.last_page>1?(m(),_(st,{key:0,links:n.attempts.links,onPageChanged:M,class:"mt-4"},null,8,["links"])):A("",!0),n.attempts.data&&n.attempts.data.length>0?(m(),y("div",Mt," Showing "+d(n.attempts.from)+" to "+d(n.attempts.to)+" of "+d(n.attempts.total)+" results ",1)):A("",!0)])]),_:1})])]),_:1}))}});export{Be as default};
