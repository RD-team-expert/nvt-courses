import{r as $,A as K,p as X,c as q,W as E,g as x,o as u,w as l,e as t,b as s,h as b,a as f,u as e,t as n,f as m,n as S,j as Z,F as T,i as j,P as ee}from"./app-BMyidKIh.js";import{f as te}from"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import{c as se,_ as V}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as p}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as ae}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as P}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as B}from"./index-C3o0bvIk.js";import{_ as A}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{_ as le}from"./Textarea.vue_vue_type_script_setup_true_lang-7L_wYbMO.js";import{_ as re}from"./Checkbox.vue_vue_type_script_setup_true_lang-Blryit7n.js";import{_ as ie,a as ne}from"./RadioGroupItem.vue_vue_type_script_setup_true_lang-BXG9Ar2o.js";import{_ as U}from"./Progress.vue_vue_type_script_setup_true_lang-Bm2abfAJ.js";import{_ as D,a as M}from"./index-yEoCS5nH.js";import{T as oe}from"./target-Cl3ydDkw.js";import{F as ue}from"./file-text-3242xgL4.js";import{T as de}from"./timer-Czq6R-a8.js";import{C as F}from"./clock-C9ZtgHl0.js";import{T as L}from"./triangle-alert-BGzxpn4P.js";import{C as me}from"./circle-check-big-Cmw2hoxS.js";import{S as ce}from"./save-AWffgFEF.js";import{S as fe}from"./send-BqG5OyZX.js";import{A as ve}from"./arrow-left-WoxIE4Hy.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./_plugin-vue_export-helper-Cg8ARLjz.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./check-C-CvZSBJ.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./useForwardExpose-DMAVYlpA.js";import"./RovingFocusItem-90_8jXtr.js";import"./Presence-D_88WakH.js";import"./ConfigProvider-BNe-qVox.js";import"./Collection-CjETHI6E.js";import"./usePrimitiveElement-s00YWk2f.js";import"./VisuallyHidden-hOZS4qMA.js";import"./VisuallyHiddenInput-BJXawX5X.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=se("CircleHelpIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),pe={class:"min-h-screen bg-gradient-to-br from-background to-secondary/20"},_e={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},he={class:"flex items-start justify-between"},xe={class:"flex-1"},ge={class:"text-3xl font-bold mb-2"},be={class:"text-muted-foreground mb-4"},ye={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},we={class:"flex items-center gap-2 mb-1"},ke={class:"font-semibold"},ze={class:"flex items-center gap-2 mb-1"},$e={class:"font-semibold"},Ae={class:"flex items-center gap-2 mb-1"},Ce={class:"font-semibold"},qe={class:"flex items-center gap-2 mb-1"},Se={class:"font-semibold"},Te={class:"ml-6"},je={class:"flex items-center justify-between"},Ve={class:"flex items-center"},Qe={class:"flex items-center"},Ne={class:"mt-2"},Ee={class:"flex items-center justify-between mb-2"},Pe={class:"text-sm text-muted-foreground"},Be={key:2,class:"space-y-6"},Ue={class:"flex items-center justify-between"},De={class:"flex items-center"},Me={class:"w-8 h-8 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold mr-3"},Fe={class:"flex items-center space-x-2"},Le={class:"text-foreground mb-6 text-base leading-relaxed"},Oe={key:0,class:"space-y-3"},Ye={key:1,class:"space-y-3"},He={key:2},Ie={class:"mt-2 text-xs text-muted-foreground"},Re={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},We={class:"flex items-center space-x-6 text-sm text-muted-foreground"},Ge={class:"flex items-center"},Je={class:"flex items-center"},Ke={class:"flex items-center space-x-3"},Xe={key:1,class:"w-4 h-4 mr-2 animate-spin rounded-full border-b-2 border-current"},Ze={key:1,class:"w-4 h-4 mr-2 animate-spin rounded-full border-b-2 border-current"},et={class:"font-medium"},tt={class:"mx-auto w-24 h-24 bg-accent rounded-full flex items-center justify-center mb-4"},Lt={__name:"Show",props:{quiz:{type:Object,required:!0},questions:{type:Array,default:()=>[]},hasExistingAttempt:{type:Boolean,default:!1}},setup(o){const v=o,d=$({answers:{}}),y=$(!1),z=$(!1),h=$(v.quiz.time_limit?v.quiz.time_limit*60:0),C=$(null);K(()=>{v.questions.forEach(r=>{r.type==="checkbox"?d.value.answers[r.id]=[]:d.value.answers[r.id]=""}),v.quiz.time_limit&&h.value>0&&(C.value=setInterval(()=>{h.value--,h.value<=0&&(clearInterval(C.value),N())},1e3))}),X(()=>{C.value&&clearInterval(C.value)});const w=q(()=>Object.values(d.value.answers).filter(r=>Array.isArray(r)?r.length>0:r&&r.trim()!=="").length),Y=q(()=>v.questions.length===0?0:w.value/v.questions.length*100),Q=q(()=>w.value===v.questions.length),H=q(()=>{var r;return[{name:"Quizzes",route:"quizzes.index"},{name:((r=v.quiz)==null?void 0:r.title)||"Quiz",route:null}]}),I=r=>{const a=d.value.answers[r];return Array.isArray(a)?a.length>0:a&&a.trim()!==""},R=r=>{const a=Math.floor(r/60),i=r%60;return`${a}:${i.toString().padStart(2,"0")}`},W=async()=>{z.value=!0;try{await E.post(route("quizzes.draft",v.quiz.id),{answers:Object.entries(d.value.answers).map(([r,a])=>({question_id:parseInt(r),answer:a}))})}catch(r){console.error("Draft save error:",r)}finally{z.value=!1}},N=async()=>{y.value=!0;try{await E.post(route("quizzes.store",v.quiz.id),{answers:Object.entries(d.value.answers).map(([r,a])=>({question_id:parseInt(r),answer:a}))})}catch(r){console.error("Submission error:",r)}finally{y.value=!1}},G=(r,a,i)=>{const k=d.value.answers[r]||[];i?k.includes(a)||(d.value.answers[r]=[...k,a]):d.value.answers[r]=k.filter(c=>c!==a)};return(r,a)=>(u(),x(te,{breadcrumbs:H.value},{default:l(()=>[t("div",pe,[t("div",_e,[s(e(p),{class:"mb-6"},{default:l(()=>[s(e(_),{class:"p-6"},{default:l(()=>[t("div",he,[t("div",xe,[t("h1",ge,n(o.quiz.title),1),t("p",be,n(o.quiz.description||"No description available"),1),t("div",ye,[s(e(p),{class:"bg-accent/50"},{default:l(()=>[s(e(_),{class:"p-3"},{default:l(()=>[t("div",we,[s(e(oe),{class:"h-4 w-4 text-primary"}),a[0]||(a[0]=t("p",{class:"text-muted-foreground"},"Pass Threshold",-1))]),t("p",ke,n(o.quiz.pass_threshold)+"%",1)]),_:1})]),_:1}),s(e(p),{class:"bg-accent/50"},{default:l(()=>[s(e(_),{class:"p-3"},{default:l(()=>[t("div",ze,[s(e(ue),{class:"h-4 w-4 text-green-600"}),a[1]||(a[1]=t("p",{class:"text-muted-foreground"},"Total Points",-1))]),t("p",$e,n(o.quiz.total_points||"N/A"),1)]),_:1})]),_:1}),s(e(p),{class:"bg-accent/50"},{default:l(()=>[s(e(_),{class:"p-3"},{default:l(()=>[t("div",Ae,[s(e(O),{class:"h-4 w-4 text-blue-600"}),a[2]||(a[2]=t("p",{class:"text-muted-foreground"},"Questions",-1))]),t("p",Ce,n(o.questions.length),1)]),_:1})]),_:1}),s(e(p),{class:"bg-accent/50"},{default:l(()=>[s(e(_),{class:"p-3"},{default:l(()=>[t("div",qe,[s(e(de),{class:"h-4 w-4 text-orange-600"}),a[3]||(a[3]=t("p",{class:"text-muted-foreground"},"Time Limit",-1))]),t("p",Se,n(o.quiz.time_limit?`${o.quiz.time_limit} min`:"No limit"),1)]),_:1})]),_:1})])]),t("div",Te,[s(e(B),{variant:o.hasExistingAttempt?"secondary":"default"},{default:l(()=>[m(n(o.hasExistingAttempt?"Continuing Attempt":"New Attempt"),1)]),_:1},8,["variant"])])])]),_:1})]),_:1}),o.quiz.time_limit&&h.value>0?(u(),x(e(p),{key:0,class:"mb-6"},{default:l(()=>[s(e(_),{class:"p-4"},{default:l(()=>[t("div",je,[t("div",Ve,[s(e(F),{class:S(["h-5 w-5 mr-2",h.value<300?"text-destructive":"text-orange-500"])},null,8,["class"]),a[4]||(a[4]=t("span",{class:"text-sm font-medium"},"Time Remaining",-1))]),t("div",Qe,[t("span",{class:S(["text-lg font-bold",h.value<300?"text-destructive":"text-foreground"])},n(R(h.value)),3)])]),t("div",Ne,[s(e(U),{value:h.value/(o.quiz.time_limit*60)*100,class:S(h.value<300?"text-destructive":"text-primary")},null,8,["value","class"])])]),_:1})]),_:1})):b("",!0),o.hasExistingAttempt?(u(),x(e(D),{key:1,class:"mb-6"},{default:l(()=>[s(e(L),{class:"h-4 w-4"}),s(e(M),null,{default:l(()=>a[5]||(a[5]=[t("div",null,[t("h3",{class:"font-semibold mb-1"},"Continuing Previous Attempt"),t("p",null,"You have an incomplete attempt for this quiz. Your previous answers have been saved. You can modify them before final submission.")],-1)])),_:1})]),_:1})):b("",!0),s(e(p),{class:"mb-6"},{default:l(()=>[s(e(_),{class:"p-4"},{default:l(()=>[t("div",Ee,[a[6]||(a[6]=t("span",{class:"text-sm font-medium"},"Progress",-1)),t("span",Pe,n(w.value)+"/"+n(o.questions.length)+" answered",1)]),s(e(U),{value:Y.value,class:"w-full"},null,8,["value"])]),_:1})]),_:1}),o.questions.length?(u(),f("div",Be,[t("form",{onSubmit:Z(N,["prevent"])},[(u(!0),f(T,null,j(o.questions,(i,k)=>(u(),x(e(p),{key:i.id,class:"overflow-hidden"},{default:l(()=>[s(e(ae),{class:"bg-gradient-to-r from-accent to-accent/50"},{default:l(()=>[t("div",Ue,[t("div",De,[t("div",Me,n(k+1),1),s(e(P),{class:"text-lg"},{default:l(()=>[m(" Question "+n(k+1),1)]),_:2},1024)]),t("div",Fe,[s(e(B),{variant:"secondary"},{default:l(()=>[m(n(i.points||"N/A")+" points ",1)]),_:2},1024),t("div",{class:S(["w-3 h-3 rounded-full",I(i.id)?"bg-green-500":"bg-muted"])},null,2)])])]),_:2},1024),s(e(_),{class:"p-6"},{default:l(()=>[t("p",Le,n(i.question_text),1),i.type==="radio"?(u(),f("div",Oe,[s(e(A),{class:"text-sm font-medium"},{default:l(()=>a[7]||(a[7]=[m("Select one answer:")])),_:1}),s(e(ie),{modelValue:d.value.answers[i.id],"onUpdate:modelValue":c=>d.value.answers[i.id]=c,class:"space-y-2"},{default:l(()=>[(u(!0),f(T,null,j(i.options,(c,g)=>(u(),f("div",{key:g,class:"flex items-start space-x-3 p-3 rounded-lg border hover:border-primary hover:bg-accent/50 transition-colors cursor-pointer"},[s(e(ne),{id:`answer-${i.id}-${g}`,value:c,class:"mt-1"},null,8,["id","value"]),s(e(A),{for:`answer-${i.id}-${g}`,class:"text-sm cursor-pointer flex-1"},{default:l(()=>[m(n(c),1)]),_:2},1032,["for"])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])])):b("",!0),i.type==="checkbox"?(u(),f("div",Ye,[s(e(A),{class:"text-sm font-medium"},{default:l(()=>a[8]||(a[8]=[m("Select all that apply:")])),_:1}),(u(!0),f(T,null,j(i.options,(c,g)=>(u(),f("div",{key:g,class:"flex items-start space-x-3 p-3 rounded-lg border hover:border-primary hover:bg-accent/50 transition-colors cursor-pointer"},[s(e(re),{id:`answer-${i.id}-${g}`,checked:(d.value.answers[i.id]||[]).includes(c),"onUpdate:checked":J=>G(i.id,c,J),class:"mt-1"},null,8,["id","checked","onUpdate:checked"]),s(e(A),{for:`answer-${i.id}-${g}`,class:"text-sm cursor-pointer flex-1"},{default:l(()=>[m(n(c),1)]),_:2},1032,["for"])]))),128))])):b("",!0),i.type==="text"?(u(),f("div",He,[s(e(A),{class:"text-sm font-medium mb-3"},{default:l(()=>a[9]||(a[9]=[m("Your answer:")])),_:1}),s(e(le),{modelValue:d.value.answers[i.id],"onUpdate:modelValue":c=>d.value.answers[i.id]=c,rows:"5",placeholder:"Type your answer here...",required:""},null,8,["modelValue","onUpdate:modelValue"]),t("div",Ie," Character count: "+n((d.value.answers[i.id]||"").length),1)])):b("",!0)]),_:2},1024)]),_:2},1024))),128)),s(e(p),{class:"mt-8"},{default:l(()=>[s(e(_),{class:"p-6"},{default:l(()=>[t("div",Re,[t("div",We,[t("div",Ge,[s(e(me),{class:"w-4 h-4 mr-1 text-green-500"}),t("span",null,n(w.value)+" answered",1)]),t("div",Je,[s(e(F),{class:"w-4 h-4 mr-1 text-muted-foreground"}),t("span",null,n(o.questions.length-w.value)+" remaining",1)])]),t("div",Ke,[o.hasExistingAttempt?b("",!0):(u(),x(e(V),{key:0,type:"button",onClick:W,disabled:y.value||z.value,variant:"outline"},{default:l(()=>[z.value?(u(),f("div",Xe)):(u(),x(e(ce),{key:0,class:"w-4 h-4 mr-2"})),m(" "+n(z.value?"Saving...":"Save Draft"),1)]),_:1},8,["disabled"])),s(e(V),{type:"submit",disabled:y.value||!Q.value},{default:l(()=>[y.value?(u(),f("div",Ze)):(u(),x(e(fe),{key:0,class:"w-4 h-4 mr-2"})),m(" "+n(y.value?"Submitting...":o.hasExistingAttempt?"Complete Quiz":"Submit Quiz"),1)]),_:1},8,["disabled"])])]),Q.value?b("",!0):(u(),x(e(D),{key:0,class:"mt-4",variant:"destructive"},{default:l(()=>[s(e(L),{class:"h-4 w-4"}),s(e(M),null,{default:l(()=>[t("p",null,[a[10]||(a[10]=m(" Please answer all questions before submitting. ")),t("span",et,n(o.questions.length-w.value)+" question(s) remaining.",1)])]),_:1})]),_:1}))]),_:1})]),_:1})],32)])):(u(),x(e(p),{key:3,class:"text-center py-16"},{default:l(()=>[s(e(_),null,{default:l(()=>[t("div",tt,[s(e(O),{class:"w-12 h-12 text-muted-foreground"})]),s(e(P),{class:"mb-2"},{default:l(()=>a[11]||(a[11]=[m("No Questions Available")])),_:1}),a[13]||(a[13]=t("p",{class:"text-muted-foreground mb-4"},"This quiz doesn't have any questions yet.",-1)),s(e(V),{asChild:""},{default:l(()=>[s(e(ee),{href:r.route("quizzes.index")},{default:l(()=>[s(e(ve),{class:"w-4 h-4 mr-2"}),a[12]||(a[12]=m(" Back to Quizzes "))]),_:1},8,["href"])]),_:1})]),_:1})]),_:1}))])])]),_:1},8,["breadcrumbs"]))}};export{Lt as default};
