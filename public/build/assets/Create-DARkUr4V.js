import{d as F,C as N,r as S,a as u,o as n,b as s,u as e,m as G,w as r,e as l,P as L,f as i,j as q,h as p,n as v,t as m,g as T,F as E}from"./app-BMyidKIh.js";import{m as I,f as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-CeyhSayX.js";import{_ as b}from"./Button.vue_vue_type_script_setup_true_lang-Fk6a1Vva.js";import{_ as y}from"./Card.vue_vue_type_script_setup_true_lang-CQovGjFq.js";import{_ as h}from"./CardContent.vue_vue_type_script_setup_true_lang-Dyzxu5FP.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-CvcJ_Am_.js";import{_ as V}from"./CardHeader.vue_vue_type_script_setup_true_lang-_dtBwzkO.js";import{_ as k}from"./CardTitle.vue_vue_type_script_setup_true_lang-zaBMsOvU.js";import{_ as C}from"./Input.vue_vue_type_script_setup_true_lang-BnRJBFP3.js";import{_ as f}from"./Label.vue_vue_type_script_setup_true_lang-Coq7pT1m.js";import{_ as J}from"./Textarea.vue_vue_type_script_setup_true_lang-7L_wYbMO.js";import{_ as H}from"./Switch.vue_vue_type_script_setup_true_lang-29U-kBq1.js";import{A as K}from"./arrow-left-WoxIE4Hy.js";import{S as O}from"./square-play-D3nHx9E6.js";import{L as Q}from"./link-2-CeKR6h0P.js";import{L as W}from"./loader-circle-DC9_B6-i.js";import{T as X}from"./test-tube-CGf0dauX.js";import{I as P}from"./image-CQV8XkQj.js";import{S as Y}from"./save-AWffgFEF.js";import"./index-B9hR5wOz.js";import"./index-C3Bn3h4x.js";import"./_plugin-vue_export-helper-Cg8ARLjz.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CPGGLHXe.js";import"./clock-C9ZtgHl0.js";import"./useForwardPropsEmits-DPcO4mtR.js";import"./useForwardExpose-DMAVYlpA.js";import"./VisuallyHidden-hOZS4qMA.js";import"./VisuallyHiddenInput-BJXawX5X.js";import"./usePrimitiveElement-s00YWk2f.js";const Z={class:"max-w-4xl mx-auto space-y-6"},ee={class:"flex items-center gap-4"},te={class:"space-y-2"},se={key:0,class:"text-sm text-destructive"},oe={class:"space-y-2"},re={key:0,class:"text-sm text-destructive"},le={class:"space-y-2"},ie={class:"flex gap-2"},ae={key:0,class:"text-sm text-destructive"},de={class:"space-y-2"},ne={class:"flex gap-2"},ue={class:"flex items-center px-3 py-2 bg-muted rounded-md text-sm text-muted-foreground min-w-0"},me={key:0,class:"text-sm text-destructive"},fe={class:"space-y-2"},ce={class:"flex items-start gap-4"},pe={class:"w-32 h-24 rounded-lg border-2 border-dashed border-muted-foreground/25 bg-muted/50 flex items-center justify-center overflow-hidden shrink-0"},ve=["src"],_e={key:1,class:"text-center"},ge={class:"flex-1"},xe={key:0,class:"text-sm text-destructive mt-1"},be={class:"flex items-center justify-between"},ye={class:"space-y-1"},he={class:"flex justify-between items-center"},Ye=F({__name:"Create",props:{categories:{}},setup(we){const D=[{title:"Video Management",href:"/admin/videos"},{title:"Create Video Course",href:""}],o=N({name:"",description:"",google_drive_url:"",duration:null,thumbnail:null,video_category_id:null,is_active:!0}),_=S(!1),g=S(!1),x=S(null),R=d=>{var c;const a=(c=d.target.files)==null?void 0:c[0];if(a){o.thumbnail=a;const $=new FileReader;$.onload=j=>{var U;x.value=(U=j.target)==null?void 0:U.result},$.readAsDataURL(a)}else o.thumbnail=null,x.value=null},M=async()=>{if(o.google_drive_url){g.value=!0;try{console.log("Testing URL:",o.google_drive_url),await new Promise(d=>setTimeout(d,2e3)),alert("Video URL is valid!")}catch(d){console.error("URL test failed:",d),alert("Failed to validate video URL. Please check the link.")}finally{g.value=!1}}},A=d=>{if(!d)return"00:00";const t=Math.floor(d/3600),a=Math.floor(d%3600/60),c=d%60;return t>0?`${t.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`:`${a.toString().padStart(2,"0")}:${c.toString().padStart(2,"0")}`},B=async()=>{_.value=!0,o.post("/admin/videos",{onFinish:()=>{_.value=!1}})};return(d,t)=>(n(),u(E,null,[s(e(G),{title:"Create Video Course"}),s(z,{breadcrumbs:D},{default:r(()=>[l("div",Z,[l("div",ee,[s(e(b),{"as-child":"",variant:"ghost"},{default:r(()=>[s(e(L),{href:"/admin/videos"},{default:r(()=>[s(e(K),{class:"h-4 w-4 mr-2"}),t[5]||(t[5]=i(" Back to Videos "))]),_:1})]),_:1}),t[6]||(t[6]=l("div",null,[l("h1",{class:"text-2xl font-bold"},"Create Video Course"),l("p",{class:"text-muted-foreground"},"Add a new video course to your library")],-1))]),l("form",{onSubmit:q(B,["prevent"]),class:"space-y-6"},[s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(O),{class:"h-5 w-5"}),t[7]||(t[7]=i(" Video Information "))]),_:1}),s(e(w),null,{default:r(()=>t[8]||(t[8]=[i(" Enter the basic details for your video course ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",te,[s(e(f),{for:"name"},{default:r(()=>t[9]||(t[9]=[i("Video Title")])),_:1}),s(e(C),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=a=>e(o).name=a),type:"text",placeholder:"Enter video course title...",class:v({"border-destructive":e(o).errors.name}),required:""},null,8,["modelValue","class"]),e(o).errors.name?(n(),u("div",se,m(e(o).errors.name),1)):p("",!0)]),l("div",oe,[s(e(f),{for:"description"},{default:r(()=>t[10]||(t[10]=[i("Description")])),_:1}),s(e(J),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=a=>e(o).description=a),placeholder:"Describe what students will learn from this video course...",rows:"5",class:v({"border-destructive":e(o).errors.description})},null,8,["modelValue","class"]),e(o).errors.description?(n(),u("div",re,m(e(o).errors.description),1)):p("",!0)])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(Q),{class:"h-5 w-5"}),t[11]||(t[11]=i(" Video Source "))]),_:1}),s(e(w),null,{default:r(()=>t[12]||(t[12]=[i(" Configure the video source and metadata ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",le,[s(e(f),{for:"google_drive_url"},{default:r(()=>t[13]||(t[13]=[i("Google Drive Video URL")])),_:1}),l("div",ie,[s(e(C),{id:"google_drive_url",modelValue:e(o).google_drive_url,"onUpdate:modelValue":t[2]||(t[2]=a=>e(o).google_drive_url=a),type:"url",placeholder:"https://drive.google.com/file/d/...",class:v({"border-destructive":e(o).errors.google_drive_url}),required:""},null,8,["modelValue","class"]),s(e(b),{type:"button",variant:"outline",size:"icon",onClick:M,disabled:!e(o).google_drive_url||g.value},{default:r(()=>[g.value?(n(),T(e(W),{key:0,class:"h-4 w-4 animate-spin"})):(n(),T(e(X),{key:1,class:"h-4 w-4"}))]),_:1},8,["disabled"])]),e(o).errors.google_drive_url?(n(),u("div",ae,m(e(o).errors.google_drive_url),1)):p("",!0),t[14]||(t[14]=l("div",{class:"text-sm text-muted-foreground"},' Paste the shareable link from Google Drive. Make sure the video is set to "Anyone with the link can view" ',-1))]),l("div",de,[s(e(f),{for:"duration"},{default:r(()=>t[15]||(t[15]=[i("Duration (seconds)")])),_:1}),l("div",ne,[s(e(C),{id:"duration",modelValue:e(o).duration,"onUpdate:modelValue":t[3]||(t[3]=a=>e(o).duration=a),type:"number",min:"1",max:"86400",placeholder:"e.g., 3600 for 1 hour",class:v({"border-destructive":e(o).errors.duration})},null,8,["modelValue","class"]),l("div",ue,m(A(e(o).duration)),1)]),e(o).errors.duration?(n(),u("div",me,m(e(o).errors.duration),1)):p("",!0),t[16]||(t[16]=l("div",{class:"text-sm text-muted-foreground"}," Video duration in seconds (optional - can be auto-detected) ",-1))])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(P),{class:"h-5 w-5"}),t[17]||(t[17]=i(" Thumbnail "))]),_:1}),s(e(w),null,{default:r(()=>t[18]||(t[18]=[i(" Upload a custom thumbnail for your video course ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",fe,[s(e(f),{for:"thumbnail"},{default:r(()=>t[19]||(t[19]=[i("Custom Thumbnail")])),_:1}),l("div",ce,[l("div",pe,[x.value?(n(),u("img",{key:0,src:x.value,class:"w-full h-full object-cover",alt:"Thumbnail preview"},null,8,ve)):(n(),u("div",_e,[s(e(P),{class:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),t[20]||(t[20]=l("div",{class:"text-xs text-muted-foreground"},"Preview",-1))]))]),l("div",ge,[s(e(C),{id:"thumbnail",type:"file",accept:"image/*",class:v({"border-destructive":e(o).errors.thumbnail}),onChange:R},null,8,["class"]),e(o).errors.thumbnail?(n(),u("div",xe,m(e(o).errors.thumbnail),1)):p("",!0),t[21]||(t[21]=l("div",{class:"text-sm text-muted-foreground mt-1"}," Recommended: 1280x720px (16:9 ratio), JPG or PNG, max 2MB ",-1))])])])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(V),null,{default:r(()=>[s(e(k),{class:"flex items-center gap-2"},{default:r(()=>[s(e(I),{class:"h-5 w-5"}),t[22]||(t[22]=i(" Settings "))]),_:1}),s(e(w),null,{default:r(()=>t[23]||(t[23]=[i(" Configure the video course settings ")])),_:1})]),_:1}),s(e(h),null,{default:r(()=>[l("div",be,[l("div",ye,[s(e(f),null,{default:r(()=>t[24]||(t[24]=[i("Active Status")])),_:1}),t[25]||(t[25]=l("div",{class:"text-sm text-muted-foreground"}," Make this video course available to students ",-1))]),s(e(H),{checked:e(o).is_active,"onUpdate:checked":t[4]||(t[4]=a=>e(o).is_active=a)},null,8,["checked"])])]),_:1})]),_:1}),l("div",he,[s(e(b),{"as-child":"",variant:"outline"},{default:r(()=>[s(e(L),{href:"/admin/videos"},{default:r(()=>t[26]||(t[26]=[i("Cancel")])),_:1})]),_:1}),s(e(b),{type:"submit",disabled:_.value||e(o).processing},{default:r(()=>[s(e(Y),{class:"h-4 w-4 mr-2"}),i(" "+m(_.value?"Creating...":"Create Video Course"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{Ye as default};
