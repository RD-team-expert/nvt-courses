import{P as q,bo as m,g as k,o as d,w as s,e,b as l,a as x,h as w,f as i,F as A,i as F,t as f,n as N,r as z,c as Q,W as j,l as H}from"./app-4eAgPf85.js";import{M as E}from"./Modal-BePumnb_.js";import{l as P}from"./lodash-C6mqOZ--.js";import{_ as U}from"./AdminLayout.vue_vue_type_script_setup_true_lang-ChXDEZI7.js";import{_ as I}from"./Button.vue_vue_type_script_setup_true_lang-JRkcZwmp.js";import{_ as O}from"./Card.vue_vue_type_script_setup_true_lang-BRI1tynP.js";import{_ as R}from"./CardContent.vue_vue_type_script_setup_true_lang-BLROodS-.js";import{_ as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-BjvtTcj4.js";import{_ as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-C0SFA938.js";import{_ as Y}from"./Label.vue_vue_type_script_setup_true_lang-PYscJF4n.js";import{b as J,a as K,d as X,c as Z,_ as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-rWE9ySuB.js";import{_ as ee}from"./_plugin-vue_export-helper-yEr5A5fM.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-UTMRCYmj.js";import"./index-Co2638JO.js";import"./index-D1y8VrcE.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BZms7D_R.js";import"./clock-BG3Fyq-n.js";import"./useForwardPropsEmits-z0JoxK6G.js";import"./Presence-DjUmVJH9.js";import"./ConfigProvider-C-6Rj7Vr.js";import"./useForwardExpose-C2AIe4iv.js";import"./Teleport-J01nl-H9.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-Ca4vBVLW.js";import"./Collection-BeiY3XlV.js";import"./usePrimitiveElement-PGpHF4W-.js";import"./check-BCZESvnI.js";import"./useSize-Brz9hMkb.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-ChFZrzuI.js";const te={components:{AdminLayout:U,Link:q,Modal:E,Button:I,Card:O,CardContent:R,CardHeader:W,CardTitle:G,Label:Y,Select:$,SelectContent:Z,SelectItem:X,SelectTrigger:K,SelectValue:J},props:{quizzes:{type:Object,required:!0},filters:{type:Object,default:()=>({})},courses:{type:Array,default:()=>[]}},setup(g){const t=[{name:"Dashboard",route:"admin.dashboard"},{name:"Quizzes",route:null}],a=z({course_id:g.filters.course_id||"",status:g.filters.status||""}),r=z(!1),b=z(null),p=z(!1),_=Q(()=>a.value.course_id!==""||a.value.status!==""),c=()=>{const n=g.courses.find(u=>u.id==a.value.course_id);return n?n.name:""},C=()=>{const n=c(),u=a.value.status;return n&&u?`No ${u} quizzes found for "${n}" course.`:n?`No quizzes found for "${n}" course.`:u?`No ${u} quizzes found. Try selecting a different status or clearing filters.`:"Try adjusting your filter criteria or clear all filters to see available quizzes."},S=()=>{a.value={course_id:"",status:""},h()},h=P.debounce(()=>{p.value=!0;const n=Object.fromEntries(Object.entries(a.value).filter(([u,y])=>y&&y!=="all"));j.get(route("admin.quizzes.index"),n,{preserveState:!0,preserveScroll:!0,onFinish:()=>{p.value=!1}})},300);return H(a,h,{deep:!0}),{breadcrumbs:t,filters:a,applyFilters:h,goToPage:n=>{n&&!p.value&&(p.value=!0,j.get(n,{},{preserveState:!0,preserveScroll:!0,onFinish:()=>{p.value=!1}}))},showDeleteModal:r,confirmDelete:n=>{console.log("confirmDelete called with quizId:",n),b.value=n,r.value=!0},deleteQuiz:()=>{if(console.log("deleteQuiz called"),console.log("quizToDelete.value:",b.value),console.log("isLoading.value:",p.value),p.value){console.log("Already loading, returning early");return}p.value=!0;const n=route("admin.quizzes.destroy",b.value);console.log("Delete URL:",n),j.delete(n,{preserveScroll:!0,onBefore:()=>{console.log("onBefore: Request is about to be made")},onStart:()=>{console.log("onStart: Request has started")},onSuccess:u=>{console.log("onSuccess: Delete successful",u),r.value=!1,b.value=null},onError:u=>{console.error("onError: Delete error:",u),r.value=!1},onFinish:()=>{console.log("onFinish: Request finished"),p.value=!1}})},isLoading:p,hasActiveFilters:_,getFilteredEmptyMessage:C,clearFilters:S}}},se={class:"container mx-auto px-4 py-6 sm:px-6 lg:px-8"},oe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between mb-6"},le={class:"flex flex-col gap-2 sm:flex-row sm:gap-3"},re={class:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:gap-6"},ne={class:"space-y-2"},ae={class:"space-y-2"},ie={class:"mt-4 flex justify-end"},de={key:0,class:"overflow-x-auto"},ue={class:"w-full"},me={class:"divide-y divide-border"},ce={class:"px-4 py-4 text-sm font-medium text-foreground sm:px-6"},fe={class:"max-w-xs truncate"},pe={class:"sm:hidden text-xs text-muted-foreground mt-1"},xe={class:"hidden sm:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},ge={class:"max-w-xs truncate"},_e={class:"px-4 py-4 text-sm sm:px-6"},ve={class:"hidden md:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},he={class:"hidden md:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},ke={class:"hidden lg:table-cell px-4 py-4 text-sm text-muted-foreground sm:px-6"},be={class:"px-4 py-4 text-sm font-medium sm:px-6"},ye={class:"flex items-center gap-1 sm:gap-2"},we={key:1,class:"text-center py-12 px-4"},ze={class:"text-lg font-semibold text-foreground mb-2"},Ce={class:"text-muted-foreground mb-6 max-w-sm mx-auto text-sm"},Se={key:0},Le={key:1},Me={class:"flex flex-col gap-3 sm:flex-row sm:justify-center"},Ae={key:0,class:"mt-6"},Fe={class:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between"},je={class:"text-sm text-muted-foreground"},De={class:"font-medium text-foreground"},Be={class:"font-medium text-foreground"},Te={class:"font-medium text-foreground"},Ve={class:"flex flex-wrap gap-1 justify-center sm:justify-end"},qe={class:"p-6 sm:p-8"},Ne={class:"flex flex-col gap-3 sm:flex-row sm:justify-end"},Qe={key:0,class:"flex items-center"},He={key:1};function Ee(g,t,a,r,b,p){const _=m("Link"),c=m("Button"),C=m("CardTitle"),S=m("CardHeader"),h=m("Label"),L=m("SelectValue"),M=m("SelectTrigger"),v=m("SelectItem"),n=m("SelectContent"),u=m("Select"),y=m("CardContent"),D=m("Card"),B=m("Modal"),T=m("AdminLayout");return d(),k(T,{breadcrumbs:r.breadcrumbs},{default:s(()=>[e("div",se,[e("div",oe,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold tracking-tight text-foreground sm:text-3xl"},"Quiz Attempts",-1)),e("div",le,[l(c,{"as-child":""},{default:s(()=>[l(_,{href:g.route("admin.quizzes.create")},{default:s(()=>t[4]||(t[4]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Create Quiz ")])),_:1},8,["href"])]),_:1}),l(c,{variant:"outline","as-child":""},{default:s(()=>[l(_,{href:g.route("admin.quiz-attempts.index")},{default:s(()=>t[5]||(t[5]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),i(" Quiz-attempts ")])),_:1},8,["href"])]),_:1})])]),l(D,{class:"mb-6"},{default:s(()=>[l(S,null,{default:s(()=>[l(C,null,{default:s(()=>t[7]||(t[7]=[i("Filter Quizzes")])),_:1})]),_:1}),l(y,null,{default:s(()=>[e("div",re,[e("div",ne,[l(h,{for:"course_id"},{default:s(()=>t[8]||(t[8]=[i("Course")])),_:1}),l(u,{modelValue:r.filters.course_id,"onUpdate:modelValue":[t[0]||(t[0]=o=>r.filters.course_id=o),r.applyFilters],disabled:r.isLoading},{default:s(()=>[l(M,{id:"course_id"},{default:s(()=>[l(L,{placeholder:"All Courses"})]),_:1}),l(n,null,{default:s(()=>[l(v,{value:"all"},{default:s(()=>t[9]||(t[9]=[i("All Courses")])),_:1}),(d(!0),x(A,null,F(a.courses,o=>(d(),k(v,{key:o.id,value:o.id.toString()},{default:s(()=>[i(f(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled","onUpdate:modelValue"])]),e("div",ae,[l(h,{for:"status"},{default:s(()=>t[10]||(t[10]=[i("Status")])),_:1}),l(u,{modelValue:r.filters.status,"onUpdate:modelValue":[t[1]||(t[1]=o=>r.filters.status=o),r.applyFilters],disabled:r.isLoading},{default:s(()=>[l(M,{id:"status"},{default:s(()=>[l(L,{placeholder:"All Statuses"})]),_:1}),l(n,null,{default:s(()=>[l(v,{value:"all"},{default:s(()=>t[11]||(t[11]=[i("All Statuses")])),_:1}),l(v,{value:"draft"},{default:s(()=>t[12]||(t[12]=[i("Draft")])),_:1}),l(v,{value:"published"},{default:s(()=>t[13]||(t[13]=[i("Published")])),_:1}),l(v,{value:"archived"},{default:s(()=>t[14]||(t[14]=[i("Archived")])),_:1})]),_:1})]),_:1},8,["modelValue","disabled","onUpdate:modelValue"])])]),e("div",ie,[r.hasActiveFilters?(d(),k(c,{key:0,onClick:r.clearFilters,variant:"outline",size:"sm",disabled:r.isLoading},{default:s(()=>t[15]||(t[15]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Clear Filters ")])),_:1},8,["onClick","disabled"])):w("",!0)])]),_:1})]),_:1}),l(D,null,{default:s(()=>[l(y,{class:"p-0"},{default:s(()=>[a.quizzes.data&&a.quizzes.data.length>0?(d(),x("div",de,[e("table",ue,[t[19]||(t[19]=e("thead",{class:"border-b bg-muted/50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Title "),e("th",{scope:"col",class:"hidden sm:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Course "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Status "),e("th",{scope:"col",class:"hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Questions "),e("th",{scope:"col",class:"hidden md:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Attempts "),e("th",{scope:"col",class:"hidden lg:table-cell px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Total Points "),e("th",{scope:"col",class:"px-4 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider sm:px-6"}," Actions ")])],-1)),e("tbody",me,[(d(!0),x(A,null,F(a.quizzes.data,o=>(d(),x("tr",{key:o.id,class:"hover:bg-muted/50 transition-colors duration-150"},[e("td",ce,[e("div",fe,f(o.title),1),e("div",pe,f(o.course?o.course.name:"N/A"),1)]),e("td",xe,[e("div",ge,f(o.course?o.course.name:"N/A"),1)]),e("td",_e,[e("span",{class:N(["inline-flex items-center px-2 py-1 text-xs font-medium rounded-full",{"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":o.status==="published","bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400":o.status==="draft","bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":o.status==="archived"}])},f(o.status.charAt(0).toUpperCase()+o.status.slice(1)),3)]),e("td",ve,f(o.questions_count),1),e("td",he,f(o.attempts_count),1),e("td",ke,f(o.total_points),1),e("td",be,[e("div",ye,[l(c,{variant:"outline",size:"sm","as-child":""},{default:s(()=>[l(_,{href:g.route("admin.quizzes.show",o.id)},{default:s(()=>t[16]||(t[16]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),e("span",{class:"hidden sm:inline"},"View",-1)])),_:2},1032,["href"])]),_:2},1024),l(c,{variant:"outline",size:"sm","as-child":""},{default:s(()=>[l(_,{href:g.route("admin.quizzes.edit",o.id)},{default:s(()=>t[17]||(t[17]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),e("span",{class:"hidden sm:inline"},"Edit",-1)])),_:2},1032,["href"])]),_:2},1024),o.attempts_count?w("",!0):(d(),k(c,{key:0,onClick:V=>r.confirmDelete(o.id),variant:"outline",size:"sm",class:"text-destructive hover:text-destructive",disabled:r.isLoading},{default:s(()=>t[18]||(t[18]=[e("svg",{class:"w-4 h-4 sm:mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),e("span",{class:"hidden sm:inline"},"Delete",-1)])),_:2},1032,["onClick","disabled"]))])])]))),128))])])])):(d(),x("div",we,[t[22]||(t[22]=e("div",{class:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-muted mb-4"},[e("svg",{class:"h-8 w-8 text-muted-foreground",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1)),e("h3",ze,f(r.hasActiveFilters?"No Quizzes Match Your Filters":"No Quizzes Available"),1),e("p",Ce,[r.hasActiveFilters?(d(),x("span",Se,f(r.getFilteredEmptyMessage()),1)):(d(),x("span",Le," Get started by creating your first quiz to assess student knowledge and engagement. "))]),e("div",Me,[l(c,{"as-child":""},{default:s(()=>[l(_,{href:g.route("admin.quizzes.create")},{default:s(()=>t[20]||(t[20]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),i(" Create First Quiz ")])),_:1},8,["href"])]),_:1}),r.hasActiveFilters?(d(),k(c,{key:0,onClick:r.clearFilters,variant:"outline"},{default:s(()=>t[21]||(t[21]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),i(" Clear Filters ")])),_:1},8,["onClick"])):w("",!0)])]))]),_:1})]),_:1}),a.quizzes.data&&a.quizzes.data.length>0&&a.quizzes.meta?(d(),x("div",Ae,[e("div",Fe,[e("div",je,[t[23]||(t[23]=i(" Showing ")),e("span",De,f(a.quizzes.meta.from||0),1),t[24]||(t[24]=i(" to ")),e("span",Be,f(a.quizzes.meta.to||0),1),t[25]||(t[25]=i(" of ")),e("span",Te,f(a.quizzes.meta.total||0),1),t[26]||(t[26]=i(" quizzes "))]),e("div",Ve,[(d(!0),x(A,null,F(a.quizzes.meta.links,o=>(d(),k(c,{key:o.label,disabled:!o.url||r.isLoading,onClick:V=>r.goToPage(o.url),variant:o.active?"default":"outline-solid",size:"sm",innerHTML:o.label},null,8,["disabled","onClick","variant","innerHTML"]))),128))])])])):w("",!0),l(B,{show:r.showDeleteModal,onClose:t[3]||(t[3]=o=>r.showDeleteModal=!1)},{default:s(()=>[e("div",qe,[t[29]||(t[29]=e("h2",{class:"text-xl font-semibold text-foreground mb-3"},"Confirm Deletion",-1)),t[30]||(t[30]=e("p",{class:"text-sm text-muted-foreground mb-6"}," Are you sure you want to delete this quiz? This action cannot be undone. ",-1)),e("div",Ne,[l(c,{onClick:t[2]||(t[2]=o=>r.showDeleteModal=!1),variant:"outline",disabled:r.isLoading},{default:s(()=>t[27]||(t[27]=[i(" Cancel ")])),_:1},8,["disabled"]),l(c,{onClick:r.deleteQuiz,variant:"destructive",disabled:r.isLoading},{default:s(()=>[r.isLoading?(d(),x("span",Qe,t[28]||(t[28]=[e("svg",{class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),i(" Deleting... ")]))):(d(),x("span",He,"Delete"))]),_:1},8,["onClick","disabled"])])])]),_:1},8,["show"])])]),_:1},8,["breadcrumbs"])}const vt=ee(te,[["render",Ee],["__scopeId","data-v-7ba9b755"]]);export{vt as default};
