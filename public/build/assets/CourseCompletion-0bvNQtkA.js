import{d as j,r as F,W as b,k as B,l as v,o as l,w as R,e,j as U,g as m,a,F as c,h as p,t as r,i as D,v as w,n as L,f as M}from"./app-UYTjIL7K.js";import{_ as N}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CVMNqIh0.js";import{l as P}from"./lodash-FgkEC9m7.js";import{_ as T}from"./Pagination-D5wDiviy.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-CuKQ7c1n.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DXk8l_l7.js";import"./index-DN_WECjT.js";const z={class:"px-4 sm:px-0"},A={class:"bg-white p-4 sm:p-6 rounded-lg shadow mb-4 sm:mb-6"},E={class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},O=["value"],W={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},$={class:"min-w-full divide-y divide-gray-200"},q={class:"bg-white divide-y divide-gray-200"},H={key:0},G={class:"px-4 sm:px-6 py-4 whitespace-nowrap"},I={class:"flex items-center"},J={class:"text-sm font-medium text-gray-900"},K={class:"text-xs text-gray-500 hidden sm:block"},Q={class:"text-xs text-gray-500 sm:hidden mt-1"},X={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell"},Y={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},Z={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},te={key:0,class:"flex items-center"},se={class:"ml-1 flex"},oe={key:1},le={class:"px-4 sm:px-6 py-4 text-sm text-gray-900 hidden lg:table-cell"},re={class:"max-w-xs truncate"},ae={class:"px-4 sm:px-6 py-3 bg-white border-t border-gray-200"},xe=j({__name:"CourseCompletion",props:{completions:Object,courses:Array,filters:Object,debug:Object},setup(i){var g,f,y;const d=i,_=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Course Completion",href:route("admin.reports.course-completion")}],o=F({course_id:((g=d.filters)==null?void 0:g.course_id)||"",date_from:((f=d.filters)==null?void 0:f.date_from)||"",date_to:((y=d.filters)==null?void 0:y.date_to)||""}),u=P.debounce(()=>{b.get(route("admin.reports.course-completion"),o.value,{preserveState:!0,replace:!0})},500);B(o,()=>{u()},{deep:!0});const k=()=>{o.value={course_id:"",date_from:"",date_to:""},u()},C=()=>{const n=new URLSearchParams(o.value).toString();window.location.href=route("admin.reports.export.course-completion")+"?"+n},x=n=>n?new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—",S=n=>{b.get(route("admin.reports.course-completion"),{...o.value,page:n},{preserveState:!0,replace:!0,preserveScroll:!0})};return(n,t)=>(l(),v(N,{breadcrumbs:_},{default:R(()=>[e("div",z,[e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4 sm:gap-0"},[t[4]||(t[4]=e("h1",{class:"text-xl sm:text-2xl font-bold"},"Course Completion Report",-1)),e("button",{onClick:C,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center w-full sm:w-auto justify-center sm:justify-start"},t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),U(" Export to CSV ")]))]),e("div",A,[t[9]||(t[9]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Completions",-1)),e("div",E,[e("div",null,[t[6]||(t[6]=e("label",{for:"course_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),m(e("select",{id:"course_filter","onUpdate:modelValue":t[0]||(t[0]=s=>o.value.course_id=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[5]||(t[5]=e("option",{value:""},"All Courses",-1)),(l(!0),a(c,null,p(i.courses,s=>(l(),a("option",{key:s.id,value:s.id},r(s.name),9,O))),128))],512),[[D,o.value.course_id]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"date_from",class:"block text-sm font-medium text-gray-700 mb-1"},"Completed From",-1)),m(e("input",{id:"date_from",type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>o.value.date_from=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,o.value.date_from]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"date_to",class:"block text-sm font-medium text-gray-700 mb-1"},"Completed To",-1)),m(e("input",{id:"date_to",type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>o.value.date_to=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[w,o.value.date_to]])]),e("div",{class:"flex items-end md:col-span-3"},[e("button",{onClick:k,class:"inline-flex items-center px-4 py-2 bg-gray-100 border border-transparent rounded-md font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition"}," Reset Filters ")])])]),e("div",W,[e("table",$,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell"}," Course "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Registered "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completed "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Rating "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell"}," Feedback ")])],-1)),e("tbody",q,[i.completions.data.length===0?(l(),a("tr",H,t[10]||(t[10]=[e("td",{colspan:"6",class:"px-4 sm:px-6 py-4 text-center text-gray-500"},"No completion records found",-1)]))):(l(!0),a(c,{key:1},p(i.completions.data,(s,V)=>(l(),a("tr",{key:V,class:"hover:bg-gray-50"},[e("td",G,[e("div",I,[e("div",null,[e("div",J,r(s.user_name),1),e("div",K,r(s.user_email),1),e("div",Q,r(s.course_name),1)])])]),e("td",X,r(s.course_name),1),e("td",Y,r(x(s.registered_at)),1),e("td",Z,r(x(s.completed_at)),1),e("td",ee,[s.rating?(l(),a("div",te,[e("span",null,r(s.rating)+"/5",1),e("div",se,[(l(),a(c,null,p(5,h=>e("svg",{key:h,class:L(["h-4 w-4",h<=s.rating?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[11]||(t[11]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))])])):(l(),a("span",oe,"—"))]),e("td",le,[e("div",re,r(s.feedback||"—"),1)])]))),128))])]),e("div",ae,[i.completions.data.length>0?(l(),v(T,{key:0,links:i.completions.links,onPageChanged:S,class:"mt-4"},null,8,["links"])):M("",!0)])])])]),_:1}))}});export{xe as default};
