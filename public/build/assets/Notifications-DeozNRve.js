import{d as je,r as L,C as B,c as k,p as Le,g as b,o as u,w as o,e as s,b as l,h as S,u as t,n as O,f as n,t as r,a as p,F as V,i as F,P as Ve,j as Fe,W as R}from"./app-BLmj4HBF.js";import{_ as Ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-Ckh7WXob.js";import{_ as h}from"./Button.vue_vue_type_script_setup_true_lang-D3qq94Zx.js";import{_ as q}from"./Input.vue_vue_type_script_setup_true_lang-2u93iY7S.js";import{_ as Ne}from"./Textarea.vue_vue_type_script_setup_true_lang-DX2CFZ8n.js";import{_ as g}from"./Label.vue_vue_type_script_setup_true_lang-BrjQkrq0.js";import{_ as U}from"./Card.vue_vue_type_script_setup_true_lang-Ci9D0iMq.js";import{_ as D}from"./CardContent.vue_vue_type_script_setup_true_lang-cxC0TC8P.js";import{_ as W}from"./CardHeader.vue_vue_type_script_setup_true_lang-BGuoJJkX.js";import{_ as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-DfR9ar0U.js";import{_ as H,a as I,b as J,c as K,d as $}from"./SelectValue.vue_vue_type_script_setup_true_lang-1XJO4cBP.js";import{_ as P}from"./Checkbox.vue_vue_type_script_setup_true_lang-CHVSPLYO.js";import{_ as A}from"./index-YG9blrsU.js";import{_ as re,a as de,b as ue,c as me}from"./DialogTitle.vue_vue_type_script_setup_true_lang-A8cyyRSl.js";import{_ as fe}from"./DialogDescription.vue_vue_type_script_setup_true_lang-nbNt2wIU.js";import{_ as ce}from"./DialogFooter.vue_vue_type_script_setup_true_lang-HQN2xs8j.js";import{_ as De,b as Pe}from"./AppLayout.vue_vue_type_script_setup_true_lang-BbI2Ye8G.js";import{_ as Ae,a as Me}from"./index-CEANH5ba.js";import{F as Re}from"./filter-CNImNLwx.js";import{E as qe}from"./eye-BMjBl3sh.js";import{U as Te}from"./_plugin-vue_export-helper-CgqheCLh.js";import{M as ze}from"./mail-DHrcISUI.js";import{S as Be}from"./send-Deldpa8u.js";import"./index-BZ3iGWgu.js";import"./index-nQMlijwx.js";import"./useForwardPropsEmits-DTXt111u.js";import"./Presence-DX3h4Yh0.js";import"./ConfigProvider-DpiesZDO.js";import"./useForwardExpose-2gCTmbaL.js";import"./Teleport-CmNUvZVc.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-r0uP91sm.js";import"./Collection-BqHg_pZt.js";import"./usePrimitiveElement-CEU6dxVw.js";import"./check-DAB0GyFp.js";import"./useSize-8qSasPan.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-DQJBWh8d.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DAMKwARh.js";import"./clock-Dpm8DoU4.js";const Oe={class:"mx-auto max-w-7xl py-8 px-4 sm:px-6 lg:px-8 space-y-8"},We={class:"flex items-center justify-between"},Ge={class:"flex space-x-3"},He={class:"flex items-center justify-between"},Ie={class:"flex space-x-2"},Je={class:"grid grid-cols-1 md:grid-cols-6 gap-4"},Ke={class:"space-y-2"},Qe={class:"space-y-2"},Xe={class:"space-y-2"},Ye={class:"space-y-2"},Ze={class:"space-y-2"},et={class:"space-y-2"},tt={class:"mt-4 flex justify-end"},st={key:0},lt={key:1},ot={class:"flex items-center justify-between"},at={class:"flex items-center space-x-4"},nt={class:"text-sm text-muted-foreground"},it={class:"flex items-center space-x-2"},rt={class:"flex space-x-4"},dt={class:"flex items-center space-x-2"},ut={class:"flex items-center space-x-2"},mt={class:"flex items-center space-x-2"},ft={class:"flex space-x-3"},ct={class:"flex items-center justify-between"},vt={class:"text-sm text-muted-foreground"},pt={class:"mt-2 text-sm text-muted-foreground"},_t={key:0,class:"mt-4"},gt={key:1},xt={class:"px-6 py-3 bg-muted border-b"},yt={class:"flex items-center space-x-3"},bt={class:"divide-y"},wt={class:"flex items-start space-x-4"},ht={class:"flex-1"},kt={class:"flex items-center justify-between"},St={class:"text-lg font-semibold text-foreground"},$t={class:"text-sm text-muted-foreground"},Ct={class:"mt-3 grid grid-cols-1 sm:grid-cols-3 gap-4 text-sm"},Et={class:"text-muted-foreground ml-1"},jt={class:"text-muted-foreground ml-1"},Lt={key:0},Vt={class:"text-muted-foreground ml-1"},Ft={class:"flex items-center justify-between"},Ut={class:"flex items-center gap-2"},Nt={class:"text-sm font-medium text-foreground"},Dt={class:"flex items-center gap-2"},Pt={class:"text-sm font-medium"},At={class:"flex items-center justify-between"},Mt={class:"divide-y"},Rt={class:"flex items-center justify-between"},qt={class:"text-sm font-medium text-foreground"},Tt={class:"text-sm text-muted-foreground"},zt={class:"text-xs text-muted-foreground"},Bt={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},Ot={class:"ml-1"},Wt={class:"ml-1"},Gt={class:"ml-1"},Ht={class:"ml-1"},It={class:"space-y-4 max-h-96 overflow-y-auto"},Jt={key:0},Kt={class:"font-medium text-foreground mb-2"},Qt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Xt={class:"font-medium text-foreground"},Yt={class:"text-sm text-muted-foreground"},Zt={class:"text-xs text-muted-foreground"},es={class:"space-y-4 py-4"},ts={class:"space-y-2"},ss={class:"space-y-2"},Ws=je({__name:"Notifications",props:{employees:{},departments:{},courses:{},filters:{},recentNotifications:{},preview:{},showPreview:{type:Boolean}},setup(ve){var te,se,le,oe,ae,ne;const c=ve,m=L([]),M=L(!1),C=L(!1),E=L(!1),_=L(["L2"]),w=L(!0),d=B({department_id:((te=c.filters)==null?void 0:te.department_id)||null,course_id:((se=c.filters)==null?void 0:se.course_id)||null,start_date:((le=c.filters)==null?void 0:le.start_date)||"",end_date:((oe=c.filters)==null?void 0:oe.end_date)||"",search:((ae=c.filters)==null?void 0:ae.search)||"",performance_level:((ne=c.filters)==null?void 0:ne.performance_level)||""}),j=B({employee_ids:[],target_manager_levels:[],email_subject:""}),x=B({employee_ids:[],target_manager_levels:[],email_subject:"",custom_message:""}),y=k(()=>c.employees||[]),pe=k(()=>c.departments||[]),_e=k(()=>c.courses||[]),Q=k(()=>c.recentNotifications||[]),N=k(()=>d.department_id||d.course_id||d.start_date||d.end_date||d.search||d.performance_level),X=k(()=>y.value.length>0&&m.value.length===y.value.length),ge=k(()=>m.value.length>0&&m.value.length<y.value.length),Y=k(()=>m.value.length>0&&_.value.length>0),xe=k(()=>[d.department_id,d.course_id,d.start_date,d.end_date,d.search,d.performance_level].filter(Boolean).length);c.showPreview&&c.preview&&(C.value=!0);function ye(){X.value?m.value=[]:m.value=y.value.map(i=>i.id)}function be(){if(!w.value)return;console.log("Starting filter application..."),console.log("Current filter form data:",d.data);const i={department_id:d.department_id||null,course_id:d.course_id||null,start_date:d.start_date||"",end_date:d.end_date||"",search:d.search||"",performance_level:d.performance_level||""},e={};for(const[a,v]of Object.entries(i))v!==null&&v!==""&&v!==void 0&&(e[a]=v);console.log("Cleaned filter data:",e),R.get(route("admin.evaluations.notifications"),e,{preserveState:!0,preserveScroll:!0,onStart:()=>{console.log("Filter request started")},onSuccess:()=>{console.log("Filter request successful")},onError:a=>{console.error("Filter errors:",a)},onFinish:()=>{console.log("Filter request finished")}})}function Z(){w.value&&(d.reset(),R.get(route("admin.evaluations.notifications")))}function we(){if(!Y.value||!w.value){console.log("Cannot preview - missing requirements"),console.log("Selected employees:",m.value),console.log("Target levels:",_.value);return}console.log("Starting preview notification..."),console.log("Selected employees:",m.value),console.log("Target levels:",_.value),j.employee_ids=m.value,j.target_manager_levels=_.value,j.email_subject=T(),console.log("Form data:",j.data),console.log("Route URL:",route("admin.evaluations.notifications.preview")),j.post(route("admin.evaluations.notifications.preview"),{preserveState:!0,onStart:()=>{console.log("Request started")},onSuccess:i=>{console.log("Request successful"),console.log("Page props:",i.props),console.log("Preview prop:",i.props.preview),console.log("ShowPreview prop:",i.props.showPreview),i.props.preview&&(C.value=!0,console.log("Modal should be visible now"))},onError:i=>{console.error("Preview errors:",i)},onFinish:()=>{console.log("Request finished")}})}function he(){!c.preview||!w.value||(x.employee_ids=m.value,x.target_manager_levels=_.value,x.email_subject=x.email_subject||T(),x.post(route("admin.evaluations.notifications.send"),{preserveState:!1,onSuccess:()=>{console.log("✅ Notifications sent successfully"),E.value=!1,C.value=!1,m.value=[],_.value=["L2"],R.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!1,replace:!0,onSuccess:()=>{console.log("✅ Successfully redirected to notifications page")},onError:i=>{console.error("❌ Error redirecting:",i)}})},onError:i=>{console.error("❌ Error sending notifications:",i)}}))}function T(){if(m.value.length===0)return"Evaluation Report";const i=y.value.filter(v=>m.value.includes(v.id)),e=[...new Set(i.map(v=>v.department))];return`Evaluation Report - ${e.length===1?e[0]:`${e.length} Departments`} (${m.value.length} Employees)`}function ee(i){return i>=13?{label:"Outstanding",variant:"success",color:"bg-green-100 text-green-800"}:i>=10?{label:"Reliable",variant:"primary",color:"bg-blue-100 text-blue-800"}:i>=7?{label:"Developing",variant:"warning",color:"bg-yellow-100 text-yellow-800"}:i>=0?{label:"Underperforming",variant:"destructive",color:"bg-red-100 text-red-800"}:{label:"Not Rated",variant:"outline",color:"bg-gray-100 text-gray-800"}}function ke(){w.value&&(console.log("Closing preview modal..."),C.value=!1,E.value=!1,R.get(route("admin.evaluations.notifications"),{},{preserveState:!1,preserveScroll:!0,replace:!0,onSuccess:()=>{console.log("Successfully navigated back to notifications page")},onError:i=>{console.error("Error navigating back:",i)}}))}const Se=i=>{w.value&&(d.department_id=i==="none"?null:parseInt(i))},$e=i=>{w.value&&(d.course_id=i==="none"?null:parseInt(i))},z=(i,e)=>{w.value&&(e?_.value.includes(i)||_.value.push(i):_.value=_.value.filter(a=>a!==i))},Ce=(i,e)=>{w.value&&(e?m.value.includes(i)||m.value.push(i):m.value=m.value.filter(a=>a!==i))},Ee=[{name:"Dashboard",href:route("dashboard")},{name:"Evaluations",href:route("admin.evaluations.index")},{name:"Notifications",href:route("admin.evaluations.notifications")}];return Le(()=>{w.value=!1}),(i,e)=>(u(),b(Ue,{breadcrumbs:Ee},{default:o(()=>[s("div",Oe,[s("div",null,[s("div",We,[e[16]||(e[16]=s("div",null,[s("h1",{class:"text-3xl font-bold text-foreground"},"Evaluation Notifications"),s("p",{class:"mt-2 text-sm text-muted-foreground"}," Send evaluation reports to department managers ")],-1)),s("div",Ge,[l(t(h),{onClick:e[0]||(e[0]=a=>M.value=!M.value),variant:"outline",class:O(["relative",N.value?"border-primary text-primary":""])},{default:o(()=>[l(t(Re),{class:"mr-2 h-4 w-4"}),e[15]||(e[15]=n(" Filters ")),N.value?(u(),b(t(A),{key:0,variant:"secondary",class:"ml-2"},{default:o(()=>[n(r(xe.value),1)]),_:1})):S("",!0)]),_:1},8,["class"])])])]),l(t(De),{open:M.value,"onUpdate:open":e[5]||(e[5]=a=>M.value=a)},{default:o(()=>[l(t(Pe),null,{default:o(()=>[l(t(U),null,{default:o(()=>[l(t(W),null,{default:o(()=>[s("div",He,[l(t(G),null,{default:o(()=>e[17]||(e[17]=[n("Filter L1 Employees")])),_:1}),s("div",Ie,[N.value?(u(),b(t(h),{key:0,onClick:Z,variant:"outline",size:"sm"},{default:o(()=>e[18]||(e[18]=[n(" Clear All ")])),_:1})):S("",!0)])])]),_:1}),l(t(D),null,{default:o(()=>{var a,v;return[s("div",Je,[s("div",Ke,[l(t(g),null,{default:o(()=>e[19]||(e[19]=[n("Department")])),_:1}),l(t(H),{"model-value":((a=t(d).department_id)==null?void 0:a.toString())||"none","onUpdate:modelValue":Se},{default:o(()=>[l(t(I),null,{default:o(()=>[l(t(J),{placeholder:"All Departments"})]),_:1}),l(t(K),null,{default:o(()=>[l(t($),{value:"none"},{default:o(()=>e[20]||(e[20]=[n("All Departments")])),_:1}),(u(!0),p(V,null,F(pe.value,f=>(u(),b(t($),{key:f.id,value:f.id.toString()},{default:o(()=>[n(r(f.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),s("div",Qe,[l(t(g),null,{default:o(()=>e[21]||(e[21]=[n("Course")])),_:1}),l(t(H),{"model-value":((v=t(d).course_id)==null?void 0:v.toString())||"none","onUpdate:modelValue":$e},{default:o(()=>[l(t(I),null,{default:o(()=>[l(t(J),{placeholder:"All Courses"})]),_:1}),l(t(K),null,{default:o(()=>[l(t($),{value:"none"},{default:o(()=>e[22]||(e[22]=[n("All Courses")])),_:1}),(u(!0),p(V,null,F(_e.value,f=>(u(),b(t($),{key:f.id,value:f.id.toString()},{default:o(()=>[n(r(f.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value"])]),s("div",Xe,[l(t(g),null,{default:o(()=>e[23]||(e[23]=[n("Start Date")])),_:1}),l(t(q),{type:"date",modelValue:t(d).start_date,"onUpdate:modelValue":e[1]||(e[1]=f=>t(d).start_date=f)},null,8,["modelValue"])]),s("div",Ye,[l(t(g),null,{default:o(()=>e[24]||(e[24]=[n("End Date")])),_:1}),l(t(q),{type:"date",modelValue:t(d).end_date,"onUpdate:modelValue":e[2]||(e[2]=f=>t(d).end_date=f)},null,8,["modelValue"])]),s("div",Ze,[l(t(g),null,{default:o(()=>e[25]||(e[25]=[n("Search Employee")])),_:1}),l(t(q),{type:"text",modelValue:t(d).search,"onUpdate:modelValue":e[3]||(e[3]=f=>t(d).search=f),placeholder:"Search by name or email"},null,8,["modelValue"])]),s("div",et,[l(t(g),null,{default:o(()=>e[26]||(e[26]=[n("Performance Level")])),_:1}),l(t(H),{modelValue:t(d).performance_level,"onUpdate:modelValue":e[4]||(e[4]=f=>t(d).performance_level=f)},{default:o(()=>[l(t(I),null,{default:o(()=>[l(t(J),{placeholder:"All Levels"})]),_:1}),l(t(K),null,{default:o(()=>[l(t($),{value:""},{default:o(()=>e[27]||(e[27]=[n("All Levels")])),_:1}),l(t($),{value:"outstanding"},{default:o(()=>e[28]||(e[28]=[n("Outstanding")])),_:1}),l(t($),{value:"reliable"},{default:o(()=>e[29]||(e[29]=[n("Reliable")])),_:1}),l(t($),{value:"developing"},{default:o(()=>e[30]||(e[30]=[n("Developing")])),_:1}),l(t($),{value:"underperforming"},{default:o(()=>e[31]||(e[31]=[n("Underperforming")])),_:1})]),_:1})]),_:1},8,["modelValue"])])]),s("div",tt,[l(t(h),{onClick:be,disabled:t(d).processing},{default:o(()=>[t(d).processing?(u(),p("span",st,"Applying...")):(u(),p("span",lt,"Apply Filters"))]),_:1},8,["disabled"])])]}),_:1})]),_:1})]),_:1})]),_:1},8,["open"]),y.value.length>0?(u(),b(t(U),{key:0},{default:o(()=>[l(t(D),{class:"p-6"},{default:o(()=>[s("div",ot,[s("div",at,[s("div",null,[s("p",nt,r(m.value.length)+" of "+r(y.value.length)+" employees selected ",1)]),s("div",it,[l(t(g),{class:"text-sm font-medium"},{default:o(()=>e[32]||(e[32]=[n("Send to:")])),_:1}),s("div",rt,[s("div",dt,[l(t(P),{id:"l2",checked:_.value.includes("L2"),"onUpdate:checked":e[6]||(e[6]=a=>z("L2",a))},null,8,["checked"]),l(t(g),{for:"l2",class:"text-sm"},{default:o(()=>e[33]||(e[33]=[n("L2 Managers")])),_:1})]),s("div",ut,[l(t(P),{id:"l3",checked:_.value.includes("L3"),"onUpdate:checked":e[7]||(e[7]=a=>z("L3",a))},null,8,["checked"]),l(t(g),{for:"l3",class:"text-sm"},{default:o(()=>e[34]||(e[34]=[n("L3 Managers")])),_:1})]),s("div",mt,[l(t(P),{id:"l4",checked:_.value.includes("L4"),"onUpdate:checked":e[8]||(e[8]=a=>z("L4",a))},null,8,["checked"]),l(t(g),{for:"l4",class:"text-sm"},{default:o(()=>e[35]||(e[35]=[n("L4 Managers")])),_:1})])])])]),s("div",ft,[l(t(h),{onClick:we,disabled:!Y.value||t(j).processing,variant:"outline"},{default:o(()=>[l(t(qe),{class:"mr-2 h-4 w-4"}),e[36]||(e[36]=n(" Preview Notification "))]),_:1},8,["disabled"])])])]),_:1})]),_:1})):S("",!0),l(t(U),null,{default:o(()=>[l(t(W),null,{default:o(()=>[s("div",ct,[l(t(G),null,{default:o(()=>e[37]||(e[37]=[n("L1 Employees with Evaluations")])),_:1}),s("div",vt,r(y.value.length)+" employees found ",1)])]),_:1}),y.value.length===0?(u(),b(t(D),{key:0,class:"p-8 text-center"},{default:o(()=>[l(t(Te),{class:"mx-auto h-12 w-12 text-muted-foreground"}),e[39]||(e[39]=s("h3",{class:"mt-4 text-lg font-medium text-foreground"},"No L1 Employees Found",-1)),s("p",pt,r(N.value?"No employees match your filter criteria.":"There are no L1 employees with evaluations."),1),N.value?(u(),p("div",_t,[l(t(h),{onClick:Z},{default:o(()=>e[38]||(e[38]=[n(" Clear Filters ")])),_:1})])):S("",!0)]),_:1})):(u(),p("div",gt,[s("div",xt,[s("div",yt,[l(t(P),{id:"select-all",checked:X.value,indeterminate:ge.value,"onUpdate:checked":ye},null,8,["checked","indeterminate"]),l(t(g),{for:"select-all",class:"text-sm font-medium"},{default:o(()=>[n(" Select All ("+r(y.value.length)+") ",1)]),_:1})])]),s("div",bt,[(u(!0),p(V,null,F(y.value,a=>(u(),p("div",{key:a.id,class:O(["p-6 hover:bg-muted/50 transition-colors duration-200",{"bg-primary/5":m.value.includes(a.id)}])},[s("div",wt,[l(t(P),{id:`emp-${a.id}`,checked:m.value.includes(a.id),"onUpdate:checked":v=>Ce(a.id,v),class:"mt-1"},null,8,["id","checked","onUpdate:checked"]),s("div",ht,[s("div",kt,[s("div",null,[s("h4",St,r(a.name),1),s("p",$t,r(a.email),1)]),s("div",null,[l(t(A),{variant:"outline"},{default:o(()=>[n(r(a.level),1)]),_:2},1024)])]),s("div",Ct,[s("div",null,[e[40]||(e[40]=s("span",{class:"font-medium text-foreground"},"Department:",-1)),s("span",Et,r(a.department),1)]),s("div",null,[e[41]||(e[41]=s("span",{class:"font-medium text-foreground"},"Evaluations:",-1)),s("span",jt,r(a.evaluation_count),1)]),a.latest_evaluation?(u(),p("div",Lt,[e[42]||(e[42]=s("span",{class:"font-medium text-foreground"},"Latest:",-1)),s("span",Vt,r(a.latest_evaluation.created_at),1)])):S("",!0)]),a.latest_evaluation?(u(),b(t(U),{key:0,class:"mt-3"},{default:o(()=>[l(t(D),{class:"p-3"},{default:o(()=>[s("div",Ft,[s("div",null,[s("div",Ut,[s("p",Nt,r(a.latest_evaluation.course_name),1),l(t(A),{variant:a.latest_evaluation.course_type==="Online"?"default":"secondary",class:"text-xs"},{default:o(()=>[n(r(a.latest_evaluation.course_type),1)]),_:2},1032,["variant"])]),e[43]||(e[43]=s("p",{class:"text-xs text-muted-foreground"},"Latest evaluation",-1))]),s("div",Dt,[l(t(A),{class:O([ee(a.latest_evaluation.total_score).color,"px-2 py-1 rounded-full text-xs font-medium"])},{default:o(()=>[n(r(ee(a.latest_evaluation.total_score).label),1)]),_:2},1032,["class"]),s("span",Pt,r(a.latest_evaluation.total_score)+" points ",1)])])]),_:2},1024)]),_:2},1024)):S("",!0)])])],2))),128))])]))]),_:1}),Q.value.length>0?(u(),b(t(U),{key:1},{default:o(()=>[l(t(W),null,{default:o(()=>[s("div",At,[l(t(G),null,{default:o(()=>e[44]||(e[44]=[n("Recent Notifications")])),_:1}),l(t(h),{as:t(Ve),href:i.route("admin.evaluations.notifications.history"),variant:"link",size:"sm"},{default:o(()=>e[45]||(e[45]=[n(" View All → ")])),_:1},8,["as","href"])])]),_:1}),l(t(D),null,{default:o(()=>[s("div",Mt,[(u(!0),p(V,null,F(Q.value,a=>(u(),p("div",{key:a.id,class:"py-4 first:pt-0 last:pb-0 hover:bg-muted/50 -mx-6 px-6 rounded-lg transition-colors duration-200"},[s("div",Rt,[s("div",null,[s("p",qt,r(a.name),1),s("p",Tt,r(a.department_name)+" • "+r(a.employee_count)+" employees • "+r(a.managers_notified)+" managers ("+r(a.target_manager_level)+") ",1),s("p",zt," Sent by "+r(a.sent_by)+" on "+r(a.sent_at),1)]),l(t(A),{variant:a.status==="sent"?"default":"secondary"},{default:o(()=>[n(r(a.status_label),1)]),_:2},1032,["variant"])])]))),128))])]),_:1})]),_:1})):S("",!0)]),l(t(re),{open:C.value,"onUpdate:open":e[10]||(e[10]=a=>C.value=a)},{default:o(()=>[c.preview?(u(),b(t(de),{key:0,class:"sm:max-w-4xl z-[100]"},{default:o(()=>[l(t(ue),null,{default:o(()=>[l(t(me),null,{default:o(()=>e[46]||(e[46]=[n("Preview Notification")])),_:1}),l(t(fe),null,{default:o(()=>e[47]||(e[47]=[n(" Review the notification details before sending ")])),_:1})]),_:1}),l(t(Ae),null,{default:o(()=>[l(t(ze),{class:"h-4 w-4"}),l(t(Me),null,{default:o(()=>[s("div",Bt,[s("div",null,[e[48]||(e[48]=s("span",{class:"font-medium"},"Employees:",-1)),s("span",Ot,r(c.preview.summary.total_employees),1)]),s("div",null,[e[49]||(e[49]=s("span",{class:"font-medium"},"Managers:",-1)),s("span",Wt,r(c.preview.summary.total_managers),1)]),s("div",null,[e[50]||(e[50]=s("span",{class:"font-medium"},"Departments:",-1)),s("span",Gt,r(c.preview.summary.departments.join(", ")),1)]),s("div",null,[e[51]||(e[51]=s("span",{class:"font-medium"},"Levels:",-1)),s("span",Ht,r(c.preview.summary.target_levels.join(", ")),1)])])]),_:1})]),_:1}),s("div",It,[(u(!0),p(V,null,F(c.preview.managers,(a,v)=>(u(),p("div",{key:v},[a.length>0?(u(),p("div",Jt,[s("h4",Kt,r(v)+" Managers ("+r(a.length)+")",1),s("div",Qt,[(u(!0),p(V,null,F(a,f=>(u(),b(t(U),{key:f.id,class:"p-3"},{default:o(()=>{var ie;return[s("div",null,[s("p",Xt,r(f.name),1),s("p",Yt,r(f.email),1),s("p",Zt,r((ie=f.departments)==null?void 0:ie.join(", ")),1)])]}),_:2},1024))),128))])])):S("",!0)]))),128))]),l(t(ce),null,{default:o(()=>[l(t(h),{onClick:ke,variant:"outline"},{default:o(()=>e[52]||(e[52]=[n(" Cancel ")])),_:1}),l(t(h),{onClick:e[9]||(e[9]=a=>E.value=!0)},{default:o(()=>[l(t(Be),{class:"mr-2 h-4 w-4"}),e[53]||(e[53]=n(" Send Notifications "))]),_:1})]),_:1})]),_:1})):S("",!0)]),_:1},8,["open"]),l(t(re),{open:E.value,"onUpdate:open":e[14]||(e[14]=a=>E.value=a)},{default:o(()=>[l(t(de),{class:"sm:max-w-lg z-[110]"},{default:o(()=>[s("form",{onSubmit:Fe(he,["prevent"])},[l(t(ue),null,{default:o(()=>[l(t(me),null,{default:o(()=>e[54]||(e[54]=[n("Send Notifications")])),_:1}),l(t(fe),null,{default:o(()=>e[55]||(e[55]=[n(" Customize the notification before sending ")])),_:1})]),_:1}),s("div",es,[s("div",ts,[l(t(g),{for:"email-subject"},{default:o(()=>e[56]||(e[56]=[n("Email Subject")])),_:1}),l(t(q),{id:"email-subject",modelValue:t(x).email_subject,"onUpdate:modelValue":e[11]||(e[11]=a=>t(x).email_subject=a),placeholder:T(),required:""},null,8,["modelValue","placeholder"])]),s("div",ss,[l(t(g),{for:"custom-message"},{default:o(()=>e[57]||(e[57]=[n("Custom Message (Optional)")])),_:1}),l(t(Ne),{id:"custom-message",modelValue:t(x).custom_message,"onUpdate:modelValue":e[12]||(e[12]=a=>t(x).custom_message=a),rows:"3",placeholder:"Add any additional message for the managers..."},null,8,["modelValue"])])]),l(t(ce),null,{default:o(()=>[l(t(h),{onClick:e[13]||(e[13]=a=>E.value=!1),type:"button",variant:"outline"},{default:o(()=>e[58]||(e[58]=[n(" Cancel ")])),_:1}),l(t(h),{type:"submit",disabled:t(x).processing,class:"bg-destructive text-destructive-foreground hover:bg-destructive/90"},{default:o(()=>[n(r(t(x).processing?"Sending...":"Send Now"),1)]),_:1},8,["disabled"])]),_:1})],32)]),_:1})]),_:1},8,["open"])]),_:1}))}});export{Ws as default};
