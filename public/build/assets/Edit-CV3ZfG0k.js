import{d as B,C as H,g as p,o as d,w as a,e as l,t as n,j,b as r,h as f,u as e,f as i,a as m,n as w,F as $,i as V,P as q}from"./app-BNjABktD.js";import{_ as z}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DitlO5Q2.js";import{_ as C}from"./Button.vue_vue_type_script_setup_true_lang-CWts6LrH.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-UO8nEUqT.js";import{_ as v}from"./Label.vue_vue_type_script_setup_true_lang-IZScBhO0.js";import{_ as A}from"./Textarea.vue_vue_type_script_setup_true_lang-CbfydgPc.js";import{_ as x}from"./Card.vue_vue_type_script_setup_true_lang-DEQUo78Q.js";import{_ as h}from"./CardContent.vue_vue_type_script_setup_true_lang-BzTMax5n.js";import{_ as b}from"./CardDescription.vue_vue_type_script_setup_true_lang-DnkKfSSQ.js";import{_ as y}from"./CardHeader.vue_vue_type_script_setup_true_lang-8QboEo8x.js";import{_ as L}from"./CardTitle.vue_vue_type_script_setup_true_lang-ozDtW02n.js";import{_ as F,a as O,b as G,c as I,d as g}from"./SelectValue.vue_vue_type_script_setup_true_lang-DXjWtsTa.js";import{_ as R}from"./Checkbox.vue_vue_type_script_setup_true_lang-D_9Nlm26.js";import{_ as S}from"./index-Dqoca56k.js";import{c as T,e as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-BQb-vH_E.js";import{P as J}from"./pen-line-BxTSdzVS.js";import{E as K}from"./eye-CxQXafl6.js";import{U as Q,X as W}from"./_plugin-vue_export-helper-Bp63sxpB.js";import{L as Y}from"./loader-circle-d0-2-j0G.js";import{S as Z}from"./save-BKZXZx_t.js";import"./index-CLxB6eV3.js";import"./index-b_m65n1V.js";import"./useForwardPropsEmits-DYkP--1s.js";import"./Presence-CHSraAC_.js";import"./ConfigProvider-DXkEzyk_.js";import"./useForwardExpose-wzZd2glD.js";import"./Teleport-BHd4dFyo.js";import"./handleAndDispatchCustomEvent-ChOKVcqp.js";import"./chevron-up-BYIyXxYy.js";import"./Collection-qAIEELsC.js";import"./usePrimitiveElement-DxXZTgVE.js";import"./check-COw-8DLC.js";import"./useSize-BWGiUZkZ.js";import"./ohash.D__AXeF1-DHF4M4F_.js";import"./nullish-CHIgUVhi.js";import"./VisuallyHidden-COC6-xko.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang--nUXqqSB.js";import"./clock-7ec2J7Og.js";const ee={class:"px-4 sm:px-0 space-y-6"},se={class:"text-xl sm:text-2xl font-bold text-foreground"},te={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},re={class:"space-y-2"},ae={key:0,class:"text-sm text-destructive"},le={class:"space-y-2"},oe={key:0,class:"text-sm text-destructive"},ie={class:"space-y-2 md:col-span-2"},de={key:0,class:"text-sm text-destructive"},ne={class:"space-y-2 md:col-span-2"},me={key:0,class:"text-sm text-destructive"},ue={class:"flex items-center space-x-4"},ce={class:"flex-1"},fe={class:"text-lg font-semibold text-foreground"},_e={class:"text-sm text-muted-foreground"},pe={key:0,class:"text-sm text-muted-foreground mt-1"},ve={key:1,class:"flex flex-wrap gap-1 mt-2"},ge={key:2,class:"mt-2"},xe={class:"space-y-4"},he={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},be={class:"font-medium"},ye={class:"text-xs text-muted-foreground"},Le={key:0,class:"text-amber-600"},ke={key:0,class:"text-sm text-destructive"},we={class:"flex flex-col sm:flex-row gap-3"},$e={key:2},Ve={key:3},us=B({__name:"Edit",props:{userLevel:Object,existingLevels:Array},setup(u){const _=u,t=H({code:_.userLevel.code,name:_.userLevel.name,hierarchy_level:_.userLevel.hierarchy_level,description:_.userLevel.description,can_manage_levels:_.userLevel.can_manage_levels||[]});function E(){t.put(route("admin.user-levels.update",_.userLevel.id),{onSuccess:()=>{},onError:c=>{console.error("Validation errors:",c)}})}const M=c=>{t.hierarchy_level=c},D=c=>{const s=t.can_manage_levels.indexOf(c);s>-1?t.can_manage_levels.splice(s,1):t.can_manage_levels.push(c)},k=c=>{switch(parseInt(c.toString())){case 1:return{bg:"bg-blue-100",text:"text-blue-600",border:"border-blue-200"};case 2:return{bg:"bg-green-100",text:"text-green-600",border:"border-green-200"};case 3:return{bg:"bg-orange-100",text:"text-orange-600",border:"border-orange-200"};case 4:return{bg:"bg-red-100",text:"text-red-600",border:"border-red-200"};default:return{bg:"bg-purple-100",text:"text-purple-600",border:"border-purple-200"}}},N=[{name:"Dashboard",href:route("dashboard")},{name:"User Levels",href:route("admin.user-levels.index")},{name:_.userLevel.name,href:route("admin.user-levels.show",_.userLevel.id)},{name:"Edit",href:route("admin.user-levels.edit",_.userLevel.id)}];return(c,s)=>(d(),p(z,{breadcrumbs:N},{default:a(()=>[l("div",ee,[l("div",null,[l("h1",se,"Edit User Level: "+n(u.userLevel.name),1),s[3]||(s[3]=l("p",{class:"text-sm text-muted-foreground mt-1"},"Modify organizational hierarchy level properties and management permissions",-1))]),l("form",{onSubmit:j(E,["prevent"]),class:"max-w-4xl space-y-6"},[r(e(x),null,{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(J),{class:"mr-2 h-5 w-5"}),s[4]||(s[4]=i(" Level Configuration "))]),_:1}),r(e(b),null,{default:a(()=>s[5]||(s[5]=[i("Update the basic properties and hierarchy position of this user level")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",te,[l("div",re,[r(e(v),{for:"hierarchy_level"},{default:a(()=>s[6]||(s[6]=[i("Hierarchy Level")])),_:1}),r(e(F),{"model-value":e(t).hierarchy_level.toString(),"onUpdate:modelValue":M},{default:a(()=>[r(e(O),{id:"hierarchy_level",disabled:e(t).processing},{default:a(()=>[r(e(G),{placeholder:"Select Level"})]),_:1},8,["disabled"]),r(e(I),null,{default:a(()=>[r(e(g),{value:"1"},{default:a(()=>s[7]||(s[7]=[i("Level 1 (Employees)")])),_:1}),r(e(g),{value:"2"},{default:a(()=>s[8]||(s[8]=[i("Level 2 (Managers)")])),_:1}),r(e(g),{value:"3"},{default:a(()=>s[9]||(s[9]=[i("Level 3 (Senior Managers)")])),_:1}),r(e(g),{value:"4"},{default:a(()=>s[10]||(s[10]=[i("Level 4 (Directors)")])),_:1}),r(e(g),{value:"5"},{default:a(()=>s[11]||(s[11]=[i("Level 5 (Executive)")])),_:1})]),_:1})]),_:1},8,["model-value"]),s[12]||(s[12]=l("p",{class:"text-xs text-muted-foreground"},"Higher numbers indicate higher authority levels",-1)),e(t).errors.hierarchy_level?(d(),m("div",ae,n(e(t).errors.hierarchy_level),1)):f("",!0)]),l("div",le,[r(e(v),{for:"code"},{default:a(()=>s[13]||(s[13]=[i("Level Code")])),_:1}),r(e(U),{id:"code",modelValue:e(t).code,"onUpdate:modelValue":s[0]||(s[0]=o=>e(t).code=o),disabled:e(t).processing,maxlength:"10",placeholder:"e.g., L1, L2, MGR",required:""},null,8,["modelValue","disabled"]),s[14]||(s[14]=l("p",{class:"text-xs text-muted-foreground"},"Short identifier (e.g., L1, L2, L3, L4)",-1)),e(t).errors.code?(d(),m("div",oe,n(e(t).errors.code),1)):f("",!0)]),l("div",ie,[r(e(v),{for:"name"},{default:a(()=>s[15]||(s[15]=[i("Level Name")])),_:1}),r(e(U),{id:"name",modelValue:e(t).name,"onUpdate:modelValue":s[1]||(s[1]=o=>e(t).name=o),disabled:e(t).processing,placeholder:"e.g., Employee, Direct Manager, Senior Manager",required:""},null,8,["modelValue","disabled"]),e(t).errors.name?(d(),m("div",de,n(e(t).errors.name),1)):f("",!0)]),l("div",ne,[r(e(v),{for:"description"},{default:a(()=>s[16]||(s[16]=[i("Description")])),_:1}),r(e(A),{id:"description",modelValue:e(t).description,"onUpdate:modelValue":s[2]||(s[2]=o=>e(t).description=o),disabled:e(t).processing,placeholder:"Describe the responsibilities and scope of this level",rows:"3"},null,8,["modelValue","disabled"]),e(t).errors.description?(d(),m("div",me,n(e(t).errors.description),1)):f("",!0)])])]),_:1})]),_:1}),r(e(x),{class:"border-primary/20 bg-primary/5"},{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(K),{class:"mr-2 h-5 w-5"}),s[17]||(s[17]=i(" Current Level "))]),_:1}),r(e(b),null,{default:a(()=>s[18]||(s[18]=[i("Current state of this user level in the system")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",ue,[r(e(T),{class:"h-16 w-16"},{default:a(()=>[r(e(X),{class:w([[k(e(t).hierarchy_level).bg,k(e(t).hierarchy_level).text],"text-lg font-bold"])},{default:a(()=>[i(n(e(t).code),1)]),_:1},8,["class"])]),_:1}),l("div",ce,[l("div",fe,n(e(t).name),1),l("div",_e,"Hierarchy Level "+n(e(t).hierarchy_level),1),e(t).description?(d(),m("div",pe,n(e(t).description),1)):f("",!0),e(t).can_manage_levels.length>0?(d(),m("div",ve,[(d(!0),m($,null,V(e(t).can_manage_levels,o=>(d(),p(e(S),{key:o,variant:"secondary",class:"text-xs"},{default:a(()=>[i(" Can manage: "+n(o),1)]),_:2},1024))),128))])):f("",!0),u.userLevel.users_count?(d(),m("div",ge,[r(e(S),{variant:"outline"},{default:a(()=>[i(n(u.userLevel.users_count)+" users assigned",1)]),_:1})])):f("",!0)])])]),_:1})]),_:1}),u.existingLevels.length>0?(d(),p(e(x),{key:0},{default:a(()=>[r(e(y),null,{default:a(()=>[r(e(L),{class:"flex items-center"},{default:a(()=>[r(e(Q),{class:"mr-2 h-5 w-5"}),s[19]||(s[19]=i(" Management Permissions "))]),_:1}),r(e(b),null,{default:a(()=>s[20]||(s[20]=[i("Select which levels this level can manage and oversee")])),_:1})]),_:1}),r(e(h),null,{default:a(()=>[l("div",xe,[l("div",he,[(d(!0),m($,null,V(u.existingLevels,o=>(d(),m("div",{key:o.code,class:w(["flex items-center space-x-3 p-3 border rounded-lg hover:bg-muted/50 transition-colors",{"opacity-50":o.id===u.userLevel.id}])},[r(e(R),{id:`manage_${o.code}`,checked:e(t).can_manage_levels.includes(o.code),"onUpdate:checked":P=>P?e(t).can_manage_levels.push(o.code):D(o.code),disabled:e(t).processing||o.id===u.userLevel.id},null,8,["id","checked","onUpdate:checked","disabled"]),r(e(v),{for:`manage_${o.code}`,class:"flex-1 cursor-pointer"},{default:a(()=>[l("div",be,n(o.code)+" - "+n(o.name),1),l("div",ye,[i(" Level "+n(o.hierarchy_level)+" ",1),o.id===u.userLevel.id?(d(),m("span",Le,"(Current Level)")):f("",!0)])]),_:2},1032,["for"])],2))),128))]),s[21]||(s[21]=l("p",{class:"text-xs text-muted-foreground"},"Leave empty if this level cannot manage other users. A level cannot manage itself.",-1)),e(t).errors.can_manage_levels?(d(),m("div",ke,n(e(t).errors.can_manage_levels),1)):f("",!0)])]),_:1})]),_:1})):f("",!0),l("div",we,[r(e(C),{type:"submit",disabled:e(t).processing,class:"w-full sm:w-auto"},{default:a(()=>[e(t).processing?(d(),p(e(Y),{key:0,class:"mr-2 h-4 w-4 animate-spin"})):(d(),p(e(Z),{key:1,class:"mr-2 h-4 w-4"})),e(t).processing?(d(),m("span",$e,"Updating Level...")):(d(),m("span",Ve,"Update User Level"))]),_:1},8,["disabled"]),r(e(C),{as:e(q),href:c.route("admin.user-levels.show",u.userLevel.id),variant:"outline",disabled:e(t).processing,class:"w-full sm:w-auto"},{default:a(()=>[r(e(W),{class:"mr-2 h-4 w-4"}),s[22]||(s[22]=i(" Cancel "))]),_:1},8,["as","href","disabled"])])],32)])]),_:1}))}});export{us as default};
