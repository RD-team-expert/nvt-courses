import{d as C,C as h,k as D,o as r,w as g,e as t,l as S,g as m,a as i,f as a,u as o,v as b,t as n,i as v,x,F as P,h as $,j as y,b as _,P as j}from"./app-n_cIwlLT.js";import{_ as E}from"./AdminLayout.vue_vue_type_script_setup_true_lang-DEbUraED.js";import{E as N}from"./Editor-CdAGMW90.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-Rz_S81Vw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B9XjMpGI.js";import"./index-BgSmG8al.js";const A={class:"px-4 sm:px-0"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 mb-6"},O={class:"col-span-full"},T={key:0,class:"text-red-600 text-sm mt-1"},q={class:"col-span-1"},B={key:0,class:"text-red-600 text-sm mt-1"},M={class:"col-span-1"},F={class:"flex items-center space-x-4"},L={class:"flex items-center"},R={class:"flex items-center"},z={key:0,class:"mt-1 text-sm text-red-600"},G={class:"col-span-1"},H={key:0,class:"text-red-600 text-sm mt-1"},J={class:"col-span-1"},K={key:0,class:"text-red-600 text-sm mt-1"},Q={class:"col-span-1"},W={key:0,class:"text-red-600 text-sm mt-1"},X={class:"col-span-1"},Y={key:0,class:"text-red-600 text-sm mt-1"},Z={class:"mb-6"},ee={class:"flex justify-between items-center mb-4"},te=["disabled"],se={class:"space-y-4"},oe={class:"flex justify-between items-center mb-3"},le={class:"font-medium"},re={key:0,class:"text-sm text-gray-500"},ie=["onClick"],ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ne=["onUpdate:modelValue"],de={key:0,class:"text-red-600 text-sm mt-1"},ue=["onUpdate:modelValue"],me={key:0,class:"text-red-600 text-sm mt-1"},ce=["onUpdate:modelValue"],pe={key:0,class:"text-red-600 text-sm mt-1"},be=["onUpdate:modelValue"],fe={class:"col-span-full"},ve=["onUpdate:modelValue"],ge={key:0,class:"text-red-600 text-sm mt-1"},xe={key:0,class:"text-red-600 text-sm mt-2"},ye={class:"col-span-full"},_e={key:0,class:"text-red-600 text-sm mt-1"},ke={key:1,class:"mt-2"},we=["src"],Ve={class:"col-span-full"},Ue={key:0,class:"text-red-600 text-sm mt-1"},Ce={class:"flex flex-col sm:flex-row gap-2 mb-4"},Ee=C({__name:"Edit",props:{course:Object},setup(k){const u=k,f=d=>{if(!d)return"";const e=d.split("T")[0].split("-");if(e.length!==3){const l=new Date(d);return isNaN(l.getTime())?"":l.toISOString().split("T")[0]}return e.join("-")},s=h({name:u.course.name,description:u.course.description,start_date:f(u.course.start_date),end_date:f(u.course.end_date),status:u.course.status||"pending",level:u.course.level||"",privacy:u.course.privacy||"public",duration:u.course.duration||"",image:null,availabilities:u.course.availabilities&&u.course.availabilities.length?u.course.availabilities.map(d=>({id:d.id,start_date:d.start_date?new Date(d.start_date).toISOString().slice(0,16):"",end_date:d.end_date?new Date(d.end_date).toISOString().slice(0,16):"",capacity:d.capacity||25,notes:d.notes||"",status:d.status||"active"})):[{start_date:"",end_date:"",capacity:25,notes:"",status:"active"}]});function w(){s.availabilities.length<5&&s.availabilities.push({start_date:"",end_date:"",capacity:25,notes:"",status:"active"})}function V(d){s.availabilities.length>1&&s.availabilities.splice(d,1)}function U(){s.start_date&&(s.start_date=f(s.start_date)),s.end_date&&(s.end_date=f(s.end_date)),s.post(`/admin/courses/${u.course.id}?_method=PUT`,{forceFormData:!0})}return(d,e)=>(r(),D(E,null,{default:g(()=>[t("div",A,[e[34]||(e[34]=t("h1",{class:"text-xl sm:text-2xl font-bold mb-4"},"Edit Course",-1)),t("form",{onSubmit:S(U,["prevent"]),class:"max-w-4xl"},[t("div",I,[t("div",O,[e[10]||(e[10]=t("label",{class:"block font-semibold mb-1"},"Course Name",-1)),m(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=l=>o(s).name=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,o(s).name]]),o(s).errors.name?(r(),i("div",T,n(o(s).errors.name),1)):a("",!0)]),t("div",q,[e[12]||(e[12]=t("label",{class:"block font-semibold mb-1"},"Status",-1)),m(t("select",{"onUpdate:modelValue":e[1]||(e[1]=l=>o(s).status=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},e[11]||(e[11]=[t("option",{value:"pending"},"Pending",-1),t("option",{value:"in_progress"},"In Progress",-1),t("option",{value:"completed"},"Completed",-1)]),512),[[v,o(s).status]]),o(s).errors.status?(r(),i("div",B,n(o(s).errors.status),1)):a("",!0)]),t("div",M,[e[15]||(e[15]=t("label",{class:"block font-semibold mb-1"},"Course Privacy",-1)),t("div",F,[t("div",L,[m(t("input",{id:"privacy-public",name:"privacy",type:"radio",value:"public","onUpdate:modelValue":e[2]||(e[2]=l=>o(s).privacy=l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[x,o(s).privacy]]),e[13]||(e[13]=t("label",{for:"privacy-public",class:"ml-2 block text-sm text-gray-900"}," 🌍 Public ",-1))]),t("div",R,[m(t("input",{id:"privacy-private",name:"privacy",type:"radio",value:"private","onUpdate:modelValue":e[3]||(e[3]=l=>o(s).privacy=l),class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"},null,512),[[x,o(s).privacy]]),e[14]||(e[14]=t("label",{for:"privacy-private",class:"ml-2 block text-sm text-gray-900"}," 🔒 Private ",-1))])]),e[16]||(e[16]=t("p",{class:"mt-1 text-xs text-gray-500"}," Public courses are visible to everyone. Private courses are only visible to enrolled users. ",-1)),o(s).errors.privacy?(r(),i("div",z,n(o(s).errors.privacy),1)):a("",!0)]),t("div",G,[e[18]||(e[18]=t("label",{class:"block font-semibold mb-1"},"Level (Optional)",-1)),m(t("select",{"onUpdate:modelValue":e[4]||(e[4]=l=>o(s).level=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},e[17]||(e[17]=[t("option",{value:""},"Select Level",-1),t("option",{value:"beginner"},"Beginner",-1),t("option",{value:"intermediate"},"Intermediate",-1),t("option",{value:"advanced"},"Advanced",-1)]),512),[[v,o(s).level]]),o(s).errors.level?(r(),i("div",H,n(o(s).errors.level),1)):a("",!0)]),t("div",J,[e[19]||(e[19]=t("label",{class:"block font-semibold mb-1"},"Duration (hours)",-1)),m(t("input",{type:"number",step:"0.1","onUpdate:modelValue":e[5]||(e[5]=l=>o(s).duration=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,o(s).duration]]),o(s).errors.duration?(r(),i("div",K,n(o(s).errors.duration),1)):a("",!0)]),t("div",Q,[e[20]||(e[20]=t("label",{class:"block font-semibold mb-1"},"Start Date",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[6]||(e[6]=l=>o(s).start_date=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,o(s).start_date]]),o(s).errors.start_date?(r(),i("div",W,n(o(s).errors.start_date),1)):a("",!0)]),t("div",X,[e[21]||(e[21]=t("label",{class:"block font-semibold mb-1"},"End Date",-1)),m(t("input",{type:"date","onUpdate:modelValue":e[7]||(e[7]=l=>o(s).end_date=l),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[b,o(s).end_date]]),o(s).errors.end_date?(r(),i("div",Y,n(o(s).errors.end_date),1)):a("",!0)]),t("div",Z,[t("div",ee,[e[22]||(e[22]=t("h2",{class:"text-lg font-semibold"},"Manage Availability Periods",-1)),t("button",{type:"button",onClick:w,disabled:o(s).availabilities.length>=5,class:"bg-green-500 text-white px-3 py-1 rounded text-sm hover:bg-green-600 disabled:bg-gray-400 disabled:cursor-not-allowed"}," Add Date Range ("+n(o(s).availabilities.length)+"/5) ",9,te)]),t("div",se,[(r(!0),i(P,null,$(o(s).availabilities,(l,c)=>(r(),i("div",{key:l.id||c,class:"border border-gray-300 rounded-lg p-4 bg-gray-50"},[t("div",oe,[t("h3",le,[y(" Availability Period "+n(c+1)+" ",1),l.id?(r(),i("span",re,"(Existing)")):a("",!0)]),o(s).availabilities.length>1?(r(),i("button",{key:0,type:"button",onClick:p=>V(c),class:"text-red-600 hover:text-red-800 text-sm"}," Remove ",8,ie)):a("",!0)]),t("div",ae,[t("div",null,[e[23]||(e[23]=t("label",{class:"block font-medium mb-1"},"Start Date",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":p=>l.start_date=p,class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,ne),[[b,l.start_date]]),o(s).errors[`availabilities.${c}.start_date`]?(r(),i("div",de,n(o(s).errors[`availabilities.${c}.start_date`]),1)):a("",!0)]),t("div",null,[e[24]||(e[24]=t("label",{class:"block font-medium mb-1"},"End Date",-1)),m(t("input",{type:"datetime-local","onUpdate:modelValue":p=>l.end_date=p,class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,ue),[[b,l.end_date]]),o(s).errors[`availabilities.${c}.end_date`]?(r(),i("div",me,n(o(s).errors[`availabilities.${c}.end_date`]),1)):a("",!0)]),t("div",null,[e[25]||(e[25]=t("label",{class:"block font-medium mb-1"},"Capacity",-1)),m(t("input",{type:"number","onUpdate:modelValue":p=>l.capacity=p,min:"1",max:"1000",class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500",required:""},null,8,ce),[[b,l.capacity]]),o(s).errors[`availabilities.${c}.capacity`]?(r(),i("div",pe,n(o(s).errors[`availabilities.${c}.capacity`]),1)):a("",!0)]),t("div",null,[e[27]||(e[27]=t("label",{class:"block font-medium mb-1"},"Status",-1)),m(t("select",{"onUpdate:modelValue":p=>l.status=p,class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},e[26]||(e[26]=[t("option",{value:"active"},"Active",-1),t("option",{value:"closed"},"Closed",-1)]),8,be),[[v,l.status]])]),t("div",fe,[e[28]||(e[28]=t("label",{class:"block font-medium mb-1"},"Notes (Optional)",-1)),m(t("input",{type:"text","onUpdate:modelValue":p=>l.notes=p,placeholder:"Special instructions or requirements",class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,8,ve),[[b,l.notes]]),o(s).errors[`availabilities.${c}.notes`]?(r(),i("div",ge,n(o(s).errors[`availabilities.${c}.notes`]),1)):a("",!0)])])]))),128))]),o(s).errors.availabilities?(r(),i("div",xe,n(o(s).errors.availabilities),1)):a("",!0)]),t("div",ye,[e[30]||(e[30]=t("label",{class:"block font-semibold mb-1"},"Course Image (Optional)",-1)),t("input",{type:"file",onInput:e[8]||(e[8]=l=>o(s).image=l.target.files[0]),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,32),o(s).errors.image?(r(),i("div",_e,n(o(s).errors.image),1)):a("",!0),u.course.image_path?(r(),i("div",ke,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"Current image:",-1)),t("img",{src:`/storage/${u.course.image_path}`,alt:"Current course image",class:"mt-1 h-32 w-full sm:w-48 object-cover rounded"},null,8,we)])):a("",!0)]),t("div",Ve,[e[31]||(e[31]=t("label",{class:"block font-semibold mb-1"},"Description",-1)),_(o(N),{modelValue:o(s).description,"onUpdate:modelValue":e[9]||(e[9]=l=>o(s).description=l),"api-key":"r1racrxd2joy9wp9xp9sj91ka9j4m3humenifqvwtx9s6i3y",init:{toolbar_mode:"sliding",plugins:"anchor autolink charmap codesample emoticons image link lists media searchreplace table visualblocks wordcount",toolbar:"undo redo | blocks fontfamily fontsize | bold italic underline strikethrough | link image media table | align lineheight | numlist bullist indent outdent | emoticons charmap | removeformat",mobile:{menubar:!1,toolbar:"undo redo | bold italic | link | bullist numlist",toolbar_mode:"scrolling"}}},null,8,["modelValue"]),o(s).errors.description?(r(),i("div",Ue,n(o(s).errors.description),1)):a("",!0)])]),t("div",Ce,[e[33]||(e[33]=t("button",{type:"submit",class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition w-full sm:w-auto"}," Update Course ",-1)),_(o(j),{href:"/admin/courses",class:"bg-gray-300 text-gray-700 px-4 py-2 rounded hover:bg-gray-400 transition w-full sm:w-auto text-center mt-2 sm:mt-0"},{default:g(()=>e[32]||(e[32]=[y(" Cancel ")])),_:1})])],32)])]),_:1}))}});export{Ee as default};
