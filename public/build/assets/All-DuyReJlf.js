import{d as B,r as D,c as O,a,o as r,b as d,u as v,m as q,w as R,e,f as h,g as A,v as E,n as S,F as C,h as M,t as m,i as $,j as F}from"./app-CGpEa2Rf.js";import{X as H,C as Y,_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-joK0Vy2g.js";import{_ as Q}from"./Pagination-BQTISycq.js";import{c as w}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Ci9BpTpo.js";import"./index-BYhRPgLx.js";/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("CalendarIcon",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=w("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=w("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=w("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-vue-next v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=w("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),P=(p,_)=>{const k=p.__vccOpts||p;for(const[n,b]of _)k[n]=b;return k},Z={class:"flex h-full flex-1 flex-col gap-4 p-4 sm:p-6"},ee={class:"bg-white rounded-xl border border-sidebar-border/70 p-4 sm:p-6 shadow-sm"},te={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4"},se={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},le={class:"relative w-full sm:w-64"},oe={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},ae={key:0,class:"mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200 animate-fadeIn"},re={class:"flex flex-col sm:flex-row gap-4"},ne={class:"flex-1"},ie=["value"],ce={class:"flex-1"},de=["value"],ue={class:"space-y-4"},me={key:0,class:"text-center py-8"},fe={class:"text-gray-500"},ve={class:"flex items-start flex-1"},be={class:"w-10 h-10 rounded-full bg-gray-200 flex-shrink-0 mr-3 overflow-hidden"},ge=["src"],xe={key:1,class:"w-full h-full flex items-center justify-center text-gray-500 font-medium text-sm"},pe={class:"flex-1 min-w-0"},ye={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},he={class:"text-sm font-medium text-gray-900 break-words"},we={class:"mt-1 sm:mt-0 text-xs text-gray-500 sm:ml-4 whitespace-nowrap"},_e={class:"flex flex-wrap items-center mt-2 gap-2"},ke={class:"flex items-center text-xs text-gray-500"},De={key:1,class:"flex items-center text-xs text-gray-500"},Ce={class:"mt-6"},Ae=B({__name:"All",props:{activities:Object,isAdmin:{type:Boolean,default:!1}},setup(p){const _=p,k=[{title:"Dashboard",href:"/dashboard"},{title:"All Activities",href:"/activities"}],n=D(""),b=D(!1),g=D(""),u=D(""),I=[{value:"",label:"All Actions"},{value:"create",label:"Create"},{value:"update",label:"Update"},{value:"delete",label:"Delete"},{value:"enroll",label:"Enroll"},{value:"login",label:"Login"},{value:"complete",label:"Complete"},{value:"attendance",label:"Attendance"}],L=[{value:"",label:"All Time"},{value:"today",label:"Today"},{value:"yesterday",label:"Yesterday"},{value:"week",label:"This Week"},{value:"month",label:"This Month"}],j=O(()=>{var i;return(i=_.activities)!=null&&i.data?_.activities.data.filter(t=>{var y;const s=!n.value||t.description.toLowerCase().includes(n.value.toLowerCase())||((y=t.user)==null?void 0:y.name)&&t.user.name.toLowerCase().includes(n.value.toLowerCase()),c=!g.value||t.action===g.value;let l=!0;if(u.value){const x=new Date(t.created_at),f=new Date;if(f.setHours(0,0,0,0),u.value==="today"){const o=new Date(f);o.setDate(o.getDate()+1),l=x>=f&&x<o}else if(u.value==="yesterday"){const o=new Date(f);o.setDate(o.getDate()-1),l=x>=o&&x<f}else if(u.value==="week"){const o=new Date(f);o.setDate(o.getDate()-o.getDay()),l=x>=o}else if(u.value==="month"){const o=new Date(f.getFullYear(),f.getMonth(),1);l=x>=o}}return s&&c&&l}):[]}),T=i=>{if(!i)return"";const t=new Date(i);return t.toLocaleDateString()+" "+t.toLocaleTimeString()},U=i=>{if(!i)return"";const t=new Date(i),c=Math.floor((new Date-t)/1e3);if(c<60)return"just now";if(c<3600){const l=Math.floor(c/60);return`${l} minute${l>1?"s":""} ago`}else if(c<86400){const l=Math.floor(c/3600);return`${l} hour${l>1?"s":""} ago`}else{const l=Math.floor(c/86400);return`${l} day${l>1?"s":""} ago`}},V=i=>({create:"bg-blue-100 text-blue-800 border-blue-200",update:"bg-green-100 text-green-800 border-green-200",delete:"bg-red-100 text-red-800 border-red-200",enroll:"bg-purple-100 text-purple-800 border-purple-200",login:"bg-yellow-100 text-yellow-800 border-yellow-200",complete:"bg-indigo-100 text-indigo-800 border-indigo-200",attendance:"bg-teal-100 text-teal-800 border-teal-200"})[i]||"bg-gray-100 text-gray-800 border-gray-200",N=()=>{n.value="",g.value="",u.value="",b.value=!1};return(i,t)=>(r(),a(C,null,[d(v(q),{title:"All Activities"}),d(z,{breadcrumbs:k},{default:R(()=>[e("div",Z,[e("div",ee,[e("div",te,[t[6]||(t[6]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-0"}," All Activities ",-1)),e("div",se,[e("div",le,[e("div",oe,[d(v(J),{class:"h-4 w-4 text-gray-400"})]),A(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>n.value=s),type:"text",placeholder:"Search activities...",class:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},null,512),[[E,n.value]]),n.value?(r(),a("button",{key:0,onClick:t[1]||(t[1]=s=>n.value=""),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},[d(v(H),{class:"h-4 w-4 text-gray-400 hover:text-gray-600"})])):h("",!0)]),e("button",{onClick:t[2]||(t[2]=s=>b.value=!b.value),class:"flex items-center justify-center gap-1 px-4 py-2 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors"},[d(v(G),{class:"h-4 w-4"}),t[5]||(t[5]=e("span",null,"Filters",-1)),d(v(X),{class:S(["h-4 w-4 transition-transform",{"rotate-180":b.value}])},null,8,["class"])])])]),b.value?(r(),a("div",ae,[e("div",re,[e("div",ne,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Action Type",-1)),A(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>g.value=s),class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(r(),a(C,null,M(I,s=>e("option",{key:s.value,value:s.value},m(s.label),9,ie)),64))],512),[[$,g.value]])]),e("div",ce,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Range",-1)),A(e("select",{"onUpdate:modelValue":t[4]||(t[4]=s=>u.value=s),class:"w-full border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"},[(r(),a(C,null,M(L,s=>e("option",{key:s.value,value:s.value},m(s.label),9,de)),64))],512),[[$,u.value]])]),e("div",{class:"flex items-end"},[e("button",{onClick:N,class:"w-full sm:w-auto px-4 py-2 text-sm text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50"}," Clear Filters ")])])])):h("",!0),e("div",ue,[j.value.length===0?(r(),a("div",me,[d(v(Y),{class:"h-12 w-12 mx-auto text-gray-400 mb-2"}),t[9]||(t[9]=e("h3",{class:"text-lg font-medium text-gray-900"},"No activities found",-1)),e("p",fe,m(n.value||g.value||u.value?"Try adjusting your filters":"Activity history will appear here"),1)])):h("",!0),(r(!0),a(C,null,M(j.value,s=>{var c,l,y;return r(),a("div",{key:s.id,class:"flex flex-col sm:flex-row sm:items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",ve,[e("div",be,[(c=s.user)!=null&&c.avatar?(r(),a("img",{key:0,src:s.user.avatar,class:"w-full h-full object-cover",alt:"User avatar"},null,8,ge)):(r(),a("div",xe,m((l=s.user)!=null&&l.name?s.user.name.charAt(0).toUpperCase():"S"),1))]),e("div",pe,[e("div",ye,[e("p",he,m(s.description),1),e("div",we,m(U(s.created_at)),1)]),e("div",_e,[s.action?(r(),a("span",{key:0,class:S(["px-2 py-1 text-xs rounded-full border",V(s.action)])},m(s.action),3)):h("",!0),e("div",ke,[d(v(W),{class:"h-3 w-3 mr-1"}),F(" "+m(T(s.created_at)),1)]),(y=s.user)!=null&&y.name?(r(),a("div",De,[d(v(K),{class:"h-3 w-3 mr-1"}),F(" "+m(s.user.name),1)])):h("",!0)])])])])}),128))]),e("div",Ce,[d(Q,{links:p.activities.links},null,8,["links"])])])])]),_:1})],64))}}),Ie=P(Ae,[["__scopeId","data-v-b2051750"]]);export{Ie as default};
