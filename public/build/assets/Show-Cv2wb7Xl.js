import{P as V,H as M,k as N,o as l,w as Q,e,a,f as g,t as n,n as _,p as j,l as D,F as k,h as A,g as q,x as L,q as T,v as P,j as y,b as E,r as h,A as R,N as U,c as p,W as B}from"./app-n_cIwlLT.js";import{_ as O}from"./AppLayout.vue_vue_type_script_setup_true_lang-Rz_S81Vw.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B9XjMpGI.js";import"./index-BgSmG8al.js";const H={components:{AppLayout:O,Link:V},props:{quiz:{type:Object,required:!0},questions:{type:Array,default:()=>[]},hasExistingAttempt:{type:Boolean,default:!1}},setup(d){const t=h({answers:{}}),r=h(!1),s=h(!1),f=h(d.quiz.time_limit?d.quiz.time_limit*60:0),b=h(null);R(()=>{d.questions.forEach(o=>{o.type==="checkbox"?t.value.answers[o.id]=[]:t.value.answers[o.id]=""}),d.quiz.time_limit&&f.value>0&&(b.value=setInterval(()=>{f.value--,f.value<=0&&(clearInterval(b.value),C())},1e3))}),U(()=>{b.value&&clearInterval(b.value)});const x=p(()=>Object.values(t.value.answers).filter(o=>Array.isArray(o)?o.length>0:o&&o.trim()!=="").length),z=p(()=>d.questions.length===0?0:x.value/d.questions.length*100),i=p(()=>x.value===d.questions.length),w=p(()=>{var o;return[{name:"Quizzes",route:"quizzes.index"},{name:((o=d.quiz)==null?void 0:o.title)||"Quiz",route:null}]}),u=o=>{const m=t.value.answers[o];return Array.isArray(m)?m.length>0:m&&m.trim()!==""},c=o=>{const m=Math.floor(o/60),S=o%60;return`${m}:${S.toString().padStart(2,"0")}`},v=async()=>{s.value=!0;try{await B.post(route("quizzes.draft",d.quiz.id),{answers:Object.entries(t.value.answers).map(([o,m])=>({question_id:parseInt(o),answer:m}))})}catch(o){console.error("Draft save error:",o)}finally{s.value=!1}},C=async()=>{r.value=!0;try{await B.post(route("quizzes.store",d.quiz.id),{answers:Object.entries(t.value.answers).map(([o,m])=>({question_id:parseInt(o),answer:m}))})}catch(o){console.error("Submission error:",o)}finally{r.value=!1}};return{form:t,submitting:r,savingDraft:s,timeRemaining:f,answeredQuestions:x,progressPercentage:z,allQuestionsAnswered:i,breadcrumbs:w,isQuestionAnswered:u,formatTime:c,saveDraft:v,submitAttempt:C}}},I={class:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50"},F={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},W={class:"bg-white rounded-xl shadow-sm p-6 mb-6 border border-gray-100"},G={class:"flex items-start justify-between"},J={class:"flex-1"},K={class:"text-3xl font-bold text-gray-900 mb-2"},X={class:"text-gray-600 mb-4"},Z={class:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm"},$={class:"bg-gray-50 rounded-lg p-3"},ee={class:"font-semibold text-gray-900"},te={class:"bg-gray-50 rounded-lg p-3"},se={class:"font-semibold text-gray-900"},ie={class:"bg-gray-50 rounded-lg p-3"},oe={class:"font-semibold text-gray-900"},re={class:"bg-gray-50 rounded-lg p-3"},ne={class:"font-semibold text-gray-900"},le={class:"ml-6"},ae={key:0,class:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100"},de={class:"flex items-center justify-between"},me={class:"flex items-center"},ue={class:"w-full bg-gray-200 rounded-full h-2 mt-2"},ce={key:1,class:"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-6"},ge={class:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100"},fe={class:"flex items-center justify-between mb-2"},be={class:"text-sm text-gray-500"},xe={class:"w-full bg-gray-200 rounded-full h-2"},ve={key:2,class:"space-y-6"},ye={class:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200"},he={class:"flex items-center justify-between"},we={class:"flex items-center"},_e={class:"w-8 h-8 bg-indigo-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3"},pe={class:"text-lg font-semibold text-gray-900"},ze={class:"flex items-center space-x-2"},ke={class:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium"},Ae={class:"p-6"},qe={class:"text-gray-900 mb-6 text-base leading-relaxed"},Ce={key:0,class:"space-y-3"},Me=["id","onUpdate:modelValue","value"],Qe=["for"],je={key:1,class:"space-y-3"},Be=["id","onUpdate:modelValue","value"],Se=["for"],Ve={key:2},Ne=["onUpdate:modelValue"],De={class:"mt-2 text-xs text-gray-500"},Le={class:"bg-white rounded-xl shadow-sm p-6 mt-8 border border-gray-100"},Te={class:"flex flex-col sm:flex-row items-center justify-between gap-4"},Pe={class:"flex items-center space-x-6 text-sm text-gray-600"},Ee={class:"flex items-center"},Re={class:"flex items-center"},Ue={class:"flex items-center space-x-3"},Oe=["disabled"],Ye={key:0,class:"flex items-center"},He={key:1},Ie=["disabled"],Fe={key:0,class:"flex items-center"},We={key:1,class:"flex items-center"},Ge={key:0,class:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg"},Je={class:"flex items-start"},Ke={class:"text-sm text-yellow-800"},Xe={class:"font-medium"},Ze={key:3,class:"text-center py-16"};function $e(d,t,r,s,f,b){const x=M("Link"),z=M("AppLayout");return l(),N(z,{breadcrumbs:s.breadcrumbs},{default:Q(()=>[e("div",I,[e("div",F,[e("div",W,[e("div",G,[e("div",J,[e("h1",K,n(r.quiz.title),1),e("p",X,n(r.quiz.description||"No description available"),1),e("div",Z,[e("div",$,[t[2]||(t[2]=e("p",{class:"text-gray-500 mb-1"},"Pass Threshold",-1)),e("p",ee,n(r.quiz.pass_threshold)+"%",1)]),e("div",te,[t[3]||(t[3]=e("p",{class:"text-gray-500 mb-1"},"Total Points",-1)),e("p",se,n(r.quiz.total_points||"N/A"),1)]),e("div",ie,[t[4]||(t[4]=e("p",{class:"text-gray-500 mb-1"},"Questions",-1)),e("p",oe,n(r.questions.length),1)]),e("div",re,[t[5]||(t[5]=e("p",{class:"text-gray-500 mb-1"},"Time Limit",-1)),e("p",ne,n(r.quiz.time_limit?`${r.quiz.time_limit} min`:"No limit"),1)])])]),e("div",le,[e("div",{class:_(["px-4 py-2 rounded-full text-sm font-medium",r.hasExistingAttempt?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"])},n(r.hasExistingAttempt?"Continuing Attempt":"New Attempt"),3)])])]),r.quiz.time_limit&&s.timeRemaining>0?(l(),a("div",ae,[e("div",de,[t[6]||(t[6]=e("div",{class:"flex items-center"},[e("svg",{class:"w-5 h-5 text-orange-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-sm font-medium text-gray-700"},"Time Remaining")],-1)),e("div",me,[e("span",{class:_(["text-lg font-bold",s.timeRemaining<300?"text-red-600":"text-gray-900"])},n(s.formatTime(s.timeRemaining)),3)])]),e("div",ue,[e("div",{class:_(["h-2 rounded-full transition-all duration-1000",s.timeRemaining<300?"bg-red-500":"bg-blue-500"]),style:j({width:`${s.timeRemaining/(r.quiz.time_limit*60)*100}%`})},null,6)])])):g("",!0),r.hasExistingAttempt?(l(),a("div",ce,t[7]||(t[7]=[e("div",{class:"flex items-start"},[e("svg",{class:"w-6 h-6 text-amber-500 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})]),e("div",null,[e("h3",{class:"text-sm font-semibold text-amber-800 mb-1"}," Continuing Previous Attempt "),e("p",{class:"text-sm text-amber-700"}," You have an incomplete attempt for this quiz. Your previous answers have been saved. You can modify them before final submission. ")])],-1)]))):g("",!0),e("div",ge,[e("div",fe,[t[8]||(t[8]=e("span",{class:"text-sm font-medium text-gray-700"},"Progress",-1)),e("span",be,n(s.answeredQuestions)+"/"+n(r.questions.length)+" answered",1)]),e("div",xe,[e("div",{class:"bg-gradient-to-r from-green-400 to-green-600 h-2 rounded-full transition-all duration-300",style:j({width:`${s.progressPercentage}%`})},null,4)])]),r.questions.length?(l(),a("div",ve,[e("form",{onSubmit:t[1]||(t[1]=D((...i)=>s.submitAttempt&&s.submitAttempt(...i),["prevent"]))},[(l(!0),a(k,null,A(r.questions,(i,w)=>(l(),a("div",{key:i.id,class:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden"},[e("div",ye,[e("div",he,[e("div",we,[e("div",_e,n(w+1),1),e("span",pe," Question "+n(w+1),1)]),e("div",ze,[e("div",ke,n(i.points||"N/A")+" points ",1),e("div",{class:_(["w-3 h-3 rounded-full",s.isQuestionAnswered(i.id)?"bg-green-500":"bg-gray-300"])},null,2)])])]),e("div",Ae,[e("p",qe,n(i.question_text),1),i.type==="radio"?(l(),a("div",Ce,[t[9]||(t[9]=e("div",{class:"text-sm text-gray-600 mb-3 font-medium"},"Select one answer:",-1)),(l(!0),a(k,null,A(i.options,(u,c)=>(l(),a("div",{key:c,class:"flex items-start p-3 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer"},[q(e("input",{id:`answer-${i.id}-${c}`,"onUpdate:modelValue":v=>s.form.answers[i.id]=v,type:"radio",value:u,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 mt-1",required:""},null,8,Me),[[L,s.form.answers[i.id]]]),e("label",{for:`answer-${i.id}-${c}`,class:"ml-3 text-sm text-gray-700 cursor-pointer flex-1"},n(u),9,Qe)]))),128))])):g("",!0),i.type==="checkbox"?(l(),a("div",je,[t[10]||(t[10]=e("div",{class:"text-sm text-gray-600 mb-3 font-medium"},"Select all that apply:",-1)),(l(!0),a(k,null,A(i.options,(u,c)=>(l(),a("div",{key:c,class:"flex items-start p-3 rounded-lg border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50 transition-colors cursor-pointer"},[q(e("input",{id:`answer-${i.id}-${c}`,"onUpdate:modelValue":v=>s.form.answers[i.id]=v,type:"checkbox",value:u,class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded mt-1"},null,8,Be),[[T,s.form.answers[i.id]]]),e("label",{for:`answer-${i.id}-${c}`,class:"ml-3 text-sm text-gray-700 cursor-pointer flex-1"},n(u),9,Se)]))),128))])):g("",!0),i.type==="text"?(l(),a("div",Ve,[t[11]||(t[11]=e("div",{class:"text-sm text-gray-600 mb-3 font-medium"},"Your answer:",-1)),q(e("textarea",{"onUpdate:modelValue":u=>s.form.answers[i.id]=u,class:"w-full border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm",rows:"5",placeholder:"Type your answer here...",required:""},null,8,Ne),[[P,s.form.answers[i.id]]]),e("div",De," Character count: "+n((s.form.answers[i.id]||"").length),1)])):g("",!0)])]))),128)),e("div",Le,[e("div",Te,[e("div",Pe,[e("div",Ee,[t[12]||(t[12]=e("svg",{class:"w-4 h-4 mr-1 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)),e("span",null,n(s.answeredQuestions)+" answered",1)]),e("div",Re,[t[13]||(t[13]=e("svg",{class:"w-4 h-4 mr-1 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z","clip-rule":"evenodd"})],-1)),e("span",null,n(r.questions.length-s.answeredQuestions)+" remaining",1)])]),e("div",Ue,[r.hasExistingAttempt?g("",!0):(l(),a("button",{key:0,type:"button",onClick:t[0]||(t[0]=(...i)=>s.saveDraft&&s.saveDraft(...i)),disabled:s.submitting||s.savingDraft,class:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[s.savingDraft?(l(),a("span",Ye,t[14]||(t[14]=[e("svg",{class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),y(" Saving... ")]))):(l(),a("span",He,"Save Draft"))],8,Oe)),e("button",{type:"submit",disabled:s.submitting||!s.allQuestionsAnswered,class:"px-6 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg hover:from-indigo-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-sm font-medium transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center"},[s.submitting?(l(),a("span",Fe,t[15]||(t[15]=[e("svg",{class:"animate-spin h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8h-8z"})],-1),y(" Submitting... ")]))):(l(),a("span",We,[t[16]||(t[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),y(" "+n(r.hasExistingAttempt?"Complete Quiz":"Submit Quiz"),1)]))],8,Ie)])]),s.allQuestionsAnswered?g("",!0):(l(),a("div",Ge,[e("div",Je,[t[18]||(t[18]=e("svg",{class:"w-5 h-5 text-yellow-500 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("div",null,[e("p",Ke,[t[17]||(t[17]=y(" Please answer all questions before submitting. ")),e("span",Xe,n(r.questions.length-s.answeredQuestions)+" question(s) remaining.",1)])])])]))])],32)])):(l(),a("div",Ze,[t[20]||(t[20]=e("div",{class:"mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Questions Available",-1)),t[22]||(t[22]=e("p",{class:"text-gray-500 mb-4"},"This quiz doesn't have any questions yet.",-1)),E(x,{href:d.route("quizzes.index"),class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700"},{default:Q(()=>t[19]||(t[19]=[y(" Back to Quizzes ")])),_:1},8,["href"])]))])])]),_:1},8,["breadcrumbs"])}const rt=Y(H,[["render",$e],["__scopeId","data-v-999d29e6"]]);export{rt as default};
