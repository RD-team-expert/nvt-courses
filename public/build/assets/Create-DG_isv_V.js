import{d as E,C as N,r as _,a as d,o as u,b as s,u as e,m as j,w as r,e as l,P as I,f as a,j as z,h as m,n as c,t as f,s as q,F as L,i as H,v as O,x as W}from"./app-CCCS0CZF.js";import{V as J,f as X}from"./AppLayout.vue_vue_type_script_setup_true_lang-DQk27E9I.js";import{_ as g}from"./Button.vue_vue_type_script_setup_true_lang-D-fF9GCs.js";import{_ as y}from"./Card.vue_vue_type_script_setup_true_lang-CRkEhIeg.js";import{_ as h}from"./CardContent.vue_vue_type_script_setup_true_lang-DtVg1eqL.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-CkNQtlWZ.js";import{_ as k}from"./CardHeader.vue_vue_type_script_setup_true_lang-CouQvq0a.js";import{_ as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-Bh6tkZxp.js";import{_ as V}from"./Input.vue_vue_type_script_setup_true_lang-BQ7YqneJ.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-Di0JbUWQ.js";import{_ as Y}from"./Textarea.vue_vue_type_script_setup_true_lang-ChASn6yT.js";import{_ as K}from"./Switch.vue_vue_type_script_setup_true_lang-BVfjFvWR.js";import{_ as Q,a as Z}from"./index-xB8l7wmf.js";import{A as ee}from"./arrow-left-BHofNolB.js";import{L as te}from"./link-BjTzIgxc.js";import{I as se}from"./image-CkQQK7Gz.js";import{U as R}from"./upload-C90bPJY5.js";import{X as oe}from"./_plugin-vue_export-helper-BAqViWah.js";import{T as re}from"./tag-DpnCB4aG.js";import{T as le}from"./triangle-alert-Ddk8E_-v.js";import{S as ie}from"./save-B5gqIiM9.js";import"./index-DqS1P1ZA.js";import"./index-Cqm0A19K.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DpFjYdO-.js";import"./clock-Bl_lmuQc.js";import"./useForwardPropsEmits-8FOKfY2W.js";import"./useForwardExpose-COCesWTN.js";import"./VisuallyHidden-CC1jLlt8.js";import"./VisuallyHiddenInput-C8AlVRBT.js";import"./usePrimitiveElement-B5U8Xw_y.js";const ae={class:"max-w-2xl mx-auto space-y-6"},de={class:"flex items-center gap-4"},ue={class:"space-y-2"},ne={key:0,class:"text-sm text-destructive"},me={class:"space-y-2"},fe={key:0,class:"text-sm text-destructive"},pe={class:"space-y-2"},ce=["value"],ve={key:0,class:"text-sm text-destructive"},_e={class:"space-y-2"},ge={key:0,class:"text-sm text-destructive"},be={class:"space-y-2"},xe={key:0,class:"text-sm text-destructive"},ye={class:"space-y-3"},he={key:1,class:"space-y-3"},we={class:"relative w-48 h-32 rounded-lg overflow-hidden border"},ke=["src"],Ce={class:"flex gap-2"},Ve={key:2,class:"text-sm text-destructive"},Ue={class:"space-y-2"},Se={key:0,class:"text-sm text-destructive"},Ae={class:"flex items-center justify-between"},Me={class:"space-y-1"},De={class:"flex justify-between items-center"},dt=E({__name:"Create",props:{categories:{}},setup(Ie){const $=[{title:"Audio Management",href:"/admin/audio"},{title:"Create Audio",href:"#"}],o=N({name:"",description:"",google_cloud_url:"",duration:"",thumbnail:null,thumbnail_url:"",audio_category_id:"",is_active:!0}),b=_(!1),v=_(null),x=_(null);_(null);const U=_("00:00:00"),T=()=>{o.duration=U.value==="00:00:00"?"":U.value};function F(n){var A;const t=n.target,i=(A=t.files)==null?void 0:A[0];if(i){if(i.size>2*1024*1024){alert("File size must be less than 2MB"),t.value="";return}if(!i.type.startsWith("image/")){alert("Please select an image file"),t.value="";return}o.thumbnail=i;const M=new FileReader;M.onload=B=>{var D;v.value=(D=B.target)==null?void 0:D.result},M.readAsDataURL(i),o.thumbnail_url=""}}function G(){o.thumbnail=null,v.value=null,x.value&&(x.value.value="")}function S(){var n;(n=x.value)==null||n.click()}const P=async()=>{b.value=!0,await W(),o.transform(n=>({...n,duration:n.duration||null,audio_category_id:n.audio_category_id||null})).post("/admin/audio",{onFinish:()=>{b.value=!1}})};return T(),(n,t)=>(u(),d(L,null,[s(e(j),{title:"Create Audio Course"}),s(X,{breadcrumbs:$},{default:r(()=>[l("div",ae,[l("div",de,[s(e(g),{asChild:"",variant:"ghost"},{default:r(()=>[s(e(I),{href:"/admin/audio"},{default:r(()=>[s(e(ee),{class:"h-4 w-4 mr-2"}),t[7]||(t[7]=a(" Back to Audio "))]),_:1})]),_:1}),t[8]||(t[8]=l("div",null,[l("h1",{class:"text-2xl font-bold"},"Create Audio Course"),l("p",{class:"text-muted-foreground"},"Add a new audio course to your library")],-1))]),l("form",{onSubmit:z(P,["prevent"]),class:"space-y-6",enctype:"multipart/form-data"},[s(e(y),null,{default:r(()=>[s(e(k),null,{default:r(()=>[s(e(C),{class:"flex items-center gap-2"},{default:r(()=>[s(e(J),{class:"h-5 w-5"}),t[9]||(t[9]=a(" Basic Information "))]),_:1}),s(e(w),null,{default:r(()=>t[10]||(t[10]=[a(" Enter the basic details for your audio course ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",ue,[s(e(p),{for:"name"},{default:r(()=>t[11]||(t[11]=[a("Course Name *")])),_:1}),s(e(V),{id:"name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=i=>e(o).name=i),type:"text",placeholder:"Enter audio course name",class:c({"border-destructive":e(o).errors.name}),required:""},null,8,["modelValue","class"]),e(o).errors.name?(u(),d("div",ne,f(e(o).errors.name),1)):m("",!0)]),l("div",me,[s(e(p),{for:"description"},{default:r(()=>t[12]||(t[12]=[a("Description")])),_:1}),s(e(Y),{id:"description",modelValue:e(o).description,"onUpdate:modelValue":t[1]||(t[1]=i=>e(o).description=i),placeholder:"Describe what this audio course covers...",rows:4,class:c({"border-destructive":e(o).errors.description})},null,8,["modelValue","class"]),e(o).errors.description?(u(),d("div",fe,f(e(o).errors.description),1)):m("",!0)]),l("div",pe,[s(e(p),{for:"category"},{default:r(()=>t[13]||(t[13]=[a("Category")])),_:1}),q(l("select",{id:"category","onUpdate:modelValue":t[2]||(t[2]=i=>e(o).audio_category_id=i),class:c(["flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",{"border-destructive":e(o).errors.audio_category_id}])},[t[14]||(t[14]=l("option",{value:""},"Select a category (optional)",-1)),(u(!0),d(L,null,H(n.categories,i=>(u(),d("option",{key:i.id,value:i.id.toString()},f(i.name),9,ce))),128))],2),[[O,e(o).audio_category_id]]),e(o).errors.audio_category_id?(u(),d("div",ve,f(e(o).errors.audio_category_id),1)):m("",!0)])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(k),null,{default:r(()=>[s(e(C),{class:"flex items-center gap-2"},{default:r(()=>[s(e(te),{class:"h-5 w-5"}),t[15]||(t[15]=a(" Media Information "))]),_:1}),s(e(w),null,{default:r(()=>t[16]||(t[16]=[a(" Provide the Google Cloud Storage URL and media details ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",_e,[s(e(p),{for:"google_cloud_url"},{default:r(()=>t[17]||(t[17]=[a("Google Drive/Cloud URL *")])),_:1}),s(e(V),{id:"google_cloud_url",modelValue:e(o).google_cloud_url,"onUpdate:modelValue":t[3]||(t[3]=i=>e(o).google_cloud_url=i),type:"url",placeholder:"https://drive.google.com/file/d/YOUR_FILE_ID/view",class:c({"border-destructive":e(o).errors.google_cloud_url}),required:""},null,8,["modelValue","class"]),e(o).errors.google_cloud_url?(u(),d("div",ge,f(e(o).errors.google_cloud_url),1)):m("",!0),t[18]||(t[18]=l("div",{class:"text-sm text-muted-foreground"}," Enter the Google Drive sharing URL or Google Cloud Storage URL ",-1))]),l("div",be,[s(e(p),{for:"duration"},{default:r(()=>t[19]||(t[19]=[a("Duration")])),_:1}),s(e(V),{id:"duration",modelValue:e(o).duration,"onUpdate:modelValue":t[4]||(t[4]=i=>e(o).duration=i),type:"text",step:"1",placeholder:"30 (minutes) or 30:45 (MM:SS)",class:c({"border-destructive":e(o).errors.duration})},null,8,["modelValue","class"]),e(o).errors.duration?(u(),d("div",xe,f(e(o).errors.duration),1)):m("",!0),t[20]||(t[20]=l("div",{class:"text-sm text-muted-foreground"},' Enter duration in minutes (e.g., "30") or MM:SS format (e.g., "30:45") ',-1))])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(k),null,{default:r(()=>[s(e(C),{class:"flex items-center gap-2"},{default:r(()=>[s(e(se),{class:"h-5 w-5"}),t[21]||(t[21]=a(" Thumbnail Image "))]),_:1}),s(e(w),null,{default:r(()=>t[22]||(t[22]=[a(" Upload a thumbnail image or provide an external URL ")])),_:1})]),_:1}),s(e(h),{class:"space-y-4"},{default:r(()=>[l("div",ye,[s(e(p),null,{default:r(()=>t[23]||(t[23]=[a("Upload Thumbnail")])),_:1}),l("input",{ref_key:"fileInputRef",ref:x,type:"file",accept:"image/*",onChange:F,class:"hidden"},null,544),v.value?m("",!0):(u(),d("div",{key:0,onClick:S,class:c(["border-2 border-dashed border-input rounded-lg p-6 text-center cursor-pointer hover:border-primary transition-colors",{"border-destructive":e(o).errors.thumbnail}])},[s(e(R),{class:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),t[24]||(t[24]=l("div",{class:"text-sm font-medium mb-2"},"Click to upload thumbnail",-1)),t[25]||(t[25]=l("div",{class:"text-xs text-muted-foreground"}," PNG, JPG, GIF, WebP up to 2MB ",-1))],2)),v.value?(u(),d("div",he,[l("div",we,[l("img",{src:v.value,alt:"Thumbnail preview",class:"w-full h-full object-cover"},null,8,ke),s(e(g),{onClick:G,variant:"destructive",size:"sm",class:"absolute top-2 right-2 h-8 w-8 p-0 rounded-full",type:"button"},{default:r(()=>[s(e(oe),{class:"h-4 w-4"})]),_:1})]),l("div",Ce,[s(e(g),{onClick:S,variant:"outline",size:"sm",type:"button"},{default:r(()=>[s(e(R),{class:"h-4 w-4 mr-2"}),t[26]||(t[26]=a(" Change Image "))]),_:1})])])):m("",!0),e(o).errors.thumbnail?(u(),d("div",Ve,f(e(o).errors.thumbnail),1)):m("",!0)]),t[29]||(t[29]=l("div",{class:"flex items-center gap-4 my-4"},[l("div",{class:"flex-1 border-t border-border"}),l("span",{class:"text-sm text-muted-foreground bg-background px-2"},"OR"),l("div",{class:"flex-1 border-t border-border"})],-1)),l("div",Ue,[s(e(p),{for:"thumbnail_url"},{default:r(()=>t[27]||(t[27]=[a("External Thumbnail URL")])),_:1}),s(e(V),{id:"thumbnail_url",modelValue:e(o).thumbnail_url,"onUpdate:modelValue":t[5]||(t[5]=i=>e(o).thumbnail_url=i),type:"url",placeholder:"https://example.com/thumbnail.jpg",class:c({"border-destructive":e(o).errors.thumbnail_url}),disabled:!!e(o).thumbnail},null,8,["modelValue","class","disabled"]),e(o).errors.thumbnail_url?(u(),d("div",Se,f(e(o).errors.thumbnail_url),1)):m("",!0),t[28]||(t[28]=l("div",{class:"text-sm text-muted-foreground"}," Alternative: provide an external image URL (disabled when file is uploaded) ",-1))])]),_:1})]),_:1}),s(e(y),null,{default:r(()=>[s(e(k),null,{default:r(()=>[s(e(C),{class:"flex items-center gap-2"},{default:r(()=>[s(e(re),{class:"h-5 w-5"}),t[30]||(t[30]=a(" Settings "))]),_:1}),s(e(w),null,{default:r(()=>t[31]||(t[31]=[a(" Configure the visibility and availability of this audio course ")])),_:1})]),_:1}),s(e(h),null,{default:r(()=>[l("div",Ae,[l("div",Me,[s(e(p),null,{default:r(()=>t[32]||(t[32]=[a("Active Status")])),_:1}),t[33]||(t[33]=l("div",{class:"text-sm text-muted-foreground"}," Make this audio course available to users ",-1))]),s(e(K),{checked:e(o).is_active,"onUpdate:checked":t[6]||(t[6]=i=>e(o).is_active=i)},null,8,["checked"])])]),_:1})]),_:1}),s(e(Q),null,{default:r(()=>[s(e(le),{class:"h-4 w-4"}),s(e(Z),null,{default:r(()=>t[34]||(t[34]=[l("strong",null,"Important:",-1),a(' Make sure your Google Drive file is set to "Anyone with the link can view" for proper audio streaming. Duration should be entered in HH:MM:SS format (e.g., 01:30:45 for 1 hour, 30 minutes, 45 seconds). ')])),_:1})]),_:1}),l("div",De,[s(e(g),{asChild:"",variant:"outline"},{default:r(()=>[s(e(I),{href:"/admin/audio"},{default:r(()=>t[35]||(t[35]=[a(" Cancel ")])),_:1})]),_:1}),s(e(g),{type:"submit",disabled:b.value||e(o).processing},{default:r(()=>[s(e(ie),{class:"h-4 w-4 mr-2"}),a(" "+f(b.value?"Creating...":"Create Audio Course"),1)]),_:1},8,["disabled"])])],32)])]),_:1})],64))}});export{dt as default};
