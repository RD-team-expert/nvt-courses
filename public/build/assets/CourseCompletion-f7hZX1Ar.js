import{d as F,r as B,W as b,k as R,l as w,o as r,w as U,e,j as D,g as m,a as n,F as c,h as u,t as l,i as L,v,n as M,f as _}from"./app-BHdhtiNd.js";import{_ as N}from"./AdminLayout.vue_vue_type_script_setup_true_lang-SP4Aq9R0.js";import{l as P}from"./lodash-BBzZyjE9.js";import{_ as T}from"./Pagination.vue_vue_type_script_setup_true_lang-ChQQ_K8g.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-B01zejYN.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-CC4kRv_a.js";import"./index-DFsPz8l2.js";const z={class:"px-4 sm:px-0"},A={class:"bg-white p-4 sm:p-6 rounded-lg shadow mb-4 sm:mb-6"},E={class:"grid grid-cols-1 md:grid-cols-3 gap-4 sm:gap-6"},O=["value"],q={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},W={class:"min-w-full divide-y divide-gray-200"},$={class:"bg-white divide-y divide-gray-200"},H={key:0},I={class:"px-4 sm:px-6 py-4 whitespace-nowrap"},G={class:"flex items-center"},J={class:"text-sm font-medium text-gray-900"},K={class:"text-xs text-gray-500 hidden sm:block"},Q={class:"text-xs text-gray-500 sm:hidden mt-1"},X={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden sm:table-cell"},Y={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},Z={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900"},ee={class:"px-4 sm:px-6 py-4 whitespace-nowrap text-sm text-gray-900 hidden md:table-cell"},te={key:0,class:"flex items-center"},se={class:"ml-1 flex"},oe={key:1},le={class:"px-4 sm:px-6 py-4 text-sm text-gray-900 hidden lg:table-cell"},ae={class:"max-w-xs truncate"},re={class:"px-4 sm:px-6 py-4 text-sm text-gray-900 hidden xl:table-cell"},ne={class:"max-w-xs truncate"},ie={class:"px-4 sm:px-6 py-3 bg-white border-t border-gray-200"},de={key:1,class:"text-sm text-gray-600 mt-2"},ye=F({__name:"CourseCompletion",props:{completions:Object,courses:Array,filters:Object,debug:Object},setup(o){var g,f,y;const d=o,k=[{name:"Dashboard",href:route("dashboard")},{name:"Reports & Analytics",href:route("admin.reports.index")},{name:"Course Completion",href:route("admin.reports.course-completion")}],a=B({course_id:((g=d.filters)==null?void 0:g.course_id)||"",date_from:((f=d.filters)==null?void 0:f.date_from)||"",date_to:((y=d.filters)==null?void 0:y.date_to)||""}),p=P.debounce(()=>{b.get(route("admin.reports.course-completion"),a.value,{preserveState:!0,replace:!0})},500);R(a,()=>{p()},{deep:!0});const C=()=>{a.value={course_id:"",date_from:"",date_to:""},p()},S=()=>{const i=new URLSearchParams(a.value).toString();window.location.href=route("admin.reports.export.course-completion")+"?"+i},x=i=>i?new Date(i).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"—",V=i=>{b.get(route("admin.reports.course-completion"),{...a.value,page:i},{preserveState:!0,replace:!0,preserveScroll:!0,onSuccess:()=>{var t;(t=document.querySelector(".bg-white.rounded-lg.shadow"))==null||t.scrollIntoView({behavior:"smooth",block:"start"})}})};return(i,t)=>(r(),w(N,{breadcrumbs:k},{default:U(()=>[e("div",z,[e("div",{class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4 sm:gap-0"},[t[4]||(t[4]=e("h1",{class:"text-xl sm:text-2xl font-bold"},"Course Completion Report",-1)),e("button",{onClick:S,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition flex items-center w-full sm:w-auto justify-center sm:justify-start"},t[3]||(t[3]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),D(" Export to CSV ")]))]),e("div",A,[t[9]||(t[9]=e("h2",{class:"text-lg font-medium text-gray-900 mb-4"},"Filter Completions",-1)),e("div",E,[e("div",null,[t[6]||(t[6]=e("label",{for:"course_filter",class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),m(e("select",{id:"course_filter","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.course_id=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},[t[5]||(t[5]=e("option",{value:""},"All Courses",-1)),(r(!0),n(c,null,u(o.courses,s=>(r(),n("option",{key:s.id,value:s.id},l(s.name),9,O))),128))],512),[[L,a.value.course_id]])]),e("div",null,[t[7]||(t[7]=e("label",{for:"date_from",class:"block text-sm font-medium text-gray-700 mb-1"},"Completed From",-1)),m(e("input",{id:"date_from",type:"date","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.date_from=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,a.value.date_from]])]),e("div",null,[t[8]||(t[8]=e("label",{for:"date_to",class:"block text-sm font-medium text-gray-700 mb-1"},"Completed To",-1)),m(e("input",{id:"date_to",type:"date","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.date_to=s),class:"border px-3 py-2 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[v,a.value.date_to]])]),e("div",{class:"flex items-end md:col-span-3"},[e("button",{onClick:C,class:"inline-flex items-center px-4 py-2 bg-gray-100 border border-transparent rounded-md font-medium text-gray-700 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 transition"}," Reset Filters ")])])]),e("div",q,[e("table",W,[t[12]||(t[12]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden sm:table-cell"}," Course "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Registered "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Completed "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden md:table-cell"}," Rating "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden lg:table-cell"}," Feedback "),e("th",{scope:"col",class:"px-4 sm:px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider hidden xl:table-cell"}," Comment ")])],-1)),e("tbody",$,[o.completions.data.length===0?(r(),n("tr",H,t[10]||(t[10]=[e("td",{colspan:"7",class:"px-4 sm:px-6 py-4 text-center text-gray-500"},"No completion records found",-1)]))):(r(!0),n(c,{key:1},u(o.completions.data,(s,j)=>(r(),n("tr",{key:j,class:"hover:bg-gray-50"},[e("td",I,[e("div",G,[e("div",null,[e("div",J,l(s.user_name),1),e("div",K,l(s.user_email),1),e("div",Q,l(s.course_name),1)])])]),e("td",X,l(s.course_name),1),e("td",Y,l(x(s.registered_at)),1),e("td",Z,l(x(s.completed_at)),1),e("td",ee,[s.rating?(r(),n("div",te,[e("span",null,l(s.rating)+"/5",1),e("div",se,[(r(),n(c,null,u(5,h=>e("svg",{key:h,class:M(["h-4 w-4",h<=s.rating?"text-yellow-400":"text-gray-300"]),fill:"currentColor",viewBox:"0 0 20 20"},t[11]||(t[11]=[e("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"},null,-1)]),2)),64))])])):(r(),n("span",oe,"—"))]),e("td",le,[e("div",ae,l(s.feedback||"—"),1)]),e("td",re,[e("div",ne,l(s.comment||"—"),1)])]))),128))])]),e("div",ie,[o.completions.data&&o.completions.data.length>0&&o.completions.last_page>1?(r(),w(T,{key:0,links:o.completions.links,onPageChanged:V,class:"mt-4"},null,8,["links"])):_("",!0),o.completions.data&&o.completions.data.length>0?(r(),n("div",de," Showing "+l(o.completions.from)+" to "+l(o.completions.to)+" of "+l(o.completions.total)+" results ",1)):_("",!0)])])])]),_:1}))}});export{ye as default};
