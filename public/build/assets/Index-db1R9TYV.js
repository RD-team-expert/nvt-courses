import{d as S,r as y,k as b,o as l,w as d,e,a as o,f as u,b as w,u as c,P as m,j as x,t as r,g as k,F as g,h as v,i as M,n as _,q as V,W as j}from"./app-iYB6CK9s.js";import{_ as D}from"./AdminLayout.vue_vue_type_script_setup_true_lang-BmAEUQ0k.js";import"./AppLayout.vue_vue_type_script_setup_true_lang-BOHGZ_58.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B3PnW6xU.js";import"./index-BHiy4VMt.js";const H={class:"px-4 sm:px-0"},N={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 sm:mb-6 gap-4"},P={class:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto"},T={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6"},W={class:"bg-white rounded-lg shadow p-6"},E={class:"flex items-center"},F={class:"ml-5 w-0 flex-1"},I={class:"text-lg font-medium text-gray-900"},O={class:"bg-white rounded-lg shadow p-6"},$={class:"flex items-center"},q={class:"ml-5 w-0 flex-1"},G={class:"text-lg font-medium text-gray-900"},J={class:"bg-white rounded-lg shadow p-6"},K={class:"flex items-center"},Q={class:"ml-5 w-0 flex-1"},R={class:"text-lg font-medium text-gray-900"},X={class:"bg-white rounded-lg shadow p-6"},Y={class:"flex items-center"},Z={class:"ml-5 w-0 flex-1"},ee={class:"text-lg font-medium text-gray-900"},te={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6"},se={class:"flex items-center justify-between mb-4"},le={class:"flex items-center"},re={class:"text-yellow-800 font-medium"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},oe={class:"flex gap-2"},ae=["value"],ie={class:"flex gap-2"},de=["value"],ue={class:"bg-white rounded-lg shadow overflow-hidden overflow-x-auto"},ce={class:"min-w-full divide-y divide-gray-200"},me={class:"bg-gray-50"},xe={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},ge=["checked"],he={class:"bg-white divide-y divide-gray-200"},ve={class:"px-6 py-4 whitespace-nowrap"},fe=["value"],pe={class:"px-6 py-4 whitespace-nowrap"},ye={class:"flex items-center"},be={class:"shrink-0 h-10 w-10"},we={class:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center"},_e={class:"text-sm font-medium text-gray-600"},ke={class:"ml-4"},Me={class:"text-sm font-medium text-gray-900"},je={class:"text-sm text-gray-500"},Ce={key:0,class:"text-xs text-gray-400"},Le={class:"px-6 py-4 whitespace-nowrap"},ze={key:0,class:"text-sm"},Ue={class:"font-medium text-gray-900"},Ae={class:"text-gray-500"},Be={key:1,class:"text-sm text-gray-400 italic"},Se={class:"px-6 py-4 whitespace-nowrap"},Ve={key:1,class:"text-sm text-gray-400 italic"},De={class:"px-6 py-4 whitespace-nowrap"},He={key:0,class:"text-sm"},Ne={class:"font-medium text-gray-900"},Pe={class:"text-xs text-gray-500 ml-1"},Te={key:0,class:"text-xs text-gray-400"},We={key:1,class:"text-sm text-gray-400 italic"},Ee={class:"px-6 py-4 whitespace-nowrap"},Fe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ie={key:0,class:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Oe={class:"flex-1 flex justify-between sm:hidden"},$e={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},qe={class:"text-sm text-gray-700"},Ge={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px"},Je=["innerHTML"],Ke={key:1,class:"text-center py-12"},et=S({__name:"Index",props:{users:Object,departments:Array,userLevels:Array,stats:Object},setup(n){const C=n,a=y([]);y("");const f=y(""),p=y(""),L=()=>{if(a.value.length===0){alert("Please select users first");return}if(!f.value){alert("Please select a department");return}j.post("/admin/users/bulk-assign-department",{user_ids:a.value,department_id:f.value},{preserveState:!0,onSuccess:()=>{alert("Users assigned to department successfully!"),a.value=[]},onError:i=>{console.error("Bulk assignment failed:",i),alert("Failed to assign users. Please try again.")}})},z=()=>{if(a.value.length===0){alert("Please select users first");return}if(!p.value){alert("Please select a level");return}j.post("/admin/users/bulk-assign-level",{user_ids:a.value,user_level_id:p.value},{preserveState:!0,onSuccess:()=>{alert("Users assigned to level successfully!"),a.value=[]},onError:i=>{console.error("Bulk assignment failed:",i),alert("Failed to assign users. Please try again.")}})},U=i=>{i.target.checked?a.value=C.users.data.map(t=>t.id):a.value=[]},A=i=>i&&{L1:"bg-blue-100 text-blue-800",L2:"bg-green-100 text-green-800",L3:"bg-orange-100 text-orange-800",L4:"bg-red-100 text-red-800"}[i]||"bg-gray-100 text-gray-800",B=[{name:"Dashboard",href:route("dashboard")},{name:"User Management",href:route("admin.users.assignment")},{name:"User Assignment",href:route("admin.users.assignment")}];return(i,t)=>(l(),b(D,{breadcrumbs:B},{default:d(()=>[e("div",H,[e("div",N,[t[6]||(t[6]=e("h1",{class:"text-xl sm:text-2xl font-bold"},"User Management & Assignment",-1)),e("div",P,[w(c(m),{href:i.route("admin.users.import"),class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition w-full sm:w-auto text-center"},{default:d(()=>t[4]||(t[4]=[x(" Import Users ")])),_:1},8,["href"]),w(c(m),{href:i.route("admin.users.export"),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition w-full sm:w-auto text-center"},{default:d(()=>t[5]||(t[5]=[x(" Export Users ")])),_:1},8,["href"])])]),e("div",T,[e("div",W,[e("div",E,[t[8]||(t[8]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})])])],-1)),e("div",F,[e("dl",null,[t[7]||(t[7]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"Total Users",-1)),e("dd",I,r(n.stats.total_users||0),1)])])])]),e("div",O,[e("div",$,[t[10]||(t[10]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-green-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",q,[e("dl",null,[t[9]||(t[9]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"With Departments",-1)),e("dd",G,r(n.stats.users_with_departments||0),1)])])])]),e("div",J,[e("div",K,[t[12]||(t[12]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})])])],-1)),e("div",Q,[e("dl",null,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"With Levels",-1)),e("dd",R,r(n.stats.users_with_levels||0),1)])])])]),e("div",X,[e("div",Y,[t[14]||(t[14]=e("div",{class:"shrink-0"},[e("div",{class:"w-8 h-8 bg-orange-500 rounded-md flex items-center justify-center"},[e("svg",{class:"h-5 w-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])])],-1)),e("div",Z,[e("dl",null,[t[13]||(t[13]=e("dt",{class:"text-sm font-medium text-gray-500 truncate"},"With Managers",-1)),e("dd",ee,r(n.stats.users_with_managers||0),1)])])])])]),a.value.length>0?(l(),o("div",te,[e("div",se,[e("div",le,[t[15]||(t[15]=e("svg",{class:"h-5 w-5 text-yellow-400 mr-2",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1)),e("span",re,r(a.value.length)+" user(s) selected",1)]),e("button",{onClick:t[0]||(t[0]=s=>a.value=[]),class:"text-yellow-600 hover:text-yellow-800"}," Clear Selection ")]),e("div",ne,[e("div",oe,[k(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>f.value=s),class:"flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-hidden focus:ring-2 focus:ring-blue-500"},[t[16]||(t[16]=e("option",{value:""},"Select Department",-1)),(l(!0),o(g,null,v(n.departments,s=>(l(),o("option",{key:s.id,value:s.id},r(s.name),9,ae))),128))],512),[[M,f.value]]),e("button",{onClick:L,class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition"}," Assign Dept ")]),e("div",ie,[k(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>p.value=s),class:"flex-1 border border-gray-300 rounded px-3 py-2 focus:outline-hidden focus:ring-2 focus:ring-blue-500"},[t[17]||(t[17]=e("option",{value:""},"Select Level",-1)),(l(!0),o(g,null,v(n.userLevels,s=>(l(),o("option",{key:s.id,value:s.id},r(s.code)+" - "+r(s.name),9,de))),128))],512),[[M,p.value]]),e("button",{onClick:z,class:"bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition"}," Assign Level ")])])])):u("",!0),e("div",ue,[e("table",ce,[e("thead",me,[e("tr",null,[e("th",xe,[e("input",{type:"checkbox",onChange:U,checked:a.value.length===n.users.data.length&&n.users.data.length>0,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,40,ge)]),t[18]||(t[18]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," User ",-1)),t[19]||(t[19]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Department ",-1)),t[20]||(t[20]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Level ",-1)),t[21]||(t[21]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Manager ",-1)),t[22]||(t[22]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status ",-1)),t[23]||(t[23]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ",-1))])]),e("tbody",he,[(l(!0),o(g,null,v(n.users.data,s=>(l(),o("tr",{key:s.id,class:_({"bg-blue-50":a.value.includes(s.id)})},[e("td",ve,[k(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=h=>a.value=h),value:s.id,class:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"},null,8,fe),[[V,a.value]])]),e("td",pe,[e("div",ye,[e("div",be,[e("div",we,[e("span",_e,r(s.name.charAt(0).toUpperCase()),1)])]),e("div",ke,[e("div",Me,r(s.name),1),e("div",je,r(s.email),1),s.employee_code?(l(),o("div",Ce,"ID: "+r(s.employee_code),1)):u("",!0)])])]),e("td",Le,[s.department?(l(),o("div",ze,[e("div",Ue,r(s.department.name),1),e("div",Ae,r(s.department.department_code),1)])):(l(),o("div",Be," No department assigned "))]),e("td",Se,[s.user_level?(l(),o("span",{key:0,class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",A(s.user_level.code)])},r(s.user_level.code)+" - "+r(s.user_level.name),3)):(l(),o("span",Ve," No level assigned "))]),e("td",De,[s.managers&&s.managers.length>0?(l(),o("div",He,[(l(!0),o(g,null,v(s.managers.slice(0,2),h=>(l(),o("div",{key:h.id,class:"mb-1"},[e("span",Ne,r(h.name),1),e("span",Pe,"("+r(h.pivot.role_type)+")",1)]))),128)),s.managers.length>2?(l(),o("div",Te," +"+r(s.managers.length-2)+" more ",1)):u("",!0)])):(l(),o("div",We," No manager assigned "))]),e("td",Ee,[e("span",{class:_(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",{"bg-green-100 text-green-800":s.status==="active","bg-red-100 text-red-800":s.status==="inactive","bg-yellow-100 text-yellow-800":s.status==="on_leave"}])},r(s.status),3)]),e("td",Fe,[w(c(m),{href:i.route("admin.users.organizational",s.id),class:"text-blue-600 hover:text-blue-900 mr-3 transition-colors"},{default:d(()=>t[24]||(t[24]=[x(" View ")])),_:2},1032,["href"]),w(c(m),{href:i.route("admin.users.assign-form",s.id),class:"text-indigo-600 hover:text-indigo-900 transition-colors"},{default:d(()=>t[25]||(t[25]=[x(" Assign ")])),_:2},1032,["href"])])],2))),128))])]),n.users.links&&n.users.links.length>3?(l(),o("div",Ie,[e("div",Oe,[n.users.prev_page_url?(l(),b(c(m),{key:0,href:n.users.prev_page_url,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:d(()=>t[26]||(t[26]=[x(" Previous ")])),_:1},8,["href"])):u("",!0),n.users.next_page_url?(l(),b(c(m),{key:1,href:n.users.next_page_url,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50"},{default:d(()=>t[27]||(t[27]=[x(" Next ")])),_:1},8,["href"])):u("",!0)]),e("div",$e,[e("div",null,[e("p",qe," Showing "+r(n.users.from)+" to "+r(n.users.to)+" of "+r(n.users.total)+" results ",1)]),e("div",null,[e("nav",Ge,[(l(!0),o(g,null,v(n.users.links,s=>(l(),o(g,{key:s.label},[s.url?(l(),b(c(m),{key:0,href:s.url,class:_(["relative inline-flex items-center px-2 py-2 border text-sm font-medium",{"z-10 bg-blue-50 border-blue-500 text-blue-600":s.active,"bg-white border-gray-300 text-gray-500 hover:bg-gray-50":!s.active}]),innerHTML:s.label},null,8,["href","class","innerHTML"])):(l(),o("span",{key:1,class:"relative inline-flex items-center px-2 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-300",innerHTML:s.label},null,8,Je))],64))),128))])])])])):u("",!0),!n.users.data||n.users.data.length===0?(l(),o("div",Ke,t[28]||(t[28]=[e("div",{class:"text-gray-500"},[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No users found"),e("p",{class:"mt-1 text-sm text-gray-500"},"Start by importing users or check your filters.")],-1)]))):u("",!0)])])]),_:1}))}});export{et as default};
